var ah=Object.defineProperty,ch=Object.defineProperties;var uh=Object.getOwnPropertyDescriptors;var wu=Object.getOwnPropertySymbols;var lh=Object.prototype.hasOwnProperty,dh=Object.prototype.propertyIsEnumerable;var Du=(t,n,o)=>n in t?ah(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,fe=(t,n)=>{for(var o in n||={})lh.call(n,o)&&Du(t,o,n[o]);if(wu)for(var o of wu(n))dh.call(n,o)&&Du(t,o,n[o]);return t},We=(t,n)=>ch(t,uh(n));var Au=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,o)=>(typeof require<"u"?require:n)[o]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var tr=(t,n,o)=>new Promise((r,i)=>{var e=C=>{try{b(o.next(C))}catch(D){i(D)}},m=C=>{try{b(o.throw(C))}catch(D){i(D)}},b=C=>C.done?r(C.value):Promise.resolve(C.value).then(e,m);b((o=o.apply(t,n)).next())});var _u=null;var Cs=1,Ru=Symbol("SIGNAL");function Xe(t){let n=_u;return _u=t,n}var xu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fh(t){if(!(Ts(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cs)){if(!t.producerMustRecompute(t)&&!Ss(t)){t.dirty=!1,t.lastCleanEpoch=Cs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Cs}}function Nu(t){return t&&(t.nextProducerIndex=0),Xe(t)}function Mu(t,n){if(Xe(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ts(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)Is(t.producerNode[o],t.producerIndexOfThis[o]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ss(t){jo(t);for(let n=0;n<t.producerNode.length;n++){let o=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==o.version||(fh(o),r!==o.version))return!0}return!1}function Ou(t){if(jo(t),Ts(t))for(let n=0;n<t.producerNode.length;n++)Is(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Is(t,n){if(ph(t),jo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Is(t.producerNode[r],t.producerIndexOfThis[r]);let o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[n],i=t.liveConsumerNode[n];jo(i),i.producerIndexOfThis[r]=n}}function Ts(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function jo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ph(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function hh(){throw new Error}var gh=hh;function Lu(t){gh=t}function Pe(t){return typeof t=="function"}function nr(t){let o=t(r=>{Error.call(r),r.stack=new Error().stack});return o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o}var Vo=nr(t=>function(o){t(this),this.message=o?`${o.length} errors occurred during unsubscription:
${o.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=o});function $r(t,n){if(t){let o=t.indexOf(n);0<=o&&t.splice(o,1)}}var ut=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:o}=this;if(o)if(this._parentage=null,Array.isArray(o))for(let e of o)e.remove(this);else o.remove(this);let{initialTeardown:r}=this;if(Pe(r))try{r()}catch(e){n=e instanceof Vo?e.errors:[e]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let e of i)try{Pu(e)}catch(m){n=n??[],m instanceof Vo?n=[...n,...m.errors]:n.push(m)}}if(n)throw new Vo(n)}}add(n){var o;if(n&&n!==this)if(this.closed)Pu(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(o=this._finalizers)!==null&&o!==void 0?o:[]).push(n)}}_hasParent(n){let{_parentage:o}=this;return o===n||Array.isArray(o)&&o.includes(n)}_addParent(n){let{_parentage:o}=this;this._parentage=Array.isArray(o)?(o.push(n),o):o?[o,n]:n}_removeParent(n){let{_parentage:o}=this;o===n?this._parentage=null:Array.isArray(o)&&$r(o,n)}remove(n){let{_finalizers:o}=this;o&&$r(o,n),n instanceof t&&n._removeParent(this)}};ut.EMPTY=(()=>{let t=new ut;return t.closed=!0,t})();var bs=ut.EMPTY;function Ho(t){return t instanceof ut||t&&"closed"in t&&Pe(t.remove)&&Pe(t.add)&&Pe(t.unsubscribe)}function Pu(t){Pe(t)?t():t.unsubscribe()}var Ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var rr={setTimeout(t,n,...o){let{delegate:r}=rr;return r?.setTimeout?r.setTimeout(t,n,...o):setTimeout(t,n,...o)},clearTimeout(t){let{delegate:n}=rr;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $o(t){rr.setTimeout(()=>{let{onUnhandledError:n}=Ht;if(n)n(t);else throw t})}function Wr(){}var ku=ws("C",void 0,void 0);function Fu(t){return ws("E",void 0,t)}function Uu(t){return ws("N",t,void 0)}function ws(t,n,o){return{kind:t,value:n,error:o}}var Fn=null;function or(t){if(Ht.useDeprecatedSynchronousErrorHandling){let n=!Fn;if(n&&(Fn={errorThrown:!1,error:null}),t(),n){let{errorThrown:o,error:r}=Fn;if(Fn=null,o)throw r}}else t()}function Bu(t){Ht.useDeprecatedSynchronousErrorHandling&&Fn&&(Fn.errorThrown=!0,Fn.error=t)}var Un=class extends ut{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ho(n)&&n.add(this)):this.destination=yh}static create(n,o,r){return new ir(n,o,r)}next(n){this.isStopped?As(Uu(n),this):this._next(n)}error(n){this.isStopped?As(Fu(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?As(ku,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mh=Function.prototype.bind;function Ds(t,n){return mh.call(t,n)}var _s=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:o}=this;if(o.next)try{o.next(n)}catch(r){Wo(r)}}error(n){let{partialObserver:o}=this;if(o.error)try{o.error(n)}catch(r){Wo(r)}else Wo(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(o){Wo(o)}}},ir=class extends Un{constructor(n,o,r){super();let i;if(Pe(n)||!n)i={next:n??void 0,error:o??void 0,complete:r??void 0};else{let e;this&&Ht.useDeprecatedNextContext?(e=Object.create(n),e.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Ds(n.next,e),error:n.error&&Ds(n.error,e),complete:n.complete&&Ds(n.complete,e)}):i=n}this.destination=new _s(i)}};function Wo(t){Ht.useDeprecatedSynchronousErrorHandling?Bu(t):$o(t)}function vh(t){throw t}function As(t,n){let{onStoppedNotification:o}=Ht;o&&rr.setTimeout(()=>o(t,n))}var yh={closed:!0,next:Wr,error:vh,complete:Wr};var sr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function Rs(...t){return xs(t)}function xs(t){return t.length===0?Dt:t.length===1?t[0]:function(o){return t.reduce((r,i)=>i(r),o)}}var et=(()=>{class t{constructor(o){o&&(this._subscribe=o)}lift(o){let r=new t;return r.source=this,r.operator=o,r}subscribe(o,r,i){let e=Ch(o)?o:new ir(o,r,i);return or(()=>{let{operator:m,source:b}=this;e.add(m?m.call(e,b):b?this._subscribe(e):this._trySubscribe(e))}),e}_trySubscribe(o){try{return this._subscribe(o)}catch(r){o.error(r)}}forEach(o,r){return r=ju(r),new r((i,e)=>{let m=new ir({next:b=>{try{o(b)}catch(C){e(C),m.unsubscribe()}},error:e,complete:i});this.subscribe(m)})}_subscribe(o){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(o)}[sr](){return this}pipe(...o){return xs(o)(this)}toPromise(o){return o=ju(o),new o((r,i)=>{let e;this.subscribe(m=>e=m,m=>i(m),()=>r(e))})}}return t.create=n=>new t(n),t})();function ju(t){var n;return(n=t??Ht.Promise)!==null&&n!==void 0?n:Promise}function Eh(t){return t&&Pe(t.next)&&Pe(t.error)&&Pe(t.complete)}function Ch(t){return t&&t instanceof Un||Eh(t)&&Ho(t)}function Ns(t){return Pe(t?.lift)}function Ge(t){return n=>{if(Ns(n))return n.lift(function(o){try{return t(o,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ze(t,n,o,r,i){return new Ms(t,n,o,r,i)}var Ms=class extends Un{constructor(n,o,r,i,e,m){super(n),this.onFinalize=e,this.shouldUnsubscribe=m,this._next=o?function(b){try{o(b)}catch(C){n.error(C)}}:super._next,this._error=i?function(b){try{i(b)}catch(C){n.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(b){n.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:o}=this;super.unsubscribe(),!o&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function ar(){return Ge((t,n)=>{let o=null;t._refCount++;let r=ze(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){o=null;return}let i=t._connection,e=o;o=null,i&&(!e||i===e)&&i.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(o=t.connect())})}var cr=class extends et{constructor(n,o){super(),this.source=n,this.subjectFactory=o,this._subject=null,this._refCount=0,this._connection=null,Ns(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ut;let o=this.getSubject();n.add(this.source.subscribe(ze(o,void 0,()=>{this._teardown(),o.complete()},r=>{this._teardown(),o.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ut.EMPTY)}return n}refCount(){return ar()(this)}};var Vu=nr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class t extends et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(o){let r=new Go(this,this);return r.operator=o,r}_throwIfClosed(){if(this.closed)throw new Vu}next(o){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(o)}})}error(o){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=o;let{observers:r}=this;for(;r.length;)r.shift().error(o)}})}complete(){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:o}=this;for(;o.length;)o.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var o;return((o=this.observers)===null||o===void 0?void 0:o.length)>0}_trySubscribe(o){return this._throwIfClosed(),super._trySubscribe(o)}_subscribe(o){return this._throwIfClosed(),this._checkFinalizedStatuses(o),this._innerSubscribe(o)}_innerSubscribe(o){let{hasError:r,isStopped:i,observers:e}=this;return r||i?bs:(this.currentObservers=null,e.push(o),new ut(()=>{this.currentObservers=null,$r(e,o)}))}_checkFinalizedStatuses(o){let{hasError:r,thrownError:i,isStopped:e}=this;r?o.error(i):e&&o.complete()}asObservable(){let o=new et;return o.source=this,o}}return t.create=(n,o)=>new Go(n,o),t})(),Go=class extends Ct{constructor(n,o){super(),this.destination=n,this.source=o}next(n){var o,r;(r=(o=this.destination)===null||o===void 0?void 0:o.next)===null||r===void 0||r.call(o,n)}error(n){var o,r;(r=(o=this.destination)===null||o===void 0?void 0:o.error)===null||r===void 0||r.call(o,n)}complete(){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||o===void 0||o.call(n)}_subscribe(n){var o,r;return(r=(o=this.source)===null||o===void 0?void 0:o.subscribe(n))!==null&&r!==void 0?r:bs}};var ht=class extends Ct{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let o=super._subscribe(n);return!o.closed&&n.next(this._value),o}getValue(){let{hasError:n,thrownError:o,_value:r}=this;if(n)throw o;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var At=new et(t=>t.complete());function Hu(t){return t&&Pe(t.schedule)}function $u(t){return t[t.length-1]}function Wu(t){return Pe($u(t))?t.pop():void 0}function Sn(t){return Hu($u(t))?t.pop():void 0}function zu(t,n,o,r){function i(e){return e instanceof o?e:new o(function(m){m(e)})}return new(o||(o=Promise))(function(e,m){function b(_){try{D(r.next(_))}catch(g){m(g)}}function C(_){try{D(r.throw(_))}catch(g){m(g)}}function D(_){_.done?e(_.value):i(_.value).then(b,C)}D((r=r.apply(t,n||[])).next())})}function Gu(t){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&t[n],r=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(t){return this instanceof Bn?(this.v=t,this):new Bn(t)}function qu(t,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o.apply(t,n||[]),i,e=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",m),i[Symbol.asyncIterator]=function(){return this},i;function m(E){return function(l){return Promise.resolve(l).then(E,g)}}function b(E,l){r[E]&&(i[E]=function(u){return new Promise(function(a,y){e.push([E,u,a,y])>1||C(E,u)})},l&&(i[E]=l(i[E])))}function C(E,l){try{D(r[E](l))}catch(u){v(e[0][3],u)}}function D(E){E.value instanceof Bn?Promise.resolve(E.value.v).then(_,g):v(e[0][2],E)}function _(E){C("next",E)}function g(E){C("throw",E)}function v(E,l){E(l),e.shift(),e.length&&C(e[0][0],e[0][1])}}function Ku(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],o;return n?n.call(t):(t=typeof Gu=="function"?Gu(t):t[Symbol.iterator](),o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o);function r(e){o[e]=t[e]&&function(m){return new Promise(function(b,C){m=t[e](m),i(b,C,m.done,m.value)})}}function i(e,m,b,C){Promise.resolve(C).then(function(D){e({value:D,done:b})},m)}}var zo=t=>t&&typeof t.length=="number"&&typeof t!="function";function qo(t){return Pe(t?.then)}function Ko(t){return Pe(t[sr])}function Yo(t){return Symbol.asyncIterator&&Pe(t?.[Symbol.asyncIterator])}function Qo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Sh(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zo=Sh();function Xo(t){return Pe(t?.[Zo])}function Jo(t){return qu(this,arguments,function*(){let o=t.getReader();try{for(;;){let{value:r,done:i}=yield Bn(o.read());if(i)return yield Bn(void 0);yield yield Bn(r)}}finally{o.releaseLock()}})}function ei(t){return Pe(t?.getReader)}function dt(t){if(t instanceof et)return t;if(t!=null){if(Ko(t))return Ih(t);if(zo(t))return Th(t);if(qo(t))return bh(t);if(Yo(t))return Yu(t);if(Xo(t))return wh(t);if(ei(t))return Dh(t)}throw Qo(t)}function Ih(t){return new et(n=>{let o=t[sr]();if(Pe(o.subscribe))return o.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Th(t){return new et(n=>{for(let o=0;o<t.length&&!n.closed;o++)n.next(t[o]);n.complete()})}function bh(t){return new et(n=>{t.then(o=>{n.closed||(n.next(o),n.complete())},o=>n.error(o)).then(null,$o)})}function wh(t){return new et(n=>{for(let o of t)if(n.next(o),n.closed)return;n.complete()})}function Yu(t){return new et(n=>{Ah(t,n).catch(o=>n.error(o))})}function Dh(t){return Yu(Jo(t))}function Ah(t,n){var o,r,i,e;return zu(this,void 0,void 0,function*(){try{for(o=Ku(t);r=yield o.next(),!r.done;){let m=r.value;if(n.next(m),n.closed)return}}catch(m){i={error:m}}finally{try{r&&!r.done&&(e=o.return)&&(yield e.call(o))}finally{if(i)throw i.error}}n.complete()})}function It(t,n,o,r=0,i=!1){let e=n.schedule(function(){o(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(e),!i)return e}function ti(t,n=0){return Ge((o,r)=>{o.subscribe(ze(r,i=>It(r,t,()=>r.next(i),n),()=>It(r,t,()=>r.complete(),n),i=>It(r,t,()=>r.error(i),n)))})}function ni(t,n=0){return Ge((o,r)=>{r.add(t.schedule(()=>o.subscribe(r),n))})}function Qu(t,n){return dt(t).pipe(ni(n),ti(n))}function Zu(t,n){return dt(t).pipe(ni(n),ti(n))}function Xu(t,n){return new et(o=>{let r=0;return n.schedule(function(){r===t.length?o.complete():(o.next(t[r++]),o.closed||this.schedule())})})}function Ju(t,n){return new et(o=>{let r;return It(o,n,()=>{r=t[Zo](),It(o,n,()=>{let i,e;try{({value:i,done:e}=r.next())}catch(m){o.error(m);return}e?o.complete():o.next(i)},0,!0)}),()=>Pe(r?.return)&&r.return()})}function ri(t,n){if(!t)throw new Error("Iterable cannot be null");return new et(o=>{It(o,n,()=>{let r=t[Symbol.asyncIterator]();It(o,n,()=>{r.next().then(i=>{i.done?o.complete():o.next(i.value)})},0,!0)})})}function el(t,n){return ri(Jo(t),n)}function tl(t,n){if(t!=null){if(Ko(t))return Qu(t,n);if(zo(t))return Xu(t,n);if(qo(t))return Zu(t,n);if(Yo(t))return ri(t,n);if(Xo(t))return Ju(t,n);if(ei(t))return el(t,n)}throw Qo(t)}function it(t,n){return n?tl(t,n):dt(t)}function Ne(...t){let n=Sn(t);return it(t,n)}function ur(t,n){let o=Pe(t)?t:()=>t,r=i=>i.error(o());return new et(n?i=>n.schedule(r,0,i):r)}function Os(t){return!!t&&(t instanceof et||Pe(t.lift)&&Pe(t.subscribe))}var cn=nr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function qe(t,n){return Ge((o,r)=>{let i=0;o.subscribe(ze(r,e=>{r.next(t.call(n,e,i++))}))})}var{isArray:_h}=Array;function Rh(t,n){return _h(n)?t(...n):t(n)}function nl(t){return qe(n=>Rh(t,n))}var{isArray:xh}=Array,{getPrototypeOf:Nh,prototype:Mh,keys:Oh}=Object;function rl(t){if(t.length===1){let n=t[0];if(xh(n))return{args:n,keys:null};if(Lh(n)){let o=Oh(n);return{args:o.map(r=>n[r]),keys:o}}}return{args:t,keys:null}}function Lh(t){return t&&typeof t=="object"&&Nh(t)===Mh}function ol(t,n){return t.reduce((o,r,i)=>(o[r]=n[i],o),{})}function Gr(...t){let n=Sn(t),o=Wu(t),{args:r,keys:i}=rl(t);if(r.length===0)return it([],n);let e=new et(Ph(r,n,i?m=>ol(i,m):Dt));return o?e.pipe(nl(o)):e}function Ph(t,n,o=Dt){return r=>{il(n,()=>{let{length:i}=t,e=new Array(i),m=i,b=i;for(let C=0;C<i;C++)il(n,()=>{let D=it(t[C],n),_=!1;D.subscribe(ze(r,g=>{e[C]=g,_||(_=!0,b--),b||r.next(o(e.slice()))},()=>{--m||r.complete()}))},r)},r)}}function il(t,n,o){t?It(o,t,n):n()}function sl(t,n,o,r,i,e,m,b){let C=[],D=0,_=0,g=!1,v=()=>{g&&!C.length&&!D&&n.complete()},E=u=>D<r?l(u):C.push(u),l=u=>{e&&n.next(u),D++;let a=!1;dt(o(u,_++)).subscribe(ze(n,y=>{i?.(y),e?E(y):n.next(y)},()=>{a=!0},void 0,()=>{if(a)try{for(D--;C.length&&D<r;){let y=C.shift();m?It(n,m,()=>l(y)):l(y)}v()}catch(y){n.error(y)}}))};return t.subscribe(ze(n,E,()=>{g=!0,v()})),()=>{b?.()}}function st(t,n,o=1/0){return Pe(n)?st((r,i)=>qe((e,m)=>n(r,e,i,m))(dt(t(r,i))),o):(typeof n=="number"&&(o=n),Ge((r,i)=>sl(r,i,t,o)))}function lr(t=1/0){return st(Dt,t)}function al(){return lr(1)}function dr(...t){return al()(it(t,Sn(t)))}function oi(t){return new et(n=>{dt(t()).subscribe(n)})}function Pt(t,n){return Ge((o,r)=>{let i=0;o.subscribe(ze(r,e=>t.call(n,e,i++)&&r.next(e)))})}function In(t){return Ge((n,o)=>{let r=null,i=!1,e;r=n.subscribe(ze(o,void 0,void 0,m=>{e=dt(t(m,In(t)(n))),r?(r.unsubscribe(),r=null,e.subscribe(o)):i=!0})),i&&(r.unsubscribe(),r=null,e.subscribe(o))})}function cl(t,n,o,r,i){return(e,m)=>{let b=o,C=n,D=0;e.subscribe(ze(m,_=>{let g=D++;C=b?t(C,_,g):(b=!0,_),r&&m.next(C)},i&&(()=>{b&&m.next(C),m.complete()})))}}function jn(t,n){return Pe(n)?st(t,n,1):st(t,1)}function Tn(t){return Ge((n,o)=>{let r=!1;n.subscribe(ze(o,i=>{r=!0,o.next(i)},()=>{r||o.next(t),o.complete()}))})}function un(t){return t<=0?()=>At:Ge((n,o)=>{let r=0;n.subscribe(ze(o,i=>{++r<=t&&(o.next(i),t<=r&&o.complete())}))})}function Ls(t){return qe(()=>t)}function ii(t=kh){return Ge((n,o)=>{let r=!1;n.subscribe(ze(o,i=>{r=!0,o.next(i)},()=>r?o.complete():o.error(t())))})}function kh(){return new cn}function zr(t){return Ge((n,o)=>{try{n.subscribe(o)}finally{o.add(t)}})}function Qt(t,n){let o=arguments.length>=2;return r=>r.pipe(t?Pt((i,e)=>t(i,e,r)):Dt,un(1),o?Tn(n):ii(()=>new cn))}function fr(t){return t<=0?()=>At:Ge((n,o)=>{let r=[];n.subscribe(ze(o,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)o.next(i);o.complete()},void 0,()=>{r=null}))})}function Ps(t,n){let o=arguments.length>=2;return r=>r.pipe(t?Pt((i,e)=>t(i,e,r)):Dt,fr(1),o?Tn(n):ii(()=>new cn))}function ks(t,n){return Ge(cl(t,n,arguments.length>=2,!0))}function Fs(...t){let n=Sn(t);return Ge((o,r)=>{(n?dr(t,o,n):dr(t,o)).subscribe(r)})}function kt(t,n){return Ge((o,r)=>{let i=null,e=0,m=!1,b=()=>m&&!i&&r.complete();o.subscribe(ze(r,C=>{i?.unsubscribe();let D=0,_=e++;dt(t(C,_)).subscribe(i=ze(r,g=>r.next(n?n(C,g,_,D++):g),()=>{i=null,b()}))},()=>{m=!0,b()}))})}function Us(t){return Ge((n,o)=>{dt(t).subscribe(ze(o,()=>o.complete(),Wr)),!o.closed&&n.subscribe(o)})}function gt(t,n,o){let r=Pe(t)||n||o?{next:t,error:n,complete:o}:t;return r?Ge((i,e)=>{var m;(m=r.subscribe)===null||m===void 0||m.call(r);let b=!0;i.subscribe(ze(e,C=>{var D;(D=r.next)===null||D===void 0||D.call(r,C),e.next(C)},()=>{var C;b=!1,(C=r.complete)===null||C===void 0||C.call(r),e.complete()},C=>{var D;b=!1,(D=r.error)===null||D===void 0||D.call(r,C),e.error(C)},()=>{var C,D;b&&((C=r.unsubscribe)===null||C===void 0||C.call(r)),(D=r.finalize)===null||D===void 0||D.call(r)}))}):Dt}var Ae=class extends Error{constructor(n,o){super(La(n,o)),this.code=n}};function La(t,n){return`${`NG0${Math.abs(t)}`}${n?": "+n:""}`}function io(t){return{toString:t}.toString()}var si="__parameters__";function Fh(t){return function(...o){if(t){let r=t(...o);for(let i in r)this[i]=r[i]}}}function Hl(t,n,o){return io(()=>{let r=Fh(n);function i(...e){if(this instanceof i)return r.apply(this,e),this;let m=new i(...e);return b.annotation=m,b;function b(C,D,_){let g=C.hasOwnProperty(si)?C[si]:Object.defineProperty(C,si,{value:[]})[si];for(;g.length<=_;)g.push(null);return(g[_]=g[_]||[]).push(m),C}}return o&&(i.prototype=Object.create(o.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var _t=globalThis;function tt(t){for(let n in t)if(t[n]===tt)return n;throw Error("Could not find renamed property on target object.")}function Rt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Rt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let n=t.toString();if(n==null)return""+n;let o=n.indexOf(`
`);return o===-1?n:n.substring(0,o)}function ul(t,n){return t==null||t===""?n===null?"":n:n==null||n===""?t:t+" "+n}var Uh=tt({__forward_ref__:tt});function $l(t){return t.__forward_ref__=$l,t.toString=function(){return Rt(this())},t}function Ut(t){return Wl(t)?t():t}function Wl(t){return typeof t=="function"&&t.hasOwnProperty(Uh)&&t.__forward_ref__===$l}function _e(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Mi(t){return ll(t,zl)||ll(t,ql)}function Gl(t){return Mi(t)!==null}function ll(t,n){return t.hasOwnProperty(n)?t[n]:null}function Bh(t){let n=t&&(t[zl]||t[ql]);return n||null}function dl(t){return t&&(t.hasOwnProperty(fl)||t.hasOwnProperty(jh))?t[fl]:null}var zl=tt({\u0275prov:tt}),fl=tt({\u0275inj:tt}),ql=tt({ngInjectableDef:tt}),jh=tt({ngInjectorDef:tt}),ke=class{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof o=="number"?this.__NG_ELEMENT_ID__=o:o!==void 0&&(this.\u0275prov=_e({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kl(t){return t&&!!t.\u0275providers}var Vh=tt({\u0275cmp:tt}),Hh=tt({\u0275dir:tt}),$h=tt({\u0275pipe:tt}),Wh=tt({\u0275mod:tt}),hi=tt({\u0275fac:tt}),qr=tt({__NG_ELEMENT_ID__:tt}),pl=tt({__NG_ENV_ID__:tt});function Gh(t){return typeof t=="string"?t:t==null?"":String(t)}function zh(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gh(t)}function qh(t,n){let o=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Ae(-200,t)}function Pa(t,n){throw new Ae(-201,!1)}var Ve=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ve||{}),Ks;function Yl(){return Ks}function Ft(t){let n=Ks;return Ks=t,n}function Ql(t,n,o){let r=Mi(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(o&Ve.Optional)return null;if(n!==void 0)return n;Pa(t,"Injector")}var Kh={},Yr=Kh,Ys="__NG_DI_FLAG__",gi="ngTempTokenPath",Yh="ngTokenPath",Qh=/\n/gm,Zh="\u0275",hl="__source",vr;function Xh(){return vr}function bn(t){let n=vr;return vr=t,n}function Jh(t,n=Ve.Default){if(vr===void 0)throw new Ae(-203,!1);return vr===null?Ql(t,void 0,n):vr.get(t,n&Ve.Optional?null:void 0,n)}function Re(t,n=Ve.Default){return(Yl()||Jh)(Ut(t),n)}function ge(t,n=Ve.Default){return Re(t,Oi(n))}function Oi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qs(t){let n=[];for(let o=0;o<t.length;o++){let r=Ut(t[o]);if(Array.isArray(r)){if(r.length===0)throw new Ae(900,!1);let i,e=Ve.Default;for(let m=0;m<r.length;m++){let b=r[m],C=eg(b);typeof C=="number"?C===-1?i=b.token:e|=C:i=b}n.push(Re(i,e))}else n.push(Re(r))}return n}function Zl(t,n){return t[Ys]=n,t.prototype[Ys]=n,t}function eg(t){return t[Ys]}function tg(t,n,o,r){let i=t[gi];throw n[hl]&&i.unshift(n[hl]),t.message=ng(`
`+t.message,i,o,r),t[Yh]=i,t[gi]=null,t}function ng(t,n,o,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Zh?t.slice(2):t;let i=Rt(n);if(Array.isArray(n))i=n.map(Rt).join(" -> ");else if(typeof n=="object"){let e=[];for(let m in n)if(n.hasOwnProperty(m)){let b=n[m];e.push(m+":"+(typeof b=="string"?JSON.stringify(b):Rt(b)))}i=`{${e.join(", ")}}`}return`${o}${r?"("+r+")":""}[${i}]: ${t.replace(Qh,`
  `)}`}var ka=Zl(Hl("Optional"),8);var Xl=Zl(Hl("SkipSelf"),4);function Cr(t,n){let o=t.hasOwnProperty(hi);return o?t[hi]:null}function rg(t,n,o){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],e=n[r];if(o&&(i=o(i),e=o(e)),e!==i)return!1}return!0}function og(t){return t.flat(Number.POSITIVE_INFINITY)}function Fa(t,n){t.forEach(o=>Array.isArray(o)?Fa(o,n):n(o))}function Jl(t,n,o){n>=t.length?t.push(o):t.splice(n,0,o)}function mi(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}var Qr={},Zt=[],Sr=new ke(""),ed=new ke("",-1),td=new ke(""),vi=class{get(n,o=Yr){if(o===Yr){let r=new Error(`NullInjectorError: No provider for ${Rt(n)}!`);throw r.name="NullInjectorError",r}return o}},nd=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nd||{}),Jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jt||{}),An=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(An||{});function ig(t,n,o){let r=t.length;for(;;){let i=t.indexOf(n,o);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let e=n.length;if(i+e===r||t.charCodeAt(i+e)<=32)return i}o=i+1}}function Zs(t,n,o){let r=0;for(;r<o.length;){let i=o[r];if(typeof i=="number"){if(i!==0)break;r++;let e=o[r++],m=o[r++],b=o[r++];t.setAttribute(n,m,b,e)}else{let e=i,m=o[++r];ag(e)?t.setProperty(n,e,m):t.setAttribute(n,e,m),r++}}return r}function sg(t){return t===3||t===4||t===6}function ag(t){return t.charCodeAt(0)===64}function Ua(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let o=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?o=i:o===0||(o===-1||o===2?gl(t,o,i,null,n[++r]):gl(t,o,i,null,null))}}return t}function gl(t,n,o,r,i){let e=0,m=t.length;if(n===-1)m=-1;else for(;e<t.length;){let b=t[e++];if(typeof b=="number"){if(b===n){m=-1;break}else if(b>n){m=e-1;break}}}for(;e<t.length;){let b=t[e];if(typeof b=="number")break;if(b===o){if(r===null){i!==null&&(t[e+1]=i);return}else if(r===t[e+1]){t[e+2]=i;return}}e++,r!==null&&e++,i!==null&&e++}m!==-1&&(t.splice(m,0,n),e=m+1),t.splice(e++,0,o),r!==null&&t.splice(e++,0,r),i!==null&&t.splice(e++,0,i)}var rd="ng-template";function cg(t,n,o,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&ig(n[i+1].toLowerCase(),o,0)!==-1)return!0}else if(Ba(t))return!1;if(i=n.indexOf(1,i),i>-1){let e;for(;++i<n.length&&typeof(e=n[i])=="string";)if(e.toLowerCase()===o)return!0}return!1}function Ba(t){return t.type===4&&t.value!==rd}function ug(t,n,o){let r=t.type===4&&!o?rd:t.value;return n===r}function lg(t,n,o){let r=4,i=t.attrs,e=i!==null?pg(i):0,m=!1;for(let b=0;b<n.length;b++){let C=n[b];if(typeof C=="number"){if(!m&&!$t(r)&&!$t(C))return!1;if(m&&$t(C))continue;m=!1,r=C|r&1;continue}if(!m)if(r&4){if(r=2|r&1,C!==""&&!ug(t,C,o)||C===""&&n.length===1){if($t(r))return!1;m=!0}}else if(r&8){if(i===null||!cg(t,i,C,o)){if($t(r))return!1;m=!0}}else{let D=n[++b],_=dg(C,i,Ba(t),o);if(_===-1){if($t(r))return!1;m=!0;continue}if(D!==""){let g;if(_>e?g="":g=i[_+1].toLowerCase(),r&2&&D!==g){if($t(r))return!1;m=!0}}}}return $t(r)||m}function $t(t){return(t&1)===0}function dg(t,n,o,r){if(n===null)return-1;let i=0;if(r||!o){let e=!1;for(;i<n.length;){let m=n[i];if(m===t)return i;if(m===3||m===6)e=!0;else if(m===1||m===2){let b=n[++i];for(;typeof b=="string";)b=n[++i];continue}else{if(m===4)break;if(m===0){i+=4;continue}}i+=e?1:2}return-1}else return hg(n,t)}function fg(t,n,o=!1){for(let r=0;r<n.length;r++)if(lg(t,n[r],o))return!0;return!1}function pg(t){for(let n=0;n<t.length;n++){let o=t[n];if(sg(o))return n}return t.length}function hg(t,n){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){let r=t[o];if(typeof r=="number")return-1;if(r===n)return o;o++}return-1}function ml(t,n){return t?":not("+n.trim()+")":n}function gg(t){let n=t[0],o=1,r=2,i="",e=!1;for(;o<t.length;){let m=t[o];if(typeof m=="string")if(r&2){let b=t[++o];i+="["+m+(b.length>0?'="'+b+'"':"")+"]"}else r&8?i+="."+m:r&4&&(i+=" "+m);else i!==""&&!$t(m)&&(n+=ml(e,i),i=""),r=m,e=e||!$t(r);o++}return i!==""&&(n+=ml(e,i)),n}function mg(t){return t.map(gg).join(",")}function vg(t){let n=[],o=[],r=1,i=2;for(;r<t.length;){let e=t[r];if(typeof e=="string")i===2?e!==""&&n.push(e,t[++r]):i===8&&o.push(e);else{if(!$t(i))break;i=e}r++}return{attrs:n,classes:o}}function Li(t){return io(()=>{let n=cd(t),o=We(fe({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});ud(o);let r=t.dependencies;return o.directiveDefs=yl(r,!1),o.pipeDefs=yl(r,!0),o.id=Cg(o),o})}function yg(t){return _n(t)||od(t)}function Eg(t){return t!==null}function zt(t){return io(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function vl(t,n){if(t==null)return Qr;let o={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],e,m,b=An.None;Array.isArray(i)?(b=i[0],e=i[1],m=i[2]??e):(e=i,m=i),n?(o[e]=b!==An.None?[r,b]:r,n[e]=m):o[e]=r}return o}function ja(t){return io(()=>{let n=cd(t);return ud(n),n})}function _n(t){return t[Vh]||null}function od(t){return t[Hh]||null}function id(t){return t[$h]||null}function sd(t){let n=_n(t)||od(t)||id(t);return n!==null?n.standalone:!1}function ad(t,n){let o=t[Wh]||null;if(!o&&n===!0)throw new Error(`Type ${Rt(t)} does not have '\u0275mod' property.`);return o}function cd(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Qr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vl(t.inputs,n),outputs:vl(t.outputs),debugInfo:null}}function ud(t){t.features?.forEach(n=>n(t))}function yl(t,n){if(!t)return null;let o=n?id:yg;return()=>(typeof t=="function"?t():t).map(r=>o(r)).filter(Eg)}function Cg(t){let n=0,o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of o)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Sg(...t){return{\u0275providers:ld(!0,t),\u0275fromNgModule:!0}}function ld(t,...n){let o=[],r=new Set,i,e=m=>{o.push(m)};return Fa(n,m=>{let b=m;Xs(b,e,[],r)&&(i||=[],i.push(b))}),i!==void 0&&dd(i,e),o}function dd(t,n){for(let o=0;o<t.length;o++){let{ngModule:r,providers:i}=t[o];Va(i,e=>{n(e,r)})}}function Xs(t,n,o,r){if(t=Ut(t),!t)return!1;let i=null,e=dl(t),m=!e&&_n(t);if(!e&&!m){let C=t.ngModule;if(e=dl(C),e)i=C;else return!1}else{if(m&&!m.standalone)return!1;i=t}let b=r.has(i);if(m){if(b)return!1;if(r.add(i),m.dependencies){let C=typeof m.dependencies=="function"?m.dependencies():m.dependencies;for(let D of C)Xs(D,n,o,r)}}else if(e){if(e.imports!=null&&!b){r.add(i);let D;try{Fa(e.imports,_=>{Xs(_,n,o,r)&&(D||=[],D.push(_))})}finally{}D!==void 0&&dd(D,n)}if(!b){let D=Cr(i)||(()=>new i);n({provide:i,useFactory:D,deps:Zt},i),n({provide:td,useValue:i,multi:!0},i),n({provide:Sr,useValue:()=>Re(i),multi:!0},i)}let C=e.providers;if(C!=null&&!b){let D=t;Va(C,_=>{n(_,D)})}}else return!1;return i!==t&&t.providers!==void 0}function Va(t,n){for(let o of t)Kl(o)&&(o=o.\u0275providers),Array.isArray(o)?Va(o,n):n(o)}var Ig=tt({provide:String,useValue:tt});function fd(t){return t!==null&&typeof t=="object"&&Ig in t}function Tg(t){return!!(t&&t.useExisting)}function bg(t){return!!(t&&t.useFactory)}function Js(t){return typeof t=="function"}var Pi=new ke(""),ci={},wg={},Bs;function Ha(){return Bs===void 0&&(Bs=new vi),Bs}var Tt=class{},Zr=class extends Tt{get destroyed(){return this._destroyed}constructor(n,o,r,i){super(),this.parent=o,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ta(n,m=>this.processProvider(m)),this.records.set(ed,pr(void 0,this)),i.has("environment")&&this.records.set(Tt,pr(void 0,this));let e=this.records.get(Pi);e!=null&&typeof e.value=="string"&&this.scopes.add(e.value),this.injectorDefTypes=new Set(this.get(td,Zt,Ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=Xe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let o=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of o)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Xe(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let o=bn(this),r=Ft(void 0),i;try{return n()}finally{bn(o),Ft(r)}}get(n,o=Yr,r=Ve.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(pl))return n[pl](this);r=Oi(r);let i,e=bn(this),m=Ft(void 0);try{if(!(r&Ve.SkipSelf)){let C=this.records.get(n);if(C===void 0){let D=Ng(n)&&Mi(n);D&&this.injectableDefInScope(D)?C=pr(ea(n),ci):C=null,this.records.set(n,C)}if(C!=null)return this.hydrate(n,C)}let b=r&Ve.Self?Ha():this.parent;return o=r&Ve.Optional&&o===Yr?null:o,b.get(n,o)}catch(b){if(b.name==="NullInjectorError"){if((b[gi]=b[gi]||[]).unshift(Rt(n)),e)throw b;return tg(b,n,"R3InjectorError",this.source)}else throw b}finally{Ft(m),bn(e)}}resolveInjectorInitializers(){let n=Xe(null),o=bn(this),r=Ft(void 0),i;try{let e=this.get(Sr,Zt,Ve.Self);for(let m of e)m()}finally{bn(o),Ft(r),Xe(n)}}toString(){let n=[],o=this.records;for(let r of o.keys())n.push(Rt(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(n){n=Ut(n);let o=Js(n)?n:Ut(n&&n.provide),r=Ag(n);if(!Js(n)&&n.multi===!0){let i=this.records.get(o);i||(i=pr(void 0,ci,!0),i.factory=()=>Qs(i.multi),this.records.set(o,i)),o=n,i.multi.push(n)}this.records.set(o,r)}hydrate(n,o){let r=Xe(null);try{return o.value===ci&&(o.value=wg,o.value=o.factory()),typeof o.value=="object"&&o.value&&xg(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{Xe(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let o=Ut(n.providedIn);return typeof o=="string"?o==="any"||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(n){let o=this._onDestroyHooks.indexOf(n);o!==-1&&this._onDestroyHooks.splice(o,1)}};function ea(t){let n=Mi(t),o=n!==null?n.factory:Cr(t);if(o!==null)return o;if(t instanceof ke)throw new Ae(204,!1);if(t instanceof Function)return Dg(t);throw new Ae(204,!1)}function Dg(t){if(t.length>0)throw new Ae(204,!1);let o=Bh(t);return o!==null?()=>o.factory(t):()=>new t}function Ag(t){if(fd(t))return pr(void 0,t.useValue);{let n=_g(t);return pr(n,ci)}}function _g(t,n,o){let r;if(Js(t)){let i=Ut(t);return Cr(i)||ea(i)}else if(fd(t))r=()=>Ut(t.useValue);else if(bg(t))r=()=>t.useFactory(...Qs(t.deps||[]));else if(Tg(t))r=()=>Re(Ut(t.useExisting));else{let i=Ut(t&&(t.useClass||t.provide));if(Rg(t))r=()=>new i(...Qs(t.deps));else return Cr(i)||ea(i)}return r}function pr(t,n,o=!1){return{factory:t,value:n,multi:o?[]:void 0}}function Rg(t){return!!t.deps}function xg(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Ng(t){return typeof t=="function"||typeof t=="object"&&t instanceof ke}function ta(t,n){for(let o of t)Array.isArray(o)?ta(o,n):o&&Kl(o)?ta(o.\u0275providers,n):n(o)}function fn(t,n){t instanceof Zr&&t.assertNotDestroyed();let o,r=bn(t),i=Ft(void 0);try{return n()}finally{bn(r),Ft(i)}}function pd(){return Yl()!==void 0||Xh()!=null}function Mg(t){if(!pd())throw new Ae(-203,!1)}function Og(t){let n=_t.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Lg(t){return typeof t=="function"}var pn=0,He=1,Oe=2,mt=3,Wt=4,qt=5,yi=6,Ei=7,Rn=8,Ir=9,en=10,ln=11,Xr=12,El=13,so=14,tn=15,ao=16,hr=17,dn=18,ki=19,hd=20,Dn=21,js=22,Hn=23,Tr=25,gd=1;var $n=7,Ci=8,br=9,xt=10,$a=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}($a||{});function yr(t){return Array.isArray(t)&&typeof t[gd]=="object"}function hn(t){return Array.isArray(t)&&t[gd]===!0}function md(t){return(t.flags&4)!==0}function Wa(t){return t.componentOffset>-1}function Pg(t){return(t.flags&1)===1}function co(t){return!!t.template}function kg(t){return(t[Oe]&512)!==0}var na=class{constructor(n,o,r){this.previousValue=n,this.currentValue=o,this.firstChange=r}isFirstChange(){return this.firstChange}};function vd(t,n,o,r){n!==null?n.applyValueToInputSignal(n,r):t[o]=r}function Fi(){return yd}function yd(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ug),Fg}Fi.ngInherit=!0;function Fg(){let t=Cd(this),n=t?.current;if(n){let o=t.previous;if(o===Qr)t.previous=n;else for(let r in n)o[r]=n[r];t.current=null,this.ngOnChanges(n)}}function Ug(t,n,o,r,i){let e=this.declaredInputs[r],m=Cd(t)||Bg(t,{previous:Qr,current:null}),b=m.current||(m.current={}),C=m.previous,D=C[e];b[e]=new na(D&&D.currentValue,o,C===Qr),vd(t,n,i,o)}var Ed="__ngSimpleChanges__";function Cd(t){return t[Ed]||null}function Bg(t,n){return t[Ed]=n}var Cl=null;var wn=function(t,n,o){Cl?.(t,n,o)},jg="svg",Vg="math",Hg=!1;function $g(){return Hg}function xn(t){for(;Array.isArray(t);)t=t[pn];return t}function gn(t,n){return xn(n[t.index])}function Wg(t,n){return t.data[n]}function uo(t,n){let o=n[t];return yr(o)?o:o[pn]}function Gg(t){return(t[Oe]&4)===4}function Ga(t){return(t[Oe]&128)===128}function zg(t){return hn(t[mt])}function Sl(t,n){return n==null?null:t[n]}function Sd(t){t[hr]=0}function qg(t){t[Oe]&1024||(t[Oe]|=1024,Ga(t)&&Jr(t))}function za(t){return!!(t[Oe]&9216||t[Hn]?.dirty)}function ra(t){t[en].changeDetectionScheduler?.notify(1),za(t)?Jr(t):t[Oe]&64&&($g()?(t[Oe]|=1024,Jr(t)):t[en].changeDetectionScheduler?.notify())}function Jr(t){t[en].changeDetectionScheduler?.notify();let n=eo(t);for(;n!==null&&!(n[Oe]&8192||(n[Oe]|=8192,!Ga(n)));)n=eo(n)}function Id(t,n){if((t[Oe]&256)===256)throw new Ae(911,!1);t[Dn]===null&&(t[Dn]=[]),t[Dn].push(n)}function Kg(t,n){if(t[Dn]===null)return;let o=t[Dn].indexOf(n);o!==-1&&t[Dn].splice(o,1)}function eo(t){let n=t[mt];return hn(n)?n[mt]:n}var Je={lFrame:Rd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Yg(){return Je.lFrame.elementDepthCount}function Qg(){Je.lFrame.elementDepthCount++}function Zg(){Je.lFrame.elementDepthCount--}function Td(){return Je.bindingsEnabled}function Xg(){return Je.skipHydrationRootTNode!==null}function Jg(t){return Je.skipHydrationRootTNode===t}function em(){Je.skipHydrationRootTNode=null}function bt(){return Je.lFrame.lView}function Ui(){return Je.lFrame.tView}function mn(){let t=bd();for(;t!==null&&t.type===64;)t=t.parent;return t}function bd(){return Je.lFrame.currentTNode}function tm(){let t=Je.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function qa(t,n){let o=Je.lFrame;o.currentTNode=t,o.isParent=n}function wd(){return Je.lFrame.isParent}function nm(){Je.lFrame.isParent=!1}function rm(t){return Je.lFrame.bindingIndex=t}function om(){return Je.lFrame.inI18n}function im(t,n){let o=Je.lFrame;o.bindingIndex=o.bindingRootIndex=t,oa(n)}function sm(){return Je.lFrame.currentDirectiveIndex}function oa(t){Je.lFrame.currentDirectiveIndex=t}function Dd(){return Je.lFrame.currentQueryIndex}function Ka(t){Je.lFrame.currentQueryIndex=t}function am(t){let n=t[He];return n.type===2?n.declTNode:n.type===1?t[qt]:null}function Ad(t,n,o){if(o&Ve.SkipSelf){let i=n,e=t;for(;i=i.parent,i===null&&!(o&Ve.Host);)if(i=am(e),i===null||(e=e[so],i.type&10))break;if(i===null)return!1;n=i,t=e}let r=Je.lFrame=_d();return r.currentTNode=n,r.lView=t,!0}function Ya(t){let n=_d(),o=t[He];Je.lFrame=n,n.currentTNode=o.firstChild,n.lView=t,n.tView=o,n.contextLView=t,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function _d(){let t=Je.lFrame,n=t===null?null:t.child;return n===null?Rd(t):n}function Rd(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function xd(){let t=Je.lFrame;return Je.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Nd=xd;function Qa(){let t=xd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cm(){return Je.lFrame.selectedIndex}function Wn(t){Je.lFrame.selectedIndex=t}function um(){return Je.lFrame.currentNamespace}var Md=!0;function lm(){return Md}function dm(t){Md=t}function fm(t,n,o){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:e}=n.type.prototype;if(r){let m=yd(n);(o.preOrderHooks??=[]).push(t,m),(o.preOrderCheckHooks??=[]).push(t,m)}i&&(o.preOrderHooks??=[]).push(0-t,i),e&&((o.preOrderHooks??=[]).push(t,e),(o.preOrderCheckHooks??=[]).push(t,e))}function Od(t,n){for(let o=n.directiveStart,r=n.directiveEnd;o<r;o++){let e=t.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:_}=e;m&&(t.contentHooks??=[]).push(-o,m),b&&((t.contentHooks??=[]).push(o,b),(t.contentCheckHooks??=[]).push(o,b)),C&&(t.viewHooks??=[]).push(-o,C),D&&((t.viewHooks??=[]).push(o,D),(t.viewCheckHooks??=[]).push(o,D)),_!=null&&(t.destroyHooks??=[]).push(o,_)}}function ui(t,n,o){Ld(t,n,3,o)}function li(t,n,o,r){(t[Oe]&3)===o&&Ld(t,n,o,r)}function Vs(t,n){let o=t[Oe];(o&3)===n&&(o&=16383,o+=1,t[Oe]=o)}function Ld(t,n,o,r){let i=r!==void 0?t[hr]&65535:0,e=r??-1,m=n.length-1,b=0;for(let C=i;C<m;C++)if(typeof n[C+1]=="number"){if(b=n[C],r!=null&&b>=r)break}else n[C]<0&&(t[hr]+=65536),(b<e||e==-1)&&(pm(t,o,n,C),t[hr]=(t[hr]&4294901760)+C+2),C++}function Il(t,n){wn(4,t,n);let o=Xe(null);try{n.call(t)}finally{Xe(o),wn(5,t,n)}}function pm(t,n,o,r){let i=o[r]<0,e=o[r+1],m=i?-o[r]:o[r],b=t[m];i?t[Oe]>>14<t[hr]>>16&&(t[Oe]&3)===n&&(t[Oe]+=16384,Il(b,e)):Il(b,e)}var Er=-1,to=class{constructor(n,o,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=r}};function hm(t){return t instanceof to}function gm(t){return(t.flags&8)!==0}function mm(t){return(t.flags&16)!==0}function Pd(t){return t!==Er}function Si(t){return t&32767}function vm(t){return t>>16}function Ii(t,n){let o=vm(t),r=n;for(;o>0;)r=r[so],o--;return r}var ia=!0;function Tl(t){let n=ia;return ia=t,n}var ym=256,kd=ym-1,Fd=5,Em=0,Xt={};function Cm(t,n,o){let r;typeof o=="string"?r=o.charCodeAt(0)||0:o.hasOwnProperty(qr)&&(r=o[qr]),r==null&&(r=o[qr]=Em++);let i=r&kd,e=1<<i;n.data[t+(i>>Fd)]|=e}function Ud(t,n){let o=Bd(t,n);if(o!==-1)return o;let r=n[He];r.firstCreatePass&&(t.injectorIndex=n.length,Hs(r.data,t),Hs(n,null),Hs(r.blueprint,null));let i=Za(t,n),e=t.injectorIndex;if(Pd(i)){let m=Si(i),b=Ii(i,n),C=b[He].data;for(let D=0;D<8;D++)n[e+D]=b[m+D]|C[m+D]}return n[e+8]=i,e}function Hs(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Bd(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function Za(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let o=0,r=null,i=n;for(;i!==null;){if(r=Wd(i),r===null)return Er;if(o++,i=i[so],r.injectorIndex!==-1)return r.injectorIndex|o<<16}return Er}function Sm(t,n,o){Cm(t,n,o)}function jd(t,n,o){if(o&Ve.Optional||t!==void 0)return t;Pa(n,"NodeInjector")}function Vd(t,n,o,r){if(o&Ve.Optional&&r===void 0&&(r=null),!(o&(Ve.Self|Ve.Host))){let i=t[Ir],e=Ft(void 0);try{return i?i.get(n,r,o&Ve.Optional):Ql(n,r,o&Ve.Optional)}finally{Ft(e)}}return jd(r,n,o)}function Hd(t,n,o,r=Ve.Default,i){if(t!==null){if(n[Oe]&2048&&!(r&Ve.Self)){let m=wm(t,n,o,r,Xt);if(m!==Xt)return m}let e=$d(t,n,o,r,Xt);if(e!==Xt)return e}return Vd(n,o,r,i)}function $d(t,n,o,r,i){let e=Tm(o);if(typeof e=="function"){if(!Ad(n,t,r))return r&Ve.Host?jd(i,o,r):Vd(n,o,r,i);try{let m;if(m=e(r),m==null&&!(r&Ve.Optional))Pa(o);else return m}finally{Nd()}}else if(typeof e=="number"){let m=null,b=Bd(t,n),C=Er,D=r&Ve.Host?n[tn][qt]:null;for((b===-1||r&Ve.SkipSelf)&&(C=b===-1?Za(t,n):n[b+8],C===Er||!wl(r,!1)?b=-1:(m=n[He],b=Si(C),n=Ii(C,n)));b!==-1;){let _=n[He];if(bl(e,b,_.data)){let g=Im(b,n,o,m,r,D);if(g!==Xt)return g}C=n[b+8],C!==Er&&wl(r,n[He].data[b+8]===D)&&bl(e,b,n)?(m=_,b=Si(C),n=Ii(C,n)):b=-1}}return i}function Im(t,n,o,r,i,e){let m=n[He],b=m.data[t+8],C=r==null?Wa(b)&&ia:r!=m&&(b.type&3)!==0,D=i&Ve.Host&&e===b,_=di(b,m,o,C,D);return _!==null?wr(n,m,_,b):Xt}function di(t,n,o,r,i){let e=t.providerIndexes,m=n.data,b=e&1048575,C=t.directiveStart,D=t.directiveEnd,_=e>>20,g=r?b:b+_,v=i?b+_:D;for(let E=g;E<v;E++){let l=m[E];if(E<C&&o===l||E>=C&&l.type===o)return E}if(i){let E=m[C];if(E&&co(E)&&E.type===o)return C}return null}function wr(t,n,o,r){let i=t[o],e=n.data;if(hm(i)){let m=i;m.resolving&&qh(zh(e[o]));let b=Tl(m.canSeeViewProviders);m.resolving=!0;let C,D=m.injectImpl?Ft(m.injectImpl):null,_=Ad(t,r,Ve.Default);try{i=t[o]=m.factory(void 0,e,t,r),n.firstCreatePass&&o>=r.directiveStart&&fm(o,e[o],n)}finally{D!==null&&Ft(D),Tl(b),m.resolving=!1,Nd()}}return i}function Tm(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(qr)?t[qr]:void 0;return typeof n=="number"?n>=0?n&kd:bm:n}function bl(t,n,o){let r=1<<t;return!!(o[n+(t>>Fd)]&r)}function wl(t,n){return!(t&Ve.Self)&&!(t&Ve.Host&&n)}var Vn=class{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,r){return Hd(this._tNode,this._lView,n,Oi(r),o)}};function bm(){return new Vn(mn(),bt())}function Xa(t){return io(()=>{let n=t.prototype.constructor,o=n[hi]||sa(n),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let e=i[hi]||sa(i);if(e&&e!==o)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function sa(t){return Wl(t)?()=>{let n=sa(Ut(t));return n&&n()}:Cr(t)}function wm(t,n,o,r,i){let e=t,m=n;for(;e!==null&&m!==null&&m[Oe]&2048&&!(m[Oe]&512);){let b=$d(e,m,o,r|Ve.Self,Xt);if(b!==Xt)return b;let C=e.parent;if(!C){let D=m[hd];if(D){let _=D.get(o,Xt,r);if(_!==Xt)return _}C=Wd(m),m=m[so]}e=C}return i}function Wd(t){let n=t[He],o=n.type;return o===2?n.declTNode:o===1?t[qt]:null}function Dl(t,n=null,o=null,r){let i=Gd(t,n,o,r);return i.resolveInjectorInitializers(),i}function Gd(t,n=null,o=null,r,i=new Set){let e=[o||Zt,Sg(t)];return r=r||(typeof t=="object"?void 0:Rt(t)),new Zr(e,n||Ha(),r||null,i)}var rn=(()=>{let n=class n{static create(r,i){if(Array.isArray(r))return Dl({name:""},i,r,"");{let e=r.name??"";return Dl({name:e},r.parent,r.providers,e)}}};n.THROW_IF_NOT_FOUND=Yr,n.NULL=new vi,n.\u0275prov=_e({token:n,providedIn:"any",factory:()=>Re(ed)}),n.__NG_ELEMENT_ID__=-1;let t=n;return t})();var Dm="ngOriginalError";function $s(t){return t[Dm]}var nn=class{constructor(){this._console=console}handleError(n){let o=this._findOriginalError(n);this._console.error("ERROR",n),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&$s(n);for(;o&&$s(o);)o=$s(o);return o||null}},zd=new ke("",{providedIn:"root",factory:()=>ge(nn).handleError.bind(void 0)}),Ja=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=Am,n.__NG_ENV_ID__=r=>r;let t=n;return t})(),aa=class extends Ja{constructor(n){super(),this._lView=n}onDestroy(n){return Id(this._lView,n),()=>Kg(this._lView,n)}};function Am(){return new aa(bt())}function _m(){return _r(mn(),bt())}function _r(t,n){return new zn(gn(t,n))}var zn=(()=>{let n=class n{constructor(r){this.nativeElement=r}};n.__NG_ELEMENT_ID__=_m;let t=n;return t})();function Rm(t){return t instanceof zn?t.nativeElement:t}var ca=class extends Ct{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,pd()&&(this.destroyRef=ge(Ja,{optional:!0})??void 0)}emit(n){let o=Xe(null);try{super.next(n)}finally{Xe(o)}}subscribe(n,o,r){let i=n,e=o||(()=>null),m=r;if(n&&typeof n=="object"){let C=n;i=C.next?.bind(C),e=C.error?.bind(C),m=C.complete?.bind(C)}this.__isAsync&&(e=Ws(e),i&&(i=Ws(i)),m&&(m=Ws(m)));let b=super.subscribe({next:i,error:e,complete:m});return n instanceof ut&&n.add(b),b}};function Ws(t){return n=>{setTimeout(t,void 0,n)}}var yt=ca;function xm(){return this._results[Symbol.iterator]()}var ua=class t{get changes(){return this._changes??=new yt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let o=t.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=xm)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){this.dirty=!1;let r=og(n);(this._changesDetected=!rg(this._results,r,o))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qd(t){return(t.flags&128)===128}var Kd=new Map,Nm=0;function Mm(){return Nm++}function Om(t){Kd.set(t[ki],t)}function Lm(t){Kd.delete(t[ki])}var Al="__ngContext__";function Dr(t,n){yr(n)?(t[Al]=n[ki],Om(n)):t[Al]=n}function Yd(t){return Zd(t[Xr])}function Qd(t){return Zd(t[Wt])}function Zd(t){for(;t!==null&&!hn(t);)t=t[Wt];return t}var la;function Xd(t){la=t}function Pm(){if(la!==void 0)return la;if(typeof document<"u")return document;throw new Ae(210,!1)}var Bi=new ke("",{providedIn:"root",factory:()=>km}),km="ng",ec=new ke(""),Mn=new ke("",{providedIn:"platform",factory:()=>"unknown"});var tc=new ke("",{providedIn:"root",factory:()=>Pm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Fm="h",Um="b";var Bm=()=>null;function nc(t,n,o=!1){return Bm(t,n,o)}var Jd=!1,jm=new ke("",{providedIn:"root",factory:()=>Jd});function ef(t){return t instanceof Function?t():t}function Vm(t){return(t??ge(rn)).get(Mn)==="browser"}var qn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qn||{}),Hm;function rc(t,n){return Hm(t,n)}function gr(t,n,o,r,i){if(r!=null){let e,m=!1;hn(r)?e=r:yr(r)&&(m=!0,r=r[pn]);let b=xn(r);t===0&&o!==null?i==null?sf(n,o,b):Ti(n,o,b,i||null,!0):t===1&&o!==null?Ti(n,o,b,i||null,!0):t===2?ov(n,b,m):t===3&&n.destroyNode(b),e!=null&&sv(n,t,e,o,i)}}function tf(t,n,o){return t.createElement(n,o)}function $m(t,n){nf(t,n),n[pn]=null,n[qt]=null}function Wm(t,n,o,r,i,e){r[pn]=i,r[qt]=n,ji(t,r,o,1,i,e)}function nf(t,n){n[en].changeDetectionScheduler?.notify(1),ji(t,n,n[ln],2,null,null)}function Gm(t){let n=t[Xr];if(!n)return Gs(t[He],t);for(;n;){let o=null;if(yr(n))o=n[Xr];else{let r=n[xt];r&&(o=r)}if(!o){for(;n&&!n[Wt]&&n!==t;)yr(n)&&Gs(n[He],n),n=n[mt];n===null&&(n=t),yr(n)&&Gs(n[He],n),o=n&&n[Wt]}n=o}}function zm(t,n,o,r){let i=xt+r,e=o.length;r>0&&(o[i-1][Wt]=n),r<e-xt?(n[Wt]=o[i],Jl(o,xt+r,n)):(o.push(n),n[Wt]=null),n[mt]=o;let m=n[ao];m!==null&&o!==m&&qm(m,n);let b=n[dn];b!==null&&b.insertView(t),ra(n),n[Oe]|=128}function qm(t,n){let o=t[br],i=n[mt][mt][tn];n[tn]!==i&&(t[Oe]|=$a.HasTransplantedViews),o===null?t[br]=[n]:o.push(n)}function rf(t,n){let o=t[br],r=o.indexOf(n);o.splice(r,1)}function da(t,n){if(t.length<=xt)return;let o=xt+n,r=t[o];if(r){let i=r[ao];i!==null&&i!==t&&rf(i,r),n>0&&(t[o-1][Wt]=r[Wt]);let e=mi(t,xt+n);$m(r[He],r);let m=e[dn];m!==null&&m.detachView(e[He]),r[mt]=null,r[Wt]=null,r[Oe]&=-129}return r}function of(t,n){if(!(n[Oe]&256)){let o=n[ln];o.destroyNode&&ji(t,n,o,3,null,null),Gm(n)}}function Gs(t,n){if(n[Oe]&256)return;let o=Xe(null);try{n[Oe]&=-129,n[Oe]|=256,n[Hn]&&Ou(n[Hn]),Ym(t,n),Km(t,n),n[He].type===1&&n[ln].destroy();let r=n[ao];if(r!==null&&hn(n[mt])){r!==n[mt]&&rf(r,n);let i=n[dn];i!==null&&i.detachView(t)}Lm(n)}finally{Xe(o)}}function Km(t,n){let o=t.cleanup,r=n[Ei];if(o!==null)for(let e=0;e<o.length-1;e+=2)if(typeof o[e]=="string"){let m=o[e+3];m>=0?r[m]():r[-m].unsubscribe(),e+=2}else{let m=r[o[e+1]];o[e].call(m)}r!==null&&(n[Ei]=null);let i=n[Dn];if(i!==null){n[Dn]=null;for(let e=0;e<i.length;e++){let m=i[e];m()}}}function Ym(t,n){let o;if(t!=null&&(o=t.destroyHooks)!=null)for(let r=0;r<o.length;r+=2){let i=n[o[r]];if(!(i instanceof to)){let e=o[r+1];if(Array.isArray(e))for(let m=0;m<e.length;m+=2){let b=i[e[m]],C=e[m+1];wn(4,b,C);try{C.call(b)}finally{wn(5,b,C)}}else{wn(4,i,e);try{e.call(i)}finally{wn(5,i,e)}}}}}function Qm(t,n,o){return Zm(t,n.parent,o)}function Zm(t,n,o){let r=n;for(;r!==null&&r.type&40;)n=r,r=n.parent;if(r===null)return o[pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:e}=t.data[r.directiveStart+i];if(e===Jt.None||e===Jt.Emulated)return null}return gn(r,o)}}function Ti(t,n,o,r,i){t.insertBefore(n,o,r,i)}function sf(t,n,o){t.appendChild(n,o)}function _l(t,n,o,r,i){r!==null?Ti(t,n,o,r,i):sf(t,n,o)}function Xm(t,n,o,r){t.removeChild(n,o,r)}function oc(t,n){return t.parentNode(n)}function Jm(t,n){return t.nextSibling(n)}function ev(t,n,o){return nv(t,n,o)}function tv(t,n,o){return t.type&40?gn(t,o):null}var nv=tv,Rl;function rv(t,n,o,r){let i=Qm(t,r,n),e=n[ln],m=r.parent||n[qt],b=ev(m,r,n);if(i!=null)if(Array.isArray(o))for(let C=0;C<o.length;C++)_l(e,i,o[C],b,!1);else _l(e,i,o,b,!1);Rl!==void 0&&Rl(e,r,n,o,i)}function fi(t,n){if(n!==null){let o=n.type;if(o&3)return gn(n,t);if(o&4)return fa(-1,t[n.index]);if(o&8){let r=n.child;if(r!==null)return fi(t,r);{let i=t[n.index];return hn(i)?fa(-1,i):xn(i)}}else{if(o&32)return rc(n,t)()||xn(t[n.index]);{let r=af(t,n);if(r!==null){if(Array.isArray(r))return r[0];let i=eo(t[tn]);return fi(i,r)}else return fi(t,n.next)}}}return null}function af(t,n){if(n!==null){let r=t[tn][qt],i=n.projection;return r.projection[i]}return null}function fa(t,n){let o=xt+t+1;if(o<n.length){let r=n[o],i=r[He].firstChild;if(i!==null)return fi(r,i)}return n[$n]}function ov(t,n,o){let r=oc(t,n);r&&Xm(t,r,n,o)}function ic(t,n,o,r,i,e,m){for(;o!=null;){let b=r[o.index],C=o.type;if(m&&n===0&&(b&&Dr(xn(b),r),o.flags|=2),(o.flags&32)!==32)if(C&8)ic(t,n,o.child,r,i,e,!1),gr(n,t,i,b,e);else if(C&32){let D=rc(o,r),_;for(;_=D();)gr(n,t,i,_,e);gr(n,t,i,b,e)}else C&16?iv(t,n,r,o,i,e):gr(n,t,i,b,e);o=m?o.projectionNext:o.next}}function ji(t,n,o,r,i,e){ic(o,r,t.firstChild,n,i,e,!1)}function iv(t,n,o,r,i,e){let m=o[tn],C=m[qt].projection[r.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++){let _=C[D];gr(n,t,i,_,e)}else{let D=C,_=m[mt];qd(r)&&(D.flags|=128),ic(t,n,D,_,i,e,!0)}}function sv(t,n,o,r,i){let e=o[$n],m=xn(o);e!==m&&gr(n,t,r,e,i);for(let b=xt;b<o.length;b++){let C=o[b];ji(C[He],C,t,n,r,e)}}function av(t,n,o){t.setAttribute(n,"style",o)}function cf(t,n,o){o===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",o)}function uf(t,n,o){let{mergedAttrs:r,classes:i,styles:e}=o;r!==null&&Zs(t,n,r),i!==null&&cf(t,n,i),e!==null&&av(t,n,e)}var lf={};function cv(t,n,o,r){if(!r)if((n[Oe]&3)===3){let e=t.preOrderCheckHooks;e!==null&&ui(n,e,o)}else{let e=t.preOrderHooks;e!==null&&li(n,e,0,o)}Wn(o)}function sc(t,n=Ve.Default){let o=bt();if(o===null)return Re(t,n);let r=mn();return Hd(r,o,Ut(t),n)}function df(){let t="invalid";throw new Error(t)}function ff(t,n,o,r,i,e){let m=Xe(null);try{let b=null;i&An.SignalBased&&(b=n[r][Ru]),b!==null&&b.transformFn!==void 0&&(e=b.transformFn(e)),i&An.HasDecoratorInputTransform&&(e=t.inputTransforms[r].call(n,e)),t.setInput!==null?t.setInput(n,b,e,o,r):vd(n,b,r,e)}finally{Xe(m)}}function uv(t,n){let o=t.hostBindingOpCodes;if(o!==null)try{for(let r=0;r<o.length;r++){let i=o[r];if(i<0)Wn(~i);else{let e=i,m=o[++r],b=o[++r];im(m,e);let C=n[e];b(2,C)}}}finally{Wn(-1)}}function Vi(t,n,o,r,i,e,m,b,C,D,_){let g=n.blueprint.slice();return g[pn]=i,g[Oe]=r|4|128|8|64,(D!==null||t&&t[Oe]&2048)&&(g[Oe]|=2048),Sd(g),g[mt]=g[so]=t,g[Rn]=o,g[en]=m||t&&t[en],g[ln]=b||t&&t[ln],g[Ir]=C||t&&t[Ir]||null,g[qt]=e,g[ki]=Mm(),g[yi]=_,g[hd]=D,g[tn]=n.type==2?t[tn]:g,g}function pf(t,n,o,r,i){let e=t.data[n];if(e===null)e=lv(t,n,o,r,i),om()&&(e.flags|=32);else if(e.type&64){e.type=o,e.value=r,e.attrs=i;let m=tm();e.injectorIndex=m===null?-1:m.injectorIndex}return qa(e,!0),e}function lv(t,n,o,r,i){let e=bd(),m=wd(),b=m?e:e&&e.parent,C=t.data[n]=yv(t,b,o,n,r,i);return t.firstChild===null&&(t.firstChild=C),e!==null&&(m?e.child==null&&C.parent!==null&&(e.child=C):e.next===null&&(e.next=C,C.prev=e)),C}function hf(t,n,o,r){if(o===0)return-1;let i=n.length;for(let e=0;e<o;e++)n.push(r),t.blueprint.push(r),t.data.push(null);return i}function gf(t,n,o,r,i){let e=cm(),m=r&2;try{Wn(-1),m&&n.length>Tr&&cv(t,n,Tr,!1),wn(m?2:0,i),o(r,i)}finally{Wn(e),wn(m?3:1,i)}}function mf(t,n,o){if(md(n)){let r=Xe(null);try{let i=n.directiveStart,e=n.directiveEnd;for(let m=i;m<e;m++){let b=t.data[m];if(b.contentQueries){let C=o[m];b.contentQueries(1,C,m)}}}finally{Xe(r)}}}function dv(t,n,o){Td()&&(Tv(t,n,o,gn(o,n)),(o.flags&64)===64&&Cf(t,n,o))}function fv(t,n,o=gn){let r=n.localNames;if(r!==null){let i=n.index+1;for(let e=0;e<r.length;e+=2){let m=r[e+1],b=m===-1?o(n,t):t[m];t[i++]=b}}}function vf(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=yf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function yf(t,n,o,r,i,e,m,b,C,D,_){let g=Tr+r,v=g+i,E=pv(g,v),l=typeof D=="function"?D():D;return E[He]={type:t,blueprint:E,template:o,queries:null,viewQuery:b,declTNode:n,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof e=="function"?e():e,pipeRegistry:typeof m=="function"?m():m,firstChild:null,schemas:C,consts:l,incompleteFirstPass:!1,ssrId:_}}function pv(t,n){let o=[];for(let r=0;r<n;r++)o.push(r<t?null:lf);return o}function hv(t,n,o,r){let e=r.get(jm,Jd)||o===Jt.ShadowDom,m=t.selectRootElement(n,e);return gv(m),m}function gv(t){mv(t)}var mv=()=>null;function vv(t,n,o,r){let i=Lv(n);i.push(o),t.firstCreatePass&&Pv(t).push(r,i.length-1)}function yv(t,n,o,r,i,e){let m=n?n.injectorIndex:-1,b=0;return Xg()&&(b|=128),{type:o,index:r,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:i,attrs:e,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xl(t,n,o,r,i){for(let e in n){if(!n.hasOwnProperty(e))continue;let m=n[e];if(m===void 0)continue;r??={};let b,C=An.None;Array.isArray(m)?(b=m[0],C=m[1]):b=m;let D=e;if(i!==null){if(!i.hasOwnProperty(e))continue;D=i[e]}t===0?Nl(r,o,D,b,C):Nl(r,o,D,b)}return r}function Nl(t,n,o,r,i){let e;t.hasOwnProperty(o)?(e=t[o]).push(n,r):e=t[o]=[n,r],i!==void 0&&e.push(i)}function Ev(t,n,o){let r=n.directiveStart,i=n.directiveEnd,e=t.data,m=n.attrs,b=[],C=null,D=null;for(let _=r;_<i;_++){let g=e[_],v=o?o.get(g):null,E=v?v.inputs:null,l=v?v.outputs:null;C=xl(0,g.inputs,_,C,E),D=xl(1,g.outputs,_,D,l);let u=C!==null&&m!==null&&!Ba(n)?Mv(C,_,m):null;b.push(u)}C!==null&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=b,n.inputs=C,n.outputs=D}function Cv(t,n,o,r){if(Td()){let i=r===null?null:{"":-1},e=wv(t,o),m,b;e===null?m=b=null:[m,b]=e,m!==null&&Ef(t,n,o,m,i,b),i&&Dv(o,r,i)}o.mergedAttrs=Ua(o.mergedAttrs,o.attrs)}function Ef(t,n,o,r,i,e){for(let D=0;D<r.length;D++)Sm(Ud(o,n),t,r[D].type);_v(o,t.data.length,r.length);for(let D=0;D<r.length;D++){let _=r[D];_.providersResolver&&_.providersResolver(_)}let m=!1,b=!1,C=hf(t,n,r.length,null);for(let D=0;D<r.length;D++){let _=r[D];o.mergedAttrs=Ua(o.mergedAttrs,_.hostAttrs),Rv(t,o,n,C,_),Av(C,_,i),_.contentQueries!==null&&(o.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(o.flags|=64);let g=_.type.prototype;!m&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),m=!0),!b&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),b=!0),C++}Ev(t,o,e)}function Sv(t,n,o,r,i){let e=i.hostBindings;if(e){let m=t.hostBindingOpCodes;m===null&&(m=t.hostBindingOpCodes=[]);let b=~n.index;Iv(m)!=b&&m.push(b),m.push(o,r,e)}}function Iv(t){let n=t.length;for(;n>0;){let o=t[--n];if(typeof o=="number"&&o<0)return o}return 0}function Tv(t,n,o,r){let i=o.directiveStart,e=o.directiveEnd;Wa(o)&&xv(n,o,t.data[i+o.componentOffset]),t.firstCreatePass||Ud(o,n),Dr(r,n);let m=o.initialInputs;for(let b=i;b<e;b++){let C=t.data[b],D=wr(n,t,b,o);if(Dr(D,n),m!==null&&Nv(n,b-i,D,C,o,m),co(C)){let _=uo(o.index,n);_[Rn]=wr(n,t,b,o)}}}function Cf(t,n,o){let r=o.directiveStart,i=o.directiveEnd,e=o.index,m=sm();try{Wn(e);for(let b=r;b<i;b++){let C=t.data[b],D=n[b];oa(b),(C.hostBindings!==null||C.hostVars!==0||C.hostAttrs!==null)&&bv(C,D)}}finally{Wn(-1),oa(m)}}function bv(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function wv(t,n){let o=t.directiveRegistry,r=null,i=null;if(o)for(let e=0;e<o.length;e++){let m=o[e];if(fg(n,m.selectors,!1))if(r||(r=[]),co(m))if(m.findHostDirectiveDefs!==null){let b=[];i=i||new Map,m.findHostDirectiveDefs(m,b,i),r.unshift(...b,m);let C=b.length;pa(t,n,C)}else r.unshift(m),pa(t,n,0);else i=i||new Map,m.findHostDirectiveDefs?.(m,r,i),r.push(m)}return r===null?null:[r,i]}function pa(t,n,o){n.componentOffset=o,(t.components??=[]).push(n.index)}function Dv(t,n,o){if(n){let r=t.localNames=[];for(let i=0;i<n.length;i+=2){let e=o[n[i+1]];if(e==null)throw new Ae(-301,!1);r.push(n[i],e)}}}function Av(t,n,o){if(o){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)o[n.exportAs[r]]=t;co(n)&&(o[""]=t)}}function _v(t,n,o){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+o,t.providerIndexes=n}function Rv(t,n,o,r,i){t.data[r]=i;let e=i.factory||(i.factory=Cr(i.type,!0)),m=new to(e,co(i),sc);t.blueprint[r]=m,o[r]=m,Sv(t,n,r,hf(t,o,i.hostVars,lf),i)}function xv(t,n,o){let r=gn(n,t),i=vf(o),e=t[en].rendererFactory,m=16;o.signals?m=4096:o.onPush&&(m=64);let b=ac(t,Vi(t,i,null,m,r,n,null,e.createRenderer(r,o),null,null,null));t[n.index]=b}function Nv(t,n,o,r,i,e){let m=e[n];if(m!==null)for(let b=0;b<m.length;){let C=m[b++],D=m[b++],_=m[b++],g=m[b++];ff(r,o,C,D,_,g)}}function Mv(t,n,o){let r=null,i=0;for(;i<o.length;){let e=o[i];if(e===0){i+=4;continue}else if(e===5){i+=2;continue}if(typeof e=="number")break;if(t.hasOwnProperty(e)){r===null&&(r=[]);let m=t[e];for(let b=0;b<m.length;b+=3)if(m[b]===n){r.push(e,m[b+1],m[b+2],o[i+1]);break}}i+=2}return r}function Ov(t,n,o,r){return[t,!0,0,n,null,r,null,o,null,null]}function Sf(t,n){let o=t.contentQueries;if(o!==null){let r=Xe(null);try{for(let i=0;i<o.length;i+=2){let e=o[i],m=o[i+1];if(m!==-1){let b=t.data[m];Ka(e),b.contentQueries(2,n[m],m)}}}finally{Xe(r)}}}function ac(t,n){return t[Xr]?t[El][Wt]=n:t[Xr]=n,t[El]=n,n}function ha(t,n,o){Ka(0);let r=Xe(null);try{n(t,o)}finally{Xe(r)}}function Lv(t){return t[Ei]||(t[Ei]=[])}function Pv(t){return t.cleanup||(t.cleanup=[])}function kv(t,n){let o=t[Ir],r=o?o.get(nn,null):null;r&&r.handleError(n)}function If(t,n,o,r,i){for(let e=0;e<o.length;){let m=o[e++],b=o[e++],C=o[e++],D=n[m],_=t.data[m];ff(_,D,r,b,C,i)}}function Fv(t,n){let o=uo(n,t),r=o[He];Uv(r,o);let i=o[pn];i!==null&&o[yi]===null&&(o[yi]=nc(i,o[Ir])),cc(r,o,o[Rn])}function Uv(t,n){for(let o=n.length;o<t.blueprint.length;o++)n.push(t.blueprint[o])}function cc(t,n,o){Ya(n);try{let r=t.viewQuery;r!==null&&ha(1,r,o);let i=t.template;i!==null&&gf(t,n,i,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),n[dn]?.finishViewCreation(t),t.staticContentQueries&&Sf(t,n),t.staticViewQueries&&ha(2,t.viewQuery,o);let e=t.components;e!==null&&Bv(n,e)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[Oe]&=-5,Qa()}}function Bv(t,n){for(let o=0;o<n.length;o++)Fv(t,n[o])}function jv(t,n,o,r){let i=Xe(null);try{let e=n.tView,b=t[Oe]&4096?4096:16,C=Vi(t,e,o,b,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),D=t[n.index];C[ao]=D;let _=t[dn];return _!==null&&(C[dn]=_.createEmbeddedView(e)),cc(e,C,o),C}finally{Xe(i)}}function Ml(t,n){return!n||n.firstChild===null||qd(t)}function Vv(t,n,o,r=!0){let i=n[He];if(zm(i,n,t,o),r){let m=fa(o,t),b=n[ln],C=oc(b,t[$n]);C!==null&&Wm(i,t[qt],b,n,C,m)}let e=n[yi];e!==null&&e.firstChild!==null&&(e.firstChild=null)}function bi(t,n,o,r,i=!1){for(;o!==null;){let e=n[o.index];e!==null&&r.push(xn(e)),hn(e)&&Hv(e,r);let m=o.type;if(m&8)bi(t,n,o.child,r);else if(m&32){let b=rc(o,n),C;for(;C=b();)r.push(C)}else if(m&16){let b=af(n,o);if(Array.isArray(b))r.push(...b);else{let C=eo(n[tn]);bi(C[He],C,b,r,!0)}}o=i?o.projectionNext:o.next}return r}function Hv(t,n){for(let o=xt;o<t.length;o++){let r=t[o],i=r[He].firstChild;i!==null&&bi(r[He],r,i,n)}t[$n]!==t[pn]&&n.push(t[$n])}var Tf=[];function $v(t){return t[Hn]??Wv(t)}function Wv(t){let n=Tf.pop()??Object.create(zv);return n.lView=t,n}function Gv(t){t.lView[Hn]!==t&&(t.lView=null,Tf.push(t))}var zv=We(fe({},xu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Jr(t.lView)},consumerOnSignalRead(){this.lView[Hn]=this}}),bf=100;function wf(t,n=!0,o=0){let r=t[en],i=r.rendererFactory,e=!1;e||i.begin?.();try{qv(t,o)}catch(m){throw n&&kv(t,m),m}finally{e||(i.end?.(),r.inlineEffectRunner?.flush())}}function qv(t,n){ga(t,n);let o=0;for(;za(t);){if(o===bf)throw new Ae(103,!1);o++,ga(t,1)}}function Kv(t,n,o,r){let i=n[Oe];if((i&256)===256)return;let e=!1;!e&&n[en].inlineEffectRunner?.flush(),Ya(n);let m=null,b=null;!e&&Yv(t)&&(b=$v(n),m=Nu(b));try{Sd(n),rm(t.bindingStartIndex),o!==null&&gf(t,n,o,2,r);let C=(i&3)===3;if(!e)if(C){let g=t.preOrderCheckHooks;g!==null&&ui(n,g,null)}else{let g=t.preOrderHooks;g!==null&&li(n,g,0,null),Vs(n,0)}if(Qv(n),Df(n,0),t.contentQueries!==null&&Sf(t,n),!e)if(C){let g=t.contentCheckHooks;g!==null&&ui(n,g)}else{let g=t.contentHooks;g!==null&&li(n,g,1),Vs(n,1)}uv(t,n);let D=t.components;D!==null&&_f(n,D,0);let _=t.viewQuery;if(_!==null&&ha(2,_,r),!e)if(C){let g=t.viewCheckHooks;g!==null&&ui(n,g)}else{let g=t.viewHooks;g!==null&&li(n,g,2),Vs(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[js]){for(let g of n[js])g();n[js]=null}e||(n[Oe]&=-73)}catch(C){throw Jr(n),C}finally{b!==null&&(Mu(b,m),Gv(b)),Qa()}}function Yv(t){return t.type!==2}function Df(t,n){for(let o=Yd(t);o!==null;o=Qd(o))for(let r=xt;r<o.length;r++){let i=o[r];Af(i,n)}}function Qv(t){for(let n=Yd(t);n!==null;n=Qd(n)){if(!(n[Oe]&$a.HasTransplantedViews))continue;let o=n[br];for(let r=0;r<o.length;r++){let i=o[r],e=i[mt];qg(i)}}}function Zv(t,n,o){let r=uo(n,t);Af(r,o)}function Af(t,n){Ga(t)&&ga(t,n)}function ga(t,n){let r=t[He],i=t[Oe],e=t[Hn],m=!!(n===0&&i&16);if(m||=!!(i&64&&n===0),m||=!!(i&1024),m||=!!(e?.dirty&&Ss(e)),e&&(e.dirty=!1),t[Oe]&=-9217,m)Kv(r,t,r.template,t[Rn]);else if(i&8192){Df(t,1);let b=r.components;b!==null&&_f(t,b,1)}}function _f(t,n,o){for(let r=0;r<n.length;r++)Zv(t,n[r],o)}function Rf(t){for(t[en].changeDetectionScheduler?.notify();t;){t[Oe]|=64;let n=eo(t);if(kg(t)&&!n)return t;t=n}return null}var Gn=class{get rootNodes(){let n=this._lView,o=n[He];return bi(o,n,o.firstChild,[])}constructor(n,o,r=!0){this._lView=n,this._cdRefInjectingView=o,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(n){this._lView[Rn]=n}get destroyed(){return(this._lView[Oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[mt];if(hn(n)){let o=n[Ci],r=o?o.indexOf(this):-1;r>-1&&(da(n,r),mi(o,r))}this._attachedToViewContainer=!1}of(this._lView[He],this._lView)}onDestroy(n){Id(this._lView,n)}markForCheck(){Rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Oe]&=-129}reattach(){ra(this._lView),this._lView[Oe]|=128}detectChanges(){this._lView[Oe]|=1024,wf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,nf(this._lView[He],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=n,ra(this._lView)}},no=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=ey;let t=n;return t})(),Xv=no,Jv=class extends Xv{constructor(n,o,r){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,r){let i=jv(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:o,dehydratedView:r});return new Gn(i)}};function ey(){return uc(mn(),bt())}function uc(t,n){return t.type&4?new Jv(n,t,_r(t,n)):null}var kD=new RegExp(`^(\\d+)*(${Um}|${Fm})*(.*)`);var ty=()=>null;function Ol(t,n){return ty(t,n)}var wi=class{},ma=class{},Di=class{};function ny(t){let n=Error(`No component factory found for ${Rt(t)}.`);return n[ry]=t,n}var ry="ngComponent";var va=class{resolveComponentFactory(n){throw ny(n)}},Hi=(()=>{let n=class n{};n.NULL=new va;let t=n;return t})(),ro=class{};var oy=(()=>{let n=class n{};n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>null});let t=n;return t})(),zs={};var Ll=new Set;function lc(t){Ll.has(t)||(Ll.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Pl(...t){}function iy(){let t=typeof _t.requestAnimationFrame=="function",n=_t[t?"requestAnimationFrame":"setTimeout"],o=_t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&o){let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);let i=o[Zone.__symbol__("OriginalDelegate")];i&&(o=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:o}}var rt=class t{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&o,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=iy().nativeRequestAnimationFrame,cy(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Ae(909,!1)}run(n,o,r){return this._inner.run(n,o,r)}runTask(n,o,r,i){let e=this._inner,m=e.scheduleEventTask("NgZoneEvent: "+i,n,sy,Pl,Pl);try{return e.runTask(m,o,r)}finally{e.cancelTask(m)}}runGuarded(n,o,r){return this._inner.runGuarded(n,o,r)}runOutsideAngular(n){return this._outer.run(n)}},sy={};function dc(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ay(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ya(t),t.isCheckStableRunning=!0,dc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ya(t))}function cy(t){let n=()=>{ay(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,r,i,e,m,b)=>{if(uy(b))return o.invokeTask(i,e,m,b);try{return kl(t),o.invokeTask(i,e,m,b)}finally{(t.shouldCoalesceEventChangeDetection&&e.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),Fl(t)}},onInvoke:(o,r,i,e,m,b,C)=>{try{return kl(t),o.invoke(i,e,m,b,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),Fl(t)}},onHasTask:(o,r,i,e)=>{o.hasTask(i,e),r===i&&(e.change=="microTask"?(t._hasPendingMicrotasks=e.microTask,ya(t),dc(t)):e.change=="macroTask"&&(t.hasPendingMacrotasks=e.macroTask))},onHandleError:(o,r,i,e)=>(o.handleError(i,e),t.runOutsideAngular(()=>t.onError.emit(e)),!1)})}function ya(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function kl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Fl(t){t._nesting--,dc(t)}var Ea=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(n,o,r){return n.apply(o,r)}runGuarded(n,o,r){return n.apply(o,r)}runOutsideAngular(n){return n()}runTask(n,o,r,i){return n.apply(o,r)}};function uy(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function ly(t="zone.js",n){return t==="noop"?new Ea:t==="zone.js"?new rt(n):t}var mr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(mr||{}),dy={destroy(){}};function $i(t,n){!n&&Mg($i);let o=n?.injector??ge(rn);if(!Vm(o))return dy;lc("NgAfterNextRender");let r=o.get(fc),i=r.handler??=new Sa,e=n?.phase??mr.MixedReadWrite,m=()=>{i.unregister(C),b()},b=o.get(Ja).onDestroy(m),C=fn(o,()=>new Ca(e,()=>{m(),t()}));return i.register(C),{destroy:m}}var Ca=class{constructor(n,o){this.phase=n,this.callbackFn=o,this.zone=ge(rt),this.errorHandler=ge(nn,{optional:!0}),ge(wi,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}},Sa=class{constructor(){this.executingCallbacks=!1,this.buckets={[mr.EarlyRead]:new Set,[mr.Write]:new Set,[mr.MixedReadWrite]:new Set,[mr.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let o of n)o.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(let n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}},fc=(()=>{let n=class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>new n});let t=n;return t})();function Ia(t,n,o){let r=o?t.styles:null,i=o?t.classes:null,e=0;if(n!==null)for(let m=0;m<n.length;m++){let b=n[m];if(typeof b=="number")e=b;else if(e==1)i=ul(i,b);else if(e==2){let C=b,D=n[++m];r=ul(r,C+": "+D+";")}}o?t.styles=r:t.stylesWithoutHost=r,o?t.classes=i:t.classesWithoutHost=i}var Ai=class extends Hi{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let o=_n(n);return new Ar(o,this.ngModule)}};function Ul(t){let n=[];for(let o in t){if(!t.hasOwnProperty(o))continue;let r=t[o];r!==void 0&&n.push({propName:Array.isArray(r)?r[0]:r,templateName:o})}return n}function fy(t){let n=t.toLowerCase();return n==="svg"?jg:n==="math"?Vg:null}var Ta=class{constructor(n,o){this.injector=n,this.parentInjector=o}get(n,o,r){r=Oi(r);let i=this.injector.get(n,zs,r);return i!==zs||o===zs?i:this.parentInjector.get(n,o,r)}},Ar=class extends Di{get inputs(){let n=this.componentDef,o=n.inputTransforms,r=Ul(n.inputs);if(o!==null)for(let i of r)o.hasOwnProperty(i.propName)&&(i.transform=o[i.propName]);return r}get outputs(){return Ul(this.componentDef.outputs)}constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=mg(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}create(n,o,r,i){let e=Xe(null);try{i=i||this.ngModule;let m=i instanceof Tt?i:i?.injector;m&&this.componentDef.getStandaloneInjector!==null&&(m=this.componentDef.getStandaloneInjector(m)||m);let b=m?new Ta(n,m):n,C=b.get(ro,null);if(C===null)throw new Ae(407,!1);let D=b.get(oy,null),_=b.get(fc,null),g=b.get(wi,null),v={rendererFactory:C,sanitizer:D,inlineEffectRunner:null,afterRenderEventManager:_,changeDetectionScheduler:g},E=C.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?hv(E,r,this.componentDef.encapsulation,b):tf(E,l,fy(l)),a=512;this.componentDef.signals?a|=4096:this.componentDef.onPush||(a|=16);let y=null;u!==null&&(y=nc(u,b,!0));let p=yf(0,null,null,1,0,null,null,null,null,null,null),s=Vi(null,p,null,a,null,null,v,E,b,null,y);Ya(s);let d,c;try{let S=this.componentDef,h,I=null;S.findHostDirectiveDefs?(h=[],I=new Map,S.findHostDirectiveDefs(S,h,I),h.push(S)):h=[S];let f=py(s,u),T=hy(f,u,S,h,s,v,E);c=Wg(p,Tr),u&&vy(E,S,u,r),o!==void 0&&yy(c,this.ngContentSelectors,o),d=my(T,S,h,I,s,[Ey]),cc(p,s,null)}finally{Qa()}return new ba(this.componentType,d,_r(c,s),s,c)}finally{Xe(e)}}},ba=class extends ma{constructor(n,o,r,i,e){super(),this.location=r,this._rootLView=i,this._tNode=e,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new Gn(i,void 0,!1),this.componentType=n}setInput(n,o){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),o))return;let e=this._rootLView;If(e[He],e,i,n,o),this.previousInputValues.set(n,o);let m=uo(this._tNode.index,e);Rf(m)}}get injector(){return new Vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function py(t,n){let o=t[He],r=Tr;return t[r]=n,pf(o,r,2,"#host",null)}function hy(t,n,o,r,i,e,m){let b=i[He];gy(r,t,n,m);let C=null;n!==null&&(C=nc(n,i[Ir]));let D=e.rendererFactory.createRenderer(n,o),_=16;o.signals?_=4096:o.onPush&&(_=64);let g=Vi(i,vf(o),null,_,i[t.index],t,e,D,null,null,C);return b.firstCreatePass&&pa(b,t,r.length-1),ac(i,g),i[t.index]=g}function gy(t,n,o,r){for(let i of t)n.mergedAttrs=Ua(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(Ia(n,n.mergedAttrs,!0),o!==null&&uf(r,o,n))}function my(t,n,o,r,i,e){let m=mn(),b=i[He],C=gn(m,i);Ef(b,i,m,o,null,r);for(let _=0;_<o.length;_++){let g=m.directiveStart+_,v=wr(i,b,g,m);Dr(v,i)}Cf(b,i,m),C&&Dr(C,i);let D=wr(i,b,m.directiveStart+m.componentOffset,m);if(t[Rn]=i[Rn]=D,e!==null)for(let _ of e)_(D,n);return mf(b,m,i),D}function vy(t,n,o,r){if(r)Zs(t,o,["ng-version","17.3.12"]);else{let{attrs:i,classes:e}=vg(n.selectors[0]);i&&Zs(t,o,i),e&&e.length>0&&cf(t,o,e.join(" "))}}function yy(t,n,o){let r=t.projection=[];for(let i=0;i<n.length;i++){let e=o[i];r.push(e!=null?Array.from(e):null)}}function Ey(){let t=mn();Od(bt()[He],t)}var Rr=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=Cy;let t=n;return t})();function Cy(){let t=mn();return Nf(t,bt())}var Sy=Rr,xf=class extends Sy{constructor(n,o,r){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=r}get element(){return _r(this._hostTNode,this._hostLView)}get injector(){return new Vn(this._hostTNode,this._hostLView)}get parentInjector(){let n=Za(this._hostTNode,this._hostLView);if(Pd(n)){let o=Ii(n,this._hostLView),r=Si(n),i=o[He].data[r+8];return new Vn(i,o)}else return new Vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let o=Bl(this._lContainer);return o!==null&&o[n]||null}get length(){return this._lContainer.length-xt}createEmbeddedView(n,o,r){let i,e;typeof r=="number"?i=r:r!=null&&(i=r.index,e=r.injector);let m=Ol(this._lContainer,n.ssrId),b=n.createEmbeddedViewImpl(o||{},e,m);return this.insertImpl(b,i,Ml(this._hostTNode,m)),b}createComponent(n,o,r,i,e){let m=n&&!Lg(n),b;if(m)b=o;else{let l=o||{};b=l.index,r=l.injector,i=l.projectableNodes,e=l.environmentInjector||l.ngModuleRef}let C=m?n:new Ar(_n(n)),D=r||this.parentInjector;if(!e&&C.ngModule==null){let u=(m?D:this.parentInjector).get(Tt,null);u&&(e=u)}let _=_n(C.componentType??{}),g=Ol(this._lContainer,_?.id??null),v=g?.firstChild??null,E=C.create(D,i,v,e);return this.insertImpl(E.hostView,b,Ml(this._hostTNode,g)),E}insert(n,o){return this.insertImpl(n,o,!0)}insertImpl(n,o,r){let i=n._lView;if(zg(i)){let b=this.indexOf(n);if(b!==-1)this.detach(b);else{let C=i[mt],D=new xf(C,C[qt],C[mt]);D.detach(D.indexOf(n))}}let e=this._adjustIndex(o),m=this._lContainer;return Vv(m,i,e,r),n.attachToViewContainerRef(),Jl(qs(m),e,n),n}move(n,o){return this.insert(n,o)}indexOf(n){let o=Bl(this._lContainer);return o!==null?o.indexOf(n):-1}remove(n){let o=this._adjustIndex(n,-1),r=da(this._lContainer,o);r&&(mi(qs(this._lContainer),o),of(r[He],r))}detach(n){let o=this._adjustIndex(n,-1),r=da(this._lContainer,o);return r&&mi(qs(this._lContainer),o)!=null?new Gn(r):null}_adjustIndex(n,o=0){return n??this.length+o}};function Bl(t){return t[Ci]}function qs(t){return t[Ci]||(t[Ci]=[])}function Nf(t,n){let o,r=n[t.index];return hn(r)?o=r:(o=Ov(r,n,null,t),n[t.index]=o,ac(n,o)),Ty(o,n,t,r),new xf(o,t,n)}function Iy(t,n){let o=t[ln],r=o.createComment(""),i=gn(n,t),e=oc(o,i);return Ti(o,e,r,Jm(o,i),!1),r}var Ty=by;function by(t,n,o,r){if(t[$n])return;let i;o.type&8?i=xn(r):i=Iy(n,o),t[$n]=i}var wa=class t{constructor(n){this.queryList=n,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Da=class t{constructor(n=[]){this.queries=n}createEmbeddedView(n){let o=n.queries;if(o!==null){let r=n.contentQueries!==null?n.contentQueries[0]:o.length,i=[];for(let e=0;e<r;e++){let m=o.getByIndex(e),b=this.queries[m.indexInDeclarationView];i.push(b.clone())}return new t(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)pc(n,o).matches!==null&&this.queries[o].setDirty()}},Aa=class{constructor(n,o,r=null){this.flags=o,this.read=r,typeof n=="string"?this.predicate=My(n):this.predicate=n}},_a=class t{constructor(n=[]){this.queries=n}elementStart(n,o){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let r=0;r<this.length;r++){let i=o!==null?o.length:0,e=this.getByIndex(r).embeddedTView(n,i);e&&(e.indexInDeclarationView=r,o!==null?o.push(e):o=[e])}return o!==null?new t(o):null}template(n,o){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Ra=class t{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let o=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==o;)r=r.parent;return o===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,o){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let e=r[i];this.matchTNodeWithReadOption(n,o,wy(o,e)),this.matchTNodeWithReadOption(n,o,di(o,n,e,!1,!1))}else r===no?o.type&4&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,di(o,n,r,!1,!1))}matchTNodeWithReadOption(n,o,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===zn||i===Rr||i===no&&o.type&4)this.addMatch(o.index,-2);else{let e=di(o,n,i,!1,!1);e!==null&&this.addMatch(o.index,e)}else this.addMatch(o.index,r)}}addMatch(n,o){this.matches===null?this.matches=[n,o]:this.matches.push(n,o)}};function wy(t,n){let o=t.localNames;if(o!==null){for(let r=0;r<o.length;r+=2)if(o[r]===n)return o[r+1]}return null}function Dy(t,n){return t.type&11?_r(t,n):t.type&4?uc(t,n):null}function Ay(t,n,o,r){return o===-1?Dy(n,t):o===-2?_y(t,n,r):wr(t,t[He],o,n)}function _y(t,n,o){if(o===zn)return _r(n,t);if(o===no)return uc(n,t);if(o===Rr)return Nf(n,t)}function Mf(t,n,o,r){let i=n[dn].queries[r];if(i.matches===null){let e=t.data,m=o.matches,b=[];for(let C=0;m!==null&&C<m.length;C+=2){let D=m[C];if(D<0)b.push(null);else{let _=e[D];b.push(Ay(n,_,m[C+1],o.metadata.read))}}i.matches=b}return i.matches}function xa(t,n,o,r){let i=t.queries.getByIndex(o),e=i.matches;if(e!==null){let m=Mf(t,n,i,o);for(let b=0;b<e.length;b+=2){let C=e[b];if(C>0)r.push(m[b/2]);else{let D=e[b+1],_=n[-C];for(let g=xt;g<_.length;g++){let v=_[g];v[ao]===v[mt]&&xa(v[He],v,D,r)}if(_[br]!==null){let g=_[br];for(let v=0;v<g.length;v++){let E=g[v];xa(E[He],E,D,r)}}}}}return r}function Ry(t,n){return t[dn].queries[n].queryList}function xy(t,n,o){let r=new ua((o&4)===4);return vv(t,n,r,r.destroy),(n[dn]??=new Da).queries.push(new wa(r))-1}function Ny(t,n,o){let r=Ui();return r.firstCreatePass&&(Oy(r,new Aa(t,n,o),-1),(n&2)===2&&(r.staticViewQueries=!0)),xy(r,bt(),n)}function My(t){return t.split(",").map(n=>n.trim())}function Oy(t,n,o){t.queries===null&&(t.queries=new _a),t.queries.track(new Ra(n,o))}function pc(t,n){return t.queries.getByIndex(n)}function Ly(t,n){let o=t[He],r=pc(o,n);return r.crossesNgTemplate?xa(o,t,n,[]):Mf(o,t,r,n)}function Py(t){let n=[],o=new Map;function r(i){let e=o.get(i);if(!e){let m=t(i);o.set(i,e=m.then(By))}return e}return _i.forEach((i,e)=>{let m=[];i.templateUrl&&m.push(r(i.templateUrl).then(D=>{i.template=D}));let b=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=b,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let D=i.styles.length,_=i.styleUrls;i.styleUrls.forEach((g,v)=>{b.push(""),m.push(r(g).then(E=>{b[D+v]=E,_.splice(_.indexOf(g),1),_.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&m.push(r(i.styleUrl).then(D=>{b.push(D),i.styleUrl=void 0}));let C=Promise.all(m).then(()=>jy(e));n.push(C)}),Fy(),Promise.all(n).then(()=>{})}var _i=new Map,ky=new Set;function Fy(){let t=_i;return _i=new Map,t}function Uy(){return _i.size===0}function By(t){return typeof t=="string"?t:t.text()}function jy(t){ky.delete(t)}var Nn=class{},oo=class{};var Ri=class extends Nn{constructor(n,o,r){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ai(this);let i=ad(n);this._bootstrapComponents=ef(i.bootstrap),this._r3Injector=Gd(n,o,[{provide:Nn,useValue:this},{provide:Hi,useValue:this.componentFactoryResolver},...r],Rt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},xi=class extends oo{constructor(n){super(),this.moduleType=n}create(n){return new Ri(this.moduleType,n,[])}};function Vy(t,n,o){return new Ri(t,n,o)}var Na=class extends Nn{constructor(n){super(),this.componentFactoryResolver=new Ai(this),this.instance=null;let o=new Zr([...n.providers,{provide:Nn,useValue:this},{provide:Hi,useValue:this.componentFactoryResolver}],n.parent||Ha(),n.debugName,new Set(["environment"]));this.injector=o,n.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Wi(t,n,o=null){return new Na({providers:t,parent:n,debugName:o,runEnvironmentInitializers:!0}).injector}var Gi=(()=>{let n=class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function Hy(t){return(t.flags&32)===32}function jl(t,n,o,r,i){let e=n.inputs,m=i?"class":"style";If(t,o,e[m],m,r)}function $y(t,n,o,r,i,e){let m=n.consts,b=Sl(m,i),C=pf(n,t,2,r,b);return Cv(n,o,C,Sl(m,e)),C.attrs!==null&&Ia(C,C.attrs,!1),C.mergedAttrs!==null&&Ia(C,C.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,C),C}function Of(t,n,o,r){let i=bt(),e=Ui(),m=Tr+t,b=i[ln],C=e.firstCreatePass?$y(m,e,i,n,o,r):e.data[m],D=Wy(e,i,C,b,n,t);i[m]=D;let _=Pg(C);return qa(C,!0),uf(b,D,C),!Hy(C)&&lm()&&rv(e,i,D,C),Yg()===0&&Dr(D,i),Qg(),_&&(dv(e,i,C),mf(e,C,i)),r!==null&&fv(i,C),Of}function Lf(){let t=mn();wd()?nm():(t=t.parent,qa(t,!1));let n=t;Jg(n)&&em(),Zg();let o=Ui();return o.firstCreatePass&&(Od(o,t),md(t)&&o.queries.elementEnd(t)),n.classesWithoutHost!=null&&gm(n)&&jl(o,n,bt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&mm(n)&&jl(o,n,bt(),n.stylesWithoutHost,!1),Lf}function lo(t,n,o,r){return Of(t,n,o,r),Lf(),lo}var Wy=(t,n,o,r,i,e)=>(dm(!0),tf(r,i,um()));var Ni="en-US";var Gy=Ni;function zy(t){typeof t=="string"&&(Gy=t.toLowerCase().replace(/_/g,"-"))}function Pf(t,n,o){Ny(t,n,o)}function hc(t){let n=bt(),o=Ui(),r=Dd();Ka(r+1);let i=pc(o,r);if(t.dirty&&Gg(n)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let e=Ly(n,r);t.reset(e,Rm),t.notifyOnChanges()}return!0}return!1}function gc(){return Ry(bt(),Dd())}var qy=(()=>{let n=class n{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ld(!1,r.type),e=i.length>0?Wi([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,e)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};n.\u0275prov=_e({token:n,providedIn:"environment",factory:()=>new n(Re(Tt))});let t=n;return t})();function kf(t){lc("NgStandalone"),t.getStandaloneInjector=n=>n.get(qy).getOrCreateStandaloneInjector(t)}var ai=null;function Ky(t){ai!==null&&(t.defaultEncapsulation!==ai.defaultEncapsulation||t.preserveWhitespaces!==ai.preserveWhitespaces)||(ai=t)}var zi=(()=>{let n=class n{log(r){console.log(r)}warn(r){console.warn(r)}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"});let t=n;return t})();var mc=new ke(""),fo=new ke(""),qi=(()=>{let n=class n{constructor(r,i,e){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,vc||(Yy(e),e.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,e){let m=-1;i&&i>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),r()},i)),this._callbacks.push({doneCb:r,timeoutId:m,updateCb:e})}whenStable(r,i,e){if(e&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,e),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,e){return[]}};n.\u0275fac=function(i){return new(i||n)(Re(rt),Re(Ki),Re(fo))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),Ki=(()=>{let n=class n{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return vc?.findTestabilityInTree(this,r,i)??null}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"});let t=n;return t})();function Yy(t){vc=t}var vc;function po(t){return!!t&&typeof t.then=="function"}function Ff(t){return!!t&&typeof t.subscribe=="function"}var Yi=new ke(""),Uf=(()=>{let n=class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ge(Yi,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let e of this.appInits){let m=e();if(po(m))r.push(m);else if(Ff(m)){let b=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});r.push(b)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(e=>{this.reject(e)}),r.length===0&&i(),this.initialized=!0}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),yc=new ke("");function Qy(){Lu(()=>{throw new Ae(600,!1)})}function Zy(t){return t.isBoundToModule}function Xy(t,n,o){try{let r=o();return po(r)?r.catch(i=>{throw n.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}function Bf(t,n){return Array.isArray(n)?n.reduce(Bf,t):fe(fe({},t),n)}var xr=(()=>{let n=class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ge(zd),this.afterRenderEffectManager=ge(fc),this.externalTestViews=new Set,this.beforeRender=new Ct,this.afterTick=new Ct,this.componentTypes=[],this.components=[],this.isStable=ge(Gi).hasPendingTasks.pipe(qe(r=>!r)),this._injector=ge(Tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let e=r instanceof Di;if(!this._injector.get(Uf).done){let E=!e&&sd(r),l=!1;throw new Ae(405,l)}let b;e?b=r:b=this._injector.get(Hi).resolveComponentFactory(r),this.componentTypes.push(b.componentType);let C=Zy(b)?void 0:this._injector.get(Nn),D=i||b.selector,_=b.create(rn.NULL,[],D,C),g=_.location.nativeElement,v=_.injector.get(mc,null);return v?.registerApplication(g),_.onDestroy(()=>{this.detachView(_.hostView),pi(this.components,_),v?.unregisterApplication(g)}),this._loadComponent(_),_}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Ae(101,!1);let i=Xe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(e){this.internalErrorHandler(e)}finally{this.afterTick.next(),this._runningTick=!1,Xe(i)}}detectChangesInAttachedViews(r){let i=0,e=this.afterRenderEffectManager;for(;;){if(i===bf)throw new Ae(103,!1);if(r){let m=i===0;this.beforeRender.next(m);for(let{_lView:b,notifyErrorHandler:C}of this._views)Jy(b,m,C)}if(i++,e.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:m})=>Ma(m))&&(e.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:m})=>Ma(m))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;pi(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(yc,[]);[...this._bootstrapListeners,...i].forEach(e=>e(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>pi(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Ae(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function pi(t,n){let o=t.indexOf(n);o>-1&&t.splice(o,1)}function Jy(t,n,o){!n&&!Ma(t)||eE(t,o,n)}function Ma(t){return za(t)}function eE(t,n,o){let r;o?(r=0,t[Oe]|=1024):t[Oe]&64?r=0:r=1,wf(t,n,r)}var Oa=class{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}},Qi=(()=>{let n=class n{compileModuleSync(r){return new xi(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),e=ad(r),m=ef(e.declarations).reduce((b,C)=>{let D=_n(C);return D&&b.push(new Ar(D)),b},[]);return new Oa(i,m)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),tE=new ke("");function nE(t,n,o){let r=new xi(o);return Promise.resolve(r)}function Vl(t){for(let n=t.length-1;n>=0;n--)if(t[n]!==void 0)return t[n]}var rE=(()=>{let n=class n{constructor(){this.zone=ge(rt),this.applicationRef=ge(xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function oE(t){return[{provide:rt,useFactory:t},{provide:Sr,multi:!0,useFactory:()=>{let n=ge(rE,{optional:!0});return()=>n.initialize()}},{provide:Sr,multi:!0,useFactory:()=>{let n=ge(aE);return()=>{n.initialize()}}},{provide:zd,useFactory:iE}]}function iE(){let t=ge(rt),n=ge(nn);return o=>t.runOutsideAngular(()=>n.handleError(o))}function sE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var aE=(()=>{let n=class n{constructor(){this.subscription=new ut,this.initialized=!1,this.zone=ge(rt),this.pendingTasks=ge(Gi)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{rt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{rt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function cE(){return typeof $localize<"u"&&$localize.locale||Ni}var Ec=new ke("",{providedIn:"root",factory:()=>ge(Ec,Ve.Optional|Ve.SkipSelf)||cE()});var jf=new ke(""),Vf=(()=>{let n=class n{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let e=ly(i?.ngZone,sE({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return e.run(()=>{let m=Vy(r.moduleType,this.injector,oE(()=>e)),b=m.injector.get(nn,null);return e.runOutsideAngular(()=>{let C=e.onError.subscribe({next:D=>{b.handleError(D)}});m.onDestroy(()=>{pi(this._modules,m),C.unsubscribe()})}),Xy(b,e,()=>{let C=m.injector.get(Uf);return C.runInitializers(),C.donePromise.then(()=>{let D=m.injector.get(Ec,Ni);return zy(D||Ni),this._moduleDoBootstrap(m),m})})})}bootstrapModule(r,i=[]){let e=Bf({},i);return nE(this.injector,e,r).then(m=>this.bootstrapModuleFactory(m,e))}_moduleDoBootstrap(r){let i=r.injector.get(xr);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(e=>i.bootstrap(e));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new Ae(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(jf,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};n.\u0275fac=function(i){return new(i||n)(Re(rn))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"});let t=n;return t})(),Kr=null,Hf=new ke("");function uE(t){if(Kr&&!Kr.get(Hf,!1))throw new Ae(400,!1);Qy(),Kr=t;let n=t.get(Vf);return fE(t),n}function Cc(t,n,o=[]){let r=`Platform: ${n}`,i=new ke(r);return(e=[])=>{let m=$f();if(!m||m.injector.get(Hf,!1)){let b=[...o,...e,{provide:i,useValue:!0}];t?t(b):uE(lE(b,r))}return dE(i)}}function lE(t=[],n){return rn.create({name:n,providers:[{provide:Pi,useValue:"platform"},{provide:jf,useValue:new Set([()=>Kr=null])},...t]})}function dE(t){let n=$f();if(!n)throw new Ae(401,!1);return n}function $f(){return Kr?.get(Vf)??null}function fE(t){t.get(ec,null)?.forEach(o=>o())}var ho=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=pE;let t=n;return t})();function pE(t){return hE(mn(),bt(),(t&16)===16)}function hE(t,n,o){if(Wa(t)&&!o){let r=uo(t.index,n);return new Gn(r,r)}else if(t.type&47){let r=n[tn];return new Gn(r,n)}return null}var Wf=Cc(null,"core",[]),Gf=(()=>{let n=class n{constructor(r){}};n.\u0275fac=function(i){return new(i||n)(Re(xr))},n.\u0275mod=zt({type:n}),n.\u0275inj=Gt({});let t=n;return t})();function zf(t){let n=_n(t);if(!n)return null;let o=new Ar(n);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var Zf=null;function Kn(){return Zf}function Xf(t){Zf??=t}var Zi=class{};var wt=new ke(""),Tc=(()=>{let n=class n{historyGo(r){throw new Error("")}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(EE),providedIn:"platform"});let t=n;return t})(),Jf=new ke(""),EE=(()=>{let n=class n extends Tc{constructor(){super(),this._doc=ge(wt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(r){let i=Kn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Kn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,e){this._history.pushState(r,i,e)}replaceState(r,i,e){this._history.replaceState(r,i,e)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>new n,providedIn:"platform"});let t=n;return t})();function bc(t,n){if(t.length==0)return n;if(n.length==0)return t;let o=0;return t.endsWith("/")&&o++,n.startsWith("/")&&o++,o==2?t+n.substring(1):o==1?t+n:t+"/"+n}function qf(t){let n=t.match(/#|\?|$/),o=n&&n.index||t.length,r=o-(t[o-1]==="/"?1:0);return t.slice(0,r)+t.slice(o)}function vn(t){return t&&t[0]!=="?"?"?"+t:t}var Yn=(()=>{let n=class n{historyGo(r){throw new Error("")}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(wc),providedIn:"root"});let t=n;return t})(),ep=new ke(""),wc=(()=>{let n=class n extends Yn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ge(wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return bc(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+vn(this._platformLocation.search),e=this._platformLocation.hash;return e&&r?`${i}${e}`:i}pushState(r,i,e,m){let b=this.prepareExternalUrl(e+vn(m));this._platformLocation.pushState(r,i,b)}replaceState(r,i,e,m){let b=this.prepareExternalUrl(e+vn(m));this._platformLocation.replaceState(r,i,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};n.\u0275fac=function(i){return new(i||n)(Re(Tc),Re(ep,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),tp=(()=>{let n=class n extends Yn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=bc(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,e,m){let b=this.prepareExternalUrl(e+vn(m));b.length==0&&(b=this._platformLocation.pathname),this._platformLocation.pushState(r,i,b)}replaceState(r,i,e,m){let b=this.prepareExternalUrl(e+vn(m));b.length==0&&(b=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};n.\u0275fac=function(i){return new(i||n)(Re(Tc),Re(ep,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),Mr=(()=>{let n=class n{constructor(r){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=IE(qf(Kf(i))),this._locationStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+vn(i))}normalize(r){return n.stripTrailingSlash(SE(this._basePath,Kf(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",e=null){this._locationStrategy.pushState(e,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vn(i)),e)}replaceState(r,i="",e=null){this._locationStrategy.replaceState(e,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vn(i)),e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(e=>e(r,i))}subscribe(r,i,e){return this._subject.subscribe({next:r,error:i,complete:e})}};n.normalizeQueryParams=vn,n.joinWithSlash=bc,n.stripTrailingSlash=qf,n.\u0275fac=function(i){return new(i||n)(Re(Yn))},n.\u0275prov=_e({token:n,factory:()=>CE(),providedIn:"root"});let t=n;return t})();function CE(){return new Mr(Re(Yn))}function SE(t,n){if(!t||!n.startsWith(t))return n;let o=n.substring(t.length);return o===""||["/",";","?","#"].includes(o[0])?o:n}function Kf(t){return t.replace(/\/index.html$/,"")}function IE(t){if(new RegExp("^(https?:)?//").test(t)){let[,o]=t.split(/\/\/[^\/]+/);return o}return t}function np(t,n){n=encodeURIComponent(n);for(let o of t.split(";")){let r=o.indexOf("="),[i,e]=r==-1?[o,""]:[o.slice(0,r),o.slice(r+1)];if(i.trim()===n)return decodeURIComponent(e)}return null}var rp=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=zt({type:n}),n.\u0275inj=Gt({});let t=n;return t})(),Dc="browser",TE="server";function bE(t){return t===Dc}function Ac(t){return t===TE}var op=(()=>{let n=class n{};n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>bE(ge(Mn))?new Sc(ge(wt),window):new Ic});let t=n;return t})(),Sc=class{constructor(n,o){this.document=n,this.window=o,this.offset=()=>[0,0]}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let o=wE(this.document,n);o&&(this.scrollToElement(o),o.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let o=n.getBoundingClientRect(),r=o.left+this.window.pageXOffset,i=o.top+this.window.pageYOffset,e=this.offset();this.window.scrollTo(r-e[0],i-e[1])}};function wE(t,n){let o=t.getElementById(n)||t.getElementsByName(n)[0];if(o)return o;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let e=i.shadowRoot;if(e){let m=e.getElementById(n)||e.querySelector(`[name="${n}"]`);if(m)return m}i=r.nextNode()}}return null}var Ic=class{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}},Xi=class{};var xc=class extends Zi{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Nc=class t extends xc{static makeCurrent(){Xf(new t)}onAndCancel(n,o,r){return n.addEventListener(o,r),()=>{n.removeEventListener(o,r)}}dispatchEvent(n,o){n.dispatchEvent(o)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,o){return o=o||this.getDefaultDocument(),o.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,o){return o==="window"?window:o==="document"?n:o==="body"?n.body:null}getBaseHref(n){let o=AE();return o==null?null:_E(o)}resetBaseElement(){go=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return np(document.cookie,n)}},go=null;function AE(){return go=go||document.querySelector("base"),go?go.getAttribute("href"):null}function _E(t){return new URL(t,document.baseURI).pathname}var Mc=class{addToWindow(n){_t.getAngularTestability=(r,i=!0)=>{let e=n.findTestabilityInTree(r,i);if(e==null)throw new Ae(5103,!1);return e},_t.getAllAngularTestabilities=()=>n.getAllTestabilities(),_t.getAllAngularRootElements=()=>n.getAllRootElements();let o=r=>{let i=_t.getAllAngularTestabilities(),e=i.length,m=function(){e--,e==0&&r()};i.forEach(b=>{b.whenStable(m)})};_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(o)}findTestabilityInTree(n,o,r){if(o==null)return null;let i=n.getTestability(o);return i??(r?Kn().isShadowRoot(o)?this.findTestabilityInTree(n,o.host,!0):this.findTestabilityInTree(n,o.parentElement,!0):null)}},RE=(()=>{let n=class n{build(){return new XMLHttpRequest}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),Oc=new ke(""),cp=(()=>{let n=class n{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(e=>{e.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,e){return this._findPluginFor(i).addEventListener(r,i,e)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(m=>m.supports(r)),!i)throw new Ae(5101,!1);return this._eventNameToPlugin.set(r,i),i}};n.\u0275fac=function(i){return new(i||n)(Re(Oc),Re(rt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),Ji=class{constructor(n){this._doc=n}},_c="ng-app-id",up=(()=>{let n=class n{constructor(r,i,e,m={}){this.doc=r,this.appId=i,this.nonce=e,this.platformId=m,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ac(m),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(e=>e.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_c}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(e=>{e.textContent!=null&&i.set(e.textContent,e)}),i}return null}changeUsageCount(r,i){let e=this.styleRef;if(e.has(r)){let m=e.get(r);return m.usage+=i,m.usage}return e.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let e=this.styleNodesInDOM,m=e?.get(i);if(m?.parentNode===r)return e.delete(i),m.removeAttribute(_c),m;{let b=this.doc.createElement("style");return this.nonce&&b.setAttribute("nonce",this.nonce),b.textContent=i,this.platformIsServer&&b.setAttribute(_c,this.appId),r.appendChild(b),b}}addStyleToHost(r,i){let e=this.getStyleElement(r,i),m=this.styleRef,b=m.get(i)?.elements;b?b.push(e):m.set(i,{elements:[e],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};n.\u0275fac=function(i){return new(i||n)(Re(wt),Re(Bi),Re(tc,8),Re(Mn))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),Rc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pc=/%COMP%/g,lp="%COMP%",xE=`_nghost-${lp}`,NE=`_ngcontent-${lp}`,ME=!0,OE=new ke("",{providedIn:"root",factory:()=>ME});function LE(t){return NE.replace(Pc,t)}function PE(t){return xE.replace(Pc,t)}function dp(t,n){return n.map(o=>o.replace(Pc,t))}var ip=(()=>{let n=class n{constructor(r,i,e,m,b,C,D,_=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=e,this.removeStylesOnCompDestroy=m,this.doc=b,this.platformId=C,this.ngZone=D,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=Ac(C),this.defaultRenderer=new mo(r,b,D,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jt.ShadowDom&&(i=We(fe({},i),{encapsulation:Jt.Emulated}));let e=this.getOrCreateRenderer(r,i);return e instanceof es?e.applyToHost(r):e instanceof vo&&e.applyStyles(),e}getOrCreateRenderer(r,i){let e=this.rendererByCompId,m=e.get(i.id);if(!m){let b=this.doc,C=this.ngZone,D=this.eventManager,_=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(i.encapsulation){case Jt.Emulated:m=new es(D,_,i,this.appId,g,b,C,v);break;case Jt.ShadowDom:return new Lc(D,_,r,i,b,C,this.nonce,v);default:m=new vo(D,_,i,g,b,C,v);break}e.set(i.id,m)}return m}ngOnDestroy(){this.rendererByCompId.clear()}};n.\u0275fac=function(i){return new(i||n)(Re(cp),Re(up),Re(Bi),Re(OE),Re(wt),Re(Mn),Re(rt),Re(tc))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),mo=class{constructor(n,o,r,i){this.eventManager=n,this.doc=o,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,o){return o?this.doc.createElementNS(Rc[o]||o,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,o){(sp(n)?n.content:n).appendChild(o)}insertBefore(n,o,r){n&&(sp(n)?n.content:n).insertBefore(o,r)}removeChild(n,o){n&&n.removeChild(o)}selectRootElement(n,o){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new Ae(-5104,!1);return o||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,o,r,i){if(i){o=i+":"+o;let e=Rc[i];e?n.setAttributeNS(e,o,r):n.setAttribute(o,r)}else n.setAttribute(o,r)}removeAttribute(n,o,r){if(r){let i=Rc[r];i?n.removeAttributeNS(i,o):n.removeAttribute(`${r}:${o}`)}else n.removeAttribute(o)}addClass(n,o){n.classList.add(o)}removeClass(n,o){n.classList.remove(o)}setStyle(n,o,r,i){i&(qn.DashCase|qn.Important)?n.style.setProperty(o,r,i&qn.Important?"important":""):n.style[o]=r}removeStyle(n,o,r){r&qn.DashCase?n.style.removeProperty(o):n.style[o]=""}setProperty(n,o,r){n!=null&&(n[o]=r)}setValue(n,o){n.nodeValue=o}listen(n,o,r){if(typeof n=="string"&&(n=Kn().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${o}`);return this.eventManager.addEventListener(n,o,this.decoratePreventDefault(r))}decoratePreventDefault(n){return o=>{if(o==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(o)):n(o))===!1&&o.preventDefault()}}};function sp(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Lc=class extends mo{constructor(n,o,r,i,e,m,b,C){super(n,e,m,C),this.sharedStylesHost=o,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let D=dp(i.id,i.styles);for(let _ of D){let g=document.createElement("style");b&&g.setAttribute("nonce",b),g.textContent=_,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,o){return super.appendChild(this.nodeOrShadowRoot(n),o)}insertBefore(n,o,r){return super.insertBefore(this.nodeOrShadowRoot(n),o,r)}removeChild(n,o){return super.removeChild(this.nodeOrShadowRoot(n),o)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vo=class extends mo{constructor(n,o,r,i,e,m,b,C){super(n,e,m,b),this.sharedStylesHost=o,this.removeStylesOnCompDestroy=i,this.styles=C?dp(C,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},es=class extends vo{constructor(n,o,r,i,e,m,b,C){let D=i+"-"+r.id;super(n,o,r,e,m,b,C,D),this.contentAttr=LE(D),this.hostAttr=PE(D)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,o){let r=super.createElement(n,o);return super.setAttribute(r,this.contentAttr,""),r}},kE=(()=>{let n=class n extends Ji{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,e){return r.addEventListener(i,e,!1),()=>this.removeEventListener(r,i,e)}removeEventListener(r,i,e){return r.removeEventListener(i,e)}};n.\u0275fac=function(i){return new(i||n)(Re(wt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})(),ap=["alt","control","meta","shift"],FE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UE={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},BE=(()=>{let n=class n extends Ji{constructor(r){super(r)}supports(r){return n.parseEventName(r)!=null}addEventListener(r,i,e){let m=n.parseEventName(i),b=n.eventCallback(m.fullKey,e,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(r,m.domEventName,b))}static parseEventName(r){let i=r.toLowerCase().split("."),e=i.shift();if(i.length===0||!(e==="keydown"||e==="keyup"))return null;let m=n._normalizeKey(i.pop()),b="",C=i.indexOf("code");if(C>-1&&(i.splice(C,1),b="code."),ap.forEach(_=>{let g=i.indexOf(_);g>-1&&(i.splice(g,1),b+=_+".")}),b+=m,i.length!=0||m.length===0)return null;let D={};return D.domEventName=e,D.fullKey=b,D}static matchEventFullKeyCode(r,i){let e=FE[r.key]||r.key,m="";return i.indexOf("code.")>-1&&(e=r.code,m="code."),e==null||!e?!1:(e=e.toLowerCase(),e===" "?e="space":e==="."&&(e="dot"),ap.forEach(b=>{if(b!==e){let C=UE[b];C(r)&&(m+=b+".")}}),m+=e,m===i)}static eventCallback(r,i,e){return m=>{n.matchEventFullKeyCode(m,r)&&e.runGuarded(()=>i(m))}}static _normalizeKey(r){return r==="esc"?"escape":r}};n.\u0275fac=function(i){return new(i||n)(Re(wt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})();function jE(){Nc.makeCurrent()}function VE(){return new nn}function HE(){return Xd(document),document}var $E=[{provide:Mn,useValue:Dc},{provide:ec,useValue:jE,multi:!0},{provide:wt,useFactory:HE,deps:[]}],fp=Cc(Wf,"browser",$E),WE=new ke(""),GE=[{provide:fo,useClass:Mc,deps:[]},{provide:mc,useClass:qi,deps:[rt,Ki,fo]},{provide:qi,useClass:qi,deps:[rt,Ki,fo]}],zE=[{provide:Pi,useValue:"root"},{provide:nn,useFactory:VE,deps:[]},{provide:Oc,useClass:kE,multi:!0,deps:[wt,rt,Mn]},{provide:Oc,useClass:BE,multi:!0,deps:[wt]},ip,up,cp,{provide:ro,useExisting:ip},{provide:Xi,useClass:RE,deps:[]},[]],pp=(()=>{let n=class n{constructor(r){}static withServerTransition(r){return{ngModule:n,providers:[{provide:Bi,useValue:r.appId}]}}};n.\u0275fac=function(i){return new(i||n)(Re(WE,12))},n.\u0275mod=zt({type:n}),n.\u0275inj=Gt({providers:[...zE,...GE],imports:[rp,Gf]});let t=n;return t})();var hp=(()=>{let n=class n{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};n.\u0275fac=function(i){return new(i||n)(Re(wt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Ue="primary",Mo=Symbol("RouteTitle"),jc=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let o=this.params[n];return Array.isArray(o)?o[0]:o}return null}getAll(n){if(this.has(n)){let o=this.params[n];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}};function Fr(t){return new jc(t)}function qE(t,n,o){let r=o.path.split("/");if(r.length>t.length||o.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let e=0;e<r.length;e++){let m=r[e],b=t[e];if(m.startsWith(":"))i[m.substring(1)]=b;else if(m!==b.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function KE(t,n){if(t.length!==n.length)return!1;for(let o=0;o<t.length;++o)if(!on(t[o],n[o]))return!1;return!0}function on(t,n){let o=t?Vc(t):void 0,r=n?Vc(n):void 0;if(!o||!r||o.length!=r.length)return!1;let i;for(let e=0;e<o.length;e++)if(i=o[e],!bp(t[i],n[i]))return!1;return!0}function Vc(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bp(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let o=[...t].sort(),r=[...n].sort();return o.every((i,e)=>r[e]===i)}else return t===n}function wp(t){return t.length>0?t[t.length-1]:null}function kn(t){return Os(t)?t:po(t)?it(Promise.resolve(t)):Ne(t)}var YE={exact:Ap,subset:_p},Dp={exact:QE,subset:ZE,ignored:()=>!0};function mp(t,n,o){return YE[o.paths](t.root,n.root,o.matrixParams)&&Dp[o.queryParams](t.queryParams,n.queryParams)&&!(o.fragment==="exact"&&t.fragment!==n.fragment)}function QE(t,n){return on(t,n)}function Ap(t,n,o){if(!Zn(t.segments,n.segments)||!rs(t.segments,n.segments,o)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!Ap(t.children[r],n.children[r],o))return!1;return!0}function ZE(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(o=>bp(t[o],n[o]))}function _p(t,n,o){return Rp(t,n,n.segments,o)}function Rp(t,n,o,r){if(t.segments.length>o.length){let i=t.segments.slice(0,o.length);return!(!Zn(i,o)||n.hasChildren()||!rs(i,o,r))}else if(t.segments.length===o.length){if(!Zn(t.segments,o)||!rs(t.segments,o,r))return!1;for(let i in n.children)if(!t.children[i]||!_p(t.children[i],n.children[i],r))return!1;return!0}else{let i=o.slice(0,t.segments.length),e=o.slice(t.segments.length);return!Zn(t.segments,i)||!rs(t.segments,i,r)||!t.children[Ue]?!1:Rp(t.children[Ue],n,e,r)}}function rs(t,n,o){return n.every((r,i)=>Dp[o](t[i].parameters,r.parameters))}var On=class{constructor(n=new Qe([],{}),o={},r=null){this.root=n,this.queryParams=o,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fr(this.queryParams),this._queryParamMap}toString(){return eC.serialize(this)}},Qe=class{constructor(n,o){this.segments=n,this.children=o,this.parent=null,Object.values(o).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return os(this)}},Qn=class{constructor(n,o){this.path=n,this.parameters=o}get parameterMap(){return this._parameterMap??=Fr(this.parameters),this._parameterMap}toString(){return Np(this)}};function XE(t,n){return Zn(t,n)&&t.every((o,r)=>on(o.parameters,n[r].parameters))}function Zn(t,n){return t.length!==n.length?!1:t.every((o,r)=>o.path===n[r].path)}function JE(t,n){let o=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ue&&(o=o.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ue&&(o=o.concat(n(i,r)))}),o}var Oo=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>new bo,providedIn:"root"});let t=n;return t})(),bo=class{parse(n){let o=new $c(n);return new On(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(n){let o=`/${yo(n.root,!0)}`,r=rC(n.queryParams),i=typeof n.fragment=="string"?`#${tC(n.fragment)}`:"";return`${o}${r}${i}`}},eC=new bo;function os(t){return t.segments.map(n=>Np(n)).join("/")}function yo(t,n){if(!t.hasChildren())return os(t);if(n){let o=t.children[Ue]?yo(t.children[Ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,e])=>{i!==Ue&&r.push(`${i}:${yo(e,!1)}`)}),r.length>0?`${o}(${r.join("//")})`:o}else{let o=JE(t,(r,i)=>i===Ue?[yo(t.children[Ue],!1)]:[`${i}:${yo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ue]!=null?`${os(t)}/${o[0]}`:`${os(t)}/(${o.join("//")})`}}function xp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ts(t){return xp(t).replace(/%3B/gi,";")}function tC(t){return encodeURI(t)}function Hc(t){return xp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function is(t){return decodeURIComponent(t)}function vp(t){return is(t.replace(/\+/g,"%20"))}function Np(t){return`${Hc(t.path)}${nC(t.parameters)}`}function nC(t){return Object.entries(t).map(([n,o])=>`;${Hc(n)}=${Hc(o)}`).join("")}function rC(t){let n=Object.entries(t).map(([o,r])=>Array.isArray(r)?r.map(i=>`${ts(o)}=${ts(i)}`).join("&"):`${ts(o)}=${ts(r)}`).filter(o=>o);return n.length?`?${n.join("&")}`:""}var oC=/^[^\/()?;#]+/;function kc(t){let n=t.match(oC);return n?n[0]:""}var iC=/^[^\/()?;=#]+/;function sC(t){let n=t.match(iC);return n?n[0]:""}var aC=/^[^=?&#]+/;function cC(t){let n=t.match(aC);return n?n[0]:""}var uC=/^[^&#]+/;function lC(t){let n=t.match(uC);return n?n[0]:""}var $c=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(o).length>0)&&(r[Ue]=new Qe(n,o)),r}parseSegment(){let n=kc(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Ae(4009,!1);return this.capture(n),new Qn(is(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let o=sC(this.remaining);if(!o)return;this.capture(o);let r="";if(this.consumeOptional("=")){let i=kc(this.remaining);i&&(r=i,this.capture(r))}n[is(o)]=is(r)}parseQueryParam(n){let o=cC(this.remaining);if(!o)return;this.capture(o);let r="";if(this.consumeOptional("=")){let m=lC(this.remaining);m&&(r=m,this.capture(r))}let i=vp(o),e=vp(r);if(n.hasOwnProperty(i)){let m=n[i];Array.isArray(m)||(m=[m],n[i]=m),m.push(e)}else n[i]=e}parseParens(n){let o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ae(4010,!1);let e;r.indexOf(":")>-1?(e=r.slice(0,r.indexOf(":")),this.capture(e),this.capture(":")):n&&(e=Ue);let m=this.parseChildren();o[e]=Object.keys(m).length===1?m[Ue]:new Qe([],m),this.consumeOptional("//")}return o}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Ae(4011,!1)}};function Mp(t){return t.segments.length>0?new Qe([],{[Ue]:t}):t}function Op(t){let n={};for(let[r,i]of Object.entries(t.children)){let e=Op(i);if(r===Ue&&e.segments.length===0&&e.hasChildren())for(let[m,b]of Object.entries(e.children))n[m]=b;else(e.segments.length>0||e.hasChildren())&&(n[r]=e)}let o=new Qe(t.segments,n);return dC(o)}function dC(t){if(t.numberOfChildren===1&&t.children[Ue]){let n=t.children[Ue];return new Qe(t.segments.concat(n.segments),n.children)}return t}function Ur(t){return t instanceof On}function fC(t,n,o=null,r=null){let i=Lp(t);return Pp(i,n,o,r)}function Lp(t){let n;function o(e){let m={};for(let C of e.children){let D=o(C);m[C.outlet]=D}let b=new Qe(e.url,m);return e===t&&(n=b),b}let r=o(t.root),i=Mp(r);return n??i}function Pp(t,n,o,r){let i=t;for(;i.parent;)i=i.parent;if(n.length===0)return Fc(i,i,i,o,r);let e=pC(n);if(e.toRoot())return Fc(i,i,new Qe([],{}),o,r);let m=hC(e,i,t),b=m.processChildren?So(m.segmentGroup,m.index,e.commands):Fp(m.segmentGroup,m.index,e.commands);return Fc(i,m.segmentGroup,b,o,r)}function ss(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function wo(t){return typeof t=="object"&&t!=null&&t.outlets}function Fc(t,n,o,r,i){let e={};r&&Object.entries(r).forEach(([C,D])=>{e[C]=Array.isArray(D)?D.map(_=>`${_}`):`${D}`});let m;t===n?m=o:m=kp(t,n,o);let b=Mp(Op(m));return new On(b,e,i)}function kp(t,n,o){let r={};return Object.entries(t.children).forEach(([i,e])=>{e===n?r[i]=o:r[i]=kp(e,n,o)}),new Qe(t.segments,r)}var as=class{constructor(n,o,r){if(this.isAbsolute=n,this.numberOfDoubleDots=o,this.commands=r,n&&r.length>0&&ss(r[0]))throw new Ae(4003,!1);let i=r.find(wo);if(i&&i!==wp(r))throw new Ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pC(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new as(!0,0,t);let n=0,o=!1,r=t.reduce((i,e,m)=>{if(typeof e=="object"&&e!=null){if(e.outlets){let b={};return Object.entries(e.outlets).forEach(([C,D])=>{b[C]=typeof D=="string"?D.split("/"):D}),[...i,{outlets:b}]}if(e.segmentPath)return[...i,e.segmentPath]}return typeof e!="string"?[...i,e]:m===0?(e.split("/").forEach((b,C)=>{C==0&&b==="."||(C==0&&b===""?o=!0:b===".."?n++:b!=""&&i.push(b))}),i):[...i,e]},[]);return new as(o,n,r)}var Pr=class{constructor(n,o,r){this.segmentGroup=n,this.processChildren=o,this.index=r}};function hC(t,n,o){if(t.isAbsolute)return new Pr(n,!0,0);if(!o)return new Pr(n,!1,NaN);if(o.parent===null)return new Pr(o,!0,0);let r=ss(t.commands[0])?0:1,i=o.segments.length-1+r;return gC(o,i,t.numberOfDoubleDots)}function gC(t,n,o){let r=t,i=n,e=o;for(;e>i;){if(e-=i,r=r.parent,!r)throw new Ae(4005,!1);i=r.segments.length}return new Pr(r,!1,i-e)}function mC(t){return wo(t[0])?t[0].outlets:{[Ue]:t}}function Fp(t,n,o){if(t??=new Qe([],{}),t.segments.length===0&&t.hasChildren())return So(t,n,o);let r=vC(t,n,o),i=o.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let e=new Qe(t.segments.slice(0,r.pathIndex),{});return e.children[Ue]=new Qe(t.segments.slice(r.pathIndex),t.children),So(e,0,i)}else return r.match&&i.length===0?new Qe(t.segments,{}):r.match&&!t.hasChildren()?Wc(t,n,o):r.match?So(t,0,i):Wc(t,n,o)}function So(t,n,o){if(o.length===0)return new Qe(t.segments,{});{let r=mC(o),i={};if(Object.keys(r).some(e=>e!==Ue)&&t.children[Ue]&&t.numberOfChildren===1&&t.children[Ue].segments.length===0){let e=So(t.children[Ue],n,o);return new Qe(t.segments,e.children)}return Object.entries(r).forEach(([e,m])=>{typeof m=="string"&&(m=[m]),m!==null&&(i[e]=Fp(t.children[e],n,m))}),Object.entries(t.children).forEach(([e,m])=>{r[e]===void 0&&(i[e]=m)}),new Qe(t.segments,i)}}function vC(t,n,o){let r=0,i=n,e={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=o.length)return e;let m=t.segments[i],b=o[r];if(wo(b))break;let C=`${b}`,D=r<o.length-1?o[r+1]:null;if(i>0&&C===void 0)break;if(C&&D&&typeof D=="object"&&D.outlets===void 0){if(!Ep(C,D,m))return e;r+=2}else{if(!Ep(C,{},m))return e;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Wc(t,n,o){let r=t.segments.slice(0,n),i=0;for(;i<o.length;){let e=o[i];if(wo(e)){let C=yC(e.outlets);return new Qe(r,C)}if(i===0&&ss(o[0])){let C=t.segments[n];r.push(new Qn(C.path,yp(o[0]))),i++;continue}let m=wo(e)?e.outlets[Ue]:`${e}`,b=i<o.length-1?o[i+1]:null;m&&b&&ss(b)?(r.push(new Qn(m,yp(b))),i+=2):(r.push(new Qn(m,{})),i++)}return new Qe(r,{})}function yC(t){let n={};return Object.entries(t).forEach(([o,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[o]=Wc(new Qe([],{}),0,r))}),n}function yp(t){let n={};return Object.entries(t).forEach(([o,r])=>n[o]=`${r}`),n}function Ep(t,n,o){return t==o.path&&on(n,o.parameters)}var Io="imperative",ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ft||{}),Bt=class{constructor(n,o){this.id=n,this.url=o}},Br=class extends Bt{constructor(n,o,r="imperative",i=null){super(n,o),this.type=ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yn=class extends Bt{constructor(n,o,r){super(n,o),this.urlAfterRedirects=r,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mt||{}),cs=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(cs||{}),Ln=class extends Bt{constructor(n,o,r,i){super(n,o),this.reason=r,this.code=i,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pn=class extends Bt{constructor(n,o,r,i){super(n,o),this.reason=r,this.code=i,this.type=ft.NavigationSkipped}},Do=class extends Bt{constructor(n,o,r,i){super(n,o),this.error=r,this.target=i,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},us=class extends Bt{constructor(n,o,r,i){super(n,o),this.urlAfterRedirects=r,this.state=i,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gc=class extends Bt{constructor(n,o,r,i){super(n,o),this.urlAfterRedirects=r,this.state=i,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zc=class extends Bt{constructor(n,o,r,i,e){super(n,o),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=e,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qc=class extends Bt{constructor(n,o,r,i){super(n,o),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kc=class extends Bt{constructor(n,o,r,i){super(n,o),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yc=class{constructor(n){this.route=n,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qc=class{constructor(n){this.route=n,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zc=class{constructor(n){this.snapshot=n,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xc=class{constructor(n){this.snapshot=n,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jc=class{constructor(n){this.snapshot=n,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{constructor(n){this.snapshot=n,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ls=class{constructor(n,o,r){this.routerEvent=n,this.position=o,this.anchor=r,this.type=ft.Scroll}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Ao=class{},_o=class{constructor(n){this.url=n}};var tu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Lo,this.attachRef=null}},Lo=(()=>{let n=class n{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let e=this.getOrCreateContext(r);e.outlet=i,this.contexts.set(r,e)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new tu,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),ds=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let o=this.pathFromRoot(n);return o.length>1?o[o.length-2]:null}children(n){let o=nu(n,this._root);return o?o.children.map(r=>r.value):[]}firstChild(n){let o=nu(n,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(n){let o=ru(n,this._root);return o.length<2?[]:o[o.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return ru(n,this._root).map(o=>o.value)}};function nu(t,n){if(t===n.value)return n;for(let o of n.children){let r=nu(t,o);if(r)return r}return null}function ru(t,n){if(t===n.value)return[n];for(let o of n.children){let r=ru(t,o);if(r.length)return r.unshift(n),r}return[]}var Nt=class{constructor(n,o){this.value=n,this.children=o}toString(){return`TreeNode(${this.value})`}};function Lr(t){let n={};return t&&t.children.forEach(o=>n[o.value.outlet]=o),n}var fs=class extends ds{constructor(n,o){super(n),this.snapshot=o,pu(this,n)}toString(){return this.snapshot.toString()}};function Up(t){let n=EC(t),o=new ht([new Qn("",{})]),r=new ht({}),i=new ht({}),e=new ht({}),m=new ht(""),b=new jr(o,r,e,m,i,Ue,t,n.root);return b.snapshot=n.root,new fs(new Nt(b,[]),n)}function EC(t){let n={},o={},r={},i="",e=new Ro([],n,r,i,o,Ue,t,null,{});return new ps("",new Nt(e,[]))}var jr=class{constructor(n,o,r,i,e,m,b,C){this.urlSubject=n,this.paramsSubject=o,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=e,this.outlet=m,this.component=b,this._futureSnapshot=C,this.title=this.dataSubject?.pipe(qe(D=>D[Mo]))??Ne(void 0),this.url=n,this.params=o,this.queryParams=r,this.fragment=i,this.data=e}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(qe(n=>Fr(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(qe(n=>Fr(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fu(t,n,o="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(o==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:fe(fe({},n.params),t.params),data:fe(fe({},n.data),t.data),resolve:fe(fe(fe(fe({},t.data),n.data),i?.data),t._resolvedData)}:r={params:fe({},t.params),data:fe({},t.data),resolve:fe(fe({},t.data),t._resolvedData??{})},i&&jp(i)&&(r.resolve[Mo]=i.title),r}var Ro=class{get title(){return this.data?.[Mo]}constructor(n,o,r,i,e,m,b,C,D){this.url=n,this.params=o,this.queryParams=r,this.fragment=i,this.data=e,this.outlet=m,this.component=b,this.routeConfig=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fr(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),o=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${o}')`}},ps=class extends ds{constructor(n,o){super(o),this.url=n,pu(this,o)}toString(){return Bp(this._root)}};function pu(t,n){n.value._routerState=t,n.children.forEach(o=>pu(t,o))}function Bp(t){let n=t.children.length>0?` { ${t.children.map(Bp).join(", ")} } `:"";return`${t.value}${n}`}function Uc(t){if(t.snapshot){let n=t.snapshot,o=t._futureSnapshot;t.snapshot=o,on(n.queryParams,o.queryParams)||t.queryParamsSubject.next(o.queryParams),n.fragment!==o.fragment&&t.fragmentSubject.next(o.fragment),on(n.params,o.params)||t.paramsSubject.next(o.params),KE(n.url,o.url)||t.urlSubject.next(o.url),on(n.data,o.data)||t.dataSubject.next(o.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ou(t,n){let o=on(t.params,n.params)&&XE(t.url,n.url),r=!t.parent!=!n.parent;return o&&!r&&(!t.parent||ou(t.parent,n.parent))}function jp(t){return typeof t.title=="string"||t.title===null}var CC=(()=>{let n=class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ue,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=ge(Lo),this.location=ge(Rr),this.changeDetector=ge(ho),this.environmentInjector=ge(Tt),this.inputBinder=ge(ys,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:e}=r.name;if(i)return;this.isTrackedInParentContexts(e)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(e)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ae(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Ae(4013,!1);this._activatedRoute=r;let e=this.location,b=r.snapshot.component,C=this.parentContexts.getOrCreateContext(this.name).children,D=new iu(r,C,e.injector);this.activated=e.createComponent(b,{index:e.length,injector:D,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};n.\u0275fac=function(i){return new(i||n)},n.\u0275dir=ja({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fi]});let t=n;return t})(),iu=class t{__ngOutletInjector(n){return new t(this.route,this.childContexts,n)}constructor(n,o,r){this.route=n,this.childContexts=o,this.parent=r}get(n,o){return n===jr?this.route:n===Lo?this.childContexts:this.parent.get(n,o)}},ys=new ke(""),Cp=(()=>{let n=class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,e=Gr([i.queryParams,i.params,i.data]).pipe(kt(([m,b,C],D)=>(C=fe(fe(fe({},m),b),C),D===0?Ne(C):Promise.resolve(C)))).subscribe(m=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let b=zf(i.component);if(!b){this.unsubscribeFromRouteData(r);return}for(let{templateName:C}of b.inputs)r.activatedComponentRef.setInput(C,m[C])});this.outletDataSubscriptions.set(r,e)}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})();function SC(t,n,o){let r=xo(t,n._root,o?o._root:void 0);return new fs(r,n)}function xo(t,n,o){if(o&&t.shouldReuseRoute(n.value,o.value.snapshot)){let r=o.value;r._futureSnapshot=n.value;let i=IC(t,n,o);return new Nt(r,i)}else{if(t.shouldAttach(n.value)){let e=t.retrieve(n.value);if(e!==null){let m=e.route;return m.value._futureSnapshot=n.value,m.children=n.children.map(b=>xo(t,b)),m}}let r=TC(n.value),i=n.children.map(e=>xo(t,e));return new Nt(r,i)}}function IC(t,n,o){return n.children.map(r=>{for(let i of o.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return xo(t,r,i);return xo(t,r)})}function TC(t){return new jr(new ht(t.url),new ht(t.params),new ht(t.queryParams),new ht(t.fragment),new ht(t.data),t.outlet,t.component,t)}var Vp="ngNavigationCancelingError";function Hp(t,n){let{redirectTo:o,navigationBehaviorOptions:r}=Ur(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=$p(!1,Mt.Redirect);return i.url=o,i.navigationBehaviorOptions=r,i}function $p(t,n){let o=new Error(`NavigationCancelingError: ${t||""}`);return o[Vp]=!0,o.cancellationCode=n,o}function bC(t){return Wp(t)&&Ur(t.url)}function Wp(t){return!!t&&t[Vp]}var wC=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=Li({type:n,selectors:[["ng-component"]],standalone:!0,features:[kf],decls:1,vars:0,template:function(i,e){i&1&&lo(0,"router-outlet")},dependencies:[CC],encapsulation:2});let t=n;return t})();function DC(t,n){return t.providers&&!t._injector&&(t._injector=Wi(t.providers,n,`Route: ${t.path}`)),t._injector??n}function hu(t){let n=t.children&&t.children.map(hu),o=n?We(fe({},t),{children:n}):fe({},t);return!o.component&&!o.loadComponent&&(n||o.loadChildren)&&o.outlet&&o.outlet!==Ue&&(o.component=wC),o}function sn(t){return t.outlet||Ue}function AC(t,n){let o=t.filter(r=>sn(r)===n);return o.push(...t.filter(r=>sn(r)!==n)),o}function Po(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let o=n.routeConfig;if(o?._loadedInjector)return o._loadedInjector;if(o?._injector)return o._injector}return null}var _C=(t,n,o,r)=>qe(i=>(new su(n,i.targetRouterState,i.currentRouterState,o,r).activate(t),i)),su=class{constructor(n,o,r,i,e){this.routeReuseStrategy=n,this.futureState=o,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=e}activate(n){let o=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,r,n),Uc(this.futureState.root),this.activateChildRoutes(o,r,n)}deactivateChildRoutes(n,o,r){let i=Lr(o);n.children.forEach(e=>{let m=e.value.outlet;this.deactivateRoutes(e,i[m],r),delete i[m]}),Object.values(i).forEach(e=>{this.deactivateRouteAndItsChildren(e,r)})}deactivateRoutes(n,o,r){let i=n.value,e=o?o.value:null;if(i===e)if(i.component){let m=r.getContext(i.outlet);m&&this.deactivateChildRoutes(n,o,m.children)}else this.deactivateChildRoutes(n,o,r);else e&&this.deactivateRouteAndItsChildren(o,r)}deactivateRouteAndItsChildren(n,o){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,o):this.deactivateRouteAndOutlet(n,o)}detachAndStoreRouteSubtree(n,o){let r=o.getContext(n.value.outlet),i=r&&n.value.component?r.children:o,e=Lr(n);for(let m of Object.values(e))this.deactivateRouteAndItsChildren(m,i);if(r&&r.outlet){let m=r.outlet.detach(),b=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:m,route:n,contexts:b})}}deactivateRouteAndOutlet(n,o){let r=o.getContext(n.value.outlet),i=r&&n.value.component?r.children:o,e=Lr(n);for(let m of Object.values(e))this.deactivateRouteAndItsChildren(m,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,o,r){let i=Lr(o);n.children.forEach(e=>{this.activateRoutes(e,i[e.value.outlet],r),this.forwardEvent(new eu(e.value.snapshot))}),n.children.length&&this.forwardEvent(new Xc(n.value.snapshot))}activateRoutes(n,o,r){let i=n.value,e=o?o.value:null;if(Uc(i),i===e)if(i.component){let m=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,o,m.children)}else this.activateChildRoutes(n,o,r);else if(i.component){let m=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let b=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),m.children.onOutletReAttached(b.contexts),m.attachRef=b.componentRef,m.route=b.route.value,m.outlet&&m.outlet.attach(b.componentRef,b.route.value),Uc(b.route.value),this.activateChildRoutes(n,null,m.children)}else{let b=Po(i.snapshot);m.attachRef=null,m.route=i,m.injector=b,m.outlet&&m.outlet.activateWith(i,m.injector),this.activateChildRoutes(n,null,m.children)}}else this.activateChildRoutes(n,null,r)}},hs=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},kr=class{constructor(n,o){this.component=n,this.route=o}};function RC(t,n,o){let r=t._root,i=n?n._root:null;return Eo(r,i,o,[r.value])}function xC(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Hr(t,n){let o=Symbol(),r=n.get(t,o);return r===o?typeof t=="function"&&!Gl(t)?t:n.get(t):r}function Eo(t,n,o,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let e=Lr(n);return t.children.forEach(m=>{NC(m,e[m.value.outlet],o,r.concat([m.value]),i),delete e[m.value.outlet]}),Object.entries(e).forEach(([m,b])=>To(b,o.getContext(m),i)),i}function NC(t,n,o,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let e=t.value,m=n?n.value:null,b=o?o.getContext(t.value.outlet):null;if(m&&e.routeConfig===m.routeConfig){let C=MC(m,e,e.routeConfig.runGuardsAndResolvers);C?i.canActivateChecks.push(new hs(r)):(e.data=m.data,e._resolvedData=m._resolvedData),e.component?Eo(t,n,b?b.children:null,r,i):Eo(t,n,o,r,i),C&&b&&b.outlet&&b.outlet.isActivated&&i.canDeactivateChecks.push(new kr(b.outlet.component,m))}else m&&To(n,b,i),i.canActivateChecks.push(new hs(r)),e.component?Eo(t,null,b?b.children:null,r,i):Eo(t,null,o,r,i);return i}function MC(t,n,o){if(typeof o=="function")return o(t,n);switch(o){case"pathParamsChange":return!Zn(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Zn(t.url,n.url)||!on(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ou(t,n)||!on(t.queryParams,n.queryParams);case"paramsChange":default:return!ou(t,n)}}function To(t,n,o){let r=Lr(t),i=t.value;Object.entries(r).forEach(([e,m])=>{i.component?n?To(m,n.children.getContext(e),o):To(m,null,o):To(m,n,o)}),i.component?n&&n.outlet&&n.outlet.isActivated?o.canDeactivateChecks.push(new kr(n.outlet.component,i)):o.canDeactivateChecks.push(new kr(null,i)):o.canDeactivateChecks.push(new kr(null,i))}function ko(t){return typeof t=="function"}function OC(t){return typeof t=="boolean"}function LC(t){return t&&ko(t.canLoad)}function PC(t){return t&&ko(t.canActivate)}function kC(t){return t&&ko(t.canActivateChild)}function FC(t){return t&&ko(t.canDeactivate)}function UC(t){return t&&ko(t.canMatch)}function Gp(t){return t instanceof cn||t?.name==="EmptyError"}var ns=Symbol("INITIAL_VALUE");function Vr(){return kt(t=>Gr(t.map(n=>n.pipe(un(1),Fs(ns)))).pipe(qe(n=>{for(let o of n)if(o!==!0){if(o===ns)return ns;if(o===!1||o instanceof On)return o}return!0}),Pt(n=>n!==ns),un(1)))}function BC(t,n){return st(o=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:e,canDeactivateChecks:m}}=o;return m.length===0&&e.length===0?Ne(We(fe({},o),{guardsResult:!0})):jC(m,r,i,t).pipe(st(b=>b&&OC(b)?VC(r,e,t,n):Ne(b)),qe(b=>We(fe({},o),{guardsResult:b})))})}function jC(t,n,o,r){return it(t).pipe(st(i=>zC(i.component,i.route,o,n,r)),Qt(i=>i!==!0,!0))}function VC(t,n,o,r){return it(n).pipe(jn(i=>dr($C(i.route.parent,r),HC(i.route,r),GC(t,i.path,o),WC(t,i.route,o))),Qt(i=>i!==!0,!0))}function HC(t,n){return t!==null&&n&&n(new Jc(t)),Ne(!0)}function $C(t,n){return t!==null&&n&&n(new Zc(t)),Ne(!0)}function WC(t,n,o){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return Ne(!0);let i=r.map(e=>oi(()=>{let m=Po(n)??o,b=Hr(e,m),C=PC(b)?b.canActivate(n,t):fn(m,()=>b(n,t));return kn(C).pipe(Qt())}));return Ne(i).pipe(Vr())}function GC(t,n,o){let r=n[n.length-1],e=n.slice(0,n.length-1).reverse().map(m=>xC(m)).filter(m=>m!==null).map(m=>oi(()=>{let b=m.guards.map(C=>{let D=Po(m.node)??o,_=Hr(C,D),g=kC(_)?_.canActivateChild(r,t):fn(D,()=>_(r,t));return kn(g).pipe(Qt())});return Ne(b).pipe(Vr())}));return Ne(e).pipe(Vr())}function zC(t,n,o,r,i){let e=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!e||e.length===0)return Ne(!0);let m=e.map(b=>{let C=Po(n)??i,D=Hr(b,C),_=FC(D)?D.canDeactivate(t,n,o,r):fn(C,()=>D(t,n,o,r));return kn(_).pipe(Qt())});return Ne(m).pipe(Vr())}function qC(t,n,o,r){let i=n.canLoad;if(i===void 0||i.length===0)return Ne(!0);let e=i.map(m=>{let b=Hr(m,t),C=LC(b)?b.canLoad(n,o):fn(t,()=>b(n,o));return kn(C)});return Ne(e).pipe(Vr(),zp(r))}function zp(t){return Rs(gt(n=>{if(Ur(n))throw Hp(t,n)}),qe(n=>n===!0))}function KC(t,n,o,r){let i=n.canMatch;if(!i||i.length===0)return Ne(!0);let e=i.map(m=>{let b=Hr(m,t),C=UC(b)?b.canMatch(n,o):fn(t,()=>b(n,o));return kn(C)});return Ne(e).pipe(Vr(),zp(r))}var No=class{constructor(n){this.segmentGroup=n||null}},gs=class extends Error{constructor(n){super(),this.urlTree=n}};function Or(t){return ur(new No(t))}function YC(t){return ur(new Ae(4e3,!1))}function QC(t){return ur($p(!1,Mt.GuardRejected))}var au=class{constructor(n,o){this.urlSerializer=n,this.urlTree=o}lineralizeSegments(n,o){let r=[],i=o.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Ne(r);if(i.numberOfChildren>1||!i.children[Ue])return YC(n.redirectTo);i=i.children[Ue]}}applyRedirectCommands(n,o,r){let i=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),n,r);if(o.startsWith("/"))throw new gs(i);return i}applyRedirectCreateUrlTree(n,o,r,i){let e=this.createSegmentGroup(n,o.root,r,i);return new On(e,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(n,o){let r={};return Object.entries(n).forEach(([i,e])=>{if(typeof e=="string"&&e.startsWith(":")){let b=e.substring(1);r[i]=o[b]}else r[i]=e}),r}createSegmentGroup(n,o,r,i){let e=this.createSegments(n,o.segments,r,i),m={};return Object.entries(o.children).forEach(([b,C])=>{m[b]=this.createSegmentGroup(n,C,r,i)}),new Qe(e,m)}createSegments(n,o,r,i){return o.map(e=>e.path.startsWith(":")?this.findPosParam(n,e,i):this.findOrReturn(e,r))}findPosParam(n,o,r){let i=r[o.path.substring(1)];if(!i)throw new Ae(4001,!1);return i}findOrReturn(n,o){let r=0;for(let i of o){if(i.path===n.path)return o.splice(r),i;r++}return n}},cu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZC(t,n,o,r,i){let e=gu(t,n,o);return e.matched?(r=DC(n,r),KC(r,n,o,i).pipe(qe(m=>m===!0?e:fe({},cu)))):Ne(e)}function gu(t,n,o){if(n.path==="**")return XC(o);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||o.length>0)?fe({},cu):{matched:!0,consumedSegments:[],remainingSegments:o,parameters:{},positionalParamSegments:{}};let i=(n.matcher||qE)(o,t,n);if(!i)return fe({},cu);let e={};Object.entries(i.posParams??{}).forEach(([b,C])=>{e[b]=C.path});let m=i.consumed.length>0?fe(fe({},e),i.consumed[i.consumed.length-1].parameters):e;return{matched:!0,consumedSegments:i.consumed,remainingSegments:o.slice(i.consumed.length),parameters:m,positionalParamSegments:i.posParams??{}}}function XC(t){return{matched:!0,parameters:t.length>0?wp(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Sp(t,n,o,r){return o.length>0&&tS(t,o,r)?{segmentGroup:new Qe(n,eS(r,new Qe(o,t.children))),slicedSegments:[]}:o.length===0&&nS(t,o,r)?{segmentGroup:new Qe(t.segments,JC(t,o,r,t.children)),slicedSegments:o}:{segmentGroup:new Qe(t.segments,t.children),slicedSegments:o}}function JC(t,n,o,r){let i={};for(let e of o)if(Es(t,n,e)&&!r[sn(e)]){let m=new Qe([],{});i[sn(e)]=m}return fe(fe({},r),i)}function eS(t,n){let o={};o[Ue]=n;for(let r of t)if(r.path===""&&sn(r)!==Ue){let i=new Qe([],{});o[sn(r)]=i}return o}function tS(t,n,o){return o.some(r=>Es(t,n,r)&&sn(r)!==Ue)}function nS(t,n,o){return o.some(r=>Es(t,n,r))}function Es(t,n,o){return(t.hasChildren()||n.length>0)&&o.pathMatch==="full"?!1:o.path===""}function rS(t,n,o,r){return sn(t)!==r&&(r===Ue||!Es(n,o,t))?!1:gu(n,t,o).matched}function oS(t,n,o){return n.length===0&&!t.children[o]}var uu=class{};function iS(t,n,o,r,i,e,m="emptyOnly"){return new lu(t,n,o,r,i,m,e).recognize()}var sS=31,lu=class{constructor(n,o,r,i,e,m,b){this.injector=n,this.configLoader=o,this.rootComponentType=r,this.config=i,this.urlTree=e,this.paramsInheritanceStrategy=m,this.urlSerializer=b,this.applyRedirects=new au(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new Ae(4002,`'${n.segmentGroup}'`)}recognize(){let n=Sp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(qe(o=>{let r=new Ro([],Object.freeze({}),Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,{}),i=new Nt(r,o),e=new ps("",i),m=fC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return m.queryParams=this.urlTree.queryParams,e.url=this.urlSerializer.serialize(m),this.inheritParamsAndData(e._root,null),{state:e,tree:m}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,Ue).pipe(In(r=>{if(r instanceof gs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof No?this.noMatchError(r):r}))}inheritParamsAndData(n,o){let r=n.value,i=fu(r,o,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),n.children.forEach(e=>this.inheritParamsAndData(e,r))}processSegmentGroup(n,o,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,o,r):this.processSegment(n,o,r,r.segments,i,!0).pipe(qe(e=>e instanceof Nt?[e]:[]))}processChildren(n,o,r){let i=[];for(let e of Object.keys(r.children))e==="primary"?i.unshift(e):i.push(e);return it(i).pipe(jn(e=>{let m=r.children[e],b=AC(o,e);return this.processSegmentGroup(n,b,m,e)}),ks((e,m)=>(e.push(...m),e)),Tn(null),Ps(),st(e=>{if(e===null)return Or(r);let m=qp(e);return aS(m),Ne(m)}))}processSegment(n,o,r,i,e,m){return it(o).pipe(jn(b=>this.processSegmentAgainstRoute(b._injector??n,o,b,r,i,e,m).pipe(In(C=>{if(C instanceof No)return Ne(null);throw C}))),Qt(b=>!!b),In(b=>{if(Gp(b))return oS(r,i,e)?Ne(new uu):Or(r);throw b}))}processSegmentAgainstRoute(n,o,r,i,e,m,b){return rS(r,i,e,m)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,e,m):this.allowRedirects&&b?this.expandSegmentAgainstRouteUsingRedirect(n,i,o,r,e,m):Or(i):Or(i)}expandSegmentAgainstRouteUsingRedirect(n,o,r,i,e,m){let{matched:b,consumedSegments:C,positionalParamSegments:D,remainingSegments:_}=gu(o,i,e);if(!b)return Or(o);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sS&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(C,i.redirectTo,D);return this.applyRedirects.lineralizeSegments(i,g).pipe(st(v=>this.processSegment(n,r,o,v.concat(_),m,!1)))}matchSegmentAgainstRoute(n,o,r,i,e){let m=ZC(o,r,i,n,this.urlSerializer);return r.path==="**"&&(o.children={}),m.pipe(kt(b=>b.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(kt(({routes:C})=>{let D=r._loadedInjector??n,{consumedSegments:_,remainingSegments:g,parameters:v}=b,E=new Ro(_,v,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,uS(r),sn(r),r.component??r._loadedComponent??null,r,lS(r)),{segmentGroup:l,slicedSegments:u}=Sp(o,_,g,C);if(u.length===0&&l.hasChildren())return this.processChildren(D,C,l).pipe(qe(y=>y===null?null:new Nt(E,y)));if(C.length===0&&u.length===0)return Ne(new Nt(E,[]));let a=sn(r)===e;return this.processSegment(D,C,l,u,a?Ue:e,!0).pipe(qe(y=>new Nt(E,y instanceof Nt?[y]:[])))}))):Or(o)))}getChildConfig(n,o,r){return o.children?Ne({routes:o.children,injector:n}):o.loadChildren?o._loadedRoutes!==void 0?Ne({routes:o._loadedRoutes,injector:o._loadedInjector}):qC(n,o,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(n,o).pipe(gt(e=>{o._loadedRoutes=e.routes,o._loadedInjector=e.injector})):QC(o))):Ne({routes:[],injector:n})}};function aS(t){t.sort((n,o)=>n.value.outlet===Ue?-1:o.value.outlet===Ue?1:n.value.outlet.localeCompare(o.value.outlet))}function cS(t){let n=t.value.routeConfig;return n&&n.path===""}function qp(t){let n=[],o=new Set;for(let r of t){if(!cS(r)){n.push(r);continue}let i=n.find(e=>r.value.routeConfig===e.value.routeConfig);i!==void 0?(i.children.push(...r.children),o.add(i)):n.push(r)}for(let r of o){let i=qp(r.children);n.push(new Nt(r.value,i))}return n.filter(r=>!o.has(r))}function uS(t){return t.data||{}}function lS(t){return t.resolve||{}}function dS(t,n,o,r,i,e){return st(m=>iS(t,n,o,r,m.extractedUrl,i,e).pipe(qe(({state:b,tree:C})=>We(fe({},m),{targetSnapshot:b,urlAfterRedirects:C}))))}function fS(t,n){return st(o=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=o;if(!i.length)return Ne(o);let e=new Set(i.map(C=>C.route)),m=new Set;for(let C of e)if(!m.has(C))for(let D of Kp(C))m.add(D);let b=0;return it(m).pipe(jn(C=>e.has(C)?pS(C,r,t,n):(C.data=fu(C,C.parent,t).resolve,Ne(void 0))),gt(()=>b++),fr(1),st(C=>b===m.size?Ne(o):At))})}function Kp(t){let n=t.children.map(o=>Kp(o)).flat();return[t,...n]}function pS(t,n,o,r){let i=t.routeConfig,e=t._resolve;return i?.title!==void 0&&!jp(i)&&(e[Mo]=i.title),hS(e,t,n,r).pipe(qe(m=>(t._resolvedData=m,t.data=fu(t,t.parent,o).resolve,null)))}function hS(t,n,o,r){let i=Vc(t);if(i.length===0)return Ne({});let e={};return it(i).pipe(st(m=>gS(t[m],n,o,r).pipe(Qt(),gt(b=>{e[m]=b}))),fr(1),Ls(e),In(m=>Gp(m)?At:ur(m)))}function gS(t,n,o,r){let i=Po(n)??r,e=Hr(t,i),m=e.resolve?e.resolve(n,o):fn(i,()=>e(n,o));return kn(m)}function Bc(t){return kt(n=>{let o=t(n);return o?it(o).pipe(qe(()=>n)):Ne(n)})}var Yp=(()=>{let n=class n{buildTitle(r){let i,e=r.root;for(;e!==void 0;)i=this.getResolvedTitleForRoute(e)??i,e=e.children.find(m=>m.outlet===Ue);return i}getResolvedTitleForRoute(r){return r.data[Mo]}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(mS),providedIn:"root"});let t=n;return t})(),mS=(()=>{let n=class n extends Yp{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};n.\u0275fac=function(i){return new(i||n)(Re(hp))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Fo=new ke("",{providedIn:"root",factory:()=>({})}),ms=new ke(""),mu=(()=>{let n=class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ge(Qi)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Ne(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=kn(r.loadComponent()).pipe(qe(Qp),gt(m=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=m}),zr(()=>{this.componentLoaders.delete(r)})),e=new cr(i,()=>new Ct).pipe(ar());return this.componentLoaders.set(r,e),e}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ne({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let m=vS(i,this.compiler,r,this.onLoadEndListener).pipe(zr(()=>{this.childrenLoaders.delete(i)})),b=new cr(m,()=>new Ct).pipe(ar());return this.childrenLoaders.set(i,b),b}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function vS(t,n,o,r){return kn(t.loadChildren()).pipe(qe(Qp),st(i=>i instanceof oo||Array.isArray(i)?Ne(i):it(n.compileModuleAsync(i))),qe(i=>{r&&r(t);let e,m,b=!1;return Array.isArray(i)?(m=i,b=!0):(e=i.create(o).injector,m=e.get(ms,[],{optional:!0,self:!0}).flat()),{routes:m.map(hu),injector:e}}))}function yS(t){return t&&typeof t=="object"&&"default"in t}function Qp(t){return yS(t)?t.default:t}var vu=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(ES),providedIn:"root"});let t=n;return t})(),ES=(()=>{let n=class n{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Zp=new ke(""),Xp=new ke("");function CS(t,n,o){let r=t.get(Xp),i=t.get(wt);return t.get(rt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(D=>setTimeout(D));let e,m=new Promise(D=>{e=D}),b=i.startViewTransition(()=>(e(),SS(t))),{onViewTransitionCreated:C}=r;return C&&fn(t,()=>C({transition:b,from:n,to:o})),m})}function SS(t){return new Promise(n=>{$i(n,{injector:t})})}var yu=(()=>{let n=class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.transitionAbortSubject=new Ct,this.configLoader=ge(mu),this.environmentInjector=ge(Tt),this.urlSerializer=ge(Oo),this.rootContexts=ge(Lo),this.location=ge(Mr),this.inputBindingEnabled=ge(ys,{optional:!0})!==null,this.titleStrategy=ge(Yp),this.options=ge(Fo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ge(vu),this.createViewTransition=ge(Zp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ne(void 0),this.rootComponentType=null;let r=e=>this.events.next(new Yc(e)),i=e=>this.events.next(new Qc(e));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(We(fe(fe({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,e){return this.transitions=new ht({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Io,restoredState:null,currentSnapshot:e.snapshot,targetSnapshot:null,currentRouterState:e,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pt(m=>m.id!==0),qe(m=>We(fe({},m),{extractedUrl:this.urlHandlingStrategy.extract(m.rawUrl)})),kt(m=>{let b=!1,C=!1;return Ne(m).pipe(kt(D=>{if(this.navigationId>m.id)return this.cancelNavigationTransition(m,"",Mt.SupersededByNewNavigation),At;this.currentTransition=m,this.currentNavigation={id:D.id,initialUrl:D.rawUrl,extractedUrl:D.extractedUrl,trigger:D.source,extras:D.extras,previousNavigation:this.lastSuccessfulNavigation?We(fe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let _=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=D.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!_&&g!=="reload"){let v="";return this.events.next(new Pn(D.id,this.urlSerializer.serialize(D.rawUrl),v,cs.IgnoredSameUrlNavigation)),D.resolve(null),At}if(this.urlHandlingStrategy.shouldProcessUrl(D.rawUrl))return Ne(D).pipe(kt(v=>{let E=this.transitions?.getValue();return this.events.next(new Br(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),E!==this.transitions?.getValue()?At:Promise.resolve(v)}),dS(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(v=>{m.targetSnapshot=v.targetSnapshot,m.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=We(fe({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let E=new us(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}));if(_&&this.urlHandlingStrategy.shouldProcessUrl(D.currentRawUrl)){let{id:v,extractedUrl:E,source:l,restoredState:u,extras:a}=D,y=new Br(v,this.urlSerializer.serialize(E),l,u);this.events.next(y);let p=Up(this.rootComponentType).snapshot;return this.currentTransition=m=We(fe({},D),{targetSnapshot:p,urlAfterRedirects:E,extras:We(fe({},a),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,Ne(m)}else{let v="";return this.events.next(new Pn(D.id,this.urlSerializer.serialize(D.extractedUrl),v,cs.IgnoredByUrlHandlingStrategy)),D.resolve(null),At}}),gt(D=>{let _=new Gc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(_)}),qe(D=>(this.currentTransition=m=We(fe({},D),{guards:RC(D.targetSnapshot,D.currentSnapshot,this.rootContexts)}),m)),BC(this.environmentInjector,D=>this.events.next(D)),gt(D=>{if(m.guardsResult=D.guardsResult,Ur(D.guardsResult))throw Hp(this.urlSerializer,D.guardsResult);let _=new zc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot,!!D.guardsResult);this.events.next(_)}),Pt(D=>D.guardsResult?!0:(this.cancelNavigationTransition(D,"",Mt.GuardRejected),!1)),Bc(D=>{if(D.guards.canActivateChecks.length)return Ne(D).pipe(gt(_=>{let g=new qc(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(g)}),kt(_=>{let g=!1;return Ne(_).pipe(fS(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(_,"",Mt.NoDataFromResolver)}}))}),gt(_=>{let g=new Kc(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(g)}))}),Bc(D=>{let _=g=>{let v=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(g.routeConfig).pipe(gt(E=>{g.component=E}),qe(()=>{})));for(let E of g.children)v.push(..._(E));return v};return Gr(_(D.targetSnapshot.root)).pipe(Tn(null),un(1))}),Bc(()=>this.afterPreactivation()),kt(()=>{let{currentSnapshot:D,targetSnapshot:_}=m,g=this.createViewTransition?.(this.environmentInjector,D.root,_.root);return g?it(g).pipe(qe(()=>m)):Ne(m)}),qe(D=>{let _=SC(r.routeReuseStrategy,D.targetSnapshot,D.currentRouterState);return this.currentTransition=m=We(fe({},D),{targetRouterState:_}),this.currentNavigation.targetRouterState=_,m}),gt(()=>{this.events.next(new Ao)}),_C(this.rootContexts,r.routeReuseStrategy,D=>this.events.next(D),this.inputBindingEnabled),un(1),gt({next:D=>{b=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yn(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects))),this.titleStrategy?.updateTitle(D.targetRouterState.snapshot),D.resolve(!0)},complete:()=>{b=!0}}),Us(this.transitionAbortSubject.pipe(gt(D=>{throw D}))),zr(()=>{!b&&!C&&this.cancelNavigationTransition(m,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===m.id&&(this.currentNavigation=null,this.currentTransition=null)}),In(D=>{if(C=!0,Wp(D))this.events.next(new Ln(m.id,this.urlSerializer.serialize(m.extractedUrl),D.message,D.cancellationCode)),bC(D)?this.events.next(new _o(D.url)):m.resolve(!1);else{this.events.next(new Do(m.id,this.urlSerializer.serialize(m.extractedUrl),D,m.targetSnapshot??void 0));try{m.resolve(r.errorHandler(D))}catch(_){this.options.resolveNavigationPromiseOnError?m.resolve(!1):m.reject(_)}}return At}))}))}cancelNavigationTransition(r,i,e){let m=new Ln(r.id,this.urlSerializer.serialize(r.extractedUrl),i,e);this.events.next(m),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function IS(t){return t!==Io}var TS=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(bS),providedIn:"root"});let t=n;return t})(),du=class{shouldDetach(n){return!1}store(n,o){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,o){return n.routeConfig===o.routeConfig}},bS=(()=>{let n=class n extends du{};n.\u0275fac=(()=>{let r;return function(e){return(r||(r=Xa(n)))(e||n)}})(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Jp=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:()=>ge(wS),providedIn:"root"});let t=n;return t})(),wS=(()=>{let n=class n extends Jp{constructor(){super(...arguments),this.location=ge(Mr),this.urlSerializer=ge(Oo),this.options=ge(Fo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ge(vu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new On,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Up(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Br)this.stateMemento=this.createStateMemento();else if(r instanceof Pn)this.rawUrlTree=i.initialUrl;else if(r instanceof us){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let e=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(e,i)}}else r instanceof Ao?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ln&&(r.code===Mt.GuardRejected||r.code===Mt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Do?this.restoreHistory(i,!0):r instanceof yn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let e=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(e)||i.extras.replaceUrl){let m=this.browserPageId,b=fe(fe({},i.extras.state),this.generateNgRouterState(i.id,m));this.location.replaceState(e,"",b)}else{let m=fe(fe({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(e,"",m)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let e=this.browserPageId,m=this.currentPageId-e;m!==0?this.location.historyGo(m):this.currentUrlTree===r.finalUrl&&m===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};n.\u0275fac=(()=>{let r;return function(e){return(r||(r=Xa(n)))(e||n)}})(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Co=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Co||{});function eh(t,n){t.events.pipe(Pt(o=>o instanceof yn||o instanceof Ln||o instanceof Do||o instanceof Pn),qe(o=>o instanceof yn||o instanceof Pn?Co.COMPLETE:(o instanceof Ln?o.code===Mt.Redirect||o.code===Mt.SupersededByNewNavigation:!1)?Co.REDIRECTING:Co.FAILED),Pt(o=>o!==Co.REDIRECTING),un(1)).subscribe(()=>{n()})}function DS(t){throw t}var AS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_S={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xn=(()=>{let n=class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ge(zi),this.stateManager=ge(Jp),this.options=ge(Fo,{optional:!0})||{},this.pendingTasks=ge(Gi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ge(yu),this.urlSerializer=ge(Oo),this.location=ge(Mr),this.urlHandlingStrategy=ge(vu),this._events=new Ct,this.errorHandler=this.options.errorHandler||DS,this.navigated=!1,this.routeReuseStrategy=ge(TS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ge(ms,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ge(ys,{optional:!0}),this.eventsSubscription=new ut,this.isNgZoneEnabled=ge(rt)instanceof rt&&rt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let e=this.navigationTransitions.currentTransition,m=this.navigationTransitions.currentNavigation;if(e!==null&&m!==null){if(this.stateManager.handleRouterEvent(i,m),i instanceof Ln&&i.code!==Mt.Redirect&&i.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof yn)this.navigated=!0;else if(i instanceof _o){let b=this.urlHandlingStrategy.merge(i.url,e.currentRawUrl),C={info:e.extras.info,skipLocationChange:e.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||IS(e.source)};this.scheduleNavigation(b,Io,null,C,{resolve:e.resolve,reject:e.reject,promise:e.promise})}}xS(i)&&this._events.next(i)}catch(e){this.navigationTransitions.transitionAbortSubject.next(e)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Io,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,e){let m={replaceUrl:!0},b=e?.navigationId?e:null;if(e){let D=fe({},e);delete D.navigationId,delete D.\u0275routerPageId,Object.keys(D).length!==0&&(m.state=D)}let C=this.parseUrl(r);this.scheduleNavigation(C,i,b,m)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(hu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:e,queryParams:m,fragment:b,queryParamsHandling:C,preserveFragment:D}=i,_=D?this.currentUrlTree.fragment:b,g=null;switch(C){case"merge":g=fe(fe({},this.currentUrlTree.queryParams),m);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=m||null}g!==null&&(g=this.removeEmptyProps(g));let v;try{let E=e?e.snapshot:this.routerState.snapshot.root;v=Lp(E)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),v=this.currentUrlTree.root}return Pp(v,r,g,_??null)}navigateByUrl(r,i={skipLocationChange:!1}){let e=Ur(r)?r:this.parseUrl(r),m=this.urlHandlingStrategy.merge(e,this.rawUrlTree);return this.scheduleNavigation(m,Io,null,i)}navigate(r,i={skipLocationChange:!1}){return RS(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let e;if(i===!0?e=fe({},AS):i===!1?e=fe({},_S):e=i,Ur(r))return mp(this.currentUrlTree,r,e);let m=this.parseUrl(r);return mp(this.currentUrlTree,m,e)}removeEmptyProps(r){return Object.entries(r).reduce((i,[e,m])=>(m!=null&&(i[e]=m),i),{})}scheduleNavigation(r,i,e,m,b){if(this.disposed)return Promise.resolve(!1);let C,D,_;b?(C=b.resolve,D=b.reject,_=b.promise):_=new Promise((v,E)=>{C=v,D=E});let g=this.pendingTasks.add();return eh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:e,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:m,resolve:C,reject:D,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(v=>Promise.reject(v))}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function RS(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new Ae(4008,!1)}function xS(t){return!(t instanceof Ao)&&!(t instanceof _o)}var vs=class{};var NS=(()=>{let n=class n{constructor(r,i,e,m,b){this.router=r,this.injector=e,this.preloadingStrategy=m,this.loader=b}setUpPreloading(){this.subscription=this.router.events.pipe(Pt(r=>r instanceof yn),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let e=[];for(let m of i){m.providers&&!m._injector&&(m._injector=Wi(m.providers,r,`Route: ${m.path}`));let b=m._injector??r,C=m._loadedInjector??b;(m.loadChildren&&!m._loadedRoutes&&m.canLoad===void 0||m.loadComponent&&!m._loadedComponent)&&e.push(this.preloadConfig(b,m)),(m.children||m._loadedRoutes)&&e.push(this.processRoutes(C,m.children??m._loadedRoutes))}return it(e).pipe(lr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let e;i.loadChildren&&i.canLoad===void 0?e=this.loader.loadChildren(r,i):e=Ne(null);let m=e.pipe(st(b=>b===null?Ne(void 0):(i._loadedRoutes=b.routes,i._loadedInjector=b.injector,this.processRoutes(b.injector??r,b.routes))));if(i.loadComponent&&!i._loadedComponent){let b=this.loader.loadComponent(i);return it([m,b]).pipe(lr())}else return m})}};n.\u0275fac=function(i){return new(i||n)(Re(Xn),Re(Qi),Re(Tt),Re(vs),Re(mu))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),th=new ke(""),MS=(()=>{let n=class n{constructor(r,i,e,m,b={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=e,this.zone=m,this.options=b,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ge(Tt),b.scrollPositionRestoration||="disabled",b.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Br?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof yn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Pn&&r.code===cs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ls&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>tr(this,null,function*(){yield new Promise(e=>{setTimeout(()=>{e()}),$i(()=>{e()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ls(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};n.\u0275fac=function(i){df()},n.\u0275prov=_e({token:n,factory:n.\u0275fac});let t=n;return t})();function OS(t){return t.routerState.root}function Uo(t,n){return{\u0275kind:t,\u0275providers:n}}function LS(){let t=ge(rn);return n=>{let o=t.get(xr);if(n!==o.components[0])return;let r=t.get(Xn),i=t.get(nh);t.get(Eu)===1&&r.initialNavigation(),t.get(rh,null,Ve.Optional)?.setUpPreloading(),t.get(th,null,Ve.Optional)?.init(),r.resetRootComponentType(o.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nh=new ke("",{factory:()=>new Ct}),Eu=new ke("",{providedIn:"root",factory:()=>1});function PS(){return Uo(2,[{provide:Eu,useValue:0},{provide:Yi,multi:!0,deps:[rn],useFactory:n=>{let o=n.get(Jf,Promise.resolve());return()=>o.then(()=>new Promise(r=>{let i=n.get(Xn),e=n.get(nh);eh(i,()=>{r(!0)}),n.get(yu).afterPreactivation=()=>(r(!0),e.closed?Ne(void 0):e),i.initialNavigation()}))}}])}function kS(){return Uo(3,[{provide:Yi,multi:!0,useFactory:()=>{let n=ge(Xn);return()=>{n.setUpLocationChangeListener()}}},{provide:Eu,useValue:2}])}var rh=new ke("");function FS(t){return Uo(0,[{provide:rh,useExisting:NS},{provide:vs,useExisting:t}])}function US(){return Uo(8,[Cp,{provide:ys,useExisting:Cp}])}function BS(t){let n=[{provide:Zp,useValue:CS},{provide:Xp,useValue:fe({skipNextTransition:!!t?.skipInitialTransition},t)}];return Uo(9,n)}var Ip=new ke("ROUTER_FORROOT_GUARD"),jS=[Mr,{provide:Oo,useClass:bo},Xn,Lo,{provide:jr,useFactory:OS,deps:[Xn]},mu,[]],Cu=(()=>{let n=class n{constructor(r){}static forRoot(r,i){return{ngModule:n,providers:[jS,[],{provide:ms,multi:!0,useValue:r},{provide:Ip,useFactory:WS,deps:[[Xn,new ka,new Xl]]},{provide:Fo,useValue:i||{}},i?.useHash?HS():$S(),VS(),i?.preloadingStrategy?FS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?GS(i):[],i?.bindToComponentInputs?US().\u0275providers:[],i?.enableViewTransitions?BS().\u0275providers:[],zS()]}}static forChild(r){return{ngModule:n,providers:[{provide:ms,multi:!0,useValue:r}]}}};n.\u0275fac=function(i){return new(i||n)(Re(Ip,8))},n.\u0275mod=zt({type:n}),n.\u0275inj=Gt({});let t=n;return t})();function VS(){return{provide:th,useFactory:()=>{let t=ge(op),n=ge(rt),o=ge(Fo),r=ge(yu),i=ge(Oo);return o.scrollOffset&&t.setOffset(o.scrollOffset),new MS(i,r,t,n,o)}}}function HS(){return{provide:Yn,useClass:tp}}function $S(){return{provide:Yn,useClass:wc}}function WS(t){return"guarded"}function GS(t){return[t.initialNavigation==="disabled"?kS().\u0275providers:[],t.initialNavigation==="enabledBlocking"?PS().\u0275providers:[]]}var Tp=new ke("");function zS(){return[{provide:Tp,useFactory:LS},{provide:yc,multi:!0,useExisting:Tp}]}var qS=[],oh=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=zt({type:n}),n.\u0275inj=Gt({imports:[Cu.forRoot(qS),Cu]});let t=n;return t})();(()=>{var t={821:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,e.agentApp={};var m={CCP:"ccp",GUIDES:"customviews"};e.agentApp.initCCP=e.core.initCCP,e.agentApp.isInitialized=function(l){},e.agentApp.initAppCommunication=function(l,u){var a=document.getElementById(l),y=new e.IFrameConduit(u,window,a),p=[e.AgentEvents.UPDATE,e.ContactEvents.VIEW,e.EventType.ACKNOWLEDGE,e.EventType.TERMINATED,e.TaskEvents.CREATED];a.addEventListener("load",function(s){p.forEach(function(d){e.core.getUpstream().onUpstream(d,function(c){y.sendUpstream(d,c)})})})};var b=function(l){var u=l.indexOf("ccp-v2");return l.slice(0,u-1)},C=function(l){var u=b(l)+"/logout";return e.fetch(u,{credentials:"include"}).then(function(){var a=e.core.getEventBus();return a.trigger(e.EventType.TERMINATE),!0}).catch(function(a){return e.getLog().error("An error occured on logout."+a).withException(a),window.location.href=u,!1})},D=function(l){e.agentApp.AppRegistry.delete(l)},_=function(l,u,a){let{contact:y,disableAutoDestroy:p,iframeSuffix:s,terminateCustomViewOptions:d={}}=a.customViewsParams,{contactFlowId:c}=a.customViewsParams,S,h;y!==void 0&&(S=g(y),S&&p!==!0&&typeof y!="string"&&y.onDestroy(T=>{e.core.terminateCustomView(l,s,{timeout:d.timeout||5e3,hideIframe:d.hideIframe!==void 0?d.hideIframe:!0,resolveIframe:d.resolveIframe!==void 0?d.resolveIframe:!0})}),c||console.warn("[CustomViews]: Need to provide a contactFlowId when defining contact parameter for initalizing customviews application")),s?h=`${m.GUIDES}${s}`:h=`${m.GUIDES}`;let I=`iframe[id='${h}']`,f=u?.querySelector(I)||document.getElementById(h)||window.top.document.getElementById(h);if(f){let T=AWS.util.uuid.v4();S?f.src=`${l}?contactFlowId=${c}&currentContactId=${S}&agentAppTabId=${T}-tab`:c&&(f.src=`${l}?contactFlowId=${c}&agentAppTabId=${T}-tab`)}else throw new Error("[CustomViews]: No iframe found for the app: ",h)},g=function(l){if(typeof l=="string")return l;try{return l.getContactId()}catch{console.error("[CustomViews]: Invalid Contact Provided: ",l);return}},v=function(l,u,a){var y={ccpUrl:l,ccpLoadTimeout:1e4,loginPopup:!0,loginUrl:b(l)+"/login",softphone:{allowFramedSoftphone:!0,disableRingtone:!1,allowFramedVideoCall:!0}},p=e.merge(y,a.ccpParams);e.core.initCCP(u,p)},E=function(l){var u=/[?&]?[^=?&]+=[^=?&]+/g;return u.test(l)};e.agentApp.initApp=function(l,u,a,y){y=y||{};var p=a.endsWith("/")||E(a)?a:a+"/",s=y.onLoad?y.onLoad:null,d={endpoint:p,style:y.style,onLoad:s},c;if(l===m.CCP_DR)c=m.CCP;else if(l===m.GUIDES&&y.customViewsParams){let{iframeSuffix:h}=y.customViewsParams;if(h?c=`${m.GUIDES}${h}`:c=`${m.GUIDES}`,e.agentApp.AppRegistry.get(c)!==void 0)throw new Error("[CustomViews]: Custom views application with the same name already exists. Please provide a different iframeSuffix for the custom views application.")}else c=l;var S=typeof u=="string"?document.getElementById(u):u;e.agentApp.AppRegistry.register(c,d,S),e.agentApp.AppRegistry.start(c,function(h){var I=h.endpoint,f=h.containerDOM;return{init:function(){switch(l){case m.CCP:return y.ccpParams=y.ccpParams?y.ccpParams:{},y.style&&(y.ccpParams.style=y.style),v(I,f,y);case m.GUIDES:return y.customViewsParams!==void 0?(e.agentApp.initAppCommunication(c,I,f),_(I,f,y)):e.agentApp.initAppCommunication(c,I,f);default:return e.agentApp.initAppCommunication(c,I,f)}},destroy:function(){switch(l){case m.CCP:return C(I);case m.GUIDES:return y.customViewsParams!==void 0?D(c):null;default:return null}}}})},e.agentApp.stopApp=function(l){return e.agentApp.AppRegistry.stop(l)}})()},500:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e;var m={CCP:"ccp"};function b(){var C={},D=function(_,g,v,E){var l=document.createElement("iframe");return l.src=g,l.style=v||"width: 100%; height:100%;",l.id=_,l["aria-label"]=_,l.onload=E,l.allow="clipboard-read; clipboard-write",l.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),l};return{register:function(_,g,v){C[_]={containerDOM:v,endpoint:g.endpoint,style:g.style,instance:void 0,onLoad:g.onLoad}},start:function(_,g){if(C[_]){var v=C[_].containerDOM,E=C[_].endpoint,l=C[_].style,u=C[_].onLoad;if(_!==m.CCP){var a=D(_,E,l,u);v.appendChild(a)}return C[_].instance=g(C[_]),C[_].instance.init()}},get:function(_){return C[_]},delete:function(_){delete C[_]},stop:function(_){if(C[_]){var g=C[_],v=g.containerDOM.querySelector("iframe");if(_.includes("customviews")){let l=`iframe[id='${_}']`;v=g.containerDOM.querySelector(l)}g.containerDOM.removeChild(v);var E;return g.instance&&(E=g.instance.destroy(),delete g.instance),E}}}}i.connect.agentApp.AppRegistry=b()})()},965:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,e.AgentStateType=e.makeEnum(["init","routable","not_routable","offline"]),e.AgentStatusType=e.AgentStateType,e.AgentAvailStates=e.makeEnum(["Init","Busy","AfterCallWork","CallingCustomer","Dialing","Joining","PendingAvailable","PendingBusy"]),e.AgentErrorStates=e.makeEnum(["Error","AgentHungUp","BadAddressAgent","BadAddressCustomer","Default","FailedConnectAgent","FailedConnectCustomer","InvalidLocale","LineEngagedAgent","LineEngagedCustomer","MissedCallAgent","MissedCallCustomer","MultipleCcpWindows","RealtimeCommunicationError"]),e.EndpointType=e.makeEnum(["phone_number","agent","queue"]),e.AddressType=e.EndpointType,e.ConnectionType=e.makeEnum(["agent","inbound","outbound","monitoring"]),e.ConnectionStateType=e.makeEnum(["init","connecting","connected","hold","disconnected","silent_monitor","barge"]),e.ConnectionStatusType=e.ConnectionStateType,e.CONNECTION_ACTIVE_STATES=e.set([e.ConnectionStateType.CONNECTING,e.ConnectionStateType.CONNECTED,e.ConnectionStateType.HOLD,e.ConnectionStateType.SILENT_MONITOR,e.ConnectionStateType.BARGE]),e.CONNECTION_CONNECTED_STATES=e.set([e.ConnectionStateType.CONNECTED,e.ConnectionStateType.SILENT_MONITOR,e.ConnectionStateType.BARGE]),e.ContactStateType=e.makeEnum(["init","incoming","pending","connecting","connected","missed","error","ended","rejected","paused"]),e.ContactStatusType=e.ContactStateType,e.CONTACT_ACTIVE_STATES=e.makeEnum(["paused","incoming","pending","connecting","connected"]),e.ContactType=e.makeEnum(["voice","queue_callback","chat","task"]),e.ContactInitiationMethod=e.makeEnum(["inbound","outbound","transfer","queue_transfer","callback","api","disconnect","webrtc_api"]),e.MonitoringMode=e.makeEnum(["SILENT_MONITOR","BARGE"]),e.MonitoringErrorTypes=e.makeEnum(["invalid_target_state"]),e.ChannelType=e.makeEnum(["VOICE","CHAT","TASK"]),e.MediaType=e.makeEnum(["softphone","chat","task"]),e.SoftphoneCallType=e.makeEnum(["audio_video","video_only","audio_only","none"]),e.SoftphoneErrorTypes=e.makeEnum(["unsupported_browser","microphone_not_shared","signalling_handshake_failure","signalling_connection_failure","ice_collection_timeout","user_busy_error","webrtc_error","realtime_communication_error","vdi_strategy_not_supported","vdi_redir_not_supported","other"]),e.ClickType=e.makeEnum(["Accept","Reject","Hangup"]),e.VoiceIdErrorTypes=e.makeEnum(["no_speaker_id_found","speaker_id_not_enrolled","get_speaker_id_failed","get_speaker_status_failed","opt_out_speaker_failed","opt_out_speaker_in_lcms_failed","delete_speaker_failed","start_session_failed","evaluate_speaker_failed","session_not_exists","describe_session_failed","enroll_speaker_failed","update_speaker_id_failed","update_speaker_id_in_lcms_failed","not_supported_on_conference_calls","enroll_speaker_timeout","evaluate_speaker_timeout","get_domain_id_failed","no_domain_id_found"]),e.CTIExceptions=e.makeEnum(["AccessDeniedException","InvalidStateException","BadEndpointException","InvalidAgentARNException","InvalidConfigurationException","InvalidContactTypeException","PaginationException","RefreshTokenExpiredException","SendDataFailedException","UnauthorizedException","QuotaExceededException"]),e.VoiceIdStreamingStatus=e.makeEnum(["ONGOING","ENDED","PENDING_CONFIGURATION"]),e.VoiceIdAuthenticationDecision=e.makeEnum(["ACCEPT","REJECT","NOT_ENOUGH_SPEECH","SPEAKER_NOT_ENROLLED","SPEAKER_OPTED_OUT","SPEAKER_ID_NOT_PROVIDED","SPEAKER_EXPIRED"]),e.VoiceIdFraudDetectionDecision=e.makeEnum(["NOT_ENOUGH_SPEECH","HIGH_RISK","LOW_RISK"]),e.ContactFlowAuthenticationDecision=e.makeEnum(["Authenticated","NotAuthenticated","Inconclusive","NotEnrolled","OptedOut","NotEnabled","Error"]),e.ContactFlowFraudDetectionDecision=e.makeEnum(["HighRisk","LowRisk","Inconclusive","NotEnabled","Error"]),e.VideoCapability=e.makeEnum(["SEND"]),e.VoiceIdEnrollmentRequestStatus=e.makeEnum(["NOT_ENOUGH_SPEECH","IN_PROGRESS","COMPLETED","FAILED"]),e.VoiceIdSpeakerStatus=e.makeEnum(["OPTED_OUT","ENROLLED","PENDING"]),e.VoiceIdConstants={EVALUATE_SESSION_DELAY:1e4,EVALUATION_MAX_POLL_TIMES:24,EVALUATION_POLLING_INTERVAL:5e3,ENROLLMENT_MAX_POLL_TIMES:120,ENROLLMENT_POLLING_INTERVAL:5e3,START_SESSION_DELAY:8e3},e.AgentPermissions={OUTBOUND_CALL:"outboundCall",VOICE_ID:"voiceId"};let m=(()=>{class s{static isEnabled=function(){let c=e.isCRM()?e.core.getClient():e.core.getApiProxyClient();return new Promise(function(S,h){c.call(e.ApiProxyClientMethods.QR_INTEGRATION_EXISTS,null,{success:function(I){e.getLog().info("Quick Responses isEnabled succeeded").withObject(I).sendInternalLogToServer(),S(I)},failure:function(I){e.getLog().error("Quick Responses isEnabled failed").withException(I).sendInternalLogToServer(),h(I)}})})};static searchQuickResponses=function(c){let S=e.isCRM()?e.core.getClient():e.core.getApiProxyClient(),h=c?.contactId?new D(c.contactId).getAttributes():void 0;return new Promise(function(I,f){S.call(e.ApiProxyClientMethods.QR_SEARCH_QUICK_RESPONSES,We(fe({},c),{attributes:h}),{success:function(T){e.getLog().info("searchQuickResponses succeeded").withObject(T).sendInternalLogToServer(),I(T)},failure:function(T){e.getLog().error("searchQuickResponses failed").withException(T).sendInternalLogToServer(),f(T)}})})}}return s})();var b=function(){if(!e.agent.initialized)throw new e.StateError("The agent is not yet initialized!")};b.prototype._getData=function(){return e.core.getAgentDataProvider().getAgentData()},b.prototype._createContactAPI=function(s){return new e.Contact(s.contactId)},b.prototype.onRefresh=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.REFRESH,s)},b.prototype.onRoutable=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.ROUTABLE,s)},b.prototype.onNotRoutable=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.NOT_ROUTABLE,s)},b.prototype.onOffline=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.OFFLINE,s)},b.prototype.onError=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.ERROR,s)},b.prototype.onSoftphoneError=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.SOFTPHONE_ERROR,s)},b.prototype.onWebSocketConnectionLost=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.WEBSOCKET_CONNECTION_LOST,s)},b.prototype.onWebSocketConnectionGained=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.WEBSOCKET_CONNECTION_GAINED,s)},b.prototype.onAfterCallWork=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.ACW,s)},b.prototype.onStateChange=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.STATE_CHANGE,s)},b.prototype.onMuteToggle=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.MUTE_TOGGLE,s)},b.prototype.onLocalMediaStreamCreated=function(s){return e.core.getEventBus().subscribe(e.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,s)},b.prototype.onSpeakerDeviceChanged=function(s){return e.core.getEventBus().subscribe(e.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,s)},b.prototype.onMicrophoneDeviceChanged=function(s){return e.core.getEventBus().subscribe(e.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,s)},b.prototype.onRingerDeviceChanged=function(s){return e.core.getEventBus().subscribe(e.ConfigurationEvents.RINGER_DEVICE_CHANGED,s)},b.prototype.onCameraDeviceChanged=function(s){return e.core.getEventBus().subscribe(e.ConfigurationEvents.CAMERA_DEVICE_CHANGED,s)},b.prototype.onBackgroundBlurChanged=function(s){return e.core.getEventBus().subscribe(e.ConfigurationEvents.BACKGROUND_BLUR_CHANGED,s)},b.prototype.mute=function(){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.MUTE,data:{mute:!0}})},b.prototype.unmute=function(){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.MUTE,data:{mute:!1}})},b.prototype.setSpeakerDevice=function(s){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.SET_SPEAKER_DEVICE,data:{deviceId:s}})},b.prototype.setMicrophoneDevice=function(s){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.SET_MICROPHONE_DEVICE,data:{deviceId:s}})},b.prototype.setRingerDevice=function(s){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.SET_RINGER_DEVICE,data:{deviceId:s}})},b.prototype.setCameraDevice=function(s){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.CAMERA_DEVICE_CHANGED,data:{deviceId:s}})},b.prototype.setBackgroundBlur=function(s){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.BACKGROUND_BLUR_CHANGED,data:{isBackgroundBlurEnabled:s}})},b.prototype.getState=function(){return this._getData().snapshot.state},b.prototype.getNextState=function(){return this._getData().snapshot.nextState},b.prototype.getAvailabilityState=function(){return this._getData().snapshot.agentAvailabilityState},b.prototype.getStatus=b.prototype.getState,b.prototype.getStateDuration=function(){return e.now()-this._getData().snapshot.state.startTimestamp.getTime()+e.core.getSkew()},b.prototype.getStatusDuration=b.prototype.getStateDuration,b.prototype.getPermissions=function(){return this.getConfiguration().permissions},b.prototype.getContacts=function(s){var d=this;return this._getData().snapshot.contacts.map(function(c){return d._createContactAPI(c)}).filter(function(c){return!s||c.getType()===s})},b.prototype.getConfiguration=function(){return this._getData().configuration},b.prototype.getAgentStates=function(){return this.getConfiguration().agentStates},b.prototype.getRoutingProfile=function(){return this.getConfiguration().routingProfile},b.prototype.getChannelConcurrency=function(s){var d=this.getRoutingProfile().channelConcurrencyMap;return d||(d=Object.keys(e.ChannelType).reduce(function(c,S){return S!=="TASK"&&(c[e.ChannelType[S]]=1),c},{})),s?d[s]||0:d},b.prototype.getName=function(){return this.getConfiguration().name},b.prototype.getAgentARN=function(){return this.getConfiguration().agentARN},b.prototype.getExtension=function(){return this.getConfiguration().extension},b.prototype.getDialableCountries=function(){return this.getConfiguration().dialableCountries},b.prototype.isSoftphoneEnabled=function(){return this.getConfiguration().softphoneEnabled},b.prototype.setConfiguration=function(s,d){var c=e.core.getClient();s&&s.agentPreferences&&s.agentPreferences.LANGUAGE&&!s.agentPreferences.locale&&(s.agentPreferences.locale=s.agentPreferences.LANGUAGE),s&&s.agentPreferences&&!e.isValidLocale(s.agentPreferences.locale)?d&&d.failure&&d.failure(e.AgentErrorStates.INVALID_LOCALE):c.call(e.ClientMethods.UPDATE_AGENT_CONFIGURATION,{configuration:e.assertNotNull(s,"configuration")},{success:function(S){var h=e.core.getUpstream();h.sendUpstream(e.EventType.RELOAD_AGENT_CONFIGURATION),d.success&&d.success(S)},failure:d&&d.failure})},b.prototype.setState=function(s,d,c){var S=e.core.getClient();S.call(e.ClientMethods.PUT_AGENT_STATE,{state:e.assertNotNull(s,"state"),enqueueNextState:c&&!!c.enqueueNextState},d)},b.prototype.onEnqueuedNextState=function(s){var d=e.core.getEventBus();d.subscribe(e.AgentEvents.ENQUEUED_NEXT_STATE,s)},b.prototype.setStatus=b.prototype.setState,b.prototype.connect=function(s,d){var c=e.core.getClient(),S=new e.Endpoint(s);delete S.endpointId;var h={endpoint:e.assertNotNull(S,"endpoint"),queueARN:d&&(d.queueARN||d.queueId)||this.getRoutingProfile().defaultOutboundQueue.queueARN};d&&d.relatedContactId&&d.relatedContactId!==null&&(h.relatedContactId=d.relatedContactId,d.previousContactId&&delete h.previousContactId),c.call(e.ClientMethods.CREATE_OUTBOUND_CONTACT,h,d&&{success:d.success,failure:d.failure})},b.prototype.getAllQueueARNs=function(){return this.getConfiguration().routingProfile.queues.map(function(s){return s.queueARN})},b.prototype.getEndpoints=function(s,d,c){var S=this,h=e.core.getClient();e.assertNotNull(d,"callbacks"),e.assertNotNull(d.success,"callbacks.success");var I=c||{};I.endpoints=I.endpoints||[],I.maxResults=I.maxResults||e.DEFAULT_BATCH_SIZE,e.isArray(s)||(s=[s]),h.call(e.ClientMethods.GET_ENDPOINTS,{queueARNs:s,nextToken:I.nextToken||null,maxResults:I.maxResults},{success:function(f){if(f.nextToken)S.getEndpoints(s,d,{nextToken:f.nextToken,maxResults:I.maxResults,endpoints:I.endpoints.concat(f.endpoints)});else{I.endpoints=I.endpoints.concat(f.endpoints);var T=I.endpoints.map(function(w){return new e.Endpoint(w)});d.success({endpoints:T,addresses:T})}},failure:d.failure})},b.prototype.getAddresses=b.prototype.getEndpoints,b.prototype._getResourceId=function(){var s=this.getAllQueueARNs();for(let d of s){let c=d.match(/\/agent\/([^/]+)/);if(c)return c[1]}return new Error("Agent.prototype._getResourceId: queueArns did not contain agentResourceId: ",s)},b.prototype.toSnapshot=function(){return new e.AgentSnapshot(this._getData())};var C=function(s){e.Agent.call(this),this.agentData=s};C.prototype=Object.create(b.prototype),C.prototype.constructor=C,C.prototype._getData=function(){return this.agentData},C.prototype._createContactAPI=function(s){return new e.ContactSnapshot(s)};var D=function(s){this.contactId=s};D.prototype._getData=function(){return e.core.getAgentDataProvider().getContactData(this.getContactId())},D.prototype._createConnectionAPI=function(s){return this.getType()===e.ContactType.CHAT?new e.ChatConnection(this.contactId,s.connectionId):this.getType()===e.ContactType.TASK?new e.TaskConnection(this.contactId,s.connectionId):new e.VoiceConnection(this.contactId,s.connectionId)},D.prototype.getEventName=function(s){return e.core.getContactEventName(s,this.getContactId())},D.prototype.onRefresh=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.REFRESH),s)},D.prototype.onIncoming=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.INCOMING),s)},D.prototype.onConnecting=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.CONNECTING),s)},D.prototype.onPending=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.PENDING),s)},D.prototype.onAccepted=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.ACCEPTED),s)},D.prototype.onMissed=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.MISSED),s)},D.prototype.onEnded=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.ENDED),s)},D.prototype.onDestroy=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.DESTROYED),s)},D.prototype.onACW=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.ACW),s)},D.prototype.onConnected=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.CONNECTED),s)},D.prototype.onError=function(s){return e.core.getEventBus().subscribe(this.getEventName(e.ContactEvents.ERROR),s)},D.prototype.getContactId=function(){return this.contactId},D.prototype.getOriginalContactId=function(){return this._getData().initialContactId},D.prototype.getInitialContactId=D.prototype.getOriginalContactId,D.prototype.getType=function(){return this._getData().type},D.prototype.getContactDuration=function(){return this._getData().contactDuration},D.prototype.getState=function(){return this._getData().state},D.prototype.getStatus=D.prototype.getState,D.prototype.getStateDuration=function(){return e.now()-this._getData().state.timestamp.getTime()+e.core.getSkew()},D.prototype.getStatusDuration=D.prototype.getStateDuration,D.prototype.getQueue=function(){return this._getData().queue},D.prototype.getQueueTimestamp=function(){return this._getData().queueTimestamp},D.prototype.getConnections=function(){var s=this;return this._getData().connections.map(function(d){return s.getType()===e.ContactType.CHAT?new e.ChatConnection(s.contactId,d.connectionId):s.getType()===e.ContactType.TASK?new e.TaskConnection(s.contactId,d.connectionId):new e.VoiceConnection(s.contactId,d.connectionId)})},D.prototype.getInitialConnection=function(){return e.find(this.getConnections(),function(s){return s.isInitialConnection()})||null},D.prototype.getActiveInitialConnection=function(){var s=this.getInitialConnection();return s!=null&&s.isActive()?s:null},D.prototype.getThirdPartyConnections=function(){return this.getConnections().filter(function(s){return!s.isInitialConnection()&&s.getType()!==e.ConnectionType.AGENT})},D.prototype.getSingleActiveThirdPartyConnection=function(){return this.getThirdPartyConnections().filter(function(s){return s.isActive()})[0]||null},D.prototype.getAgentConnection=function(){return e.find(this.getConnections(),function(s){var d=s.getType();return d===e.ConnectionType.AGENT||d===e.ConnectionType.MONITORING})},D.prototype.getActiveConnections=function(){return this.getConnections().filter(s=>s.isActive())},D.prototype.hasTwoActiveParticipants=function(){return this.getActiveConnections().length===2},D.prototype.getName=function(){return this._getData().name},D.prototype.getContactMetadata=function(){return this._getData().contactMetadata},D.prototype.getDescription=function(){return this._getData().description},D.prototype.getReferences=function(){return this._getData().references},D.prototype.getAttributes=function(){return this._getData().attributes},D.prototype.getContactFeatures=function(){return this._getData().contactFeatures},D.prototype.getChannelContext=function(){return this._getData().channelContext},D.prototype.getSegmentAttributes=function(){return this._getData().segmentAttributes},D.prototype.getContactSubtype=function(){let s=this.getSegmentAttributes();return s&&s["connect:Subtype"]?s["connect:Subtype"].ValueString:null},D.prototype.isSoftphoneCall=function(){return e.find(this.getConnections(),function(s){return s.getSoftphoneMediaInfo()!=null})!=null},D.prototype.hasVideoRTCCapabilities=function(){return e.find(this.getConnections(),function(s){return s.canSendVideo&&s.canSendVideo()})!=null},D.prototype.canAgentSendVideo=function(){let s=this.getAgentConnection();return s.canSendVideo&&s.canSendVideo()},D.prototype.canAgentReceiveVideo=function(){let s=this.getInitialConnection();if(s.canSendVideo&&s.canSendVideo())return!0;let d=this.getThirdPartyConnections();return d&&d.length>0&&this.canAgentSendVideo()},D.prototype._isInbound=function(){var s=this._getData().initiationMethod;return s!==e.ContactInitiationMethod.OUTBOUND},D.prototype.isInbound=function(){var s=this.getInitialConnection();return s.getMediaType()===e.MediaType.TASK?this._isInbound():s?s.getType()===e.ConnectionType.INBOUND:!1},D.prototype.isConnected=function(){return this.getStatus().type===e.ContactStateType.CONNECTED},D.prototype.accept=function(s){var d=e.core.getClient(),c=this,S=this.getContactId();e.publishClickStreamData({contactId:this.getContactId(),clickType:e.ClickType.ACCEPT,clickTime:new Date().toISOString()}),d.call(e.ClientMethods.ACCEPT_CONTACT,{contactId:S},{success:function(h){var I=e.core.getUpstream();I.sendUpstream(e.EventType.BROADCAST,{event:e.ContactEvents.ACCEPTED,data:new e.Contact(S)}),I.sendUpstream(e.EventType.BROADCAST,{event:e.core.getContactEventName(e.ContactEvents.ACCEPTED,c.getContactId()),data:new e.Contact(S)});var f=new e.Contact(S);e.isFirefoxBrowser()&&f.isSoftphoneCall()&&e.core.triggerReadyToStartSessionEvent(),s&&s.success&&s.success(h)},failure:function(h,I){e.getLog().error("Accept Contact failed").sendInternalLogToServer().withException(h).withObject({data:I}),e.publishMetric({name:"ContactAcceptFailure",data:{count:1}}),s&&s.failure&&s.failure(e.ContactStateType.ERROR)}})},D.prototype.destroy=function(){e.getLog().warn("contact.destroy() has been deprecated.")},D.prototype.reject=function(s){var d=e.core.getClient();e.publishClickStreamData({contactId:this.getContactId(),clickType:e.ClickType.REJECT,clickTime:new Date().toISOString()}),d.call(e.ClientMethods.REJECT_CONTACT,{contactId:this.getContactId()},s)},D.prototype.complete=function(s){var d=e.core.getClient();d.call(e.ClientMethods.COMPLETE_CONTACT,{contactId:this.getContactId()},s)},D.prototype.clear=function(s){var d=e.core.getClient();d.call(e.ClientMethods.CLEAR_CONTACT,{contactId:this.getContactId()},s)},D.prototype.notifyIssue=function(s,d,c){var S=e.core.getClient();S.call(e.ClientMethods.NOTIFY_CONTACT_ISSUE,{contactId:this.getContactId(),issueCode:s,description:d},c)},D.prototype.addConnection=function(s,d){var c=e.core.getClient(),S=new e.Endpoint(s);delete S.endpointId,c.call(e.ClientMethods.CREATE_ADDITIONAL_CONNECTION,{contactId:this.getContactId(),endpoint:S},d)},D.prototype.toggleActiveConnections=function(s){var d=e.core.getClient(),c=null,S=e.find(this.getConnections(),function(I){return I.getStatus().type===e.ConnectionStateType.HOLD});if(S!=null)c=S.getConnectionId();else{var h=this.getConnections().filter(function(I){return I.isActive()});h.length>0&&(c=h[0].getConnectionId())}d.call(e.ClientMethods.TOGGLE_ACTIVE_CONNECTIONS,{contactId:this.getContactId(),connectionId:c},s)},D.prototype.sendSoftphoneMetrics=function(s,d){var c=e.core.getClient();c.call(e.ClientMethods.SEND_SOFTPHONE_CALL_METRICS,{contactId:this.getContactId(),ccpVersion:i.ccpVersion,softphoneStreamStatistics:s},d),e.publishSoftphoneStats({contactId:this.getContactId(),ccpVersion:i.ccpVersion,stats:s})},D.prototype.sendSoftphoneReport=function(s,d){var c=e.core.getClient();c.call(e.ClientMethods.SEND_SOFTPHONE_CALL_REPORT,{contactId:this.getContactId(),ccpVersion:i.ccpVersion,report:s},d)},D.prototype.conferenceConnections=function(s){var d=e.core.getClient();d.call(e.ClientMethods.CONFERENCE_CONNECTIONS,{contactId:this.getContactId()},s)},D.prototype.toSnapshot=function(){return new e.ContactSnapshot(this._getData())},D.prototype.isMultiPartyConferenceEnabled=function(){var s=this.getContactFeatures();return!!(s&&s.multiPartyConferenceEnabled)},D.prototype.updateMonitorParticipantState=function(s,d){if(!s||!Object.values(e.MonitoringMode).includes(s.toUpperCase()))e.getLog().error(`Invalid target state was provided: ${s}`).sendInternalLogToServer(),d&&d.failure&&d.failure(e.MonitoringErrorTypes.INVALID_TARGET_STATE);else{var c=e.core.getClient();c.call(e.ClientMethods.UPDATE_MONITOR_PARTICIPANT_STATE,{contactId:this.getContactId(),targetMonitorMode:s.toUpperCase()},d)}},D.prototype.isUnderSupervision=function(){var s=this.getConnections().filter(c=>c.getType()!==e.ConnectionType.AGENT),d=s&&s.find(c=>c.isBarge()&&c.isActive());return d!==void 0},D.prototype.silentMonitor=function(s){return this.updateMonitorParticipantState(e.MonitoringMode.SILENT_MONITOR,s)},D.prototype.bargeIn=function(s){return this.updateMonitorParticipantState(e.MonitoringMode.BARGE,s)},D.prototype.pause=function(s){var d=e.core.getClient();d.call(e.ClientMethods.PAUSE_CONTACT,{contactId:this.getContactId()},s)},D.prototype.resume=function(s){var d=e.core.getClient();d.call(e.ClientMethods.RESUME_CONTACT,{contactId:this.getContactId()},s)};var _=function(s){e.Contact.call(this,s.contactId),this.contactData=s};_.prototype=Object.create(D.prototype),_.prototype.constructor=_,_.prototype._getData=function(){return this.contactData},_.prototype._createConnectionAPI=function(s){return new e.ConnectionSnapshot(s)};var g=function(s,d){this.contactId=s,this.connectionId=d,this._initMediaController()};g.prototype._getData=function(){return e.core.getAgentDataProvider().getConnectionData(this.getContactId(),this.getConnectionId())},g.prototype.getContactId=function(){return this.contactId},g.prototype.getConnectionId=function(){return this.connectionId},g.prototype.getEndpoint=function(){return new e.Endpoint(this._getData().endpoint)},g.prototype.getAddress=g.prototype.getEndpoint,g.prototype.getState=function(){return this._getData().state},g.prototype.getStatus=g.prototype.getState,g.prototype.getStateDuration=function(){return e.now()-this._getData().state.timestamp.getTime()+e.core.getSkew()},g.prototype.getStatusDuration=g.prototype.getStateDuration,g.prototype.getType=function(){return this._getData().type},g.prototype.isInitialConnection=function(){return this._getData().initial},g.prototype.isActive=function(){return e.contains(e.CONNECTION_ACTIVE_STATES,this.getStatus().type)},g.prototype.isConnected=function(){return e.contains(e.CONNECTION_CONNECTED_STATES,this.getStatus().type)},g.prototype.isConnecting=function(){return this.getStatus().type===e.ConnectionStateType.CONNECTING},g.prototype.isOnHold=function(){return this.getStatus().type===e.ConnectionStateType.HOLD},g.prototype.getSoftphoneMediaInfo=function(){return this._getData().softphoneMediaInfo},g.prototype.getMonitorInfo=function(){return this._getData().monitoringInfo},g.prototype.destroy=function(s){e.publishClickStreamData({contactId:this.getContactId(),clickType:e.ClickType.HANGUP,clickTime:new Date().toISOString()});var d=e.core.getClient();d.call(e.ClientMethods.DESTROY_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},s)},g.prototype.sendDigits=function(s,d){var c=e.core.getClient();c.call(e.ClientMethods.SEND_DIGITS,{contactId:this.getContactId(),connectionId:this.getConnectionId(),digits:s},d)},g.prototype.hold=function(s){var d=e.core.getClient();d.call(e.ClientMethods.HOLD_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},s)},g.prototype.resume=function(s){var d=e.core.getClient();d.call(e.ClientMethods.RESUME_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},s)},g.prototype.toSnapshot=function(){return new e.ConnectionSnapshot(this._getData())},g.prototype._initMediaController=function(){this.getMediaInfo()&&e.core.mediaFactory.get(this).catch(function(){})},g.prototype._isAgentConnectionType=function(){var s=this.getType();return s===e.ConnectionType.AGENT||s===e.ConnectionType.MONITORING},g.prototype._isAgentConnectionType=function(){var s=this.getType();return s===e.ConnectionType.AGENT||s===e.ConnectionType.MONITORING};var v=function(s){this.contactId=s};v.prototype.getSpeakerId=function(){var s=this;s.checkConferenceCall();var d=e.core.getClient();return new Promise(function(c,S){let h={contactId:s.contactId,instanceId:e.core.getAgentDataProvider().getInstanceId(),awsAccountId:e.core.getAgentDataProvider().getAWSAccountId()};e.getLog().info("getSpeakerId called").withObject(h).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.GET_CONTACT,h,{success:function(I){if(I.contactData.customerId){var f={speakerId:I.contactData.customerId};e.getLog().info("getSpeakerId succeeded").withObject(I).sendInternalLogToServer(),c(f)}else{var T=e.VoiceIdError(e.VoiceIdErrorTypes.NO_SPEAKER_ID_FOUND,"No speakerId assotiated with this call");S(T)}},failure:function(I){e.getLog().error("Get SpeakerId failed").withObject({err:I}).sendInternalLogToServer();var f=e.VoiceIdError(e.VoiceIdErrorTypes.GET_SPEAKER_ID_FAILED,"Get SpeakerId failed",I);S(f)}})})},v.prototype.getSpeakerStatus=function(){var s=this;s.checkConferenceCall();var d=e.core.getClient();return new Promise(function(c,S){s.getSpeakerId().then(function(h){s.getDomainId().then(function(I){let f={SpeakerId:e.assertNotNull(h.speakerId,"speakerId"),DomainId:I};e.getLog().info("getSpeakerStatus called").withObject(f).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.DESCRIBE_SPEAKER,f,{success:function(T){e.getLog().info("getSpeakerStatus succeeded").withObject(T).sendInternalLogToServer(),c(T)},failure:function(T){var w,x=JSON.parse(T);switch(x.status){case 400:case 404:var P=x;P.type=P.type?P.type:e.VoiceIdErrorTypes.SPEAKER_ID_NOT_ENROLLED,e.getLog().info("Speaker is not enrolled.").sendInternalLogToServer(),c(P);break;default:e.getLog().error("getSpeakerStatus failed").withObject({err:T}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.GET_SPEAKER_STATUS_FAILED,"Get SpeakerStatus failed",T);S(w)}}})}).catch(function(I){S(I)})}).catch(function(h){S(h)})})},v.prototype._optOutSpeakerInLcms=function(s,d){var c=this,S=e.core.getClient();return new Promise(function(h,I){let f={ContactId:c.contactId,InstanceId:e.core.getAgentDataProvider().getInstanceId(),AWSAccountId:e.core.getAgentDataProvider().getAWSAccountId(),CustomerId:e.assertNotNull(s,"speakerId"),VoiceIdResult:{SpeakerOptedOut:!0,generatedSpeakerId:d}};e.getLog().info("_optOutSpeakerInLcms called").withObject(f).sendInternalLogToServer(),S.call(e.AgentAppClientMethods.UPDATE_VOICE_ID_DATA,f,{success:function(T){e.getLog().info("optOutSpeakerInLcms succeeded").withObject(T).sendInternalLogToServer(),h(T)},failure:function(T){e.getLog().error("optOutSpeakerInLcms failed").withObject({err:T}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.OPT_OUT_SPEAKER_IN_LCMS_FAILED,"optOutSpeakerInLcms failed",T);I(w)}})})},v.prototype.optOutSpeaker=function(){var s=this;s.checkConferenceCall();var d=e.core.getClient();return new Promise(function(c,S){s.getSpeakerId().then(function(h){s.getDomainId().then(function(I){var f=h.speakerId;let T={SpeakerId:e.assertNotNull(f,"speakerId"),DomainId:I};e.getLog().info("optOutSpeaker called").withObject(T).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.OPT_OUT_SPEAKER,T,{success:function(w){s._optOutSpeakerInLcms(f,w.generatedSpeakerId).catch(function(){}),e.getLog().info("optOutSpeaker succeeded").withObject(w).sendInternalLogToServer(),c(w)},failure:function(w){e.getLog().error("optOutSpeaker failed").withObject({err:w}).sendInternalLogToServer();var x=e.VoiceIdError(e.VoiceIdErrorTypes.OPT_OUT_SPEAKER_FAILED,"optOutSpeaker failed.",w);S(x)}})}).catch(function(I){S(I)})}).catch(function(h){S(h)})})},v.prototype.deleteSpeaker=function(){var s=this;s.checkConferenceCall();var d=e.core.getClient();return new Promise(function(c,S){s.getSpeakerId().then(function(h){s.getDomainId().then(function(I){let f={SpeakerId:e.assertNotNull(h.speakerId,"speakerId"),DomainId:I};e.getLog().info("deleteSpeaker called").withObject(f).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.DELETE_SPEAKER,f,{success:function(T){e.getLog().info("deleteSpeaker succeeded").withObject(T).sendInternalLogToServer(),c(T)},failure:function(T){e.getLog().error("deleteSpeaker failed").withObject({err:T}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.DELETE_SPEAKER_FAILED,"deleteSpeaker failed.",T);S(w)}})}).catch(function(I){S(I)})}).catch(function(h){S(h)})})},v.prototype.startSession=function(){var s=this;s.checkConferenceCall();var d=e.core.getClient();return new Promise(function(c,S){s.getDomainId().then(function(h){let I={contactId:s.contactId,instanceId:e.core.getAgentDataProvider().getInstanceId(),customerAccountId:e.core.getAgentDataProvider().getAWSAccountId(),clientToken:AWS.util.uuid.v4(),domainId:h};e.getLog().info("startSession called").withObject(I).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.START_VOICE_ID_SESSION,I,{success:function(f){if(f.sessionId)c(f);else{e.getLog().error("startVoiceIdSession failed, no session id returned").withObject({data:f}).sendInternalLogToServer();var T=e.VoiceIdError(e.VoiceIdErrorTypes.START_SESSION_FAILED,"No session id returned from start session api");S(T)}},failure:function(f){e.getLog().error("startVoiceIdSession failed").withObject({err:f}).sendInternalLogToServer();var T=e.VoiceIdError(e.VoiceIdErrorTypes.START_SESSION_FAILED,"startVoiceIdSession failed",f);S(T)}})}).catch(function(h){S(h)})})},v.prototype.evaluateSpeaker=function(s){var d=this;d.checkConferenceCall();var c=e.core.getClient(),S=e.core.getAgentDataProvider().getContactData(this.contactId),h=0;return new Promise(function(I,f){function T(){d.getDomainId().then(function(w){let x={SessionNameOrId:S.initialContactId||this.contactId,DomainId:w};e.getLog().info("evaluateSpeaker called").withObject(x).sendInternalLogToServer(),c.call(e.AgentAppClientMethods.EVALUATE_SESSION,x,{success:function(P){if(++h<e.VoiceIdConstants.EVALUATION_MAX_POLL_TIMES)if(P.StreamingStatus===e.VoiceIdStreamingStatus.PENDING_CONFIGURATION)setTimeout(T,e.VoiceIdConstants.EVALUATION_POLLING_INTERVAL);else{if(P.AuthenticationResult||(P.AuthenticationResult={},P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.NOT_ENABLED),P.FraudDetectionResult||(P.FraudDetectionResult={},P.FraudDetectionResult.Decision=e.ContactFlowFraudDetectionDecision.NOT_ENABLED),!d.isAuthEnabled(P.AuthenticationResult.Decision)&&!d.isFraudEnabled(P.FraudDetectionResult.Decision)){e.getLog().info("evaluateSpeaker succeeded").withObject(P).sendInternalLogToServer(),I(P);return}if(P.StreamingStatus===e.VoiceIdStreamingStatus.ENDED&&(d.isAuthResultNotEnoughSpeech(P.AuthenticationResult.Decision)&&(P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.INCONCLUSIVE),d.isFraudResultNotEnoughSpeech(P.FraudDetectionResult.Decision)&&(P.FraudDetectionResult.Decision=e.ContactFlowFraudDetectionDecision.INCONCLUSIVE)),d.isAuthResultInconclusive(P.AuthenticationResult.Decision)&&d.isFraudResultInconclusive(P.FraudDetectionResult.Decision)){e.getLog().info("evaluateSpeaker succeeded").withObject(P).sendInternalLogToServer(),I(P);return}if(!d.isAuthResultNotEnoughSpeech(P.AuthenticationResult.Decision)&&d.isAuthEnabled(P.AuthenticationResult.Decision))switch(P.AuthenticationResult.Decision){case e.VoiceIdAuthenticationDecision.ACCEPT:P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.AUTHENTICATED;break;case e.VoiceIdAuthenticationDecision.REJECT:P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.NOT_AUTHENTICATED;break;case e.VoiceIdAuthenticationDecision.SPEAKER_OPTED_OUT:P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.OPTED_OUT;break;case e.VoiceIdAuthenticationDecision.SPEAKER_NOT_ENROLLED:P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.NOT_ENROLLED;break;default:P.AuthenticationResult.Decision=e.ContactFlowAuthenticationDecision.ERROR}if(!d.isFraudResultNotEnoughSpeech(P.FraudDetectionResult.Decision)&&d.isFraudEnabled(P.FraudDetectionResult.Decision))switch(P.FraudDetectionResult.Decision){case e.VoiceIdFraudDetectionDecision.HIGH_RISK:P.FraudDetectionResult.Decision=e.ContactFlowFraudDetectionDecision.HIGH_RISK;break;case e.VoiceIdFraudDetectionDecision.LOW_RISK:P.FraudDetectionResult.Decision=e.ContactFlowFraudDetectionDecision.LOW_RISK;break;default:P.FraudDetectionResult.Decision=e.ContactFlowFraudDetectionDecision.ERROR}if(!d.isAuthResultNotEnoughSpeech(P.AuthenticationResult.Decision)&&!d.isFraudResultNotEnoughSpeech(P.FraudDetectionResult.Decision)){e.getLog().info("evaluateSpeaker succeeded").withObject(P).sendInternalLogToServer(),I(P);return}else setTimeout(T,e.VoiceIdConstants.EVALUATION_POLLING_INTERVAL)}else{e.getLog().error("evaluateSpeaker timeout").sendInternalLogToServer();var F=e.VoiceIdError(e.VoiceIdErrorTypes.EVALUATE_SPEAKER_TIMEOUT,"evaluateSpeaker timeout");f(F)}},failure:function(P){var F,W=JSON.parse(P);switch(W.status){case 400:case 404:F=e.VoiceIdError(e.VoiceIdErrorTypes.SESSION_NOT_EXISTS,"evaluateSpeaker failed, session not exists",P),e.getLog().error("evaluateSpeaker failed, session not exists").withObject({err:P}).sendInternalLogToServer();break;default:F=e.VoiceIdError(e.VoiceIdErrorTypes.EVALUATE_SPEAKER_FAILED,"evaluateSpeaker failed",P),e.getLog().error("evaluateSpeaker failed").withObject({err:P}).sendInternalLogToServer()}f(F)}})}).catch(function(w){f(w)})}s?d.startSession().then(function(w){d.syncSpeakerId().then(function(x){setTimeout(T,e.VoiceIdConstants.EVALUATE_SESSION_DELAY)}).catch(function(x){e.getLog().error("syncSpeakerId failed when session startNew=true").withObject({err:x}).sendInternalLogToServer(),f(x)})}).catch(function(w){e.getLog().error("startSession failed when session startNew=true").withObject({err:w}).sendInternalLogToServer(),f(w)}):d.syncSpeakerId().then(function(){T()}).catch(function(w){e.getLog().error("syncSpeakerId failed when session startNew=false").withObject({err:w}).sendInternalLogToServer(),f(w)})})},v.prototype.describeSession=function(){var s=this,d=e.core.getClient(),c=e.core.getAgentDataProvider().getContactData(this.contactId);return new Promise(function(S,h){s.getDomainId().then(function(I){let f={SessionNameOrId:c.initialContactId||this.contactId,DomainId:I};e.getLog().info("describeSession called").withObject(f).sendInternalLogToServer(),d.call(e.AgentAppClientMethods.DESCRIBE_SESSION,f,{success:function(T){S(T)},failure:function(T){e.getLog().error("describeSession failed").withObject({err:T}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.DESCRIBE_SESSION_FAILED,"describeSession failed",T);h(w)}})}).catch(function(I){h(I)})})},v.prototype.checkEnrollmentStatus=function(s){e.getLog().info("checkEnrollmentStatus called").sendInternalLogToServer();var d=this,c=0,S=!1;return new Promise(function(h,I){function f(){if(++c<e.VoiceIdConstants.ENROLLMENT_MAX_POLL_TIMES)d.describeSession().then(function(w){switch(w.Session.EnrollmentRequestDetails.Status){case e.VoiceIdEnrollmentRequestStatus.COMPLETED:h(w);break;case e.VoiceIdEnrollmentRequestStatus.IN_PROGRESS:!S&&typeof s=="function"&&(s(w),S=!0),setTimeout(f,e.VoiceIdConstants.ENROLLMENT_POLLING_INTERVAL);break;case e.VoiceIdEnrollmentRequestStatus.NOT_ENOUGH_SPEECH:w.Session.StreamingStatus!==e.VoiceIdStreamingStatus.ENDED?setTimeout(f,e.VoiceIdConstants.ENROLLMENT_POLLING_INTERVAL):setTimeout(function(){d.startSession().then(function(F){f()}).catch(function(F,W){I(F)})},e.VoiceIdConstants.START_SESSION_DELAY);break;default:var x=w.Session.EnrollmentRequestDetails.Message?w.Session.EnrollmentRequestDetails.Message:"enrollSpeaker failed. Unknown enrollment status has been received";e.getLog().error(x).sendInternalLogToServer();var P=e.VoiceIdError(e.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED,x,w.Session.EnrollmentRequestDetails.Status);I(P)}});else{e.getLog().error("enrollSpeaker timeout").sendInternalLogToServer();var T=e.VoiceIdError(e.VoiceIdErrorTypes.ENROLL_SPEAKER_TIMEOUT,"enrollSpeaker timeout");I(T)}}f()})},v.prototype.enrollSpeaker=function(s){e.getLog().info("enrollSpeaker called").sendInternalLogToServer();var d=this;return d.checkConferenceCall(),new Promise(function(c,S){d.syncSpeakerId().then(function(){d.getSpeakerStatus().then(function(h){h.Speaker&&h.Speaker.Status==e.VoiceIdSpeakerStatus.OPTED_OUT?d.deleteSpeaker().then(function(){d.enrollSpeakerHelper(c,S,s)}).catch(function(I){S(I)}):d.enrollSpeakerHelper(c,S,s)}).catch(function(h){S(h)})}).catch(function(h){S(h)})})},v.prototype.enrollSpeakerHelper=function(s,d,c){var S=this,h=e.core.getClient(),I=e.core.getAgentDataProvider().getContactData(this.contactId);S.getDomainId().then(function(f){let T={SessionNameOrId:I.initialContactId||this.contactId,DomainId:f};e.getLog().info("enrollSpeakerHelper called").withObject(T).sendInternalLogToServer(),h.call(e.AgentAppClientMethods.ENROLL_BY_SESSION,T,{success:function(w){w.Status===e.VoiceIdEnrollmentRequestStatus.COMPLETED?(e.getLog().info("enrollSpeaker succeeded").withObject(w).sendInternalLogToServer(),s(w)):S.checkEnrollmentStatus(c).then(function(x){e.getLog().info("enrollSpeaker succeeded").withObject(x).sendInternalLogToServer(),s(x)}).catch(function(x){d(x)})},failure:function(w){e.getLog().error("enrollSpeaker failed").withObject({err:w}).sendInternalLogToServer();var x=e.VoiceIdError(e.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED,"enrollSpeaker failed",w);d(x)}})}).catch(function(f){d(f)})},v.prototype._updateSpeakerIdInLcms=function(s,d){var c=this,S=e.core.getClient();return new Promise(function(h,I){let f={ContactId:c.contactId,InstanceId:e.core.getAgentDataProvider().getInstanceId(),AWSAccountId:e.core.getAgentDataProvider().getAWSAccountId(),CustomerId:e.assertNotNull(s,"speakerId"),VoiceIdResult:{generatedSpeakerId:d}};e.getLog().info("_updateSpeakerIdInLcms called").withObject(f).sendInternalLogToServer(),S.call(e.AgentAppClientMethods.UPDATE_VOICE_ID_DATA,f,{success:function(T){e.getLog().info("updateSpeakerIdInLcms succeeded").withObject(T).sendInternalLogToServer(),h(T)},failure:function(T){e.getLog().error("updateSpeakerIdInLcms failed").withObject({err:T}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_IN_LCMS_FAILED,"updateSpeakerIdInLcms failed",T);I(w)}})})},v.prototype.updateSpeakerIdInVoiceId=function(s){var d=this;d.checkConferenceCall();var c=e.core.getClient(),S=e.core.getAgentDataProvider().getContactData(this.contactId);return new Promise(function(h,I){d.getDomainId().then(function(f){let T={SessionNameOrId:S.initialContactId||this.contactId,SpeakerId:e.assertNotNull(s,"speakerId"),DomainId:f};e.getLog().info("updateSpeakerIdInVoiceId called").withObject(T).sendInternalLogToServer(),c.call(e.AgentAppClientMethods.UPDATE_SESSION,T,{success:function(w){e.getLog().info("updateSpeakerIdInVoiceId succeeded").withObject(w).sendInternalLogToServer();var x=w&&w.Session&&w.Session.GeneratedSpeakerId;d._updateSpeakerIdInLcms(s,x).then(function(){h(w)}).catch(function(P){I(P)})},failure:function(w){var x,P=JSON.parse(w);switch(P.status){case 400:case 404:x=e.VoiceIdError(e.VoiceIdErrorTypes.SESSION_NOT_EXISTS,"updateSpeakerIdInVoiceId failed, session not exists",w),e.getLog().error("updateSpeakerIdInVoiceId failed, session not exists").withObject({err:w}).sendInternalLogToServer();break;default:x=e.VoiceIdError(e.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_FAILED,"updateSpeakerIdInVoiceId failed",w),e.getLog().error("updateSpeakerIdInVoiceId failed").withObject({err:w}).sendInternalLogToServer()}I(x)}})}).catch(function(f){I(f)})})},v.prototype.syncSpeakerId=function(){e.getLog().info("syncSpeakerId called").sendInternalLogToServer();var s=this;return new Promise(function(d,c){s.getSpeakerId().then(function(S){s.updateSpeakerIdInVoiceId(S.speakerId).then(function(h){d(h)}).catch(function(h){c(h)})}).catch(function(S){c(S)})})},v.prototype.getDomainId=function(){return new Promise(function(s,d){if(!new e.Agent().getPermissions().includes(e.AgentPermissions.VOICE_ID))d(new Error("Agent doesn't have the permission for Voice ID"));else if(e.core.voiceIdDomainId)s(e.core.voiceIdDomainId);else{var S=e.core.getClient();let h={InstanceId:e.core.getAgentDataProvider().getInstanceId(),IntegrationType:"VOICE_ID"};e.getLog().info("getDomainId called").withObject(h).sendInternalLogToServer(),S.call(e.AgentAppClientMethods.LIST_INTEGRATION_ASSOCIATIONS,h,{success:function(I){try{var f;if(I.IntegrationAssociationSummaryList.length>=1){var T=I.IntegrationAssociationSummaryList[0].IntegrationArn;f=T.replace(/^.*domain\//i,"")}if(!f){e.getLog().info("getDomainId: no domainId found").sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.NO_DOMAIN_ID_FOUND);d(w);return}e.getLog().info("getDomainId succeeded").withObject(I).sendInternalLogToServer(),e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.VoiceIdEvents.UPDATE_DOMAIN_ID,data:{domainId:f}}),s(f)}catch(x){e.getLog().error("getDomainId failed").withObject({err:x}).sendInternalLogToServer();var w=e.VoiceIdError(e.VoiceIdErrorTypes.GET_DOMAIN_ID_FAILED,"getDomainId failed",x);d(w)}},failure:function(I){e.getLog().error("getDomainId failed").withObject({err:I}).sendInternalLogToServer();var f=e.VoiceIdError(e.VoiceIdErrorTypes.GET_DOMAIN_ID_FAILED,"getDomainId failed",I);d(f)}})}})},v.prototype.checkConferenceCall=function(){var s=this,d=e.core.getAgentDataProvider().getContactData(s.contactId).connections.filter(function(c){return e.contains(e.CONNECTION_ACTIVE_STATES,c.state.type)}).length>2;if(d)throw new e.NotImplementedError("VoiceId is not supported for conference calls")},v.prototype.isAuthEnabled=function(s){return s!==e.ContactFlowAuthenticationDecision.NOT_ENABLED},v.prototype.isAuthResultNotEnoughSpeech=function(s){return s===e.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH},v.prototype.isAuthResultInconclusive=function(s){return s===e.ContactFlowAuthenticationDecision.INCONCLUSIVE},v.prototype.isFraudEnabled=function(s){return s!==e.ContactFlowFraudDetectionDecision.NOT_ENABLED},v.prototype.isFraudResultNotEnoughSpeech=function(s){return s===e.VoiceIdFraudDetectionDecision.NOT_ENOUGH_SPEECH},v.prototype.isFraudResultInconclusive=function(s){return s===e.ContactFlowFraudDetectionDecision.INCONCLUSIVE};var E=function(s,d){this._speakerAuthenticator=new v(s),g.call(this,s,d)};E.prototype=Object.create(g.prototype),E.prototype.constructor=E,E.prototype.getSoftphoneMediaInfo=function(){return this._getData().softphoneMediaInfo},E.prototype.getMediaInfo=function(){return this._getData().softphoneMediaInfo},E.prototype.getMediaType=function(){return e.MediaType.SOFTPHONE},E.prototype.getMediaController=function(){return e.core.mediaFactory.get(this)},E.prototype.getVoiceIdSpeakerId=function(){return this._speakerAuthenticator.getSpeakerId()},E.prototype.getVoiceIdSpeakerStatus=function(){return this._speakerAuthenticator.getSpeakerStatus()},E.prototype.optOutVoiceIdSpeaker=function(){return this._speakerAuthenticator.optOutSpeaker()},E.prototype.deleteVoiceIdSpeaker=function(){return this._speakerAuthenticator.deleteSpeaker()},E.prototype.evaluateSpeakerWithVoiceId=function(s){return this._speakerAuthenticator.evaluateSpeaker(s)},E.prototype.enrollSpeakerInVoiceId=function(s){return this._speakerAuthenticator.enrollSpeaker(s)},E.prototype.updateVoiceIdSpeakerId=function(s){return this._speakerAuthenticator.updateSpeakerIdInVoiceId(s)},E.prototype.getQuickConnectName=function(){return this._getData().quickConnectName},E.prototype.isSilentMonitor=function(){return this.getMonitorStatus()===e.MonitoringMode.SILENT_MONITOR},E.prototype.isBarge=function(){return this.getMonitorStatus()===e.MonitoringMode.BARGE},E.prototype.isBargeEnabled=function(){var s=this.getMonitorCapabilities();return s&&s.includes(e.MonitoringMode.BARGE)},E.prototype.isSilentMonitorEnabled=function(){var s=this.getMonitorCapabilities();return s&&s.includes(e.MonitoringMode.SILENT_MONITOR)},E.prototype.getMonitorCapabilities=function(){return this._getData().monitorCapabilities},E.prototype.getMonitorStatus=function(){return this._getData().monitorStatus},E.prototype.isMute=function(){return this._getData().mute},E.prototype.isForcedMute=function(){return this._getData().forcedMute},E.prototype.muteParticipant=function(s){var d=e.core.getClient();d.call(e.ClientMethods.MUTE_PARTICIPANT,{contactId:this.getContactId(),connectionId:this.getConnectionId()},s)},E.prototype.unmuteParticipant=function(s){var d=e.core.getClient();d.call(e.ClientMethods.UNMUTE_PARTICIPANT,{contactId:this.getContactId(),connectionId:this.getConnectionId()},s)},E.prototype.canSendVideo=function(){let s=this.getCapabilities();return s&&s.Video===e.VideoCapability.SEND},E.prototype.getCapabilities=function(){return this._getData().capabilities},E.prototype.getVideoConnectionInfo=function(){let s=e.core.getClient(),d={transportType:e.TRANSPORT_TYPES.WEB_RTC,contactId:this.contactId};return new Promise(function(c,S){s.call(e.ClientMethods.CREATE_TRANSPORT,d,{success:function(h){e.getLog().info("getVideoConnectionInfo succeeded").sendInternalLogToServer(),c(h.webRTCTransport)},failure:function(h,I){e.getLog().error("getVideoConnectionInfo failed").sendInternalLogToServer().withObject({err:h,data:I}),S(Error("getVideoConnectionInfo failed"))}})})};var l=function(s,d){g.call(this,s,d)};l.prototype=Object.create(g.prototype),l.prototype.constructor=l,l.prototype.getMediaInfo=function(){var s=this._getData().chatMediaInfo;if(s){var d=e.core.getAgentDataProvider().getContactData(this.contactId),c={contactId:this.contactId,initialContactId:d.initialContactId||this.contactId,participantId:this.connectionId,getConnectionToken:e.hitch(this,this.getConnectionToken)};if(s.connectionData)try{c.participantToken=JSON.parse(s.connectionData).ConnectionAuthenticationToken}catch(S){e.getLog().error(e.LogComponent.CHAT,"Connection data is invalid").withObject(s).withException(S).sendInternalLogToServer(),c.participantToken=null}return c.participantToken=c.participantToken||null,c.originalInfo=this._getData().chatMediaInfo,c}else return null},l.prototype.getConnectionToken=function(){var s=e.core.getClient(),d=e.core.getAgentDataProvider().getContactData(this.contactId),c={transportType:e.TRANSPORT_TYPES.CHAT_TOKEN,participantId:this.connectionId,contactId:this.contactId};return new Promise(function(S,h){s.call(e.ClientMethods.CREATE_TRANSPORT,c,{success:function(I){e.getLog().info("getConnectionToken succeeded").sendInternalLogToServer(),S(I)},failure:function(I,f){e.getLog().error("getConnectionToken failed").sendInternalLogToServer().withObject({err:I,data:f}),h(Error("getConnectionToken failed"))}})})},l.prototype.getMediaType=function(){return e.MediaType.CHAT},l.prototype.getMediaController=function(){return e.core.mediaFactory.get(this)},l.prototype._initMediaController=function(){this._isAgentConnectionType()&&e.core.mediaFactory.get(this).catch(function(){})},l.prototype.isBargeEnabled=function(){var s=this.getMonitorCapabilities();return s&&s.includes(e.MonitoringMode.BARGE)},l.prototype.isSilentMonitorEnabled=function(){var s=this.getMonitorCapabilities();return s&&s.includes(e.MonitoringMode.SILENT_MONITOR)},l.prototype.getMonitorCapabilities=function(){return this._getData().monitorCapabilities},l.prototype.isBarge=function(){return this.getMonitorStatus()===e.MonitoringMode.BARGE},l.prototype.isSilentMonitor=function(){return this.getMonitorStatus()===e.MonitoringMode.SILENT_MONITOR},l.prototype.getMonitorStatus=function(){return this._getData().monitorStatus};var u=function(s,d){g.call(this,s,d)};u.prototype=Object.create(g.prototype),u.prototype.constructor=u,u.prototype.getMediaType=function(){return e.MediaType.TASK},u.prototype.getMediaInfo=function(){var s=e.core.getAgentDataProvider().getContactData(this.contactId),d={contactId:this.contactId,initialContactId:s.initialContactId||this.contactId};return d},u.prototype.getMediaController=function(){return e.core.mediaFactory.get(this)};var a=function(s){e.Connection.call(this,s.contactId,s.connectionId),this.connectionData=s};a.prototype=Object.create(g.prototype),a.prototype.constructor=a,a.prototype._getData=function(){return this.connectionData},a.prototype._initMediaController=function(){};var y=function(s){var d=s||{};this.endpointARN=d.endpointId||d.endpointARN||null,this.endpointId=this.endpointARN,this.type=d.type||null,this.name=d.name||null,this.phoneNumber=d.phoneNumber||null,this.agentLogin=d.agentLogin||null,this.queue=d.queue||null};y.prototype.stripPhoneNumber=function(){return this.phoneNumber?this.phoneNumber.replace(/sip:([^@]*)@.*/,"$1"):""},y.byPhoneNumber=function(s,d){return new y({type:e.EndpointType.PHONE_NUMBER,phoneNumber:s,name:d||null})};var p=function(s,d,c){this.errorType=s,this.errorMessage=d,this.endPointUrl=c};p.prototype.getErrorType=function(){return this.errorType},p.prototype.getErrorMessage=function(){return this.errorMessage},p.prototype.getEndPointUrl=function(){return this.endPointUrl},e.agent=function(s){var d=e.core.getEventBus(),c=d.subscribe(e.AgentEvents.INIT,s);return e.agent.initialized&&s(new e.Agent),c},e.agent.initialized=!1,e.contact=function(s){var d=e.core.getEventBus();return d.subscribe(e.ContactEvents.INIT,s)},e.onWebsocketInitFailure=function(s){var d=e.core.getEventBus(),c=d.subscribe(e.WebSocketEvents.INIT_FAILURE,s);return e.webSocketInitFailed&&s(),c},e.ifMaster=function(s,d,c,S){if(e.assertNotNull(s,"A topic must be provided."),e.assertNotNull(d,"A true callback must be provided."),!e.core.masterClient){e.getLog().warn("We can't be the master for topic '%s' because there is no master client!",s).sendInternalLogToServer(),c&&c();return}var h=e.core.getMasterClient();h.call(e.MasterMethods.CHECK_MASTER,{topic:s,shouldNotBecomeMasterIfNone:S},{success:function(I){I.isMaster?d():c&&c()}})},e.becomeMaster=function(s,d,c){if(e.assertNotNull(s,"A topic must be provided."),!e.core.masterClient)e.getLog().warn("We can't be the master for topic '%s' because there is no master client!",s),c&&c();else{var S=e.core.getMasterClient();S.call(e.MasterMethods.BECOME_MASTER,{topic:s},{success:function(){d&&d()}})}},e.Agent=b,e.AgentSnapshot=C,e.Contact=D,e.ContactSnapshot=_,e.Connection=E,e.BaseConnection=g,e.VoiceConnection=E,e.ChatConnection=l,e.TaskConnection=u,e.ConnectionSnapshot=a,e.Endpoint=y,e.Address=y,e.SoftphoneError=p,e.VoiceId=v,e.QuickResponses=m})()},827:(i,e,m)=>{var b;(function(){function C(D,_,g){function v(u,a){if(!_[u]){if(!D[u]){var y=void 0;if(!a&&y)return Au(u,!0);if(E)return E(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var s=_[u]={exports:{}};D[u][0].call(s.exports,function(d){var c=D[u][1][d];return v(c||d)},s,s.exports,C,D,_,g)}return _[u].exports}for(var E=void 0,l=0;l<g.length;l++)v(g[l]);return v}return C})()({1:[function(C,D,_){D.exports={version:"2.0",metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-identity",jsonVersion:"1.1",protocol:"json",serviceFullName:"Amazon Cognito Identity",serviceId:"Cognito Identity",signatureVersion:"v4",targetPrefix:"AWSCognitoIdentityService",uid:"cognito-identity-2014-06-30"},operations:{CreateIdentityPool:{input:{type:"structure",required:["IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},AllowClassicFlow:{type:"boolean"},SupportedLoginProviders:{shape:"S5"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S9"},CognitoIdentityProviders:{shape:"Sb"},SamlProviderARNs:{shape:"Sg"},IdentityPoolTags:{shape:"Sh"}}},output:{shape:"Sk"}},DeleteIdentities:{input:{type:"structure",required:["IdentityIdsToDelete"],members:{IdentityIdsToDelete:{type:"list",member:{}}}},output:{type:"structure",members:{UnprocessedIdentityIds:{type:"list",member:{type:"structure",members:{IdentityId:{},ErrorCode:{}}}}}}},DeleteIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}}},DescribeIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{}}},output:{shape:"Sv"}},DescribeIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{shape:"Sk"}},GetCredentialsForIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"S10"},CustomRoleArn:{}}},output:{type:"structure",members:{IdentityId:{},Credentials:{type:"structure",members:{AccessKeyId:{},SecretKey:{},SessionToken:{},Expiration:{type:"timestamp"}}}}},authtype:"none"},GetId:{input:{type:"structure",required:["IdentityPoolId"],members:{AccountId:{},IdentityPoolId:{},Logins:{shape:"S10"}}},output:{type:"structure",members:{IdentityId:{}}},authtype:"none"},GetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{type:"structure",members:{IdentityPoolId:{},Roles:{shape:"S1c"},RoleMappings:{shape:"S1e"}}}},GetOpenIdToken:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"S10"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}},authtype:"none"},GetOpenIdTokenForDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId","Logins"],members:{IdentityPoolId:{},IdentityId:{},Logins:{shape:"S10"},PrincipalTags:{shape:"S1s"},TokenDuration:{type:"long"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}}},GetPrincipalTagAttributeMap:{input:{type:"structure",required:["IdentityPoolId","IdentityProviderName"],members:{IdentityPoolId:{},IdentityProviderName:{}}},output:{type:"structure",members:{IdentityPoolId:{},IdentityProviderName:{},UseDefaults:{type:"boolean"},PrincipalTags:{shape:"S1s"}}}},ListIdentities:{input:{type:"structure",required:["IdentityPoolId","MaxResults"],members:{IdentityPoolId:{},MaxResults:{type:"integer"},NextToken:{},HideDisabled:{type:"boolean"}}},output:{type:"structure",members:{IdentityPoolId:{},Identities:{type:"list",member:{shape:"Sv"}},NextToken:{}}}},ListIdentityPools:{input:{type:"structure",required:["MaxResults"],members:{MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityPools:{type:"list",member:{type:"structure",members:{IdentityPoolId:{},IdentityPoolName:{}}}},NextToken:{}}}},ListTagsForResource:{input:{type:"structure",required:["ResourceArn"],members:{ResourceArn:{}}},output:{type:"structure",members:{Tags:{shape:"Sh"}}}},LookupDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{},IdentityId:{},DeveloperUserIdentifier:{},MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityId:{},DeveloperUserIdentifierList:{type:"list",member:{}},NextToken:{}}}},MergeDeveloperIdentities:{input:{type:"structure",required:["SourceUserIdentifier","DestinationUserIdentifier","DeveloperProviderName","IdentityPoolId"],members:{SourceUserIdentifier:{},DestinationUserIdentifier:{},DeveloperProviderName:{},IdentityPoolId:{}}},output:{type:"structure",members:{IdentityId:{}}}},SetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId","Roles"],members:{IdentityPoolId:{},Roles:{shape:"S1c"},RoleMappings:{shape:"S1e"}}}},SetPrincipalTagAttributeMap:{input:{type:"structure",required:["IdentityPoolId","IdentityProviderName"],members:{IdentityPoolId:{},IdentityProviderName:{},UseDefaults:{type:"boolean"},PrincipalTags:{shape:"S1s"}}},output:{type:"structure",members:{IdentityPoolId:{},IdentityProviderName:{},UseDefaults:{type:"boolean"},PrincipalTags:{shape:"S1s"}}}},TagResource:{input:{type:"structure",required:["ResourceArn","Tags"],members:{ResourceArn:{},Tags:{shape:"Sh"}}},output:{type:"structure",members:{}}},UnlinkDeveloperIdentity:{input:{type:"structure",required:["IdentityId","IdentityPoolId","DeveloperProviderName","DeveloperUserIdentifier"],members:{IdentityId:{},IdentityPoolId:{},DeveloperProviderName:{},DeveloperUserIdentifier:{}}}},UnlinkIdentity:{input:{type:"structure",required:["IdentityId","Logins","LoginsToRemove"],members:{IdentityId:{},Logins:{shape:"S10"},LoginsToRemove:{shape:"Sw"}}},authtype:"none"},UntagResource:{input:{type:"structure",required:["ResourceArn","TagKeys"],members:{ResourceArn:{},TagKeys:{type:"list",member:{}}}},output:{type:"structure",members:{}}},UpdateIdentityPool:{input:{shape:"Sk"},output:{shape:"Sk"}}},shapes:{S5:{type:"map",key:{},value:{}},S9:{type:"list",member:{}},Sb:{type:"list",member:{type:"structure",members:{ProviderName:{},ClientId:{},ServerSideTokenCheck:{type:"boolean"}}}},Sg:{type:"list",member:{}},Sh:{type:"map",key:{},value:{}},Sk:{type:"structure",required:["IdentityPoolId","IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolId:{},IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},AllowClassicFlow:{type:"boolean"},SupportedLoginProviders:{shape:"S5"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S9"},CognitoIdentityProviders:{shape:"Sb"},SamlProviderARNs:{shape:"Sg"},IdentityPoolTags:{shape:"Sh"}}},Sv:{type:"structure",members:{IdentityId:{},Logins:{shape:"Sw"},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"}}},Sw:{type:"list",member:{}},S10:{type:"map",key:{},value:{}},S1c:{type:"map",key:{},value:{}},S1e:{type:"map",key:{},value:{type:"structure",required:["Type"],members:{Type:{},AmbiguousRoleResolution:{},RulesConfiguration:{type:"structure",required:["Rules"],members:{Rules:{type:"list",member:{type:"structure",required:["Claim","MatchType","Value","RoleARN"],members:{Claim:{},MatchType:{},Value:{},RoleARN:{}}}}}}}}},S1s:{type:"map",key:{},value:{}}}}},{}],2:[function(C,D,_){D.exports={pagination:{ListIdentityPools:{input_token:"NextToken",limit_key:"MaxResults",output_token:"NextToken",result_key:"IdentityPools"}}}},{}],3:[function(C,D,_){D.exports={version:"2.0",metadata:{apiVersion:"2017-02-15",endpointPrefix:"connect",jsonVersion:"1.0",protocol:"json",serviceAbbreviation:"Connect",serviceFullName:"AmazonConnectCTIService",signatureVersion:"",targetPrefix:"AmazonConnectCTIService",uid:"connect-2017-02-15"},operations:{AcceptContact:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{}}},output:{type:"structure",members:{}}},ClearContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},CompleteContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},ConferenceConnections:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{}}},output:{type:"structure",members:{}}},CreateAdditionalConnection:{input:{type:"structure",required:["authentication","contactId","endpoint"],members:{authentication:{shape:"S2"},contactId:{},endpoint:{shape:"Se"}}},output:{type:"structure",members:{}}},CreateOutboundContact:{input:{type:"structure",required:["authentication","endpoint"],members:{authentication:{shape:"S2"},endpoint:{shape:"Se"},queueARN:{},relatedContactId:{}}},output:{type:"structure",members:{}}},CreateTaskContact:{input:{type:"structure",required:["endpoint","name"],members:{endpoint:{shape:"Se"},previousContactId:{},name:{},description:{},references:{shape:"Sr"},idempotencyToken:{},scheduledTime:{type:"long"},relatedContactId:{}}},output:{type:"structure",members:{contactId:{}}}},CreateTransport:{input:{type:"structure",required:["transportType","authentication"],members:{transportType:{},participantId:{},contactId:{},softphoneClientId:{},authentication:{shape:"S2"}}},output:{type:"structure",members:{webSocketTransport:{type:"structure",required:["url","transportLifeTimeInSeconds"],members:{url:{},transportLifeTimeInSeconds:{type:"long"},expiry:{}}},chatTokenTransport:{type:"structure",required:["participantToken","expiry"],members:{participantToken:{},expiry:{}}},softphoneTransport:{type:"structure",required:["softphoneMediaConnections"],members:{softphoneMediaConnections:{type:"list",member:{type:"structure",required:["username","credential","urls"],members:{username:{},credential:{},urls:{type:"list",member:{}}}}}}},agentDiscoveryTransport:{type:"structure",required:["presignedUrl"],members:{presignedUrl:{}}},webRTCTransport:{type:"structure",required:["meeting","attendee"],members:{meeting:{type:"structure",members:{meetingId:{},mediaRegion:{},mediaPlacement:{type:"structure",members:{audioHostUrl:{},audioFallbackUrl:{},signalingUrl:{},turnControlUrl:{},eventIngestionUrl:{}}},meetingFeatures:{type:"structure",members:{audio:{type:"structure",members:{echoReduction:{}}}}}}},attendee:{type:"structure",members:{attendeeId:{},joinToken:{type:"string",sensitive:!0}}}}}}}},DestroyConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},GetAgentConfiguration:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"}}},output:{type:"structure",required:["configuration"],members:{configuration:{shape:"S1q"}}}},GetAgentPermissions:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["permissions"],members:{permissions:{type:"list",member:{}},nextToken:{}}}},GetAgentSnapshot:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},timeout:{type:"long"}}},output:{type:"structure",required:["snapshot","nextToken"],members:{snapshot:{type:"structure",required:["state","contacts","snapshotTimestamp"],members:{state:{shape:"S29"},nextState:{shape:"S29"},agentAvailabilityState:{type:"structure",members:{state:{},timeStamp:{type:"timestamp"}}},contacts:{type:"list",member:{type:"structure",required:["contactId","type","state","connections","attributes"],members:{contactId:{},initialContactId:{},type:{},state:{type:"structure",required:["type","timestamp"],members:{type:{},timestamp:{type:"timestamp"}}},queue:{shape:"Sk"},queueTimestamp:{type:"timestamp"},connections:{type:"list",member:{type:"structure",required:["connectionId","state","type","initial"],members:{connectionId:{},endpoint:{shape:"Se"},state:{type:"structure",required:["type","timestamp"],members:{type:{},timestamp:{type:"timestamp"}}},type:{},initial:{type:"boolean"},softphoneMediaInfo:{type:"structure",members:{callType:{},autoAccept:{type:"boolean"},mediaLegContextToken:{},callContextToken:{},callConfigJson:{}}},chatMediaInfo:{type:"structure",members:{chatAutoAccept:{type:"boolean"},connectionData:{},customerName:{}}},monitoringInfo:{type:"structure",members:{agent:{type:"structure",members:{agentName:{}}},joinTimeStamp:{type:"timestamp"}}},mute:{type:"boolean"},forcedMute:{type:"boolean"},quickConnectName:{},monitorCapabilities:{type:"list",member:{}},monitorStatus:{},capabilities:{type:"structure",members:{Video:{}}}}}},attributes:{type:"map",key:{},value:{type:"structure",required:["name"],members:{name:{},value:{}}}},contactDuration:{},name:{},description:{},references:{shape:"Sr"},initiationMethod:{},contactFeatures:{type:"structure",members:{attachmentsEnabled:{type:"boolean"},messagingMarkdownEnabled:{type:"boolean"},multiPartyConferenceEnabled:{type:"boolean"},screenRecordingEnabled:{type:"boolean"},screenRecordingState:{},screenRecordingConfig:{type:"structure",members:{screenRecordingEnabled:{type:"boolean"},screenRecordingState:{}}}}},channelContext:{type:"structure",members:{scheduledTime:{type:"long"},taskTemplateId:{},taskTemplateVersion:{type:"integer"}}},segmentAttributes:{type:"map",key:{},value:{type:"structure",members:{ValueString:{}}}}}}},snapshotTimestamp:{type:"timestamp"}}},nextToken:{}}}},GetAgentStates:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["states"],members:{states:{type:"list",member:{shape:"S29"}},nextToken:{}}}},GetDialableCountryCodes:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["countryCodes"],members:{countryCodes:{type:"list",member:{}},nextToken:{}}}},GetEndpoints:{input:{type:"structure",required:["authentication","queueARNs"],members:{authentication:{shape:"S2"},queueARNs:{type:"list",member:{}},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",members:{endpoints:{type:"list",member:{shape:"Se"}},nextToken:{}}}},GetNewAuthToken:{input:{type:"structure",required:["authentication","refreshToken"],members:{authentication:{shape:"S2"},refreshToken:{}}},output:{type:"structure",members:{newAuthToken:{},expirationDateTime:{type:"timestamp"}}}},GetRoutingProfileQueues:{input:{type:"structure",required:["authentication","routingProfileARN"],members:{authentication:{shape:"S2"},routingProfileARN:{},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["queues"],members:{queues:{type:"list",member:{shape:"Sk"}},nextToken:{}}}},HoldConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},MuteParticipant:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},NotifyContactIssue:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{},issueCode:{},description:{},clientLogs:{}}},output:{type:"structure",members:{}}},PauseContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},PutAgentState:{input:{type:"structure",required:["authentication","state"],members:{authentication:{shape:"S2"},state:{shape:"S29"},enqueueNextState:{type:"boolean"}}},output:{type:"structure",members:{}}},RejectContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},ResumeConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},ResumeContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},SendClientLogs:{input:{type:"structure",required:["authentication","logEvents"],members:{authentication:{shape:"S2"},logEvents:{type:"list",member:{type:"structure",members:{timestamp:{type:"timestamp"},component:{},message:{}}}}}},output:{type:"structure",members:{}}},SendDigits:{input:{type:"structure",required:["authentication","contactId","connectionId","digits"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{},digits:{}}},output:{type:"structure",members:{}}},SendSoftphoneCallMetrics:{input:{type:"structure",required:["authentication","contactId","softphoneStreamStatistics"],members:{authentication:{shape:"S2"},contactId:{},ccpVersion:{},softphoneStreamStatistics:{shape:"S4f"}}},output:{type:"structure",members:{}}},SendSoftphoneCallReport:{input:{type:"structure",required:["authentication","contactId","report"],members:{authentication:{shape:"S2"},contactId:{},ccpVersion:{},report:{type:"structure",members:{callStartTime:{type:"timestamp"},callEndTime:{type:"timestamp"},softphoneStreamStatistics:{shape:"S4f"},gumTimeMillis:{type:"long"},initializationTimeMillis:{type:"long"},iceCollectionTimeMillis:{type:"long"},signallingConnectTimeMillis:{type:"long"},handshakeTimeMillis:{type:"long"},preTalkTimeMillis:{type:"long"},talkTimeMillis:{type:"long"},cleanupTimeMillis:{type:"long"},iceCollectionFailure:{type:"boolean"},signallingConnectionFailure:{type:"boolean"},handshakeFailure:{type:"boolean"},gumOtherFailure:{type:"boolean"},gumTimeoutFailure:{type:"boolean"},createOfferFailure:{type:"boolean"},setLocalDescriptionFailure:{type:"boolean"},userBusyFailure:{type:"boolean"},invalidRemoteSDPFailure:{type:"boolean"},noRemoteIceCandidateFailure:{type:"boolean"},setRemoteDescriptionFailure:{type:"boolean"}}}}},output:{type:"structure",members:{}}},ToggleActiveConnections:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},UnmuteParticipant:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},UpdateAgentConfiguration:{input:{type:"structure",required:["authentication","configuration"],members:{authentication:{shape:"S2"},configuration:{shape:"S1q"}}},output:{type:"structure",members:{}}},UpdateMonitorParticipantState:{input:{type:"structure",required:["contactId","targetMonitorMode"],members:{contactId:{},targetMonitorMode:{}}},output:{type:"structure",members:{}}}},shapes:{S2:{type:"structure",members:{agentARN:{},authToken:{}}},Se:{type:"structure",required:["type"],members:{endpointARN:{},type:{},name:{},phoneNumber:{},agentLogin:{},queue:{shape:"Sk"}}},Sk:{type:"structure",members:{queueARN:{},name:{}}},Sr:{type:"map",key:{},value:{type:"structure",required:["value","type"],members:{value:{},type:{}}}},S1q:{type:"structure",required:["name","softphoneEnabled","softphoneAutoAccept","extension","routingProfile"],members:{name:{},username:{},softphoneEnabled:{type:"boolean"},softphoneAutoAccept:{type:"boolean"},extension:{},routingProfile:{type:"structure",members:{name:{},routingProfileARN:{},defaultOutboundQueue:{shape:"Sk"},channelConcurrencyMap:{type:"map",key:{},value:{type:"long"}}}},agentPreferences:{type:"map",key:{},value:{}},agentARN:{}}},S29:{type:"structure",required:["type","name"],members:{agentStateARN:{},type:{},name:{},startTimestamp:{type:"timestamp"}}},S4f:{type:"list",member:{type:"structure",members:{timestamp:{type:"timestamp"},softphoneStreamType:{},packetCount:{type:"long"},packetsLost:{type:"long"},audioLevel:{type:"double"},jitterBufferMillis:{type:"long"},roundTripTimeMillis:{type:"long"}}}}}}},{}],4:[function(C,D,_){D.exports={acm:{name:"ACM",cors:!0},apigateway:{name:"APIGateway",cors:!0},applicationautoscaling:{prefix:"application-autoscaling",name:"ApplicationAutoScaling",cors:!0},appstream:{name:"AppStream"},autoscaling:{name:"AutoScaling",cors:!0},batch:{name:"Batch"},budgets:{name:"Budgets"},clouddirectory:{name:"CloudDirectory",versions:["2016-05-10*"]},cloudformation:{name:"CloudFormation",cors:!0},cloudfront:{name:"CloudFront",versions:["2013-05-12*","2013-11-11*","2014-05-31*","2014-10-21*","2014-11-06*","2015-04-17*","2015-07-27*","2015-09-17*","2016-01-13*","2016-01-28*","2016-08-01*","2016-08-20*","2016-09-07*","2016-09-29*","2016-11-25*","2017-03-25*","2017-10-30*","2018-06-18*","2018-11-05*","2019-03-26*"],cors:!0},cloudhsm:{name:"CloudHSM",cors:!0},cloudsearch:{name:"CloudSearch"},cloudsearchdomain:{name:"CloudSearchDomain"},cloudtrail:{name:"CloudTrail",cors:!0},cloudwatch:{prefix:"monitoring",name:"CloudWatch",cors:!0},cloudwatchevents:{prefix:"events",name:"CloudWatchEvents",versions:["2014-02-03*"],cors:!0},cloudwatchlogs:{prefix:"logs",name:"CloudWatchLogs",cors:!0},codebuild:{name:"CodeBuild",cors:!0},codecommit:{name:"CodeCommit",cors:!0},codedeploy:{name:"CodeDeploy",cors:!0},codepipeline:{name:"CodePipeline",cors:!0},cognitoidentity:{prefix:"cognito-identity",name:"CognitoIdentity",cors:!0},cognitoidentityserviceprovider:{prefix:"cognito-idp",name:"CognitoIdentityServiceProvider",cors:!0},cognitosync:{prefix:"cognito-sync",name:"CognitoSync",cors:!0},configservice:{prefix:"config",name:"ConfigService",cors:!0},cur:{name:"CUR",cors:!0},datapipeline:{name:"DataPipeline"},devicefarm:{name:"DeviceFarm",cors:!0},directconnect:{name:"DirectConnect",cors:!0},directoryservice:{prefix:"ds",name:"DirectoryService"},discovery:{name:"Discovery"},dms:{name:"DMS"},dynamodb:{name:"DynamoDB",cors:!0},dynamodbstreams:{prefix:"streams.dynamodb",name:"DynamoDBStreams",cors:!0},ec2:{name:"EC2",versions:["2013-06-15*","2013-10-15*","2014-02-01*","2014-05-01*","2014-06-15*","2014-09-01*","2014-10-01*","2015-03-01*","2015-04-15*","2015-10-01*","2016-04-01*","2016-09-15*"],cors:!0},ecr:{name:"ECR",cors:!0},ecs:{name:"ECS",cors:!0},efs:{prefix:"elasticfilesystem",name:"EFS",cors:!0},elasticache:{name:"ElastiCache",versions:["2012-11-15*","2014-03-24*","2014-07-15*","2014-09-30*"],cors:!0},elasticbeanstalk:{name:"ElasticBeanstalk",cors:!0},elb:{prefix:"elasticloadbalancing",name:"ELB",cors:!0},elbv2:{prefix:"elasticloadbalancingv2",name:"ELBv2",cors:!0},emr:{prefix:"elasticmapreduce",name:"EMR",cors:!0},es:{name:"ES"},elastictranscoder:{name:"ElasticTranscoder",cors:!0},firehose:{name:"Firehose",cors:!0},gamelift:{name:"GameLift",cors:!0},glacier:{name:"Glacier"},health:{name:"Health"},iam:{name:"IAM",cors:!0},importexport:{name:"ImportExport"},inspector:{name:"Inspector",versions:["2015-08-18*"],cors:!0},iot:{name:"Iot",cors:!0},iotdata:{prefix:"iot-data",name:"IotData",cors:!0},kinesis:{name:"Kinesis",cors:!0},kinesisanalytics:{name:"KinesisAnalytics"},kms:{name:"KMS",cors:!0},lambda:{name:"Lambda",cors:!0},lexruntime:{prefix:"runtime.lex",name:"LexRuntime",cors:!0},lightsail:{name:"Lightsail"},machinelearning:{name:"MachineLearning",cors:!0},marketplacecommerceanalytics:{name:"MarketplaceCommerceAnalytics",cors:!0},marketplacemetering:{prefix:"meteringmarketplace",name:"MarketplaceMetering"},mturk:{prefix:"mturk-requester",name:"MTurk",cors:!0},mobileanalytics:{name:"MobileAnalytics",cors:!0},opsworks:{name:"OpsWorks",cors:!0},opsworkscm:{name:"OpsWorksCM"},organizations:{name:"Organizations"},pinpoint:{name:"Pinpoint"},polly:{name:"Polly",cors:!0},rds:{name:"RDS",versions:["2014-09-01*"],cors:!0},redshift:{name:"Redshift",cors:!0},rekognition:{name:"Rekognition",cors:!0},resourcegroupstaggingapi:{name:"ResourceGroupsTaggingAPI"},route53:{name:"Route53",cors:!0},route53domains:{name:"Route53Domains",cors:!0},s3:{name:"S3",dualstackAvailable:!0,cors:!0},s3control:{name:"S3Control",dualstackAvailable:!0,xmlNoDefaultLists:!0},servicecatalog:{name:"ServiceCatalog",cors:!0},ses:{prefix:"email",name:"SES",cors:!0},shield:{name:"Shield"},simpledb:{prefix:"sdb",name:"SimpleDB"},sms:{name:"SMS"},snowball:{name:"Snowball"},sns:{name:"SNS",cors:!0},sqs:{name:"SQS",cors:!0},ssm:{name:"SSM",cors:!0},storagegateway:{name:"StorageGateway",cors:!0},stepfunctions:{prefix:"states",name:"StepFunctions"},sts:{name:"STS",cors:!0},support:{name:"Support"},swf:{name:"SWF"},xray:{name:"XRay",cors:!0},waf:{name:"WAF",cors:!0},wafregional:{prefix:"waf-regional",name:"WAFRegional"},workdocs:{name:"WorkDocs",cors:!0},workspaces:{name:"WorkSpaces"},codestar:{name:"CodeStar"},lexmodelbuildingservice:{prefix:"lex-models",name:"LexModelBuildingService",cors:!0},marketplaceentitlementservice:{prefix:"entitlement.marketplace",name:"MarketplaceEntitlementService"},athena:{name:"Athena",cors:!0},greengrass:{name:"Greengrass"},dax:{name:"DAX"},migrationhub:{prefix:"AWSMigrationHub",name:"MigrationHub"},cloudhsmv2:{name:"CloudHSMV2",cors:!0},glue:{name:"Glue"},mobile:{name:"Mobile"},pricing:{name:"Pricing",cors:!0},costexplorer:{prefix:"ce",name:"CostExplorer",cors:!0},mediaconvert:{name:"MediaConvert"},medialive:{name:"MediaLive"},mediapackage:{name:"MediaPackage"},mediastore:{name:"MediaStore"},mediastoredata:{prefix:"mediastore-data",name:"MediaStoreData",cors:!0},appsync:{name:"AppSync"},guardduty:{name:"GuardDuty"},mq:{name:"MQ"},comprehend:{name:"Comprehend",cors:!0},iotjobsdataplane:{prefix:"iot-jobs-data",name:"IoTJobsDataPlane"},kinesisvideoarchivedmedia:{prefix:"kinesis-video-archived-media",name:"KinesisVideoArchivedMedia",cors:!0},kinesisvideomedia:{prefix:"kinesis-video-media",name:"KinesisVideoMedia",cors:!0},kinesisvideo:{name:"KinesisVideo",cors:!0},sagemakerruntime:{prefix:"runtime.sagemaker",name:"SageMakerRuntime"},sagemaker:{name:"SageMaker"},translate:{name:"Translate",cors:!0},resourcegroups:{prefix:"resource-groups",name:"ResourceGroups",cors:!0},alexaforbusiness:{name:"AlexaForBusiness"},cloud9:{name:"Cloud9"},serverlessapplicationrepository:{prefix:"serverlessrepo",name:"ServerlessApplicationRepository"},servicediscovery:{name:"ServiceDiscovery"},workmail:{name:"WorkMail"},autoscalingplans:{prefix:"autoscaling-plans",name:"AutoScalingPlans"},transcribeservice:{prefix:"transcribe",name:"TranscribeService"},connect:{name:"Connect",cors:!0},acmpca:{prefix:"acm-pca",name:"ACMPCA"},fms:{name:"FMS"},secretsmanager:{name:"SecretsManager",cors:!0},iotanalytics:{name:"IoTAnalytics",cors:!0},iot1clickdevicesservice:{prefix:"iot1click-devices",name:"IoT1ClickDevicesService"},iot1clickprojects:{prefix:"iot1click-projects",name:"IoT1ClickProjects"},pi:{name:"PI"},neptune:{name:"Neptune"},mediatailor:{name:"MediaTailor"},eks:{name:"EKS"},macie:{name:"Macie"},dlm:{name:"DLM"},signer:{name:"Signer"},chime:{name:"Chime"},pinpointemail:{prefix:"pinpoint-email",name:"PinpointEmail"},ram:{name:"RAM"},route53resolver:{name:"Route53Resolver"},pinpointsmsvoice:{prefix:"sms-voice",name:"PinpointSMSVoice"},quicksight:{name:"QuickSight"},rdsdataservice:{prefix:"rds-data",name:"RDSDataService"},amplify:{name:"Amplify"},datasync:{name:"DataSync"},robomaker:{name:"RoboMaker"},transfer:{name:"Transfer"},globalaccelerator:{name:"GlobalAccelerator"},comprehendmedical:{name:"ComprehendMedical",cors:!0},kinesisanalyticsv2:{name:"KinesisAnalyticsV2"},mediaconnect:{name:"MediaConnect"},fsx:{name:"FSx"},securityhub:{name:"SecurityHub"},appmesh:{name:"AppMesh",versions:["2018-10-01*"]},licensemanager:{prefix:"license-manager",name:"LicenseManager"},kafka:{name:"Kafka"},apigatewaymanagementapi:{name:"ApiGatewayManagementApi"},apigatewayv2:{name:"ApiGatewayV2"},docdb:{name:"DocDB"},backup:{name:"Backup"},worklink:{name:"WorkLink"},textract:{name:"Textract"},managedblockchain:{name:"ManagedBlockchain"},mediapackagevod:{prefix:"mediapackage-vod",name:"MediaPackageVod"},groundstation:{name:"GroundStation"},iotthingsgraph:{name:"IoTThingsGraph"},iotevents:{name:"IoTEvents"},ioteventsdata:{prefix:"iotevents-data",name:"IoTEventsData"},personalize:{name:"Personalize",cors:!0},personalizeevents:{prefix:"personalize-events",name:"PersonalizeEvents",cors:!0},personalizeruntime:{prefix:"personalize-runtime",name:"PersonalizeRuntime",cors:!0},applicationinsights:{prefix:"application-insights",name:"ApplicationInsights"},servicequotas:{prefix:"service-quotas",name:"ServiceQuotas"},ec2instanceconnect:{prefix:"ec2-instance-connect",name:"EC2InstanceConnect"},eventbridge:{name:"EventBridge"},lakeformation:{name:"LakeFormation"},forecastservice:{prefix:"forecast",name:"ForecastService",cors:!0},forecastqueryservice:{prefix:"forecastquery",name:"ForecastQueryService",cors:!0},qldb:{name:"QLDB"},qldbsession:{prefix:"qldb-session",name:"QLDBSession"},workmailmessageflow:{name:"WorkMailMessageFlow"},codestarnotifications:{prefix:"codestar-notifications",name:"CodeStarNotifications"},savingsplans:{name:"SavingsPlans"},sso:{name:"SSO"},ssooidc:{prefix:"sso-oidc",name:"SSOOIDC"},marketplacecatalog:{prefix:"marketplace-catalog",name:"MarketplaceCatalog",cors:!0},dataexchange:{name:"DataExchange"},sesv2:{name:"SESV2"},migrationhubconfig:{prefix:"migrationhub-config",name:"MigrationHubConfig"},connectparticipant:{name:"ConnectParticipant"},appconfig:{name:"AppConfig"},iotsecuretunneling:{name:"IoTSecureTunneling"},wafv2:{name:"WAFV2"},elasticinference:{prefix:"elastic-inference",name:"ElasticInference"},imagebuilder:{name:"Imagebuilder"},schemas:{name:"Schemas"},accessanalyzer:{name:"AccessAnalyzer"},codegurureviewer:{prefix:"codeguru-reviewer",name:"CodeGuruReviewer"},codeguruprofiler:{name:"CodeGuruProfiler"},computeoptimizer:{prefix:"compute-optimizer",name:"ComputeOptimizer"},frauddetector:{name:"FraudDetector"},kendra:{name:"Kendra"},networkmanager:{name:"NetworkManager"},outposts:{name:"Outposts"},augmentedairuntime:{prefix:"sagemaker-a2i-runtime",name:"AugmentedAIRuntime"},ebs:{name:"EBS"},kinesisvideosignalingchannels:{prefix:"kinesis-video-signaling",name:"KinesisVideoSignalingChannels",cors:!0},detective:{name:"Detective"},codestarconnections:{prefix:"codestar-connections",name:"CodeStarconnections"},synthetics:{name:"Synthetics"},iotsitewise:{name:"IoTSiteWise"},macie2:{name:"Macie2"},codeartifact:{name:"CodeArtifact"},honeycode:{name:"Honeycode"},ivs:{name:"IVS"},braket:{name:"Braket"},identitystore:{name:"IdentityStore"},appflow:{name:"Appflow"},redshiftdata:{prefix:"redshift-data",name:"RedshiftData"},ssoadmin:{prefix:"sso-admin",name:"SSOAdmin"},timestreamquery:{prefix:"timestream-query",name:"TimestreamQuery"},timestreamwrite:{prefix:"timestream-write",name:"TimestreamWrite"},s3outposts:{name:"S3Outposts"},databrew:{name:"DataBrew"},servicecatalogappregistry:{prefix:"servicecatalog-appregistry",name:"ServiceCatalogAppRegistry"},networkfirewall:{prefix:"network-firewall",name:"NetworkFirewall"},mwaa:{name:"MWAA"},amplifybackend:{name:"AmplifyBackend"},appintegrations:{name:"AppIntegrations"},connectcontactlens:{prefix:"connect-contact-lens",name:"ConnectContactLens"},devopsguru:{prefix:"devops-guru",name:"DevOpsGuru"},ecrpublic:{prefix:"ecr-public",name:"ECRPUBLIC"},lookoutvision:{name:"LookoutVision"},sagemakerfeaturestoreruntime:{prefix:"sagemaker-featurestore-runtime",name:"SageMakerFeatureStoreRuntime"},customerprofiles:{prefix:"customer-profiles",name:"CustomerProfiles"},auditmanager:{name:"AuditManager"},emrcontainers:{prefix:"emr-containers",name:"EMRcontainers"},healthlake:{name:"HealthLake"},sagemakeredge:{prefix:"sagemaker-edge",name:"SagemakerEdge"},amp:{name:"Amp",cors:!0},greengrassv2:{name:"GreengrassV2"},iotdeviceadvisor:{name:"IotDeviceAdvisor"},iotfleethub:{name:"IoTFleetHub"},iotwireless:{name:"IoTWireless"},location:{name:"Location",cors:!0},wellarchitected:{name:"WellArchitected"},lexmodelsv2:{prefix:"models.lex.v2",name:"LexModelsV2"},lexruntimev2:{prefix:"runtime.lex.v2",name:"LexRuntimeV2",cors:!0},fis:{name:"Fis"},lookoutmetrics:{name:"LookoutMetrics"},mgn:{name:"Mgn"},lookoutequipment:{name:"LookoutEquipment"},nimble:{name:"Nimble"},finspace:{name:"Finspace"},finspacedata:{prefix:"finspace-data",name:"Finspacedata"},ssmcontacts:{prefix:"ssm-contacts",name:"SSMContacts"},ssmincidents:{prefix:"ssm-incidents",name:"SSMIncidents"},applicationcostprofiler:{name:"ApplicationCostProfiler"},apprunner:{name:"AppRunner"},proton:{name:"Proton"},route53recoverycluster:{prefix:"route53-recovery-cluster",name:"Route53RecoveryCluster"},route53recoverycontrolconfig:{prefix:"route53-recovery-control-config",name:"Route53RecoveryControlConfig"},route53recoveryreadiness:{prefix:"route53-recovery-readiness",name:"Route53RecoveryReadiness"},chimesdkidentity:{prefix:"chime-sdk-identity",name:"ChimeSDKIdentity"},chimesdkmessaging:{prefix:"chime-sdk-messaging",name:"ChimeSDKMessaging"},snowdevicemanagement:{prefix:"snow-device-management",name:"SnowDeviceManagement"},memorydb:{name:"MemoryDB"},opensearch:{name:"OpenSearch"},kafkaconnect:{name:"KafkaConnect"},voiceid:{prefix:"voice-id",name:"VoiceID"},wisdom:{name:"Wisdom"},account:{name:"Account"},cloudcontrol:{name:"CloudControl"},grafana:{name:"Grafana"},panorama:{name:"Panorama"},chimesdkmeetings:{prefix:"chime-sdk-meetings",name:"ChimeSDKMeetings"},resiliencehub:{name:"Resiliencehub"},migrationhubstrategy:{name:"MigrationHubStrategy"},appconfigdata:{name:"AppConfigData"},drs:{name:"Drs"},migrationhubrefactorspaces:{prefix:"migration-hub-refactor-spaces",name:"MigrationHubRefactorSpaces"},evidently:{name:"Evidently"},inspector2:{name:"Inspector2"},rbin:{name:"Rbin"},rum:{name:"RUM"},backupgateway:{prefix:"backup-gateway",name:"BackupGateway"},iottwinmaker:{name:"IoTTwinMaker"},workspacesweb:{prefix:"workspaces-web",name:"WorkSpacesWeb"},amplifyuibuilder:{name:"AmplifyUIBuilder"},keyspaces:{name:"Keyspaces"},billingconductor:{name:"Billingconductor"},gamesparks:{name:"GameSparks"},pinpointsmsvoicev2:{prefix:"pinpoint-sms-voice-v2",name:"PinpointSMSVoiceV2"},ivschat:{name:"Ivschat"},chimesdkmediapipelines:{prefix:"chime-sdk-media-pipelines",name:"ChimeSDKMediaPipelines"},emrserverless:{prefix:"emr-serverless",name:"EMRServerless"},m2:{name:"M2"},connectcampaigns:{name:"ConnectCampaigns"},redshiftserverless:{prefix:"redshift-serverless",name:"RedshiftServerless"},rolesanywhere:{name:"RolesAnywhere"},licensemanagerusersubscriptions:{prefix:"license-manager-user-subscriptions",name:"LicenseManagerUserSubscriptions"},backupstorage:{name:"BackupStorage"},privatenetworks:{name:"PrivateNetworks"},supportapp:{prefix:"support-app",name:"SupportApp"},controltower:{name:"ControlTower"},iotfleetwise:{name:"IoTFleetWise"},migrationhuborchestrator:{name:"MigrationHubOrchestrator"},connectcases:{name:"ConnectCases"},resourceexplorer2:{prefix:"resource-explorer-2",name:"ResourceExplorer2"},scheduler:{name:"Scheduler"},chimesdkvoice:{prefix:"chime-sdk-voice",name:"ChimeSDKVoice"},iotroborunner:{prefix:"iot-roborunner",name:"IoTRoboRunner"},ssmsap:{prefix:"ssm-sap",name:"SsmSap"},oam:{name:"OAM"},arczonalshift:{prefix:"arc-zonal-shift",name:"ARCZonalShift"},omics:{name:"Omics"},opensearchserverless:{name:"OpenSearchServerless"},securitylake:{name:"SecurityLake"},simspaceweaver:{name:"SimSpaceWeaver"},docdbelastic:{prefix:"docdb-elastic",name:"DocDBElastic"},sagemakergeospatial:{prefix:"sagemaker-geospatial",name:"SageMakerGeospatial"},codecatalyst:{name:"CodeCatalyst"},pipes:{name:"Pipes"},sagemakermetrics:{prefix:"sagemaker-metrics",name:"SageMakerMetrics"},kinesisvideowebrtcstorage:{prefix:"kinesis-video-webrtc-storage",name:"KinesisVideoWebRTCStorage"},licensemanagerlinuxsubscriptions:{prefix:"license-manager-linux-subscriptions",name:"LicenseManagerLinuxSubscriptions"},kendraranking:{prefix:"kendra-ranking",name:"KendraRanking"},cleanrooms:{name:"CleanRooms"},cloudtraildata:{prefix:"cloudtrail-data",name:"CloudTrailData"},tnb:{name:"Tnb"},internetmonitor:{name:"InternetMonitor"},ivsrealtime:{prefix:"ivs-realtime",name:"IVSRealTime"},vpclattice:{prefix:"vpc-lattice",name:"VPCLattice"},osis:{name:"OSIS"},mediapackagev2:{name:"MediaPackageV2"},paymentcryptography:{prefix:"payment-cryptography",name:"PaymentCryptography"},paymentcryptographydata:{prefix:"payment-cryptography-data",name:"PaymentCryptographyData"},codegurusecurity:{prefix:"codeguru-security",name:"CodeGuruSecurity"},verifiedpermissions:{name:"VerifiedPermissions"},appfabric:{name:"AppFabric"},medicalimaging:{prefix:"medical-imaging",name:"MedicalImaging"},entityresolution:{name:"EntityResolution"},managedblockchainquery:{prefix:"managedblockchain-query",name:"ManagedBlockchainQuery"},neptunedata:{name:"Neptunedata"},pcaconnectorad:{prefix:"pca-connector-ad",name:"PcaConnectorAd"}}},{}],5:[function(C,D,_){D.exports={version:"2.0",metadata:{apiVersion:"2011-06-15",endpointPrefix:"sts",globalEndpoint:"sts.amazonaws.com",protocol:"query",serviceAbbreviation:"AWS STS",serviceFullName:"AWS Security Token Service",serviceId:"STS",signatureVersion:"v4",uid:"sts-2011-06-15",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/"},operations:{AssumeRole:{input:{type:"structure",required:["RoleArn","RoleSessionName"],members:{RoleArn:{},RoleSessionName:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"},Tags:{shape:"S8"},TransitiveTagKeys:{type:"list",member:{}},ExternalId:{},SerialNumber:{},TokenCode:{},SourceIdentity:{},ProvidedContexts:{type:"list",member:{type:"structure",members:{ProviderArn:{},ContextAssertion:{}}}}}},output:{resultWrapper:"AssumeRoleResult",type:"structure",members:{Credentials:{shape:"Sl"},AssumedRoleUser:{shape:"Sq"},PackedPolicySize:{type:"integer"},SourceIdentity:{}}}},AssumeRoleWithSAML:{input:{type:"structure",required:["RoleArn","PrincipalArn","SAMLAssertion"],members:{RoleArn:{},PrincipalArn:{},SAMLAssertion:{type:"string",sensitive:!0},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithSAMLResult",type:"structure",members:{Credentials:{shape:"Sl"},AssumedRoleUser:{shape:"Sq"},PackedPolicySize:{type:"integer"},Subject:{},SubjectType:{},Issuer:{},Audience:{},NameQualifier:{},SourceIdentity:{}}}},AssumeRoleWithWebIdentity:{input:{type:"structure",required:["RoleArn","RoleSessionName","WebIdentityToken"],members:{RoleArn:{},RoleSessionName:{},WebIdentityToken:{type:"string",sensitive:!0},ProviderId:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithWebIdentityResult",type:"structure",members:{Credentials:{shape:"Sl"},SubjectFromWebIdentityToken:{},AssumedRoleUser:{shape:"Sq"},PackedPolicySize:{type:"integer"},Provider:{},Audience:{},SourceIdentity:{}}}},DecodeAuthorizationMessage:{input:{type:"structure",required:["EncodedMessage"],members:{EncodedMessage:{}}},output:{resultWrapper:"DecodeAuthorizationMessageResult",type:"structure",members:{DecodedMessage:{}}}},GetAccessKeyInfo:{input:{type:"structure",required:["AccessKeyId"],members:{AccessKeyId:{}}},output:{resultWrapper:"GetAccessKeyInfoResult",type:"structure",members:{Account:{}}}},GetCallerIdentity:{input:{type:"structure",members:{}},output:{resultWrapper:"GetCallerIdentityResult",type:"structure",members:{UserId:{},Account:{},Arn:{}}}},GetFederationToken:{input:{type:"structure",required:["Name"],members:{Name:{},Policy:{},PolicyArns:{shape:"S4"},DurationSeconds:{type:"integer"},Tags:{shape:"S8"}}},output:{resultWrapper:"GetFederationTokenResult",type:"structure",members:{Credentials:{shape:"Sl"},FederatedUser:{type:"structure",required:["FederatedUserId","Arn"],members:{FederatedUserId:{},Arn:{}}},PackedPolicySize:{type:"integer"}}}},GetSessionToken:{input:{type:"structure",members:{DurationSeconds:{type:"integer"},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"GetSessionTokenResult",type:"structure",members:{Credentials:{shape:"Sl"}}}}},shapes:{S4:{type:"list",member:{type:"structure",members:{arn:{}}}},S8:{type:"list",member:{type:"structure",required:["Key","Value"],members:{Key:{},Value:{}}}},Sl:{type:"structure",required:["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],members:{AccessKeyId:{},SecretAccessKey:{type:"string",sensitive:!0},SessionToken:{},Expiration:{type:"timestamp"}}},Sq:{type:"structure",required:["AssumedRoleId","Arn"],members:{AssumedRoleId:{},Arn:{}}}}}},{}],6:[function(C,D,_){D.exports={pagination:{}}},{}],7:[function(C,D,_){C("../lib/node_loader");var g=C("../lib/core"),v=g.Service,E=g.apiLoader;E.services.cognitoidentity={},g.CognitoIdentity=v.defineService("cognitoidentity",["2014-06-30"]),Object.defineProperty(E.services.cognitoidentity,"2014-06-30",{get:function(){var u=C("../apis/cognito-identity-2014-06-30.min.json");return u.paginators=C("../apis/cognito-identity-2014-06-30.paginators.json").pagination,u},enumerable:!0,configurable:!0}),D.exports=g.CognitoIdentity},{"../apis/cognito-identity-2014-06-30.min.json":1,"../apis/cognito-identity-2014-06-30.paginators.json":2,"../lib/core":19,"../lib/node_loader":16}],8:[function(C,D,_){C("../lib/node_loader");var g=C("../lib/core"),v=g.Service,E=g.apiLoader;E.services.sts={},g.STS=v.defineService("sts",["2011-06-15"]),C("../lib/services/sts"),Object.defineProperty(E.services.sts,"2011-06-15",{get:function(){var u=C("../apis/sts-2011-06-15.min.json");return u.paginators=C("../apis/sts-2011-06-15.paginators.json").pagination,u},enumerable:!0,configurable:!0}),D.exports=g.STS},{"../apis/sts-2011-06-15.min.json":5,"../apis/sts-2011-06-15.paginators.json":6,"../lib/core":19,"../lib/node_loader":16,"../lib/services/sts":63}],9:[function(C,D,_){function g(v,E){if(!g.services.hasOwnProperty(v))throw new Error("InvalidService: Failed to load api for "+v);return g.services[v][E]}g.services={},D.exports=g},{}],10:[function(C,D,_){var g=C("./browserHmac"),v=C("./browserMd5"),E=C("./browserSha1"),l=C("./browserSha256");D.exports=_={createHash:function(a){if(a=a.toLowerCase(),a==="md5")return new v;if(a==="sha256")return new l;if(a==="sha1")return new E;throw new Error("Hash algorithm "+a+" is not supported in the browser SDK")},createHmac:function(a,y){if(a=a.toLowerCase(),a==="md5")return new g(v,y);if(a==="sha256")return new g(l,y);if(a==="sha1")return new g(E,y);throw new Error("HMAC algorithm "+a+" is not supported in the browser SDK")},createSign:function(){throw new Error("createSign is not implemented in the browser")}}},{"./browserHmac":12,"./browserMd5":13,"./browserSha1":14,"./browserSha256":15}],11:[function(C,D,_){var g=C("buffer/").Buffer;typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView>"u"&&(ArrayBuffer.isView=function(u){return v.indexOf(Object.prototype.toString.call(u))>-1});var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"];function E(u){return typeof u=="string"?u.length===0:u.byteLength===0}function l(u){return typeof u=="string"&&(u=new g(u,"utf8")),ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(u)}D.exports=_={isEmptyData:E,convertToBuffer:l}},{"buffer/":86}],12:[function(C,D,_){var g=C("./browserHashUtils");function v(l,u){this.hash=new l,this.outer=new l;var a=E(l,u),y=new Uint8Array(l.BLOCK_SIZE);y.set(a);for(var p=0;p<l.BLOCK_SIZE;p++)a[p]^=54,y[p]^=92;this.hash.update(a),this.outer.update(y);for(var p=0;p<a.byteLength;p++)a[p]=0}D.exports=_=v,v.prototype.update=function(l){if(g.isEmptyData(l)||this.error)return this;try{this.hash.update(g.convertToBuffer(l))}catch(u){this.error=u}return this},v.prototype.digest=function(l){return this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest(l)};function E(l,u){var a=g.convertToBuffer(u);if(a.byteLength>l.BLOCK_SIZE){var y=new l;y.update(a),a=y.digest()}var p=new Uint8Array(l.BLOCK_SIZE);return p.set(a),p}},{"./browserHashUtils":11}],13:[function(C,D,_){var g=C("./browserHashUtils"),v=C("buffer/").Buffer,E=64,l=16,u=[1732584193,4023233417,2562383102,271733878];function a(){this.state=[1732584193,4023233417,2562383102,271733878],this.buffer=new DataView(new ArrayBuffer(E)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}D.exports=_=a,a.BLOCK_SIZE=E,a.prototype.update=function(S){if(g.isEmptyData(S))return this;if(this.finished)throw new Error("Attempted to update an already finished hash.");var h=g.convertToBuffer(S),I=0,f=h.byteLength;for(this.bytesHashed+=f;f>0;)this.buffer.setUint8(this.bufferLength++,h[I++]),f--,this.bufferLength===E&&(this.hashBuffer(),this.bufferLength=0);return this},a.prototype.digest=function(S){if(!this.finished){var h=this,I=h.buffer,f=h.bufferLength,T=h.bytesHashed,w=T*8;if(I.setUint8(this.bufferLength++,128),f%E>=E-8){for(var x=this.bufferLength;x<E;x++)I.setUint8(x,0);this.hashBuffer(),this.bufferLength=0}for(var x=this.bufferLength;x<E-8;x++)I.setUint8(x,0);I.setUint32(E-8,w>>>0,!0),I.setUint32(E-4,Math.floor(w/4294967296),!0),this.hashBuffer(),this.finished=!0}for(var P=new DataView(new ArrayBuffer(l)),x=0;x<4;x++)P.setUint32(x*4,this.state[x],!0);var F=new v(P.buffer,P.byteOffset,P.byteLength);return S?F.toString(S):F},a.prototype.hashBuffer=function(){var S=this,h=S.buffer,I=S.state,f=I[0],T=I[1],w=I[2],x=I[3];f=p(f,T,w,x,h.getUint32(0,!0),7,3614090360),x=p(x,f,T,w,h.getUint32(4,!0),12,3905402710),w=p(w,x,f,T,h.getUint32(8,!0),17,606105819),T=p(T,w,x,f,h.getUint32(12,!0),22,3250441966),f=p(f,T,w,x,h.getUint32(16,!0),7,4118548399),x=p(x,f,T,w,h.getUint32(20,!0),12,1200080426),w=p(w,x,f,T,h.getUint32(24,!0),17,2821735955),T=p(T,w,x,f,h.getUint32(28,!0),22,4249261313),f=p(f,T,w,x,h.getUint32(32,!0),7,1770035416),x=p(x,f,T,w,h.getUint32(36,!0),12,2336552879),w=p(w,x,f,T,h.getUint32(40,!0),17,4294925233),T=p(T,w,x,f,h.getUint32(44,!0),22,2304563134),f=p(f,T,w,x,h.getUint32(48,!0),7,1804603682),x=p(x,f,T,w,h.getUint32(52,!0),12,4254626195),w=p(w,x,f,T,h.getUint32(56,!0),17,2792965006),T=p(T,w,x,f,h.getUint32(60,!0),22,1236535329),f=s(f,T,w,x,h.getUint32(4,!0),5,4129170786),x=s(x,f,T,w,h.getUint32(24,!0),9,3225465664),w=s(w,x,f,T,h.getUint32(44,!0),14,643717713),T=s(T,w,x,f,h.getUint32(0,!0),20,3921069994),f=s(f,T,w,x,h.getUint32(20,!0),5,3593408605),x=s(x,f,T,w,h.getUint32(40,!0),9,38016083),w=s(w,x,f,T,h.getUint32(60,!0),14,3634488961),T=s(T,w,x,f,h.getUint32(16,!0),20,3889429448),f=s(f,T,w,x,h.getUint32(36,!0),5,568446438),x=s(x,f,T,w,h.getUint32(56,!0),9,3275163606),w=s(w,x,f,T,h.getUint32(12,!0),14,4107603335),T=s(T,w,x,f,h.getUint32(32,!0),20,1163531501),f=s(f,T,w,x,h.getUint32(52,!0),5,2850285829),x=s(x,f,T,w,h.getUint32(8,!0),9,4243563512),w=s(w,x,f,T,h.getUint32(28,!0),14,1735328473),T=s(T,w,x,f,h.getUint32(48,!0),20,2368359562),f=d(f,T,w,x,h.getUint32(20,!0),4,4294588738),x=d(x,f,T,w,h.getUint32(32,!0),11,2272392833),w=d(w,x,f,T,h.getUint32(44,!0),16,1839030562),T=d(T,w,x,f,h.getUint32(56,!0),23,4259657740),f=d(f,T,w,x,h.getUint32(4,!0),4,2763975236),x=d(x,f,T,w,h.getUint32(16,!0),11,1272893353),w=d(w,x,f,T,h.getUint32(28,!0),16,4139469664),T=d(T,w,x,f,h.getUint32(40,!0),23,3200236656),f=d(f,T,w,x,h.getUint32(52,!0),4,681279174),x=d(x,f,T,w,h.getUint32(0,!0),11,3936430074),w=d(w,x,f,T,h.getUint32(12,!0),16,3572445317),T=d(T,w,x,f,h.getUint32(24,!0),23,76029189),f=d(f,T,w,x,h.getUint32(36,!0),4,3654602809),x=d(x,f,T,w,h.getUint32(48,!0),11,3873151461),w=d(w,x,f,T,h.getUint32(60,!0),16,530742520),T=d(T,w,x,f,h.getUint32(8,!0),23,3299628645),f=c(f,T,w,x,h.getUint32(0,!0),6,4096336452),x=c(x,f,T,w,h.getUint32(28,!0),10,1126891415),w=c(w,x,f,T,h.getUint32(56,!0),15,2878612391),T=c(T,w,x,f,h.getUint32(20,!0),21,4237533241),f=c(f,T,w,x,h.getUint32(48,!0),6,1700485571),x=c(x,f,T,w,h.getUint32(12,!0),10,2399980690),w=c(w,x,f,T,h.getUint32(40,!0),15,4293915773),T=c(T,w,x,f,h.getUint32(4,!0),21,2240044497),f=c(f,T,w,x,h.getUint32(32,!0),6,1873313359),x=c(x,f,T,w,h.getUint32(60,!0),10,4264355552),w=c(w,x,f,T,h.getUint32(24,!0),15,2734768916),T=c(T,w,x,f,h.getUint32(52,!0),21,1309151649),f=c(f,T,w,x,h.getUint32(16,!0),6,4149444226),x=c(x,f,T,w,h.getUint32(44,!0),10,3174756917),w=c(w,x,f,T,h.getUint32(8,!0),15,718787259),T=c(T,w,x,f,h.getUint32(36,!0),21,3951481745),I[0]=f+I[0]&4294967295,I[1]=T+I[1]&4294967295,I[2]=w+I[2]&4294967295,I[3]=x+I[3]&4294967295};function y(S,h,I,f,T,w){return h=(h+S&4294967295)+(f+w&4294967295)&4294967295,(h<<T|h>>>32-T)+I&4294967295}function p(S,h,I,f,T,w,x){return y(h&I|~h&f,S,h,T,w,x)}function s(S,h,I,f,T,w,x){return y(h&f|I&~f,S,h,T,w,x)}function d(S,h,I,f,T,w,x){return y(h^I^f,S,h,T,w,x)}function c(S,h,I,f,T,w,x){return y(I^(h|~f),S,h,T,w,x)}},{"./browserHashUtils":11,"buffer/":86}],14:[function(C,D,_){var g=C("buffer/").Buffer,v=C("./browserHashUtils"),E=64,l=20,u=new Uint32Array([1518500249,1859775393,-1894007588,-899497514]),a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],y=Math.pow(2,53)-1;function p(){this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=new Uint32Array(80),this.offset=0,this.shift=24,this.totalLength=0}D.exports=_=p,p.BLOCK_SIZE=E,p.prototype.update=function(s){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(v.isEmptyData(s))return this;s=v.convertToBuffer(s);var d=s.length;this.totalLength+=d*8;for(var c=0;c<d;c++)this.write(s[c]);return this},p.prototype.write=function(d){this.block[this.offset]|=(d&255)<<this.shift,this.shift?this.shift-=8:(this.offset++,this.shift=24),this.offset===16&&this.processBlock()},p.prototype.digest=function(s){this.write(128),(this.offset>14||this.offset===14&&this.shift<24)&&this.processBlock(),this.offset=14,this.shift=24,this.write(0),this.write(0),this.write(this.totalLength>0xffffffffff?this.totalLength/1099511627776:0),this.write(this.totalLength>4294967295?this.totalLength/4294967296:0);for(var d=24;d>=0;d-=8)this.write(this.totalLength>>d);var c=new g(l),S=new DataView(c.buffer);return S.setUint32(0,this.h0,!1),S.setUint32(4,this.h1,!1),S.setUint32(8,this.h2,!1),S.setUint32(12,this.h3,!1),S.setUint32(16,this.h4,!1),s?c.toString(s):c},p.prototype.processBlock=function(){for(var d=16;d<80;d++){var c=this.block[d-3]^this.block[d-8]^this.block[d-14]^this.block[d-16];this.block[d]=c<<1|c>>>31}var S=this.h0,h=this.h1,I=this.h2,f=this.h3,T=this.h4,w,x;for(d=0;d<80;d++){d<20?(w=f^h&(I^f),x=1518500249):d<40?(w=h^I^f,x=1859775393):d<60?(w=h&I|f&(h|I),x=2400959708):(w=h^I^f,x=3395469782);var P=(S<<5|S>>>27)+w+T+x+(this.block[d]|0);T=f,f=I,I=h<<30|h>>>2,h=S,S=P}for(this.h0=this.h0+S|0,this.h1=this.h1+h|0,this.h2=this.h2+I|0,this.h3=this.h3+f|0,this.h4=this.h4+T|0,this.offset=0,d=0;d<16;d++)this.block[d]=0}},{"./browserHashUtils":11,"buffer/":86}],15:[function(C,D,_){var g=C("buffer/").Buffer,v=C("./browserHashUtils"),E=64,l=32,u=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],y=Math.pow(2,53)-1;function p(){this.state=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}D.exports=_=p,p.BLOCK_SIZE=E,p.prototype.update=function(s){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(v.isEmptyData(s))return this;s=v.convertToBuffer(s);var d=0,c=s.byteLength;if(this.bytesHashed+=c,this.bytesHashed*8>y)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=s[d++],c--,this.bufferLength===E&&(this.hashBuffer(),this.bufferLength=0);return this},p.prototype.digest=function(s){if(!this.finished){var d=this.bytesHashed*8,c=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),S=this.bufferLength;if(c.setUint8(this.bufferLength++,128),S%E>=E-8){for(var h=this.bufferLength;h<E;h++)c.setUint8(h,0);this.hashBuffer(),this.bufferLength=0}for(var h=this.bufferLength;h<E-8;h++)c.setUint8(h,0);c.setUint32(E-8,Math.floor(d/4294967296),!0),c.setUint32(E-4,d),this.hashBuffer(),this.finished=!0}for(var I=new g(l),h=0;h<8;h++)I[h*4]=this.state[h]>>>24&255,I[h*4+1]=this.state[h]>>>16&255,I[h*4+2]=this.state[h]>>>8&255,I[h*4+3]=this.state[h]>>>0&255;return s?I.toString(s):I},p.prototype.hashBuffer=function(){for(var s=this,d=s.buffer,c=s.state,S=c[0],h=c[1],I=c[2],f=c[3],T=c[4],w=c[5],x=c[6],P=c[7],F=0;F<E;F++){if(F<16)this.temp[F]=(d[F*4]&255)<<24|(d[F*4+1]&255)<<16|(d[F*4+2]&255)<<8|d[F*4+3]&255;else{var W=this.temp[F-2],V=(W>>>17|W<<15)^(W>>>19|W<<13)^W>>>10;W=this.temp[F-15];var j=(W>>>7|W<<25)^(W>>>18|W<<14)^W>>>3;this.temp[F]=(V+this.temp[F-7]|0)+(j+this.temp[F-16]|0)}var Y=(((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))+(T&w^~T&x)|0)+(P+(u[F]+this.temp[F]|0)|0)|0,$=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&h^S&I^h&I)|0;P=x,x=w,w=T,T=f+Y|0,f=I,I=h,h=S,S=Y+$|0}c[0]+=S,c[1]+=h,c[2]+=I,c[3]+=f,c[4]+=T,c[5]+=w,c[6]+=x,c[7]+=P}},{"./browserHashUtils":11,"buffer/":86}],16:[function(C,D,_){(function(g){(function(){var v=C("./util");v.crypto.lib=C("./browserCryptoLib"),v.Buffer=C("buffer/").Buffer,v.url=C("url/"),v.querystring=C("querystring/"),v.realClock=C("./realclock/browserClock"),v.environment="js",v.createEventStream=C("./event-stream/buffered-create-event-stream").createEventStream,v.isBrowser=function(){return!0},v.isNode=function(){return!1};var E=C("./core");if(D.exports=E,C("./credentials"),C("./credentials/credential_provider_chain"),C("./credentials/temporary_credentials"),C("./credentials/chainable_temporary_credentials"),C("./credentials/web_identity_credentials"),C("./credentials/cognito_identity_credentials"),C("./credentials/saml_credentials"),E.XML.Parser=C("./xml/browser_parser"),C("./http/xhr"),typeof l>"u")var l={browser:!0}}).call(this)}).call(this,C("_process"))},{"./browserCryptoLib":10,"./core":19,"./credentials":20,"./credentials/chainable_temporary_credentials":21,"./credentials/cognito_identity_credentials":22,"./credentials/credential_provider_chain":23,"./credentials/saml_credentials":24,"./credentials/temporary_credentials":25,"./credentials/web_identity_credentials":26,"./event-stream/buffered-create-event-stream":28,"./http/xhr":36,"./realclock/browserClock":54,"./util":74,"./xml/browser_parser":75,_process:91,"buffer/":86,"querystring/":98,"url/":100}],17:[function(C,D,_){var g=C("./core");C("./credentials"),C("./credentials/credential_provider_chain");var v;g.Config=g.util.inherit({constructor:function(l){l===void 0&&(l={}),l=this.extractCredentials(l),g.util.each.call(this,this.keys,function(u,a){this.set(u,l[u],a)})},getCredentials:function(l){var u=this;function a(d){l(d,d?null:u.credentials)}function y(d,c){return new g.util.error(c||new Error,{code:"CredentialsError",message:d,name:"CredentialsError"})}function p(){u.credentials.get(function(d){if(d){var c="Could not load credentials from "+u.credentials.constructor.name;d=y(c,d)}a(d)})}function s(){var d=null;(!u.credentials.accessKeyId||!u.credentials.secretAccessKey)&&(d=y("Missing credentials")),a(d)}u.credentials?typeof u.credentials.get=="function"?p():s():u.credentialProvider?u.credentialProvider.resolve(function(d,c){d&&(d=y("Could not load credentials from any providers",d)),u.credentials=c,a(d)}):a(y("No credentials to load"))},getToken:function(l){var u=this;function a(d){l(d,d?null:u.token)}function y(d,c){return new g.util.error(c||new Error,{code:"TokenError",message:d,name:"TokenError"})}function p(){u.token.get(function(d){if(d){var c="Could not load token from "+u.token.constructor.name;d=y(c,d)}a(d)})}function s(){var d=null;u.token.token||(d=y("Missing token")),a(d)}u.token?typeof u.token.get=="function"?p():s():u.tokenProvider?u.tokenProvider.resolve(function(d,c){d&&(d=y("Could not load token from any providers",d)),u.token=c,a(d)}):a(y("No token to load"))},update:function(l,u){u=u||!1,l=this.extractCredentials(l),g.util.each.call(this,l,function(a,y){(u||Object.prototype.hasOwnProperty.call(this.keys,a)||g.Service.hasService(a))&&this.set(a,y)})},loadFromPath:function(l){this.clear();var u=JSON.parse(g.util.readFileSync(l)),a=new g.FileSystemCredentials(l),y=new g.CredentialProviderChain;return y.providers.unshift(a),y.resolve(function(p,s){if(p)throw p;u.credentials=s}),this.constructor(u),this},clear:function(){g.util.each.call(this,this.keys,function(l){delete this[l]}),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(l,u,a){u===void 0?(a===void 0&&(a=this.keys[l]),typeof a=="function"?this[l]=a.call(this):this[l]=a):l==="httpOptions"&&this[l]?this[l]=g.util.merge(this[l],u):this[l]=u},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,s3DisableBodySigning:!0,s3UsEast1RegionalEndpoint:"legacy",s3UseArnRegion:void 0,computeChecksums:!0,convertResponseTypes:!0,correctClockSkew:!1,customUserAgent:null,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null,signatureCache:!0,retryDelayOptions:{},useAccelerateEndpoint:!1,clientSideMonitoring:!1,endpointDiscoveryEnabled:void 0,endpointCacheSize:1e3,hostPrefixEnabled:!0,stsRegionalEndpoints:"legacy",useFipsEndpoint:!1,useDualstackEndpoint:!1,token:null},extractCredentials:function(l){return l.accessKeyId&&l.secretAccessKey&&(l=g.util.copy(l),l.credentials=new g.Credentials(l)),l},setPromisesDependency:function(l){v=l,l===null&&typeof Promise=="function"&&(v=Promise);var u=[g.Request,g.Credentials,g.CredentialProviderChain];g.S3&&(u.push(g.S3),g.S3.ManagedUpload&&u.push(g.S3.ManagedUpload)),g.util.addPromises(u,v)},getPromisesDependency:function(){return v}}),g.config=new g.Config},{"./core":19,"./credentials":20,"./credentials/credential_provider_chain":23}],18:[function(C,D,_){(function(g){(function(){var v=C("./core");function E(u,a){if(typeof u=="string"){if(["legacy","regional"].indexOf(u.toLowerCase())>=0)return u.toLowerCase();throw v.util.error(new Error,a)}}function l(u,a){u=u||{};var y;if(u[a.clientConfig]&&(y=E(u[a.clientConfig],{code:"InvalidConfiguration",message:'invalid "'+a.clientConfig+'" configuration. Expect "legacy"  or "regional". Got "'+u[a.clientConfig]+'".'}),y)||!v.util.isNode())return y;if(Object.prototype.hasOwnProperty.call(g.env,a.env)){var p=g.env[a.env];if(y=E(p,{code:"InvalidEnvironmentalVariable",message:"invalid "+a.env+' environmental variable. Expect "legacy"  or "regional". Got "'+g.env[a.env]+'".'}),y)return y}var s={};try{var d=v.util.getProfilesFromSharedConfig(v.util.iniLoader);s=d[g.env.AWS_PROFILE||v.util.defaultProfile]}catch{}if(s&&Object.prototype.hasOwnProperty.call(s,a.sharedConfig)){var c=s[a.sharedConfig];if(y=E(c,{code:"InvalidConfiguration",message:"invalid "+a.sharedConfig+' profile config. Expect "legacy"  or "regional". Got "'+s[a.sharedConfig]+'".'}),y)return y}return y}D.exports=l}).call(this)}).call(this,C("_process"))},{"./core":19,_process:91}],19:[function(C,D,_){var g={util:C("./util")},v={};v.toString(),D.exports=g,g.util.update(g,{VERSION:"2.1455.0",Signers:{},Protocol:{Json:C("./protocol/json"),Query:C("./protocol/query"),Rest:C("./protocol/rest"),RestJson:C("./protocol/rest_json"),RestXml:C("./protocol/rest_xml")},XML:{Builder:C("./xml/builder"),Parser:null},JSON:{Builder:C("./json/builder"),Parser:C("./json/parser")},Model:{Api:C("./model/api"),Operation:C("./model/operation"),Shape:C("./model/shape"),Paginator:C("./model/paginator"),ResourceWaiter:C("./model/resource_waiter")},apiLoader:C("./api_loader"),EndpointCache:C("../vendor/endpoint-cache").EndpointCache}),C("./sequential_executor"),C("./service"),C("./config"),C("./http"),C("./event_listeners"),C("./request"),C("./response"),C("./resource_waiter"),C("./signers/request_signer"),C("./param_validator"),C("./maintenance_mode_message"),g.events=new g.SequentialExecutor,g.util.memoizedProperty(g,"endpointCache",function(){return new g.EndpointCache(g.config.endpointCacheSize)},!0)},{"../vendor/endpoint-cache":111,"./api_loader":9,"./config":17,"./event_listeners":34,"./http":35,"./json/builder":37,"./json/parser":38,"./maintenance_mode_message":39,"./model/api":40,"./model/operation":42,"./model/paginator":43,"./model/resource_waiter":44,"./model/shape":45,"./param_validator":46,"./protocol/json":48,"./protocol/query":49,"./protocol/rest":50,"./protocol/rest_json":51,"./protocol/rest_xml":52,"./request":58,"./resource_waiter":59,"./response":60,"./sequential_executor":61,"./service":62,"./signers/request_signer":66,"./util":74,"./xml/builder":76}],20:[function(C,D,_){var g=C("./core");g.Credentials=g.util.inherit({constructor:function(){if(g.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,this.refreshCallbacks=[],arguments.length===1&&typeof arguments[0]=="object"){var E=arguments[0].credentials||arguments[0];this.accessKeyId=E.accessKeyId,this.secretAccessKey=E.secretAccessKey,this.sessionToken=E.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var E=g.util.date.getDate().getTime(),l=new Date(E+this.expiryWindow*1e3);return this.expireTime&&l>this.expireTime?!0:this.expired||!this.accessKeyId||!this.secretAccessKey},get:function(E){var l=this;this.needsRefresh()?this.refresh(function(u){u||(l.expired=!1),E&&E(u)}):E&&E()},refresh:function(E){this.expired=!1,E()},coalesceRefresh:function(E,l){var u=this;u.refreshCallbacks.push(E)===1&&u.load(function(y){g.util.arrayEach(u.refreshCallbacks,function(p){l?p(y):g.util.defer(function(){p(y)})}),u.refreshCallbacks.length=0})},load:function(E){E()}}),g.Credentials.addPromisesToClass=function(E){this.prototype.getPromise=g.util.promisifyMethod("get",E),this.prototype.refreshPromise=g.util.promisifyMethod("refresh",E)},g.Credentials.deletePromisesFromClass=function(){delete this.prototype.getPromise,delete this.prototype.refreshPromise},g.util.addPromises(g.Credentials)},{"./core":19}],21:[function(C,D,_){var g=C("../core"),v=C("../../clients/sts");g.ChainableTemporaryCredentials=g.util.inherit(g.Credentials,{constructor:function(l){g.Credentials.call(this),l=l||{},this.errorCode="ChainableTemporaryCredentialsProviderFailure",this.expired=!0,this.tokenCodeFn=null;var u=g.util.copy(l.params)||{};if(u.RoleArn&&(u.RoleSessionName=u.RoleSessionName||"temporary-credentials"),u.SerialNumber){if(!l.tokenCodeFn||typeof l.tokenCodeFn!="function")throw new g.util.error(new Error("tokenCodeFn must be a function when params.SerialNumber is given"),{code:this.errorCode});this.tokenCodeFn=l.tokenCodeFn}var a=g.util.merge({params:u,credentials:l.masterCredentials||g.config.credentials},l.stsConfig||{});this.service=new v(a)},refresh:function(l){this.coalesceRefresh(l||g.util.fn.callback)},load:function(l){var u=this,a=u.service.config.params.RoleArn?"assumeRole":"getSessionToken";this.getTokenCode(function(y,p){var s={};if(y){l(y);return}p&&(s.TokenCode=p),u.service[a](s,function(d,c){d||u.service.credentialsFrom(c,u),l(d)})})},getTokenCode:function(l){var u=this;this.tokenCodeFn?this.tokenCodeFn(this.service.config.params.SerialNumber,function(a,y){if(a){var p=a;a instanceof Error&&(p=a.message),l(g.util.error(new Error("Error fetching MFA token: "+p),{code:u.errorCode}));return}l(null,y)}):l(null)}})},{"../../clients/sts":8,"../core":19}],22:[function(C,D,_){var g=C("../core"),v=C("../../clients/cognitoidentity"),E=C("../../clients/sts");g.CognitoIdentityCredentials=g.util.inherit(g.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(u,a){g.Credentials.call(this),this.expired=!0,this.params=u,this.data=null,this._identityId=null,this._clientConfig=g.util.copy(a||{}),this.loadCachedId();var y=this;Object.defineProperty(this,"identityId",{get:function(){return y.loadCachedId(),y._identityId||y.params.IdentityId},set:function(p){y._identityId=p}})},refresh:function(u){this.coalesceRefresh(u||g.util.fn.callback)},load:function(u){var a=this;a.createClients(),a.data=null,a._identityId=null,a.getId(function(y){y?(a.clearIdOnNotAuthorized(y),u(y)):a.params.RoleArn?a.getCredentialsFromSTS(u):a.getCredentialsForIdentity(u)})},clearCachedId:function(){this._identityId=null,delete this.params.IdentityId;var u=this.params.IdentityPoolId,a=this.params.LoginId||"";delete this.storage[this.localStorageKey.id+u+a],delete this.storage[this.localStorageKey.providers+u+a]},clearIdOnNotAuthorized:function(u){var a=this;u.code=="NotAuthorizedException"&&a.clearCachedId()},getId:function(u){var a=this;if(typeof a.params.IdentityId=="string")return u(null,a.params.IdentityId);a.cognito.getId(function(y,p){!y&&p.IdentityId?(a.params.IdentityId=p.IdentityId,u(null,p.IdentityId)):u(y)})},loadCredentials:function(u,a){!u||!a||(a.expired=!1,a.accessKeyId=u.Credentials.AccessKeyId,a.secretAccessKey=u.Credentials.SecretKey,a.sessionToken=u.Credentials.SessionToken,a.expireTime=u.Credentials.Expiration)},getCredentialsForIdentity:function(u){var a=this;a.cognito.getCredentialsForIdentity(function(y,p){y?a.clearIdOnNotAuthorized(y):(a.cacheId(p),a.data=p,a.loadCredentials(a.data,a)),u(y)})},getCredentialsFromSTS:function(u){var a=this;a.cognito.getOpenIdToken(function(y,p){y?(a.clearIdOnNotAuthorized(y),u(y)):(a.cacheId(p),a.params.WebIdentityToken=p.Token,a.webIdentityCredentials.refresh(function(s){s||(a.data=a.webIdentityCredentials.data,a.sts.credentialsFrom(a.data,a)),u(s)}))})},loadCachedId:function(){var u=this;if(g.util.isBrowser()&&!u.params.IdentityId){var a=u.getStorage("id");if(a&&u.params.Logins){var y=Object.keys(u.params.Logins),p=(u.getStorage("providers")||"").split(","),s=p.filter(function(d){return y.indexOf(d)!==-1});s.length!==0&&(u.params.IdentityId=a)}else a&&(u.params.IdentityId=a)}},createClients:function(){var l=this._clientConfig;if(this.webIdentityCredentials=this.webIdentityCredentials||new g.WebIdentityCredentials(this.params,l),!this.cognito){var u=g.util.merge({},l);u.params=this.params,this.cognito=new v(u)}this.sts=this.sts||new E(l)},cacheId:function(u){this._identityId=u.IdentityId,this.params.IdentityId=this._identityId,g.util.isBrowser()&&(this.setStorage("id",u.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(u){return this.storage[this.localStorageKey[u]+this.params.IdentityPoolId+(this.params.LoginId||"")]},setStorage:function(u,a){try{this.storage[this.localStorageKey[u]+this.params.IdentityPoolId+(this.params.LoginId||"")]=a}catch{}},storage:function(){try{var l=g.util.isBrowser()&&window.localStorage!==null&&typeof window.localStorage=="object"?window.localStorage:{};return l["aws.test-storage"]="foobar",delete l["aws.test-storage"],l}catch{return{}}}()})},{"../../clients/cognitoidentity":7,"../../clients/sts":8,"../core":19}],23:[function(C,D,_){var g=C("../core");g.CredentialProviderChain=g.util.inherit(g.Credentials,{constructor:function(E){E?this.providers=E:this.providers=g.CredentialProviderChain.defaultProviders.slice(0),this.resolveCallbacks=[]},resolve:function(E){var l=this;if(l.providers.length===0)return E(new Error("No providers")),l;if(l.resolveCallbacks.push(E)===1){let p=function(s,d){if(!s&&d||u===a.length){g.util.arrayEach(l.resolveCallbacks,function(S){S(s,d)}),l.resolveCallbacks.length=0;return}var c=a[u++];typeof c=="function"?d=c.call():d=c,d.get?d.get(function(S){p(S,S?null:d)}):p(null,d)};var y=p,u=0,a=l.providers.slice(0);p()}return l}}),g.CredentialProviderChain.defaultProviders=[],g.CredentialProviderChain.addPromisesToClass=function(E){this.prototype.resolvePromise=g.util.promisifyMethod("resolve",E)},g.CredentialProviderChain.deletePromisesFromClass=function(){delete this.prototype.resolvePromise},g.util.addPromises(g.CredentialProviderChain)},{"../core":19}],24:[function(C,D,_){var g=C("../core"),v=C("../../clients/sts");g.SAMLCredentials=g.util.inherit(g.Credentials,{constructor:function(l){g.Credentials.call(this),this.expired=!0,this.params=l},refresh:function(l){this.coalesceRefresh(l||g.util.fn.callback)},load:function(l){var u=this;u.createClients(),u.service.assumeRoleWithSAML(function(a,y){a||u.service.credentialsFrom(y,u),l(a)})},createClients:function(){this.service=this.service||new v({params:this.params})}})},{"../../clients/sts":8,"../core":19}],25:[function(C,D,_){var g=C("../core"),v=C("../../clients/sts");g.TemporaryCredentials=g.util.inherit(g.Credentials,{constructor:function(l,u){g.Credentials.call(this),this.loadMasterCredentials(u),this.expired=!0,this.params=l||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(l){this.coalesceRefresh(l||g.util.fn.callback)},load:function(l){var u=this;u.createClients(),u.masterCredentials.get(function(){u.service.config.credentials=u.masterCredentials;var a=u.params.RoleArn?u.service.assumeRole:u.service.getSessionToken;a.call(u.service,function(y,p){y||u.service.credentialsFrom(p,u),l(y)})})},loadMasterCredentials:function(l){for(this.masterCredentials=l||g.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials;typeof this.masterCredentials.get!="function"&&(this.masterCredentials=new g.Credentials(this.masterCredentials))},createClients:function(){this.service=this.service||new v({params:this.params})}})},{"../../clients/sts":8,"../core":19}],26:[function(C,D,_){var g=C("../core"),v=C("../../clients/sts");g.WebIdentityCredentials=g.util.inherit(g.Credentials,{constructor:function(l,u){g.Credentials.call(this),this.expired=!0,this.params=l,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null,this._clientConfig=g.util.copy(u||{})},refresh:function(l){this.coalesceRefresh(l||g.util.fn.callback)},load:function(l){var u=this;u.createClients(),u.service.assumeRoleWithWebIdentity(function(a,y){u.data=null,a||(u.data=y,u.service.credentialsFrom(y,u)),l(a)})},createClients:function(){if(!this.service){var E=g.util.merge({},this._clientConfig);E.params=this.params,this.service=new v(E)}}})},{"../../clients/sts":8,"../core":19}],27:[function(C,D,_){(function(g){(function(){var v=C("./core"),E=C("./util"),l=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"];function u(w){var x=w.service,P=x.api||{},F=P.operations,W={};return x.config.region&&(W.region=x.config.region),P.serviceId&&(W.serviceId=P.serviceId),x.config.credentials.accessKeyId&&(W.accessKeyId=x.config.credentials.accessKeyId),W}function a(w,x,P){!P||x===void 0||x===null||P.type==="structure"&&P.required&&P.required.length>0&&E.arrayEach(P.required,function(F){var W=P.members[F];if(W.endpointDiscoveryId===!0){var V=W.isLocationName?W.name:F;w[V]=String(x[F])}else a(w,x[F],W)})}function y(w,x){var P={};return a(P,w.params,x),P}function p(w){var x=w.service,P=x.api,F=P.operations?P.operations[w.operation]:void 0,W=F?F.input:void 0,V=y(w,W),j=u(w);Object.keys(V).length>0&&(j=E.update(j,V),F&&(j.operation=F.name));var Y=v.endpointCache.get(j);if(!(Y&&Y.length===1&&Y[0].Address===""))if(Y&&Y.length>0)w.httpRequest.updateEndpoint(Y[0].Address);else{var $=x.makeRequest(P.endpointOperation,{Operation:F.name,Identifiers:V});c($),$.removeListener("validate",v.EventListeners.Core.VALIDATE_PARAMETERS),$.removeListener("retry",v.EventListeners.Core.RETRY_CHECK),v.endpointCache.put(j,[{Address:"",CachePeriodInMinutes:1}]),$.send(function(Se,X){X&&X.Endpoints?v.endpointCache.put(j,X.Endpoints):Se&&v.endpointCache.put(j,[{Address:"",CachePeriodInMinutes:1}])})}}var s={};function d(w,x){var P=w.service,F=P.api,W=F.operations?F.operations[w.operation]:void 0,V=W?W.input:void 0,j=y(w,V),Y=u(w);Object.keys(j).length>0&&(Y=E.update(Y,j),W&&(Y.operation=W.name));var $=v.EndpointCache.getKeyString(Y),Se=v.endpointCache.get($);if(Se&&Se.length===1&&Se[0].Address===""){s[$]||(s[$]=[]),s[$].push({request:w,callback:x});return}else if(Se&&Se.length>0)w.httpRequest.updateEndpoint(Se[0].Address),x();else{var X=P.makeRequest(F.endpointOperation,{Operation:W.name,Identifiers:j});X.removeListener("validate",v.EventListeners.Core.VALIDATE_PARAMETERS),c(X),v.endpointCache.put($,[{Address:"",CachePeriodInMinutes:60}]),X.send(function(ae,Te){if(ae){if(w.response.error=E.error(ae,{retryable:!1}),v.endpointCache.remove(Y),s[$]){var $e=s[$];E.arrayEach($e,function(Be){Be.request.response.error=E.error(ae,{retryable:!1}),Be.callback()}),delete s[$]}}else if(Te&&(v.endpointCache.put($,Te.Endpoints),w.httpRequest.updateEndpoint(Te.Endpoints[0].Address),s[$])){var $e=s[$];E.arrayEach($e,function(xe){xe.request.httpRequest.updateEndpoint(Te.Endpoints[0].Address),xe.callback()}),delete s[$]}x()})}}function c(w){var x=w.service.api,P=x.apiVersion;P&&!w.httpRequest.headers["x-amz-api-version"]&&(w.httpRequest.headers["x-amz-api-version"]=P)}function S(w){var x=w.error,P=w.httpResponse;if(x&&(x.code==="InvalidEndpointException"||P.statusCode===421)){var F=w.request,W=F.service.api.operations||{},V=W[F.operation]?W[F.operation].input:void 0,j=y(F,V),Y=u(F);Object.keys(j).length>0&&(Y=E.update(Y,j),W[F.operation]&&(Y.operation=W[F.operation].name)),v.endpointCache.remove(Y)}}function h(w){if(w._originalConfig&&w._originalConfig.endpoint&&w._originalConfig.endpointDiscoveryEnabled===!0)throw E.error(new Error,{code:"ConfigurationException",message:"Custom endpoint is supplied; endpointDiscoveryEnabled must not be true."});var x=v.config[w.serviceIdentifier]||{};return!!(v.config.endpoint||x.endpoint||w._originalConfig&&w._originalConfig.endpoint)}function I(w){return["false","0"].indexOf(w)>=0}function f(w){var x=w.service||{};if(x.config.endpointDiscoveryEnabled!==void 0)return x.config.endpointDiscoveryEnabled;if(!E.isBrowser()){for(var P=0;P<l.length;P++){var F=l[P];if(Object.prototype.hasOwnProperty.call(g.env,F)){if(g.env[F]===""||g.env[F]===void 0)throw E.error(new Error,{code:"ConfigurationException",message:"environmental variable "+F+" cannot be set to nothing"});return!I(g.env[F])}}var W={};try{W=v.util.iniLoader?v.util.iniLoader.loadFrom({isConfig:!0,filename:g.env[v.util.sharedConfigFileEnv]}):{}}catch{}var V=W[g.env.AWS_PROFILE||v.util.defaultProfile]||{};if(Object.prototype.hasOwnProperty.call(V,"endpoint_discovery_enabled")){if(V.endpoint_discovery_enabled===void 0)throw E.error(new Error,{code:"ConfigurationException",message:"config file entry 'endpoint_discovery_enabled' cannot be set to nothing"});return!I(V.endpoint_discovery_enabled)}}}function T(w,x){var P=w.service||{};if(h(P)||w.isPresigned())return x();var F=P.api.operations||{},W=F[w.operation],V=W?W.endpointDiscoveryRequired:"NULL",j=f(w),Y=P.api.hasRequiredEndpointDiscovery;switch((j||Y)&&w.httpRequest.appendToUserAgent("endpoint-discovery"),V){case"OPTIONAL":(j||Y)&&(p(w),w.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",S)),x();break;case"REQUIRED":if(j===!1){w.response.error=E.error(new Error,{code:"ConfigurationException",message:"Endpoint Discovery is disabled but "+P.api.className+"."+w.operation+"() requires it. Please check your configurations."}),x();break}w.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",S),d(w,x);break;case"NULL":default:x();break}}D.exports={discoverEndpoint:T,requiredDiscoverEndpoint:d,optionalDiscoverEndpoint:p,marshallCustomIdentifiers:y,getCacheKey:u,invalidateCachedEndpoint:S}}).call(this)}).call(this,C("_process"))},{"./core":19,"./util":74,_process:91}],28:[function(C,D,_){var g=C("../event-stream/event-message-chunker").eventMessageChunker,v=C("./parse-event").parseEvent;function E(l,u,a){for(var y=g(l),p=[],s=0;s<y.length;s++)p.push(v(u,y[s],a));return p}D.exports={createEventStream:E}},{"../event-stream/event-message-chunker":29,"./parse-event":31}],29:[function(C,D,_){function g(v){for(var E=[],l=0;l<v.length;){var u=v.readInt32BE(l),a=v.slice(l,u+l);l+=u,E.push(a)}return E}D.exports={eventMessageChunker:g}},{}],30:[function(C,D,_){var g=C("../core").util,v=g.buffer.toBuffer;function E(u){if(u.length!==8)throw new Error("Int64 buffers must be exactly 8 bytes");g.Buffer.isBuffer(u)||(u=v(u)),this.bytes=u}E.fromNumber=function(u){if(u>9223372036854776e3||u<-9223372036854776e3)throw new Error(u+" is too large (or, if negative, too small) to represent as an Int64");for(var a=new Uint8Array(8),y=7,p=Math.abs(Math.round(u));y>-1&&p>0;y--,p/=256)a[y]=p;return u<0&&l(a),new E(a)},E.prototype.valueOf=function(){var u=this.bytes.slice(0),a=u[0]&128;return a&&l(u),parseInt(u.toString("hex"),16)*(a?-1:1)},E.prototype.toString=function(){return String(this.valueOf())};function l(u){for(var a=0;a<8;a++)u[a]^=255;for(var a=7;a>-1&&(u[a]++,u[a]===0);a--);}D.exports={Int64:E}},{"../core":19}],31:[function(C,D,_){var g=C("./parse-message").parseMessage;function v(l,u,a){var y=g(u),p=y.headers[":message-type"];if(p){if(p.value==="error")throw E(y);if(p.value!=="event")return}var s=y.headers[":event-type"],d=a.members[s.value];if(d){var c={},S=d.eventPayloadMemberName;if(S){var h=d.members[S];h.type==="binary"?c[S]=y.body:c[S]=l.parse(y.body.toString(),h)}for(var I=d.eventHeaderMemberNames,f=0;f<I.length;f++){var T=I[f];y.headers[T]&&(c[T]=d.members[T].toType(y.headers[T].value))}var w={};return w[s.value]=c,w}}function E(l){var u=l.headers[":error-code"],a=l.headers[":error-message"],y=new Error(a.value||a);return y.code=y.name=u.value||u,y}D.exports={parseEvent:v}},{"./parse-message":32}],32:[function(C,D,_){var g=C("./int64").Int64,v=C("./split-message").splitMessage,E="boolean",l="byte",u="short",a="integer",y="long",p="binary",s="string",d="timestamp",c="uuid";function S(I){for(var f={},T=0;T<I.length;){var w=I.readUInt8(T++),x=I.slice(T,T+w).toString();switch(T+=w,I.readUInt8(T++)){case 0:f[x]={type:E,value:!0};break;case 1:f[x]={type:E,value:!1};break;case 2:f[x]={type:l,value:I.readInt8(T++)};break;case 3:f[x]={type:u,value:I.readInt16BE(T)},T+=2;break;case 4:f[x]={type:a,value:I.readInt32BE(T)},T+=4;break;case 5:f[x]={type:y,value:new g(I.slice(T,T+8))},T+=8;break;case 6:var P=I.readUInt16BE(T);T+=2,f[x]={type:p,value:I.slice(T,T+P)},T+=P;break;case 7:var F=I.readUInt16BE(T);T+=2,f[x]={type:s,value:I.slice(T,T+F).toString()},T+=F;break;case 8:f[x]={type:d,value:new Date(new g(I.slice(T,T+8)).valueOf())},T+=8;break;case 9:var W=I.slice(T,T+16).toString("hex");T+=16,f[x]={type:c,value:W.substr(0,8)+"-"+W.substr(8,4)+"-"+W.substr(12,4)+"-"+W.substr(16,4)+"-"+W.substr(20)};break;default:throw new Error("Unrecognized header type tag")}}return f}function h(I){var f=v(I);return{headers:S(f.headers),body:f.body}}D.exports={parseMessage:h}},{"./int64":30,"./split-message":33}],33:[function(C,D,_){var g=C("../core").util,v=g.buffer.toBuffer,E=4,l=E*2,u=4,a=l+u*2;function y(p){if(g.Buffer.isBuffer(p)||(p=v(p)),p.length<a)throw new Error("Provided message too short to accommodate event stream message overhead");if(p.length!==p.readUInt32BE(0))throw new Error("Reported message length does not match received message length");var s=p.readUInt32BE(l);if(s!==g.crypto.crc32(p.slice(0,l)))throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum.");var d=p.readUInt32BE(p.length-u);if(d!==g.crypto.crc32(p.slice(0,p.length-u)))throw new Error("The message checksum did not match the expected value of "+d);var c=l+u,S=c+p.readUInt32BE(E);return{headers:p.slice(c,S),body:p.slice(S,p.length-u)}}D.exports={splitMessage:y}},{"../core":19}],34:[function(C,D,_){(function(g){(function(){var v=C("./core"),E=C("./sequential_executor"),l=C("./discover_endpoint").discoverEndpoint;v.EventListeners={Core:{}};function u(y){if(!y.service.api.operations)return"";var p=y.service.api.operations[y.operation];return p?p.authtype:""}function a(y){var p=y.service;return p.config.signatureVersion?p.config.signatureVersion:p.api.signatureVersion?p.api.signatureVersion:u(y)}v.EventListeners={Core:new E().addNamedListeners(function(y,p){p("VALIDATE_CREDENTIALS","validate",function(c,S){if(!c.service.api.signatureVersion&&!c.service.config.signatureVersion)return S();var h=a(c);if(h==="bearer"){c.service.config.getToken(function(I){I&&(c.response.error=v.util.error(I,{code:"TokenError"})),S()});return}c.service.config.getCredentials(function(I){I&&(c.response.error=v.util.error(I,{code:"CredentialsError",message:"Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1"})),S()})}),y("VALIDATE_REGION","validate",function(c){if(!c.service.isGlobalEndpoint){var S=new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);c.service.config.region?S.test(c.service.config.region)||(c.response.error=v.util.error(new Error,{code:"ConfigError",message:"Invalid region in config"})):c.response.error=v.util.error(new Error,{code:"ConfigError",message:"Missing region in config"})}}),y("BUILD_IDEMPOTENCY_TOKENS","validate",function(c){if(c.service.api.operations){var S=c.service.api.operations[c.operation];if(S){var h=S.idempotentMembers;if(h.length){for(var I=v.util.copy(c.params),f=0,T=h.length;f<T;f++)I[h[f]]||(I[h[f]]=v.util.uuid.v4());c.params=I}}}}),y("VALIDATE_PARAMETERS","validate",function(c){if(c.service.api.operations){var S=c.service.api.operations[c.operation].input,h=c.service.config.paramValidation;new v.ParamValidator(h).validate(S,c.params)}}),y("COMPUTE_CHECKSUM","afterBuild",function(c){if(c.service.api.operations){var S=c.service.api.operations[c.operation];if(S){var h=c.httpRequest.body,I=h&&(v.util.Buffer.isBuffer(h)||typeof h=="string"),f=c.httpRequest.headers;if(S.httpChecksumRequired&&c.service.config.computeChecksums&&I&&!f["Content-MD5"]){var T=v.util.crypto.md5(h,"base64");f["Content-MD5"]=T}}}}),p("COMPUTE_SHA256","afterBuild",function(c,S){if(c.haltHandlersOnError(),!!c.service.api.operations){var h=c.service.api.operations[c.operation],I=h?h.authtype:"";if(!c.service.api.signatureVersion&&!I&&!c.service.config.signatureVersion)return S();if(c.service.getSignerClass(c)===v.Signers.V4){var f=c.httpRequest.body||"";if(I.indexOf("unsigned-body")>=0)return c.httpRequest.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",S();v.util.computeSha256(f,function(T,w){T?S(T):(c.httpRequest.headers["X-Amz-Content-Sha256"]=w,S())})}else S()}}),y("SET_CONTENT_LENGTH","afterBuild",function(c){var S=u(c),h=v.util.getRequestPayloadShape(c);if(c.httpRequest.headers["Content-Length"]===void 0)try{var I=v.util.string.byteLength(c.httpRequest.body);c.httpRequest.headers["Content-Length"]=I}catch(f){if(h&&h.isStreaming){if(h.requiresLength)throw f;if(S.indexOf("unsigned-body")>=0){c.httpRequest.headers["Transfer-Encoding"]="chunked";return}else throw f}throw f}}),y("SET_HTTP_HOST","afterBuild",function(c){c.httpRequest.headers.Host=c.httpRequest.endpoint.host}),y("SET_TRACE_ID","afterBuild",function(c){var S="X-Amzn-Trace-Id";if(v.util.isNode()&&!Object.hasOwnProperty.call(c.httpRequest.headers,S)){var h="AWS_LAMBDA_FUNCTION_NAME",I="_X_AMZN_TRACE_ID",f=g.env[h],T=g.env[I];typeof f=="string"&&f.length>0&&typeof T=="string"&&T.length>0&&(c.httpRequest.headers[S]=T)}}),y("RESTART","restart",function(){var c=this.response.error;!c||!c.retryable||(this.httpRequest=new v.HttpRequest(this.service.endpoint,this.service.region),this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)});var s=!0;p("DISCOVER_ENDPOINT","sign",l,s),p("SIGN","sign",function(c,S){var h=c.service,I=a(c);if(!I||I.length===0)return S();I==="bearer"?h.config.getToken(function(f,T){if(f)return c.response.error=f,S();try{var w=h.getSignerClass(c),x=new w(c.httpRequest);x.addAuthorization(T)}catch(P){c.response.error=P}S()}):h.config.getCredentials(function(f,T){if(f)return c.response.error=f,S();try{var w=h.getSkewCorrectedDate(),x=h.getSignerClass(c),P=c.service.api.operations||{},F=P[c.operation],W=new x(c.httpRequest,h.getSigningName(c),{signatureCache:h.config.signatureCache,operation:F,signatureVersion:h.api.signatureVersion});W.setServiceClientId(h._clientId),delete c.httpRequest.headers.Authorization,delete c.httpRequest.headers.Date,delete c.httpRequest.headers["X-Amz-Date"],W.addAuthorization(T,w),c.signedAt=w}catch(V){c.response.error=V}S()})}),y("VALIDATE_RESPONSE","validateResponse",function(c){this.service.successfulResponse(c,this)?(c.data={},c.error=null):(c.data=null,c.error=v.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))}),y("ERROR","error",function(c,S){var h=S.request.service.api.awsQueryCompatible;if(h){var I=S.httpResponse.headers,f=I?I["x-amzn-query-error"]:void 0;f&&f.includes(";")&&(S.error.code=f.split(";")[0])}},!0),p("SEND","send",function(c,S){c.httpResponse._abortCallback=S,c.error=null,c.data=null;function h(x){c.httpResponse.stream=x;var P=c.request.httpRequest.stream,F=c.request.service,W=F.api,V=c.request.operation,j=W.operations[V]||{};x.on("headers",function($,Se,X){if(c.request.emit("httpHeaders",[$,Se,c,X]),!c.httpResponse.streaming)if(v.HttpClient.streamsApiVersion===2){if(j.hasEventOutput&&F.successfulResponse(c)){c.request.emit("httpDone"),S();return}x.on("readable",function(){var Te=x.read();Te!==null&&c.request.emit("httpData",[Te,c])})}else x.on("data",function(Te){c.request.emit("httpData",[Te,c])})}),x.on("end",function(){if(!P||!P.didCallback){if(v.HttpClient.streamsApiVersion===2&&j.hasEventOutput&&F.successfulResponse(c))return;c.request.emit("httpDone"),S()}})}function I(x){x.on("sendProgress",function(F){c.request.emit("httpUploadProgress",[F,c])}),x.on("receiveProgress",function(F){c.request.emit("httpDownloadProgress",[F,c])})}function f(x){if(x.code!=="RequestAbortedError"){var P=x.code==="TimeoutError"?x.code:"NetworkingError";x=v.util.error(x,{code:P,region:c.request.httpRequest.region,hostname:c.request.httpRequest.endpoint.hostname,retryable:!0})}c.error=x,c.request.emit("httpError",[c.error,c],function(){S()})}function T(){var x=v.HttpClient.getInstance(),P=c.request.service.config.httpOptions||{};try{var F=x.handleRequest(c.request.httpRequest,P,h,f);I(F)}catch(W){f(W)}}var w=(c.request.service.getSkewCorrectedDate()-this.signedAt)/1e3;w>=600?this.emit("sign",[this],function(x){x?S(x):T()}):T()}),y("HTTP_HEADERS","httpHeaders",function(c,S,h,I){h.httpResponse.statusCode=c,h.httpResponse.statusMessage=I,h.httpResponse.headers=S,h.httpResponse.body=v.util.buffer.toBuffer(""),h.httpResponse.buffers=[],h.httpResponse.numBytes=0;var f=S.date||S.Date,T=h.request.service;if(f){var w=Date.parse(f);T.config.correctClockSkew&&T.isClockSkewed(w)&&T.applyClockOffset(w)}}),y("HTTP_DATA","httpData",function(c,S){if(c){if(v.util.isNode()){S.httpResponse.numBytes+=c.length;var h=S.httpResponse.headers["content-length"],I={loaded:S.httpResponse.numBytes,total:h};S.request.emit("httpDownloadProgress",[I,S])}S.httpResponse.buffers.push(v.util.buffer.toBuffer(c))}}),y("HTTP_DONE","httpDone",function(c){if(c.httpResponse.buffers&&c.httpResponse.buffers.length>0){var S=v.util.buffer.concat(c.httpResponse.buffers);c.httpResponse.body=S}delete c.httpResponse.numBytes,delete c.httpResponse.buffers}),y("FINALIZE_ERROR","retry",function(c){c.httpResponse.statusCode&&(c.error.statusCode=c.httpResponse.statusCode,c.error.retryable===void 0&&(c.error.retryable=this.service.retryableError(c.error,this)))}),y("INVALIDATE_CREDENTIALS","retry",function(c){if(c.error)switch(c.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":c.error.retryable=!0,c.request.service.config.credentials.expired=!0}}),y("EXPIRED_SIGNATURE","retry",function(c){var S=c.error;S&&typeof S.code=="string"&&typeof S.message=="string"&&S.code.match(/Signature/)&&S.message.match(/expired/)&&(c.error.retryable=!0)}),y("CLOCK_SKEWED","retry",function(c){c.error&&this.service.clockSkewError(c.error)&&this.service.config.correctClockSkew&&(c.error.retryable=!0)}),y("REDIRECT","retry",function(c){c.error&&c.error.statusCode>=300&&c.error.statusCode<400&&c.httpResponse.headers.location&&(this.httpRequest.endpoint=new v.Endpoint(c.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,c.error.redirect=!0,c.error.retryable=!0)}),y("RETRY_CHECK","retry",function(c){c.error&&(c.error.redirect&&c.redirectCount<c.maxRedirects?c.error.retryDelay=0:c.retryCount<c.maxRetries&&(c.error.retryDelay=this.service.retryDelays(c.retryCount,c.error)||0))}),p("RESET_RETRY_STATE","afterRetry",function(c,S){var h,I=!1;c.error&&(h=c.error.retryDelay||0,c.error.retryable&&c.retryCount<c.maxRetries?(c.retryCount++,I=!0):c.error.redirect&&c.redirectCount<c.maxRedirects&&(c.redirectCount++,I=!0)),I&&h>=0?(c.error=null,setTimeout(S,h)):S()})}),CorePost:new E().addNamedListeners(function(y){y("EXTRACT_REQUEST_ID","extractData",v.util.extractRequestId),y("EXTRACT_REQUEST_ID","extractError",v.util.extractRequestId),y("ENOTFOUND_ERROR","httpError",function(s){function d(S){return S.errno==="ENOTFOUND"||typeof S.errno=="number"&&typeof v.util.getSystemErrorName=="function"&&["EAI_NONAME","EAI_NODATA"].indexOf(v.util.getSystemErrorName(S.errno)>=0)}if(s.code==="NetworkingError"&&d(s)){var c="Inaccessible host: `"+s.hostname+"' at port `"+s.port+"'. This service may not be available in the `"+s.region+"' region.";this.response.error=v.util.error(new Error(c),{code:"UnknownEndpoint",region:s.region,hostname:s.hostname,retryable:!0,originalError:s})}})}),Logger:new E().addNamedListeners(function(y){y("LOG_REQUEST","complete",function(s){var d=s.request,c=d.service.config.logger;if(!c)return;function S(f,T){if(!T)return T;if(f.isSensitive)return"***SensitiveInformation***";switch(f.type){case"structure":var w={};return v.util.each(T,function(F,W){Object.prototype.hasOwnProperty.call(f.members,F)?w[F]=S(f.members[F],W):w[F]=W}),w;case"list":var x=[];return v.util.arrayEach(T,function(F,W){x.push(S(f.member,F))}),x;case"map":var P={};return v.util.each(T,function(F,W){P[F]=S(f.value,W)}),P;default:return T}}function h(){var f=s.request.service.getSkewCorrectedDate().getTime(),T=(f-d.startTime.getTime())/1e3,w=!!c.isTTY,x=s.httpResponse.statusCode,P=d.params;if(d.service.api.operations&&d.service.api.operations[d.operation]&&d.service.api.operations[d.operation].input){var F=d.service.api.operations[d.operation].input;P=S(F,d.params)}var W=C("util").inspect(P,!0,null),V="";return w&&(V+="\x1B[33m"),V+="[AWS "+d.service.serviceIdentifier+" "+x,V+=" "+T.toString()+"s "+s.retryCount+" retries]",w&&(V+="\x1B[0;1m"),V+=" "+v.util.string.lowerFirst(d.operation),V+="("+W+")",w&&(V+="\x1B[0m"),V}var I=h();typeof c.log=="function"?c.log(I):typeof c.write=="function"&&c.write(I+`
`)})}),Json:new E().addNamedListeners(function(y){var p=C("./protocol/json");y("BUILD","build",p.buildRequest),y("EXTRACT_DATA","extractData",p.extractData),y("EXTRACT_ERROR","extractError",p.extractError)}),Rest:new E().addNamedListeners(function(y){var p=C("./protocol/rest");y("BUILD","build",p.buildRequest),y("EXTRACT_DATA","extractData",p.extractData),y("EXTRACT_ERROR","extractError",p.extractError)}),RestJson:new E().addNamedListeners(function(y){var p=C("./protocol/rest_json");y("BUILD","build",p.buildRequest),y("EXTRACT_DATA","extractData",p.extractData),y("EXTRACT_ERROR","extractError",p.extractError),y("UNSET_CONTENT_LENGTH","afterBuild",p.unsetContentLength)}),RestXml:new E().addNamedListeners(function(y){var p=C("./protocol/rest_xml");y("BUILD","build",p.buildRequest),y("EXTRACT_DATA","extractData",p.extractData),y("EXTRACT_ERROR","extractError",p.extractError)}),Query:new E().addNamedListeners(function(y){var p=C("./protocol/query");y("BUILD","build",p.buildRequest),y("EXTRACT_DATA","extractData",p.extractData),y("EXTRACT_ERROR","extractError",p.extractError)})}}).call(this)}).call(this,C("_process"))},{"./core":19,"./discover_endpoint":27,"./protocol/json":48,"./protocol/query":49,"./protocol/rest":50,"./protocol/rest_json":51,"./protocol/rest_xml":52,"./sequential_executor":61,_process:91,util:85}],35:[function(C,D,_){var g=C("./core"),v=g.util.inherit;g.Endpoint=v({constructor:function(l,u){if(g.util.hideProperties(this,["slashes","auth","hash","search","query"]),typeof l>"u"||l===null)throw new Error("Invalid endpoint: "+l);if(typeof l!="string")return g.util.copy(l);if(!l.match(/^http/)){var a=u&&u.sslEnabled!==void 0?u.sslEnabled:g.config.sslEnabled;l=(a?"https":"http")+"://"+l}g.util.update(this,g.util.urlParse(l)),this.port?this.port=parseInt(this.port,10):this.port=this.protocol==="https:"?443:80}}),g.HttpRequest=v({constructor:function(l,u){l=new g.Endpoint(l),this.method="POST",this.path=l.path||"/",this.headers={},this.body="",this.endpoint=l,this.region=u,this._userAgent="",this.setUserAgent()},setUserAgent:function(){this._userAgent=this.headers[this.getUserAgentHeaderName()]=g.util.userAgent()},getUserAgentHeaderName:function(){var l=g.util.isBrowser()?"X-Amz-":"";return l+"User-Agent"},appendToUserAgent:function(l){typeof l=="string"&&l&&(this._userAgent+=" "+l),this.headers[this.getUserAgentHeaderName()]=this._userAgent},getUserAgent:function(){return this._userAgent},pathname:function(){return this.path.split("?",1)[0]},search:function(){var l=this.path.split("?",2)[1];return l?(l=g.util.queryStringParse(l),g.util.queryParamsToString(l)):""},updateEndpoint:function(l){var u=new g.Endpoint(l);this.endpoint=u,this.path=u.path||"/",this.headers.Host&&(this.headers.Host=u.host)}}),g.HttpResponse=v({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),g.HttpClient=v({}),g.HttpClient.getInstance=function(){return this.singleton===void 0&&(this.singleton=new this),this.singleton}},{"./core":19}],36:[function(C,D,_){var g=C("../core"),v=C("events").EventEmitter;C("../http"),g.XHRClient=g.util.inherit({handleRequest:function(l,u,a,y){var p=this,s=l.endpoint,d=new v,c=s.protocol+"//"+s.hostname;s.port!==80&&s.port!==443&&(c+=":"+s.port),c+=l.path;var S=new XMLHttpRequest,h=!1;l.stream=S,S.addEventListener("readystatechange",function(){try{if(S.status===0)return}catch{return}this.readyState>=this.HEADERS_RECEIVED&&!h&&(d.statusCode=S.status,d.headers=p.parseHeaders(S.getAllResponseHeaders()),d.emit("headers",d.statusCode,d.headers,S.statusText),h=!0),this.readyState===this.DONE&&p.finishRequest(S,d)},!1),S.upload.addEventListener("progress",function(I){d.emit("sendProgress",I)}),S.addEventListener("progress",function(I){d.emit("receiveProgress",I)},!1),S.addEventListener("timeout",function(){y(g.util.error(new Error("Timeout"),{code:"TimeoutError"}))},!1),S.addEventListener("error",function(){y(g.util.error(new Error("Network Failure"),{code:"NetworkingError"}))},!1),S.addEventListener("abort",function(){y(g.util.error(new Error("Request aborted"),{code:"RequestAbortedError"}))},!1),a(d),S.open(l.method,c,u.xhrAsync!==!1),g.util.each(l.headers,function(I,f){I!=="Content-Length"&&I!=="User-Agent"&&I!=="Host"&&S.setRequestHeader(I,f)}),u.timeout&&u.xhrAsync!==!1&&(S.timeout=u.timeout),u.xhrWithCredentials&&(S.withCredentials=!0);try{S.responseType="arraybuffer"}catch{}try{l.body?S.send(l.body):S.send()}catch(I){if(l.body&&typeof l.body.buffer=="object")S.send(l.body.buffer);else throw I}return d},parseHeaders:function(l){var u={};return g.util.arrayEach(l.split(/\r?\n/),function(a){var y=a.split(":",1)[0],p=a.substring(y.length+2);y.length>0&&(u[y.toLowerCase()]=p)}),u},finishRequest:function(l,u){var a;if(l.responseType==="arraybuffer"&&l.response){var y=l.response;a=new g.util.Buffer(y.byteLength);for(var p=new Uint8Array(y),s=0;s<a.length;++s)a[s]=p[s]}try{!a&&typeof l.responseText=="string"&&(a=new g.util.Buffer(l.responseText))}catch{}a&&u.emit("data",a),u.emit("end")}}),g.HttpClient.prototype=g.XHRClient.prototype,g.HttpClient.streamsApiVersion=1},{"../core":19,"../http":35,events:87}],37:[function(C,D,_){var g=C("../util");function v(){}v.prototype.build=function(p,s){return JSON.stringify(E(p,s))};function E(p,s){if(!(!s||p===void 0||p===null))switch(s.type){case"structure":return l(p,s);case"map":return a(p,s);case"list":return u(p,s);default:return y(p,s)}}function l(p,s){if(s.isDocument)return p;var d={};return g.each(p,function(c,S){var h=s.members[c];if(h){if(h.location!=="body")return;var I=h.isLocationName?h.name:c,f=E(S,h);f!==void 0&&(d[I]=f)}}),d}function u(p,s){var d=[];return g.arrayEach(p,function(c){var S=E(c,s.member);S!==void 0&&d.push(S)}),d}function a(p,s){var d={};return g.each(p,function(c,S){var h=E(S,s.value);h!==void 0&&(d[c]=h)}),d}function y(p,s){return s.toWireFormat(p)}D.exports=v},{"../util":74}],38:[function(C,D,_){var g=C("../util");function v(){}v.prototype.parse=function(p,s){return E(JSON.parse(p),s)};function E(p,s){if(!(!s||p===void 0))switch(s.type){case"structure":return l(p,s);case"map":return a(p,s);case"list":return u(p,s);default:return y(p,s)}}function l(p,s){if(p!=null){if(s.isDocument)return p;var d={},c=s.members;return g.each(c,function(S,h){var I=h.isLocationName?h.name:S;if(Object.prototype.hasOwnProperty.call(p,I)){var f=p[I],T=E(f,h);T!==void 0&&(d[S]=T)}}),d}}function u(p,s){if(p!=null){var d=[];return g.arrayEach(p,function(c){var S=E(c,s.member);S===void 0?d.push(null):d.push(S)}),d}}function a(p,s){if(p!=null){var d={};return g.each(p,function(c,S){var h=E(S,s.value);h===void 0?d[c]=null:d[c]=h}),d}}function y(p,s){return s.toType(p)}D.exports=v},{"../util":74}],39:[function(C,D,_){(function(g){(function(){var v=[`We are formalizing our plans to enter AWS SDK for JavaScript (v2) into maintenance mode in 2023.
`,"Please migrate your code to use AWS SDK for JavaScript (v3).","For more information, check the migration guide at https://a.co/7PzMCcy"].join(`
`);D.exports={suppress:!1};function E(){typeof g>"u"||typeof g.env=="object"&&typeof g.env.AWS_EXECUTION_ENV<"u"&&g.env.AWS_EXECUTION_ENV.indexOf("AWS_Lambda_")===0||typeof g.env=="object"&&typeof g.env.AWS_SDK_JS_SUPPRESS_MAINTENANCE_MODE_MESSAGE<"u"||typeof g.emitWarning=="function"&&g.emitWarning(v,{type:"NOTE"})}setTimeout(function(){D.exports.suppress||E()},0)}).call(this)}).call(this,C("_process"))},{_process:91}],40:[function(C,D,_){var g=C("./collection"),v=C("./operation"),E=C("./shape"),l=C("./paginator"),u=C("./resource_waiter"),a=C("../../apis/metadata.json"),y=C("../util"),p=y.property,s=y.memoizedProperty;function d(c,S){var h=this;c=c||{},S=S||{},S.api=this,c.metadata=c.metadata||{};var I=S.serviceIdentifier;delete S.serviceIdentifier,p(this,"isApi",!0,!1),p(this,"apiVersion",c.metadata.apiVersion),p(this,"endpointPrefix",c.metadata.endpointPrefix),p(this,"signingName",c.metadata.signingName),p(this,"globalEndpoint",c.metadata.globalEndpoint),p(this,"signatureVersion",c.metadata.signatureVersion),p(this,"jsonVersion",c.metadata.jsonVersion),p(this,"targetPrefix",c.metadata.targetPrefix),p(this,"protocol",c.metadata.protocol),p(this,"timestampFormat",c.metadata.timestampFormat),p(this,"xmlNamespaceUri",c.metadata.xmlNamespace),p(this,"abbreviation",c.metadata.serviceAbbreviation),p(this,"fullName",c.metadata.serviceFullName),p(this,"serviceId",c.metadata.serviceId),I&&a[I]&&p(this,"xmlNoDefaultLists",a[I].xmlNoDefaultLists,!1),s(this,"className",function(){var T=c.metadata.serviceAbbreviation||c.metadata.serviceFullName;return T?(T=T.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""),T==="ElasticLoadBalancing"&&(T="ELB"),T):null});function f(T,w){w.endpointoperation===!0&&p(h,"endpointOperation",y.string.lowerFirst(T)),w.endpointdiscovery&&!h.hasRequiredEndpointDiscovery&&p(h,"hasRequiredEndpointDiscovery",w.endpointdiscovery.required===!0)}p(this,"operations",new g(c.operations,S,function(T,w){return new v(T,w,S)},y.string.lowerFirst,f)),p(this,"shapes",new g(c.shapes,S,function(T,w){return E.create(w,S)})),p(this,"paginators",new g(c.paginators,S,function(T,w){return new l(T,w,S)})),p(this,"waiters",new g(c.waiters,S,function(T,w){return new u(T,w,S)},y.string.lowerFirst)),S.documentation&&(p(this,"documentation",c.documentation),p(this,"documentationUrl",c.documentationUrl)),p(this,"awsQueryCompatible",c.metadata.awsQueryCompatible)}D.exports=d},{"../../apis/metadata.json":4,"../util":74,"./collection":41,"./operation":42,"./paginator":43,"./resource_waiter":44,"./shape":45}],41:[function(C,D,_){var g=C("../util").memoizedProperty;function v(l,u,a,y){g(this,y(l),function(){return a(l,u)})}function E(l,u,a,y,p){y=y||String;var s=this;for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(v.call(s,d,l[d],a,y),p&&p(d,l[d]))}D.exports=E},{"../util":74}],42:[function(C,D,_){var g=C("./shape"),v=C("../util"),E=v.property,l=v.memoizedProperty;function u(y,p,s){var d=this;s=s||{},E(this,"name",p.name||y),E(this,"api",s.api,!1),p.http=p.http||{},E(this,"endpoint",p.endpoint),E(this,"httpMethod",p.http.method||"POST"),E(this,"httpPath",p.http.requestUri||"/"),E(this,"authtype",p.authtype||""),E(this,"endpointDiscoveryRequired",p.endpointdiscovery?p.endpointdiscovery.required?"REQUIRED":"OPTIONAL":"NULL");var c=p.httpChecksumRequired||p.httpChecksum&&p.httpChecksum.requestChecksumRequired;E(this,"httpChecksumRequired",c,!1),l(this,"input",function(){return p.input?g.create(p.input,s):new g.create({type:"structure"},s)}),l(this,"output",function(){return p.output?g.create(p.output,s):new g.create({type:"structure"},s)}),l(this,"errors",function(){var S=[];if(!p.errors)return null;for(var h=0;h<p.errors.length;h++)S.push(g.create(p.errors[h],s));return S}),l(this,"paginator",function(){return s.api.paginators[y]}),s.documentation&&(E(this,"documentation",p.documentation),E(this,"documentationUrl",p.documentationUrl)),l(this,"idempotentMembers",function(){var S=[],h=d.input,I=h.members;if(!h.members)return S;for(var f in I)I.hasOwnProperty(f)&&I[f].isIdempotent===!0&&S.push(f);return S}),l(this,"hasEventOutput",function(){var S=d.output;return a(S)})}function a(y){var p=y.members,s=y.payload;if(!y.members)return!1;if(s){var d=p[s];return d.isEventStream}for(var c in p)if(!p.hasOwnProperty(c)&&p[c].isEventStream===!0)return!0;return!1}D.exports=u},{"../util":74,"./shape":45}],43:[function(C,D,_){var g=C("../util").property;function v(E,l){g(this,"inputToken",l.input_token),g(this,"limitKey",l.limit_key),g(this,"moreResults",l.more_results),g(this,"outputToken",l.output_token),g(this,"resultKey",l.result_key)}D.exports=v},{"../util":74}],44:[function(C,D,_){var g=C("../util"),v=g.property;function E(l,u,a){a=a||{},v(this,"name",l),v(this,"api",a.api,!1),u.operation&&v(this,"operation",g.string.lowerFirst(u.operation));var y=this,p=["type","description","delay","maxAttempts","acceptors"];p.forEach(function(s){var d=u[s];d&&v(y,s,d)})}D.exports=E},{"../util":74}],45:[function(C,D,_){var g=C("./collection"),v=C("../util");function E(w,x,P){P!=null&&v.property.apply(this,arguments)}function l(w,x){w.constructor.prototype[x]||v.memoizedProperty.apply(this,arguments)}function u(w,x,P){x=x||{},E(this,"shape",w.shape),E(this,"api",x.api,!1),E(this,"type",w.type),E(this,"enum",w.enum),E(this,"min",w.min),E(this,"max",w.max),E(this,"pattern",w.pattern),E(this,"location",w.location||this.location||"body"),E(this,"name",this.name||w.xmlName||w.queryName||w.locationName||P),E(this,"isStreaming",w.streaming||this.isStreaming||!1),E(this,"requiresLength",w.requiresLength,!1),E(this,"isComposite",w.isComposite||!1),E(this,"isShape",!0,!1),E(this,"isQueryName",!!w.queryName,!1),E(this,"isLocationName",!!w.locationName,!1),E(this,"isIdempotent",w.idempotencyToken===!0),E(this,"isJsonValue",w.jsonvalue===!0),E(this,"isSensitive",w.sensitive===!0||w.prototype&&w.prototype.sensitive===!0),E(this,"isEventStream",!!w.eventstream,!1),E(this,"isEvent",!!w.event,!1),E(this,"isEventPayload",!!w.eventpayload,!1),E(this,"isEventHeader",!!w.eventheader,!1),E(this,"isTimestampFormatSet",!!w.timestampFormat||w.prototype&&w.prototype.isTimestampFormatSet===!0,!1),E(this,"endpointDiscoveryId",!!w.endpointdiscoveryid,!1),E(this,"hostLabel",!!w.hostLabel,!1),x.documentation&&(E(this,"documentation",w.documentation),E(this,"documentationUrl",w.documentationUrl)),w.xmlAttribute&&E(this,"isXmlAttribute",w.xmlAttribute||!1),E(this,"defaultValue",null),this.toWireFormat=function(F){return F??""},this.toType=function(F){return F}}u.normalizedTypes={character:"string",double:"float",long:"integer",short:"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},u.types={structure:y,list:p,map:s,boolean:T,timestamp:d,float:S,integer:h,string:c,base64:f,binary:I},u.resolve=function(x,P){if(x.shape){var F=P.api.shapes[x.shape];if(!F)throw new Error("Cannot find shape reference: "+x.shape);return F}else return null},u.create=function(x,P,F){if(x.isShape)return x;var W=u.resolve(x,P);if(W){var V=Object.keys(x);P.documentation||(V=V.filter(function($){return!$.match(/documentation/)}));var j=function(){W.constructor.call(this,x,P,F)};return j.prototype=W,new j}else{x.type||(x.members?x.type="structure":x.member?x.type="list":x.key?x.type="map":x.type="string");var Y=x.type;if(u.normalizedTypes[x.type]&&(x.type=u.normalizedTypes[x.type]),u.types[x.type])return new u.types[x.type](x,P,F);throw new Error("Unrecognized shape type: "+Y)}};function a(w){u.apply(this,arguments),E(this,"isComposite",!0),w.flattened&&E(this,"flattened",w.flattened||!1)}function y(w,x){var P=this,F=null,W=!this.isShape;a.apply(this,arguments),W&&(E(this,"defaultValue",function(){return{}}),E(this,"members",{}),E(this,"memberNames",[]),E(this,"required",[]),E(this,"isRequired",function(){return!1}),E(this,"isDocument",!!w.document)),w.members&&(E(this,"members",new g(w.members,x,function(V,j){return u.create(j,x,V)})),l(this,"memberNames",function(){return w.xmlOrder||Object.keys(w.members)}),w.event&&(l(this,"eventPayloadMemberName",function(){for(var V=P.members,j=P.memberNames,Y=0,$=j.length;Y<$;Y++)if(V[j[Y]].isEventPayload)return j[Y]}),l(this,"eventHeaderMemberNames",function(){for(var V=P.members,j=P.memberNames,Y=[],$=0,Se=j.length;$<Se;$++)V[j[$]].isEventHeader&&Y.push(j[$]);return Y}))),w.required&&(E(this,"required",w.required),E(this,"isRequired",function(V){if(!F){F={};for(var j=0;j<w.required.length;j++)F[w.required[j]]=!0}return F[V]},!1,!0)),E(this,"resultWrapper",w.resultWrapper||null),w.payload&&E(this,"payload",w.payload),typeof w.xmlNamespace=="string"?E(this,"xmlNamespaceUri",w.xmlNamespace):typeof w.xmlNamespace=="object"&&(E(this,"xmlNamespacePrefix",w.xmlNamespace.prefix),E(this,"xmlNamespaceUri",w.xmlNamespace.uri))}function p(w,x){var P=this,F=!this.isShape;if(a.apply(this,arguments),F&&E(this,"defaultValue",function(){return[]}),w.member&&l(this,"member",function(){return u.create(w.member,x)}),this.flattened){var W=this.name;l(this,"name",function(){return P.member.name||W})}}function s(w,x){var P=!this.isShape;a.apply(this,arguments),P&&(E(this,"defaultValue",function(){return{}}),E(this,"key",u.create({type:"string"},x)),E(this,"value",u.create({type:"string"},x))),w.key&&l(this,"key",function(){return u.create(w.key,x)}),w.value&&l(this,"value",function(){return u.create(w.value,x)})}function d(w){var x=this;if(u.apply(this,arguments),w.timestampFormat)E(this,"timestampFormat",w.timestampFormat);else if(x.isTimestampFormatSet&&this.timestampFormat)E(this,"timestampFormat",this.timestampFormat);else if(this.location==="header")E(this,"timestampFormat","rfc822");else if(this.location==="querystring")E(this,"timestampFormat","iso8601");else if(this.api)switch(this.api.protocol){case"json":case"rest-json":E(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":E(this,"timestampFormat","iso8601");break}this.toType=function(P){return P==null?null:typeof P.toUTCString=="function"?P:typeof P=="string"||typeof P=="number"?v.date.parseTimestamp(P):null},this.toWireFormat=function(P){return v.date.format(P,x.timestampFormat)}}function c(){u.apply(this,arguments);var w=["rest-xml","query","ec2"];this.toType=function(x){return x=this.api&&w.indexOf(this.api.protocol)>-1?x||"":x,this.isJsonValue?JSON.parse(x):x&&typeof x.toString=="function"?x.toString():x},this.toWireFormat=function(x){return this.isJsonValue?JSON.stringify(x):x}}function S(){u.apply(this,arguments),this.toType=function(w){return w==null?null:parseFloat(w)},this.toWireFormat=this.toType}function h(){u.apply(this,arguments),this.toType=function(w){return w==null?null:parseInt(w,10)},this.toWireFormat=this.toType}function I(){u.apply(this,arguments),this.toType=function(w){var x=v.base64.decode(w);if(this.isSensitive&&v.isNode()&&typeof v.Buffer.alloc=="function"){var P=v.Buffer.alloc(x.length,x);x.fill(0),x=P}return x},this.toWireFormat=v.base64.encode}function f(){I.apply(this,arguments)}function T(){u.apply(this,arguments),this.toType=function(w){return typeof w=="boolean"?w:w==null?null:w==="true"}}u.shapes={StructureShape:y,ListShape:p,MapShape:s,StringShape:c,BooleanShape:T,Base64Shape:f},D.exports=u},{"../util":74,"./collection":41}],46:[function(C,D,_){var g=C("./core");g.ParamValidator=g.util.inherit({constructor:function(E){(E===!0||E===void 0)&&(E={min:!0}),this.validation=E},validate:function(E,l,u){if(this.errors=[],this.validateMember(E,l||{},u||"params"),this.errors.length>1){var a=this.errors.join(`
* `);throw a="There were "+this.errors.length+` validation errors:
* `+a,g.util.error(new Error(a),{code:"MultipleValidationErrors",errors:this.errors})}else{if(this.errors.length===1)throw this.errors[0];return!0}},fail:function(E,l){this.errors.push(g.util.error(new Error(l),{code:E}))},validateStructure:function(E,l,u){if(E.isDocument)return!0;this.validateType(l,u,["object"],"structure");for(var a,y=0;E.required&&y<E.required.length;y++){a=E.required[y];var p=l[a];p==null&&this.fail("MissingRequiredParameter","Missing required key '"+a+"' in "+u)}for(a in l)if(Object.prototype.hasOwnProperty.call(l,a)){var s=l[a],d=E.members[a];if(d!==void 0){var c=[u,a].join(".");this.validateMember(d,s,c)}else s!=null&&this.fail("UnexpectedParameter","Unexpected key '"+a+"' found in "+u)}return!0},validateMember:function(E,l,u){switch(E.type){case"structure":return this.validateStructure(E,l,u);case"list":return this.validateList(E,l,u);case"map":return this.validateMap(E,l,u);default:return this.validateScalar(E,l,u)}},validateList:function(E,l,u){if(this.validateType(l,u,[Array])){this.validateRange(E,l.length,u,"list member count");for(var a=0;a<l.length;a++)this.validateMember(E.member,l[a],u+"["+a+"]")}},validateMap:function(E,l,u){if(this.validateType(l,u,["object"],"map")){var a=0;for(var y in l)Object.prototype.hasOwnProperty.call(l,y)&&(this.validateMember(E.key,y,u+"[key='"+y+"']"),this.validateMember(E.value,l[y],u+"['"+y+"']"),a++);this.validateRange(E,a,u,"map member count")}},validateScalar:function(E,l,u){switch(E.type){case null:case void 0:case"string":return this.validateString(E,l,u);case"base64":case"binary":return this.validatePayload(l,u);case"integer":case"float":return this.validateNumber(E,l,u);case"boolean":return this.validateType(l,u,["boolean"]);case"timestamp":return this.validateType(l,u,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+E.type+" for "+u)}},validateString:function(E,l,u){var a=["string"];E.isJsonValue&&(a=a.concat(["number","object","boolean"])),l!==null&&this.validateType(l,u,a)&&(this.validateEnum(E,l,u),this.validateRange(E,l.length,u,"string length"),this.validatePattern(E,l,u),this.validateUri(E,l,u))},validateUri:function(E,l,u){E.location==="uri"&&l.length===0&&this.fail("UriParameterError",'Expected uri parameter to have length >= 1, but found "'+l+'" for '+u)},validatePattern:function(E,l,u){this.validation.pattern&&E.pattern!==void 0&&(new RegExp(E.pattern).test(l)||this.fail("PatternMatchError",'Provided value "'+l+'" does not match regex pattern /'+E.pattern+"/ for "+u))},validateRange:function(E,l,u,a){this.validation.min&&E.min!==void 0&&l<E.min&&this.fail("MinRangeError","Expected "+a+" >= "+E.min+", but found "+l+" for "+u),this.validation.max&&E.max!==void 0&&l>E.max&&this.fail("MaxRangeError","Expected "+a+" <= "+E.max+", but found "+l+" for "+u)},validateEnum:function(E,l,u){this.validation.enum&&E.enum!==void 0&&E.enum.indexOf(l)===-1&&this.fail("EnumError","Found string value of "+l+", but expected "+E.enum.join("|")+" for "+u)},validateType:function(E,l,u,a){if(E==null)return!1;for(var y=!1,p=0;p<u.length;p++){if(typeof u[p]=="string"){if(typeof E===u[p])return!0}else if(u[p]instanceof RegExp){if((E||"").toString().match(u[p]))return!0}else{if(E instanceof u[p]||g.util.isType(E,u[p]))return!0;!a&&!y&&(u=u.slice()),u[p]=g.util.typeName(u[p])}y=!0}var s=a;s||(s=u.join(", ").replace(/,([^,]+)$/,", or$1"));var d=s.match(/^[aeiou]/i)?"n":"";return this.fail("InvalidParameterType","Expected "+l+" to be a"+d+" "+s),!1},validateNumber:function(E,l,u){if(l!=null){if(typeof l=="string"){var a=parseFloat(l);a.toString()===l&&(l=a)}this.validateType(l,u,["number"])&&this.validateRange(E,l,u,"numeric value")}},validatePayload:function(E,l){if(E!=null&&typeof E!="string"&&!(E&&typeof E.byteLength=="number")){if(g.util.isNode()){var u=g.util.stream.Stream;if(g.util.Buffer.isBuffer(E)||E instanceof u)return}else if(typeof Blob!==void 0&&E instanceof Blob)return;var a=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(E){for(var y=0;y<a.length;y++)if(g.util.isType(E,a[y])||g.util.typeName(E.constructor)===a[y])return}this.fail("InvalidParameterType","Expected "+l+" to be a string, Buffer, Stream, Blob, or typed array object")}}})},{"./core":19}],47:[function(C,D,_){var g=C("../util"),v=C("../core");function E(p){var s=p.service.config.hostPrefixEnabled;if(!s)return p;var d=p.service.api.operations[p.operation];if(l(p))return p;if(d.endpoint&&d.endpoint.hostPrefix){var c=d.endpoint.hostPrefix,S=u(c,p.params,d.input);a(p.httpRequest.endpoint,S),y(p.httpRequest.endpoint.hostname)}return p}function l(p){var s=p.service.api,d=s.operations[p.operation],c=s.endpointOperation&&s.endpointOperation===g.string.lowerFirst(d.name);return d.endpointDiscoveryRequired!=="NULL"||c===!0}function u(p,s,d){return g.each(d.members,function(c,S){if(S.hostLabel===!0){if(typeof s[c]!="string"||s[c]==="")throw g.error(new Error,{message:"Parameter "+c+" should be a non-empty string.",code:"InvalidParameter"});var h=new RegExp("\\{"+c+"\\}","g");p=p.replace(h,s[c])}}),p}function a(p,s){p.host&&(p.host=s+p.host),p.hostname&&(p.hostname=s+p.hostname)}function y(p){var s=p.split("."),d=/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/;g.arrayEach(s,function(c){if(!c.length||c.length<1||c.length>63)throw g.error(new Error,{code:"ValidationError",message:"Hostname label length should be between 1 to 63 characters, inclusive."});if(!d.test(c))throw v.util.error(new Error,{code:"ValidationError",message:c+" is not hostname compatible."})})}D.exports={populateHostPrefix:E}},{"../core":19,"../util":74}],48:[function(C,D,_){var g=C("../util"),v=C("../json/builder"),E=C("../json/parser"),l=C("./helpers").populateHostPrefix;function u(p){var s=p.httpRequest,d=p.service.api,c=d.targetPrefix+"."+d.operations[p.operation].name,S=d.jsonVersion||"1.0",h=d.operations[p.operation].input,I=new v;S===1&&(S="1.0"),d.awsQueryCompatible&&(s.params||(s.params={}),Object.assign(s.params,p.params)),s.body=I.build(p.params||{},h),s.headers["Content-Type"]="application/x-amz-json-"+S,s.headers["X-Amz-Target"]=c,l(p)}function a(p){var s={},d=p.httpResponse;if(s.code=d.headers["x-amzn-errortype"]||"UnknownError",typeof s.code=="string"&&(s.code=s.code.split(":")[0]),d.body.length>0)try{var c=JSON.parse(d.body.toString()),S=c.__type||c.code||c.Code;S&&(s.code=S.split("#").pop()),s.code==="RequestEntityTooLarge"?s.message="Request body must be less than 1 MB":s.message=c.message||c.Message||null;for(var h in c||{})h==="code"||h==="message"||(s["["+h+"]"]="See error."+h+" for details.",Object.defineProperty(s,h,{value:c[h],enumerable:!1,writable:!0}))}catch{s.statusCode=d.statusCode,s.message=d.statusMessage}else s.statusCode=d.statusCode,s.message=d.statusCode.toString();p.error=g.error(new Error,s)}function y(p){var s=p.httpResponse.body.toString()||"{}";if(p.request.service.config.convertResponseTypes===!1)p.data=JSON.parse(s);else{var d=p.request.service.api.operations[p.request.operation],c=d.output||{},S=new E;p.data=S.parse(s,c)}}D.exports={buildRequest:u,extractError:a,extractData:y}},{"../json/builder":37,"../json/parser":38,"../util":74,"./helpers":47}],49:[function(C,D,_){var g=C("../core"),v=C("../util"),E=C("../query/query_param_serializer"),l=C("../model/shape"),u=C("./helpers").populateHostPrefix;function a(s){var d=s.service.api.operations[s.operation],c=s.httpRequest;c.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",c.params={Version:s.service.api.apiVersion,Action:d.name};var S=new E;S.serialize(s.params,d.input,function(h,I){c.params[h]=I}),c.body=v.queryParamsToString(c.params),u(s)}function y(s){var d,c=s.httpResponse.body.toString();if(c.match("<UnknownOperationException"))d={Code:"UnknownOperation",Message:"Unknown operation "+s.request.operation};else try{d=new g.XML.Parser().parse(c)}catch{d={Code:s.httpResponse.statusCode,Message:s.httpResponse.statusMessage}}d.requestId&&!s.requestId&&(s.requestId=d.requestId),d.Errors&&(d=d.Errors),d.Error&&(d=d.Error),d.Code?s.error=v.error(new Error,{code:d.Code,message:d.Message}):s.error=v.error(new Error,{code:s.httpResponse.statusCode,message:null})}function p(s){var d=s.request,c=d.service.api.operations[d.operation],S=c.output||{},h=S;if(h.resultWrapper){var I=l.create({type:"structure"});I.members[h.resultWrapper]=S,I.memberNames=[h.resultWrapper],v.property(S,"name",S.resultWrapper),S=I}var f=new g.XML.Parser;if(S&&S.members&&!S.members._XAMZRequestId){var T=l.create({type:"string"},{api:{protocol:"query"}},"requestId");S.members._XAMZRequestId=T}var w=f.parse(s.httpResponse.body.toString(),S);s.requestId=w._XAMZRequestId||w.requestId,w._XAMZRequestId&&delete w._XAMZRequestId,h.resultWrapper&&w[h.resultWrapper]&&(v.update(w,w[h.resultWrapper]),delete w[h.resultWrapper]),s.data=w}D.exports={buildRequest:a,extractError:y,extractData:p}},{"../core":19,"../model/shape":45,"../query/query_param_serializer":53,"../util":74,"./helpers":47}],50:[function(C,D,_){var g=C("../util"),v=C("./helpers").populateHostPrefix;function E(d){d.httpRequest.method=d.service.api.operations[d.operation].httpMethod}function l(d,c,S,h){var I=[d,c].join("/");I=I.replace(/\/+/g,"/");var f={},T=!1;if(g.each(S.members,function(x,P){var F=h[x];if(F!=null)if(P.location==="uri"){var W=new RegExp("\\{"+P.name+"(\\+)?\\}");I=I.replace(W,function(V,j){var Y=j?g.uriEscapePath:g.uriEscape;return Y(String(F))})}else P.location==="querystring"&&(T=!0,P.type==="list"?f[P.name]=F.map(function(V){return g.uriEscape(P.member.toWireFormat(V).toString())}):P.type==="map"?g.each(F,function(V,j){Array.isArray(j)?f[V]=j.map(function(Y){return g.uriEscape(String(Y))}):f[V]=g.uriEscape(String(j))}):f[P.name]=g.uriEscape(P.toWireFormat(F).toString()))}),T){I+=I.indexOf("?")>=0?"&":"?";var w=[];g.arrayEach(Object.keys(f).sort(),function(x){Array.isArray(f[x])||(f[x]=[f[x]]);for(var P=0;P<f[x].length;P++)w.push(g.uriEscape(String(x))+"="+f[x][P])}),I+=w.join("&")}return I}function u(d){var c=d.service.api.operations[d.operation],S=c.input,h=l(d.httpRequest.endpoint.path,c.httpPath,S,d.params);d.httpRequest.path=h}function a(d){var c=d.service.api.operations[d.operation];g.each(c.input.members,function(S,h){var I=d.params[S];I!=null&&(h.location==="headers"&&h.type==="map"?g.each(I,function(f,T){d.httpRequest.headers[h.name+f]=T}):h.location==="header"&&(I=h.toWireFormat(I).toString(),h.isJsonValue&&(I=g.base64.encode(I)),d.httpRequest.headers[h.name]=I))})}function y(d){E(d),u(d),a(d),v(d)}function p(){}function s(d){var c=d.request,S={},h=d.httpResponse,I=c.service.api.operations[c.operation],f=I.output,T={};g.each(h.headers,function(w,x){T[w.toLowerCase()]=x}),g.each(f.members,function(w,x){var P=(x.name||w).toLowerCase();if(x.location==="headers"&&x.type==="map"){S[w]={};var F=x.isLocationName?x.name:"",W=new RegExp("^"+F+"(.+)","i");g.each(h.headers,function(j,Y){var $=j.match(W);$!==null&&(S[w][$[1]]=Y)})}else if(x.location==="header"){if(T[P]!==void 0){var V=x.isJsonValue?g.base64.decode(T[P]):T[P];S[w]=x.toType(V)}}else x.location==="statusCode"&&(S[w]=parseInt(h.statusCode,10))}),d.data=S}D.exports={buildRequest:y,extractError:p,extractData:s,generateURI:l}},{"../util":74,"./helpers":47}],51:[function(C,D,_){var g=C("../util"),v=C("./rest"),E=C("./json"),l=C("../json/builder"),u=C("../json/parser"),a=["GET","HEAD","DELETE"];function y(h){var I=g.getRequestPayloadShape(h);I===void 0&&a.indexOf(h.httpRequest.method)>=0&&delete h.httpRequest.headers["Content-Length"]}function p(h){var I=new l,f=h.service.api.operations[h.operation].input;if(f.payload){var T={},w=f.members[f.payload];T=h.params[f.payload],w.type==="structure"?(h.httpRequest.body=I.build(T||{},w),s(h)):T!==void 0&&(h.httpRequest.body=T,(w.type==="binary"||w.isStreaming)&&s(h,!0))}else h.httpRequest.body=I.build(h.params,f),s(h)}function s(h,I){if(!h.httpRequest.headers["Content-Type"]){var f=I?"binary/octet-stream":"application/json";h.httpRequest.headers["Content-Type"]=f}}function d(h){v.buildRequest(h),a.indexOf(h.httpRequest.method)<0&&p(h)}function c(h){E.extractError(h)}function S(h){v.extractData(h);var I=h.request,f=I.service.api.operations[I.operation],T=I.service.api.operations[I.operation].output||{},w,x=f.hasEventOutput;if(T.payload){var P=T.members[T.payload],F=h.httpResponse.body;if(P.isEventStream)w=new u,h.data[payload]=g.createEventStream(AWS.HttpClient.streamsApiVersion===2?h.httpResponse.stream:F,w,P);else if(P.type==="structure"||P.type==="list"){var w=new u;h.data[T.payload]=w.parse(F,P)}else P.type==="binary"||P.isStreaming?h.data[T.payload]=F:h.data[T.payload]=P.toType(F)}else{var W=h.data;E.extractData(h),h.data=g.merge(W,h.data)}}D.exports={buildRequest:d,extractError:c,extractData:S,unsetContentLength:y}},{"../json/builder":37,"../json/parser":38,"../util":74,"./json":48,"./rest":50}],52:[function(C,D,_){var g=C("../core"),v=C("../util"),E=C("./rest");function l(p){var s=p.service.api.operations[p.operation].input,d=new g.XML.Builder,c=p.params,S=s.payload;if(S){var h=s.members[S];if(c=c[S],c===void 0)return;if(h.type==="structure"){var I=h.name;p.httpRequest.body=d.toXML(c,h,I,!0)}else p.httpRequest.body=c}else p.httpRequest.body=d.toXML(c,s,s.name||s.shape||v.string.upperFirst(p.operation)+"Request")}function u(p){E.buildRequest(p),["GET","HEAD"].indexOf(p.httpRequest.method)<0&&l(p)}function a(p){E.extractError(p);var s;try{s=new g.XML.Parser().parse(p.httpResponse.body.toString())}catch{s={Code:p.httpResponse.statusCode,Message:p.httpResponse.statusMessage}}s.Errors&&(s=s.Errors),s.Error&&(s=s.Error),s.Code?p.error=v.error(new Error,{code:s.Code,message:s.Message}):p.error=v.error(new Error,{code:p.httpResponse.statusCode,message:null})}function y(p){E.extractData(p);var s,d=p.request,c=p.httpResponse.body,S=d.service.api.operations[d.operation],h=S.output,I=S.hasEventOutput,f=h.payload;if(f){var T=h.members[f];T.isEventStream?(s=new g.XML.Parser,p.data[f]=v.createEventStream(g.HttpClient.streamsApiVersion===2?p.httpResponse.stream:p.httpResponse.body,s,T)):T.type==="structure"?(s=new g.XML.Parser,p.data[f]=s.parse(c.toString(),T)):T.type==="binary"||T.isStreaming?p.data[f]=c:p.data[f]=T.toType(c)}else if(c.length>0){s=new g.XML.Parser;var w=s.parse(c.toString(),h);v.update(p.data,w)}}D.exports={buildRequest:u,extractError:a,extractData:y}},{"../core":19,"../util":74,"./rest":50}],53:[function(C,D,_){var g=C("../util");function v(){}v.prototype.serialize=function(p,s,d){l("",p,s,d)};function E(p){return p.isQueryName||p.api.protocol!=="ec2"?p.name:p.name[0].toUpperCase()+p.name.substr(1)}function l(p,s,d,c){g.each(d.members,function(S,h){var I=s[S];if(I!=null){var f=E(h);f=p?p+"."+f:f,y(f,I,h,c)}})}function u(p,s,d,c){var S=1;g.each(s,function(h,I){var f=d.flattened?".":".entry.",T=f+S+++".",w=T+(d.key.name||"key"),x=T+(d.value.name||"value");y(p+w,h,d.key,c),y(p+x,I,d.value,c)})}function a(p,s,d,c){var S=d.member||{};if(s.length===0){c.call(this,p,null);return}g.arrayEach(s,function(h,I){var f="."+(I+1);if(d.api.protocol==="ec2")f=f+"";else if(d.flattened){if(S.name){var T=p.split(".");T.pop(),T.push(E(S)),p=T.join(".")}}else f="."+(S.name?S.name:"member")+f;y(p+f,h,S,c)})}function y(p,s,d,c){s!=null&&(d.type==="structure"?l(p,s,d,c):d.type==="list"?a(p,s,d,c):d.type==="map"?u(p,s,d,c):c(p,d.toWireFormat(s).toString()))}D.exports=v},{"../util":74}],54:[function(C,D,_){D.exports={now:function(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}}},{}],55:[function(C,D,_){function g(l){return typeof l=="string"&&(l.startsWith("fips-")||l.endsWith("-fips"))}function v(l){return typeof l=="string"&&["aws-global","aws-us-gov-global"].includes(l)}function E(l){return["fips-aws-global","aws-fips","aws-global"].includes(l)?"us-east-1":["fips-aws-us-gov-global","aws-us-gov-global"].includes(l)?"us-gov-west-1":l.replace(/fips-(dkr-|prod-)?|-fips/,"")}D.exports={isFipsRegion:g,isGlobalRegion:v,getRealRegion:E}},{}],56:[function(C,D,_){var g=C("./util"),v=C("./region_config_data.json");function E(p){if(!p)return null;var s=p.split("-");return s.length<3?null:s.slice(0,s.length-2).join("-")+"-*"}function l(p){var s=p.config.region,d=E(s),c=p.api.endpointPrefix;return[[s,c],[d,c],[s,"*"],[d,"*"],["*",c],[s,"internal-*"],["*","*"]].map(function(S){return S[0]&&S[1]?S.join("/"):null})}function u(p,s){g.each(s,function(d,c){d!=="globalEndpoint"&&(p.config[d]===void 0||p.config[d]===null)&&(p.config[d]=c)})}function a(p){for(var s=l(p),d=p.config.useFipsEndpoint,c=p.config.useDualstackEndpoint,S=0;S<s.length;S++){var h=s[S];if(h){var I=d?c?v.dualstackFipsRules:v.fipsRules:c?v.dualstackRules:v.rules;if(Object.prototype.hasOwnProperty.call(I,h)){var f=I[h];typeof f=="string"&&(f=v.patterns[f]),p.isGlobalEndpoint=!!f.globalEndpoint,f.signingRegion&&(p.signingRegion=f.signingRegion),f.signatureVersion||(f.signatureVersion="v4");var T=(p.api&&p.api.signatureVersion)==="bearer";u(p,Object.assign({},f,{signatureVersion:T?"bearer":f.signatureVersion}));return}}}}function y(p){for(var s={"^(us|eu|ap|sa|ca|me)\\-\\w+\\-\\d+$":"amazonaws.com","^cn\\-\\w+\\-\\d+$":"amazonaws.com.cn","^us\\-gov\\-\\w+\\-\\d+$":"amazonaws.com","^us\\-iso\\-\\w+\\-\\d+$":"c2s.ic.gov","^us\\-isob\\-\\w+\\-\\d+$":"sc2s.sgov.gov"},d="amazonaws.com",c=Object.keys(s),S=0;S<c.length;S++){var h=RegExp(c[S]),I=s[c[S]];if(h.test(p))return I}return d}D.exports={configureEndpoint:a,getEndpointSuffix:y}},{"./region_config_data.json":57,"./util":74}],57:[function(C,D,_){D.exports={rules:{"*/*":{endpoint:"{service}.{region}.amazonaws.com"},"cn-*/*":{endpoint:"{service}.{region}.amazonaws.com.cn"},"us-iso-*/*":"usIso","us-isob-*/*":"usIsob","*/budgets":"globalSSL","*/cloudfront":"globalSSL","*/sts":"globalSSL","*/importexport":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2",globalEndpoint:!0},"*/route53":"globalSSL","cn-*/route53":{endpoint:"{service}.amazonaws.com.cn",globalEndpoint:!0,signingRegion:"cn-northwest-1"},"us-gov-*/route53":"globalGovCloud","us-iso-*/route53":{endpoint:"{service}.c2s.ic.gov",globalEndpoint:!0,signingRegion:"us-iso-east-1"},"us-isob-*/route53":{endpoint:"{service}.sc2s.sgov.gov",globalEndpoint:!0,signingRegion:"us-isob-east-1"},"*/waf":"globalSSL","*/iam":"globalSSL","cn-*/iam":{endpoint:"{service}.cn-north-1.amazonaws.com.cn",globalEndpoint:!0,signingRegion:"cn-north-1"},"us-iso-*/iam":{endpoint:"{service}.us-iso-east-1.c2s.ic.gov",globalEndpoint:!0,signingRegion:"us-iso-east-1"},"us-gov-*/iam":"globalGovCloud","*/ce":{endpoint:"{service}.us-east-1.amazonaws.com",globalEndpoint:!0,signingRegion:"us-east-1"},"cn-*/ce":{endpoint:"{service}.cn-northwest-1.amazonaws.com.cn",globalEndpoint:!0,signingRegion:"cn-northwest-1"},"us-gov-*/sts":{endpoint:"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3signature","us-west-1/s3":"s3signature","us-west-2/s3":"s3signature","eu-west-1/s3":"s3signature","ap-southeast-1/s3":"s3signature","ap-southeast-2/s3":"s3signature","ap-northeast-1/s3":"s3signature","sa-east-1/s3":"s3signature","us-east-1/s3":{endpoint:"{service}.amazonaws.com",signatureVersion:"s3"},"us-east-1/sdb":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2"},"*/sdb":{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"v2"},"*/resource-explorer-2":"dualstackByDefault","*/kendra-ranking":"dualstackByDefault","*/internetmonitor":"dualstackByDefault","*/codecatalyst":"globalDualstackByDefault"},fipsRules:{"*/*":"fipsStandard","us-gov-*/*":"fipsStandard","us-iso-*/*":{endpoint:"{service}-fips.{region}.c2s.ic.gov"},"us-iso-*/dms":"usIso","us-isob-*/*":{endpoint:"{service}-fips.{region}.sc2s.sgov.gov"},"us-isob-*/dms":"usIsob","cn-*/*":{endpoint:"{service}-fips.{region}.amazonaws.com.cn"},"*/api.ecr":"fips.api.ecr","*/api.sagemaker":"fips.api.sagemaker","*/batch":"fipsDotPrefix","*/eks":"fipsDotPrefix","*/models.lex":"fips.models.lex","*/runtime.lex":"fips.runtime.lex","*/runtime.sagemaker":{endpoint:"runtime-fips.sagemaker.{region}.amazonaws.com"},"*/iam":"fipsWithoutRegion","*/route53":"fipsWithoutRegion","*/transcribe":"fipsDotPrefix","*/waf":"fipsWithoutRegion","us-gov-*/transcribe":"fipsDotPrefix","us-gov-*/api.ecr":"fips.api.ecr","us-gov-*/api.sagemaker":"fips.api.sagemaker","us-gov-*/models.lex":"fips.models.lex","us-gov-*/runtime.lex":"fips.runtime.lex","us-gov-*/acm-pca":"fipsWithServiceOnly","us-gov-*/batch":"fipsWithServiceOnly","us-gov-*/cloudformation":"fipsWithServiceOnly","us-gov-*/config":"fipsWithServiceOnly","us-gov-*/eks":"fipsWithServiceOnly","us-gov-*/elasticmapreduce":"fipsWithServiceOnly","us-gov-*/identitystore":"fipsWithServiceOnly","us-gov-*/dynamodb":"fipsWithServiceOnly","us-gov-*/elasticloadbalancing":"fipsWithServiceOnly","us-gov-*/guardduty":"fipsWithServiceOnly","us-gov-*/monitoring":"fipsWithServiceOnly","us-gov-*/resource-groups":"fipsWithServiceOnly","us-gov-*/runtime.sagemaker":"fipsWithServiceOnly","us-gov-*/servicecatalog-appregistry":"fipsWithServiceOnly","us-gov-*/servicequotas":"fipsWithServiceOnly","us-gov-*/ssm":"fipsWithServiceOnly","us-gov-*/sts":"fipsWithServiceOnly","us-gov-*/support":"fipsWithServiceOnly","us-gov-west-1/states":"fipsWithServiceOnly","us-iso-east-1/elasticfilesystem":{endpoint:"elasticfilesystem-fips.{region}.c2s.ic.gov"},"us-gov-west-1/organizations":"fipsWithServiceOnly","us-gov-west-1/route53":{endpoint:"route53.us-gov.amazonaws.com"},"*/resource-explorer-2":"fipsDualstackByDefault","*/kendra-ranking":"dualstackByDefault","*/internetmonitor":"dualstackByDefault","*/codecatalyst":"fipsGlobalDualstackByDefault"},dualstackRules:{"*/*":{endpoint:"{service}.{region}.api.aws"},"cn-*/*":{endpoint:"{service}.{region}.api.amazonwebservices.com.cn"},"*/s3":"dualstackLegacy","cn-*/s3":"dualstackLegacyCn","*/s3-control":"dualstackLegacy","cn-*/s3-control":"dualstackLegacyCn","ap-south-1/ec2":"dualstackLegacyEc2","eu-west-1/ec2":"dualstackLegacyEc2","sa-east-1/ec2":"dualstackLegacyEc2","us-east-1/ec2":"dualstackLegacyEc2","us-east-2/ec2":"dualstackLegacyEc2","us-west-2/ec2":"dualstackLegacyEc2"},dualstackFipsRules:{"*/*":{endpoint:"{service}-fips.{region}.api.aws"},"cn-*/*":{endpoint:"{service}-fips.{region}.api.amazonwebservices.com.cn"},"*/s3":"dualstackFipsLegacy","cn-*/s3":"dualstackFipsLegacyCn","*/s3-control":"dualstackFipsLegacy","cn-*/s3-control":"dualstackFipsLegacyCn"},patterns:{globalSSL:{endpoint:"https://{service}.amazonaws.com",globalEndpoint:!0,signingRegion:"us-east-1"},globalGovCloud:{endpoint:"{service}.us-gov.amazonaws.com",globalEndpoint:!0,signingRegion:"us-gov-west-1"},s3signature:{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"s3"},usIso:{endpoint:"{service}.{region}.c2s.ic.gov"},usIsob:{endpoint:"{service}.{region}.sc2s.sgov.gov"},fipsStandard:{endpoint:"{service}-fips.{region}.amazonaws.com"},fipsDotPrefix:{endpoint:"fips.{service}.{region}.amazonaws.com"},fipsWithoutRegion:{endpoint:"{service}-fips.amazonaws.com"},"fips.api.ecr":{endpoint:"ecr-fips.{region}.amazonaws.com"},"fips.api.sagemaker":{endpoint:"api-fips.sagemaker.{region}.amazonaws.com"},"fips.models.lex":{endpoint:"models-fips.lex.{region}.amazonaws.com"},"fips.runtime.lex":{endpoint:"runtime-fips.lex.{region}.amazonaws.com"},fipsWithServiceOnly:{endpoint:"{service}.{region}.amazonaws.com"},dualstackLegacy:{endpoint:"{service}.dualstack.{region}.amazonaws.com"},dualstackLegacyCn:{endpoint:"{service}.dualstack.{region}.amazonaws.com.cn"},dualstackFipsLegacy:{endpoint:"{service}-fips.dualstack.{region}.amazonaws.com"},dualstackFipsLegacyCn:{endpoint:"{service}-fips.dualstack.{region}.amazonaws.com.cn"},dualstackLegacyEc2:{endpoint:"api.ec2.{region}.aws"},dualstackByDefault:{endpoint:"{service}.{region}.api.aws"},fipsDualstackByDefault:{endpoint:"{service}-fips.{region}.api.aws"},globalDualstackByDefault:{endpoint:"{service}.global.api.aws"},fipsGlobalDualstackByDefault:{endpoint:"{service}-fips.global.api.aws"}}}},{}],58:[function(C,D,_){(function(g){(function(){var v=C("./core"),E=C("./state_machine"),l=v.util.inherit,u=v.util.domain,a=C("jmespath"),y={success:1,error:1,complete:1};function p(d){return Object.prototype.hasOwnProperty.call(y,d._asm.currentState)}var s=new E;s.setupStates=function(){var d=function(c,S){var h=this;h._haltHandlersOnError=!1,h.emit(h._asm.currentState,function(I){if(I)if(p(h))if(u&&h.domain instanceof u.Domain)I.domainEmitter=h,I.domain=h.domain,I.domainThrown=!1,h.domain.emit("error",I);else throw I;else h.response.error=I,S(I);else S(h.response.error)})};this.addState("validate","build","error",d),this.addState("build","afterBuild","restart",d),this.addState("afterBuild","sign","restart",d),this.addState("sign","send","retry",d),this.addState("retry","afterRetry","afterRetry",d),this.addState("afterRetry","sign","error",d),this.addState("send","validateResponse","retry",d),this.addState("validateResponse","extractData","extractError",d),this.addState("extractError","extractData","retry",d),this.addState("extractData","success","retry",d),this.addState("restart","build","error",d),this.addState("success","complete","complete",d),this.addState("error","complete","complete",d),this.addState("complete",null,null,d)},s.setupStates(),v.Request=l({constructor:function(c,S,h){var I=c.endpoint,f=c.config.region,T=c.config.customUserAgent;c.signingRegion?f=c.signingRegion:c.isGlobalEndpoint&&(f="us-east-1"),this.domain=u&&u.active,this.service=c,this.operation=S,this.params=h||{},this.httpRequest=new v.HttpRequest(I,f),this.httpRequest.appendToUserAgent(T),this.startTime=c.getSkewCorrectedDate(),this.response=new v.Response(this),this._asm=new E(s.states,"validate"),this._haltHandlersOnError=!1,v.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(c){return c&&(this.httpRequest.appendToUserAgent("callback"),this.on("complete",function(S){c.call(S,S.error,S.data)})),this.runTo(),this.response},build:function(c){return this.runTo("send",c)},runTo:function(c,S){return this._asm.runTo(c,S,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",function(S){S.error=v.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})}),this.httpRequest.stream&&!this.httpRequest.stream.didCallback&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(c){c=v.util.fn.makeAsync(c,3);function S(h){c.call(h,h.error,h.data,function(I){I!==!1&&(h.hasNextPage()?h.nextPage().on("complete",S).send():c.call(h,null,null,v.util.fn.noop))})}this.on("complete",S).send()},eachItem:function(c){var S=this;function h(I,f){if(I)return c(I,null);if(f===null)return c(null,null);var T=S.service.paginationConfig(S.operation),w=T.resultKey;Array.isArray(w)&&(w=w[0]);var x=a.search(f,w),P=!0;return v.util.arrayEach(x,function(F){if(P=c(null,F),P===!1)return v.util.abort}),P}this.eachPage(h)},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var c=v.util.stream,S=this,h=null;return v.HttpClient.streamsApiVersion===2?(h=new c.PassThrough,g.nextTick(function(){S.send()})):(h=new c.Stream,h.readable=!0,h.sent=!1,h.on("newListener",function(I){!h.sent&&I==="data"&&(h.sent=!0,g.nextTick(function(){S.send()}))})),this.on("error",function(I){h.emit("error",I)}),this.on("httpHeaders",function(f,T,w){if(f<300){S.removeListener("httpData",v.EventListeners.Core.HTTP_DATA),S.removeListener("httpError",v.EventListeners.Core.HTTP_ERROR),S.on("httpError",function($){w.error=$,w.error.retryable=!1});var x=!1,P;if(S.httpRequest.method!=="HEAD"&&(P=parseInt(T["content-length"],10)),P!==void 0&&!isNaN(P)&&P>=0){x=!0;var F=0}var W=function(){x&&F!==P?h.emit("error",v.util.error(new Error("Stream content length mismatch. Received "+F+" of "+P+" bytes."),{code:"StreamContentLengthMismatch"})):v.HttpClient.streamsApiVersion===2?h.end():h.emit("end")},V=w.httpResponse.createUnbufferedStream();if(v.HttpClient.streamsApiVersion===2)if(x){var j=new c.PassThrough;j._write=function(Y){return Y&&Y.length&&(F+=Y.length),c.PassThrough.prototype._write.apply(this,arguments)},j.on("end",W),h.on("error",function(Y){x=!1,V.unpipe(j),j.emit("end"),j.end()}),V.pipe(j).pipe(h,{end:!1})}else V.pipe(h);else x&&V.on("data",function(Y){Y&&Y.length&&(F+=Y.length)}),V.on("data",function(Y){h.emit("data",Y)}),V.on("end",W);V.on("error",function(Y){x=!1,h.emit("error",Y)})}}),h},emitEvent:function(c,S,h){typeof S=="function"&&(h=S,S=null),h||(h=function(){}),S||(S=this.eventParameters(c,this.response));var I=v.SequentialExecutor.prototype.emit;I.call(this,c,S,function(f){f&&(this.response.error=f),h.call(this,f)})},eventParameters:function(c){switch(c){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(c,S){return!S&&typeof c=="function"&&(S=c,c=null),new v.Signers.Presign().sign(this.toGet(),c,S)},isPresigned:function(){return Object.prototype.hasOwnProperty.call(this.httpRequest.headers,"presigned-expires")},toUnauthenticated:function(){return this._unAuthenticated=!0,this.removeListener("validate",v.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",v.EventListeners.Core.SIGN),this},toGet:function(){return(this.service.api.protocol==="query"||this.service.api.protocol==="ec2")&&(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(c){c.httpRequest.method="GET",c.httpRequest.path=c.service.endpoint.path+"?"+c.httpRequest.body,c.httpRequest.body="",delete c.httpRequest.headers["Content-Length"],delete c.httpRequest.headers["Content-Type"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),v.Request.addPromisesToClass=function(c){this.prototype.promise=function(){var h=this;return this.httpRequest.appendToUserAgent("promise"),new c(function(I,f){h.on("complete",function(T){T.error?f(T.error):I(Object.defineProperty(T.data||{},"$response",{value:T}))}),h.runTo()})}},v.Request.deletePromisesFromClass=function(){delete this.prototype.promise},v.util.addPromises(v.Request),v.util.mixin(v.Request,v.SequentialExecutor)}).call(this)}).call(this,C("_process"))},{"./core":19,"./state_machine":73,_process:91,jmespath:90}],59:[function(C,D,_){var g=C("./core"),v=g.util.inherit,E=C("jmespath");function l(u){var a=u.request._waiter,y=a.config.acceptors,p=!1,s="retry";y.forEach(function(d){if(!p){var c=a.matchers[d.matcher];c&&c(u,d.expected,d.argument)&&(p=!0,s=d.state)}}),!p&&u.error&&(s="failure"),s==="success"?a.setSuccess(u):a.setError(u,s==="retry")}g.ResourceWaiter=v({constructor:function(a,y){this.service=a,this.state=y,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(u,a,y){try{var p=E.search(u.data,y)}catch{return!1}return E.strictDeepEqual(p,a)},pathAll:function(u,a,y){try{var p=E.search(u.data,y)}catch{return!1}Array.isArray(p)||(p=[p]);var s=p.length;if(!s)return!1;for(var d=0;d<s;d++)if(!E.strictDeepEqual(p[d],a))return!1;return!0},pathAny:function(u,a,y){try{var p=E.search(u.data,y)}catch{return!1}Array.isArray(p)||(p=[p]);for(var s=p.length,d=0;d<s;d++)if(E.strictDeepEqual(p[d],a))return!0;return!1},status:function(u,a){var y=u.httpResponse.statusCode;return typeof y=="number"&&y===a},error:function(u,a){return typeof a=="string"&&u.error?a===u.error.code:a===!!u.error}},listeners:new g.SequentialExecutor().addNamedListeners(function(u){u("RETRY_CHECK","retry",function(a){var y=a.request._waiter;a.error&&a.error.code==="ResourceNotReady"&&(a.error.retryDelay=(y.config.delay||0)*1e3)}),u("CHECK_OUTPUT","extractData",l),u("CHECK_ERROR","extractError",l)}),wait:function(a,y){typeof a=="function"&&(y=a,a=void 0),a&&a.$waiter&&(a=g.util.copy(a),typeof a.$waiter.delay=="number"&&(this.config.delay=a.$waiter.delay),typeof a.$waiter.maxAttempts=="number"&&(this.config.maxAttempts=a.$waiter.maxAttempts),delete a.$waiter);var p=this.service.makeRequest(this.config.operation,a);return p._waiter=this,p.response.maxRetries=this.config.maxAttempts,p.addListeners(this.listeners),y&&p.send(y),p},setSuccess:function(a){a.error=null,a.data=a.data||{},a.request.removeAllListeners("extractData")},setError:function(a,y){a.data=null,a.error=g.util.error(a.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:y})},loadWaiterConfig:function(a){if(!this.service.api.waiters[a])throw new g.util.error(new Error,{code:"StateNotFoundError",message:"State "+a+" not found."});this.config=g.util.copy(this.service.api.waiters[a])}})},{"./core":19,jmespath:90}],60:[function(C,D,_){var g=C("./core"),v=g.util.inherit,E=C("jmespath");g.Response=v({constructor:function(u){this.request=u,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new g.HttpResponse,u&&(this.maxRetries=u.service.numRetries(),this.maxRedirects=u.service.config.maxRedirects)},nextPage:function(u){var a,y=this.request.service,p=this.request.operation;try{a=y.paginationConfig(p,!0)}catch(S){this.error=S}if(!this.hasNextPage()){if(u)u(this.error,null);else if(this.error)throw this.error;return null}var s=g.util.copy(this.request.params);if(this.nextPageTokens){var d=a.inputToken;typeof d=="string"&&(d=[d]);for(var c=0;c<d.length;c++)s[d[c]]=this.nextPageTokens[c];return y.makeRequest(this.request.operation,s,u)}else return u?u(null,null):null},hasNextPage:function(){if(this.cacheNextPageTokens(),this.nextPageTokens)return!0;if(this.nextPageTokens!==void 0)return!1},cacheNextPageTokens:function(){if(Object.prototype.hasOwnProperty.call(this,"nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var u=this.request.service.paginationConfig(this.request.operation);if(!u)return this.nextPageTokens;if(this.nextPageTokens=null,u.moreResults&&!E.search(this.data,u.moreResults))return this.nextPageTokens;var a=u.outputToken;return typeof a=="string"&&(a=[a]),g.util.arrayEach.call(this,a,function(y){var p=E.search(this.data,y);p&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(p))}),this.nextPageTokens}})},{"./core":19,jmespath:90}],61:[function(C,D,_){var g=C("./core");g.SequentialExecutor=g.util.inherit({constructor:function(){this._events={}},listeners:function(E){return this._events[E]?this._events[E].slice(0):[]},on:function(E,l,u){return this._events[E]?u?this._events[E].unshift(l):this._events[E].push(l):this._events[E]=[l],this},onAsync:function(E,l,u){return l._isAsync=!0,this.on(E,l,u)},removeListener:function(E,l){var u=this._events[E];if(u){for(var a=u.length,y=-1,p=0;p<a;++p)u[p]===l&&(y=p);y>-1&&u.splice(y,1)}return this},removeAllListeners:function(E){return E?delete this._events[E]:this._events={},this},emit:function(E,l,u){u||(u=function(){});var a=this.listeners(E),y=a.length;return this.callListeners(a,l,u),y>0},callListeners:function(E,l,u,a){var y=this,p=a||null;function s(c){if(c&&(p=g.util.error(p||new Error,c),y._haltHandlersOnError))return u.call(y,p);y.callListeners(E,l,u,p)}for(;E.length>0;){var d=E.shift();if(d._isAsync){d.apply(y,l.concat([s]));return}else{try{d.apply(y,l)}catch(c){p=g.util.error(p||new Error,c)}if(p&&y._haltHandlersOnError){u.call(y,p);return}}}u.call(y,p)},addListeners:function(E){var l=this;return E._events&&(E=E._events),g.util.each(E,function(u,a){typeof a=="function"&&(a=[a]),g.util.arrayEach(a,function(y){l.on(u,y)})}),l},addNamedListener:function(E,l,u,a){return this[E]=u,this.addListener(l,u,a),this},addNamedAsyncListener:function(E,l,u,a){return u._isAsync=!0,this.addNamedListener(E,l,u,a)},addNamedListeners:function(E){var l=this;return E(function(){l.addNamedListener.apply(l,arguments)},function(){l.addNamedAsyncListener.apply(l,arguments)}),this}}),g.SequentialExecutor.prototype.addListener=g.SequentialExecutor.prototype.on,D.exports=g.SequentialExecutor},{"./core":19}],62:[function(C,D,_){(function(g){(function(){var v=C("./core"),E=C("./model/api"),l=C("./region_config"),u=v.util.inherit,a=0,y=C("./region/utils");v.Service=u({constructor:function(s){if(!this.loadServiceClass)throw v.util.error(new Error,"Service must be constructed with `new' operator");if(s){if(s.region){var d=s.region;y.isFipsRegion(d)&&(s.region=y.getRealRegion(d),s.useFipsEndpoint=!0),y.isGlobalRegion(d)&&(s.region=y.getRealRegion(d))}typeof s.useDualstack=="boolean"&&typeof s.useDualstackEndpoint!="boolean"&&(s.useDualstackEndpoint=s.useDualstack)}var c=this.loadServiceClass(s||{});if(c){var S=v.util.copy(s),h=new c(s);return Object.defineProperty(h,"_originalConfig",{get:function(){return S},enumerable:!1,configurable:!0}),h._clientId=++a,h}this.initialize(s)},initialize:function(s){var d=v.config[this.serviceIdentifier];if(this.config=new v.Config(v.config),d&&this.config.update(d,!0),s&&this.config.update(s,!0),this.validateService(),this.config.endpoint||l.configureEndpoint(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint),v.SequentialExecutor.call(this),v.Service.addDefaultMonitoringListeners(this),(this.config.clientSideMonitoring||v.Service._clientSideMonitoring)&&this.publisher){var c=this.publisher;this.addNamedListener("PUBLISH_API_CALL","apiCall",function(h){g.nextTick(function(){c.eventHandler(h)})}),this.addNamedListener("PUBLISH_API_ATTEMPT","apiCallAttempt",function(h){g.nextTick(function(){c.eventHandler(h)})})}},validateService:function(){},loadServiceClass:function(s){var d=s;if(v.util.isEmpty(this.api)){if(d.apiConfig)return v.Service.defineServiceApi(this.constructor,d.apiConfig);if(this.constructor.services){d=new v.Config(v.config),d.update(s,!0);var c=d.apiVersions[this.constructor.serviceIdentifier];return c=c||d.apiVersion,this.getLatestServiceClass(c)}else return null}else return null},getLatestServiceClass:function(s){return s=this.getLatestServiceVersion(s),this.constructor.services[s]===null&&v.Service.defineServiceApi(this.constructor,s),this.constructor.services[s]},getLatestServiceVersion:function(s){if(!this.constructor.services||this.constructor.services.length===0)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(s?v.util.isType(s,Date)&&(s=v.util.date.iso8601(s).split("T")[0]):s="latest",Object.hasOwnProperty(this.constructor.services,s))return s;for(var d=Object.keys(this.constructor.services).sort(),c=null,S=d.length-1;S>=0;S--)if(d[S][d[S].length-1]!=="*"&&(c=d[S]),d[S].substr(0,10)<=s)return c;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+s+"'")},api:{},defaultRetryCount:3,customizeRequests:function(s){if(!s)this.customRequestHandler=null;else if(typeof s=="function")this.customRequestHandler=s;else throw new Error("Invalid callback type '"+typeof s+"' provided in customizeRequests")},makeRequest:function(s,d,c){if(typeof d=="function"&&(c=d,d=null),d=d||{},this.config.params){var S=this.api.operations[s];S&&(d=v.util.copy(d),v.util.each(this.config.params,function(I,f){S.input.members[I]&&(d[I]===void 0||d[I]===null)&&(d[I]=f)}))}var h=new v.Request(this,s,d);return this.addAllRequestListeners(h),this.attachMonitoringEmitter(h),c&&h.send(c),h},makeUnauthenticatedRequest:function(s,d,c){typeof d=="function"&&(c=d,d={});var S=this.makeRequest(s,d).toUnauthenticated();return c?S.send(c):S},waitFor:function(s,d,c){var S=new v.ResourceWaiter(this,s);return S.wait(d,c)},addAllRequestListeners:function(s){for(var d=[v.events,v.EventListeners.Core,this.serviceInterface(),v.EventListeners.CorePost],c=0;c<d.length;c++)d[c]&&s.addListeners(d[c]);this.config.paramValidation||s.removeListener("validate",v.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&s.addListeners(v.EventListeners.Logger),this.setupRequestListeners(s),typeof this.constructor.prototype.customRequestHandler=="function"&&this.constructor.prototype.customRequestHandler(s),Object.prototype.hasOwnProperty.call(this,"customRequestHandler")&&typeof this.customRequestHandler=="function"&&this.customRequestHandler(s)},apiCallEvent:function(s){var d=s.service.api.operations[s.operation],c={Type:"ApiCall",Api:d?d.name:s.operation,Version:1,Service:s.service.api.serviceId||s.service.api.endpointPrefix,Region:s.httpRequest.region,MaxRetriesExceeded:0,UserAgent:s.httpRequest.getUserAgent()},S=s.response;if(S.httpResponse.statusCode&&(c.FinalHttpStatusCode=S.httpResponse.statusCode),S.error){var h=S.error,I=S.httpResponse.statusCode;I>299?(h.code&&(c.FinalAwsException=h.code),h.message&&(c.FinalAwsExceptionMessage=h.message)):((h.code||h.name)&&(c.FinalSdkException=h.code||h.name),h.message&&(c.FinalSdkExceptionMessage=h.message))}return c},apiAttemptEvent:function(s){var d=s.service.api.operations[s.operation],c={Type:"ApiCallAttempt",Api:d?d.name:s.operation,Version:1,Service:s.service.api.serviceId||s.service.api.endpointPrefix,Fqdn:s.httpRequest.endpoint.hostname,UserAgent:s.httpRequest.getUserAgent()},S=s.response;return S.httpResponse.statusCode&&(c.HttpStatusCode=S.httpResponse.statusCode),!s._unAuthenticated&&s.service.config.credentials&&s.service.config.credentials.accessKeyId&&(c.AccessKey=s.service.config.credentials.accessKeyId),S.httpResponse.headers&&(s.httpRequest.headers["x-amz-security-token"]&&(c.SessionToken=s.httpRequest.headers["x-amz-security-token"]),S.httpResponse.headers["x-amzn-requestid"]&&(c.XAmznRequestId=S.httpResponse.headers["x-amzn-requestid"]),S.httpResponse.headers["x-amz-request-id"]&&(c.XAmzRequestId=S.httpResponse.headers["x-amz-request-id"]),S.httpResponse.headers["x-amz-id-2"]&&(c.XAmzId2=S.httpResponse.headers["x-amz-id-2"])),c},attemptFailEvent:function(s){var d=this.apiAttemptEvent(s),c=s.response,S=c.error;return c.httpResponse.statusCode>299?(S.code&&(d.AwsException=S.code),S.message&&(d.AwsExceptionMessage=S.message)):((S.code||S.name)&&(d.SdkException=S.code||S.name),S.message&&(d.SdkExceptionMessage=S.message)),d},attachMonitoringEmitter:function(s){var d,c,S,h,I=0,f,T,w=this,x=!0;s.on("validate",function(){h=v.util.realClock.now(),T=Date.now()},x),s.on("sign",function(){c=v.util.realClock.now(),d=Date.now(),f=s.httpRequest.region,I++},x),s.on("validateResponse",function(){S=Math.round(v.util.realClock.now()-c)}),s.addNamedListener("API_CALL_ATTEMPT","success",function(){var F=w.apiAttemptEvent(s);F.Timestamp=d,F.AttemptLatency=S>=0?S:0,F.Region=f,w.emit("apiCallAttempt",[F])}),s.addNamedListener("API_CALL_ATTEMPT_RETRY","retry",function(){var F=w.attemptFailEvent(s);F.Timestamp=d,S=S||Math.round(v.util.realClock.now()-c),F.AttemptLatency=S>=0?S:0,F.Region=f,w.emit("apiCallAttempt",[F])}),s.addNamedListener("API_CALL","complete",function(){var F=w.apiCallEvent(s);if(F.AttemptCount=I,!(F.AttemptCount<=0)){F.Timestamp=T;var W=Math.round(v.util.realClock.now()-h);F.Latency=W>=0?W:0;var V=s.response;V.error&&V.error.retryable&&typeof V.retryCount=="number"&&typeof V.maxRetries=="number"&&V.retryCount>=V.maxRetries&&(F.MaxRetriesExceeded=1),w.emit("apiCall",[F])}})},setupRequestListeners:function(s){},getSigningName:function(){return this.api.signingName||this.api.endpointPrefix},getSignerClass:function(s){var d,c=null,S="";if(s){var h=s.service.api.operations||{};c=h[s.operation]||null,S=c?c.authtype:""}return this.config.signatureVersion?d=this.config.signatureVersion:S==="v4"||S==="v4-unsigned-body"?d="v4":S==="bearer"?d="bearer":d=this.api.signatureVersion,v.Signers.RequestSigner.getVersion(d)},serviceInterface:function(){switch(this.api.protocol){case"ec2":return v.EventListeners.Query;case"query":return v.EventListeners.Query;case"json":return v.EventListeners.Json;case"rest-json":return v.EventListeners.RestJson;case"rest-xml":return v.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(s){return s.httpResponse.statusCode<300},numRetries:function(){return this.config.maxRetries!==void 0?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(s,d){return v.util.calculateRetryDelay(s,this.config.retryDelayOptions,d)},retryableError:function(s){return!!(this.timeoutError(s)||this.networkingError(s)||this.expiredCredentialsError(s)||this.throttledError(s)||s.statusCode>=500)},networkingError:function(s){return s.code==="NetworkingError"},timeoutError:function(s){return s.code==="TimeoutError"},expiredCredentialsError:function(s){return s.code==="ExpiredTokenException"},clockSkewError:function(s){switch(s.code){case"RequestTimeTooSkewed":case"RequestExpired":case"InvalidSignatureException":case"SignatureDoesNotMatch":case"AuthFailure":case"RequestInTheFuture":return!0;default:return!1}},getSkewCorrectedDate:function(){return new Date(Date.now()+this.config.systemClockOffset)},applyClockOffset:function(s){s&&(this.config.systemClockOffset=s-Date.now())},isClockSkewed:function(s){if(s)return Math.abs(this.getSkewCorrectedDate().getTime()-s)>=3e5},throttledError:function(s){if(s.statusCode===429)return!0;switch(s.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":case"RequestThrottledException":case"TooManyRequestsException":case"TransactionInProgressException":case"EC2ThrottledException":return!0;default:return!1}},endpointFromTemplate:function(s){if(typeof s!="string")return s;var d=s;return d=d.replace(/\{service\}/g,this.api.endpointPrefix),d=d.replace(/\{region\}/g,this.config.region),d=d.replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http"),d},setEndpoint:function(s){this.endpoint=new v.Endpoint(s,this.config)},paginationConfig:function(s,d){var c=this.api.operations[s].paginator;if(!c){if(d){var S=new Error;throw v.util.error(S,"No pagination configuration for "+s)}return null}return c}}),v.util.update(v.Service,{defineMethods:function(s){v.util.each(s.prototype.api.operations,function(c){if(!s.prototype[c]){var S=s.prototype.api.operations[c];S.authtype==="none"?s.prototype[c]=function(h,I){return this.makeUnauthenticatedRequest(c,h,I)}:s.prototype[c]=function(h,I){return this.makeRequest(c,h,I)}}})},defineService:function(s,d,c){v.Service._serviceMap[s]=!0,Array.isArray(d)||(c=d,d=[]);var S=u(v.Service,c||{});if(typeof s=="string"){v.Service.addVersions(S,d);var h=S.serviceIdentifier||s;S.serviceIdentifier=h}else S.prototype.api=s,v.Service.defineMethods(S);if(v.SequentialExecutor.call(this.prototype),!this.prototype.publisher&&v.util.clientSideMonitoring){var I=v.util.clientSideMonitoring.Publisher,f=v.util.clientSideMonitoring.configProvider,T=f();this.prototype.publisher=new I(T),T.enabled&&(v.Service._clientSideMonitoring=!0)}return v.SequentialExecutor.call(S.prototype),v.Service.addDefaultMonitoringListeners(S.prototype),S},addVersions:function(s,d){Array.isArray(d)||(d=[d]),s.services=s.services||{};for(var c=0;c<d.length;c++)s.services[d[c]]===void 0&&(s.services[d[c]]=null);s.apiVersions=Object.keys(s.services).sort()},defineServiceApi:function(s,d,c){var S=u(s,{serviceIdentifier:s.serviceIdentifier});function h(I){I.isApi?S.prototype.api=I:S.prototype.api=new E(I,{serviceIdentifier:s.serviceIdentifier})}if(typeof d=="string"){if(c)h(c);else try{h(v.apiLoader(s.serviceIdentifier,d))}catch(I){throw v.util.error(I,{message:"Could not find API configuration "+s.serviceIdentifier+"-"+d})}Object.prototype.hasOwnProperty.call(s.services,d)||(s.apiVersions=s.apiVersions.concat(d).sort()),s.services[d]=S}else h(d);return v.Service.defineMethods(S),S},hasService:function(p){return Object.prototype.hasOwnProperty.call(v.Service._serviceMap,p)},addDefaultMonitoringListeners:function(s){s.addNamedListener("MONITOR_EVENTS_BUBBLE","apiCallAttempt",function(c){var S=Object.getPrototypeOf(s);S._events&&S.emit("apiCallAttempt",[c])}),s.addNamedListener("CALL_EVENTS_BUBBLE","apiCall",function(c){var S=Object.getPrototypeOf(s);S._events&&S.emit("apiCall",[c])})},_serviceMap:{}}),v.util.mixin(v.Service,v.SequentialExecutor),D.exports=v.Service}).call(this)}).call(this,C("_process"))},{"./core":19,"./model/api":40,"./region/utils":55,"./region_config":56,_process:91}],63:[function(C,D,_){var g=C("../core"),v=C("../config_regional_endpoint"),E="AWS_STS_REGIONAL_ENDPOINTS",l="sts_regional_endpoints";g.util.update(g.STS.prototype,{credentialsFrom:function(a,y){return a?(y||(y=new g.TemporaryCredentials),y.expired=!1,y.accessKeyId=a.Credentials.AccessKeyId,y.secretAccessKey=a.Credentials.SecretAccessKey,y.sessionToken=a.Credentials.SessionToken,y.expireTime=a.Credentials.Expiration,y):null},assumeRoleWithWebIdentity:function(a,y){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",a,y)},assumeRoleWithSAML:function(a,y){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",a,y)},setupRequestListeners:function(a){a.addListener("validate",this.optInRegionalEndpoint,!0)},optInRegionalEndpoint:function(a){var y=a.service,p=y.config;if(p.stsRegionalEndpoints=v(y._originalConfig,{env:E,sharedConfig:l,clientConfig:"stsRegionalEndpoints"}),p.stsRegionalEndpoints==="regional"&&y.isGlobalEndpoint){if(!p.region)throw g.util.error(new Error,{code:"ConfigError",message:"Missing region in config"});var s=p.endpoint.indexOf(".amazonaws.com"),d=p.endpoint.substring(0,s)+"."+p.region+p.endpoint.substring(s);a.httpRequest.updateEndpoint(d),a.httpRequest.region=p.region}}})},{"../config_regional_endpoint":18,"../core":19}],64:[function(C,D,_){var g=C("../core");g.Signers.Bearer=g.util.inherit(g.Signers.RequestSigner,{constructor:function(E){g.Signers.RequestSigner.call(this,E)},addAuthorization:function(E){this.request.headers.Authorization="Bearer "+E.token}})},{"../core":19}],65:[function(C,D,_){var g=C("../core"),v=g.util.inherit,E="presigned-expires";function l(a){var y=a.httpRequest.headers[E],p=a.service.getSignerClass(a);if(delete a.httpRequest.headers["User-Agent"],delete a.httpRequest.headers["X-Amz-User-Agent"],p===g.Signers.V4){if(y>604800){var s="Presigning does not support expiry time greater than a week with SigV4 signing.";throw g.util.error(new Error,{code:"InvalidExpiryTime",message:s,retryable:!1})}a.httpRequest.headers[E]=y}else if(p===g.Signers.S3){var d=a.service?a.service.getSkewCorrectedDate():g.util.date.getDate();a.httpRequest.headers[E]=parseInt(g.util.date.unixTimestamp(d)+y,10).toString()}else throw g.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1})}function u(a){var y=a.httpRequest.endpoint,p=g.util.urlParse(a.httpRequest.path),s={};p.search&&(s=g.util.queryStringParse(p.search.substr(1)));var d=a.httpRequest.headers.Authorization.split(" ");if(d[0]==="AWS")d=d[1].split(":"),s.Signature=d.pop(),s.AWSAccessKeyId=d.join(":"),g.util.each(a.httpRequest.headers,function(h,I){h===E&&(h="Expires"),h.indexOf("x-amz-meta-")===0&&(delete s[h],h=h.toLowerCase()),s[h]=I}),delete a.httpRequest.headers[E],delete s.Authorization,delete s.Host;else if(d[0]==="AWS4-HMAC-SHA256"){d.shift();var c=d.join(" "),S=c.match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];s["X-Amz-Signature"]=S,delete s.Expires}y.pathname=p.pathname,y.search=g.util.queryParamsToString(s)}g.Signers.Presign=v({sign:function(y,p,s){if(y.httpRequest.headers[E]=p||3600,y.on("build",l),y.on("sign",u),y.removeListener("afterBuild",g.EventListeners.Core.SET_CONTENT_LENGTH),y.removeListener("afterBuild",g.EventListeners.Core.COMPUTE_SHA256),y.emit("beforePresign",[y]),s)y.build(function(){this.response.error?s(this.response.error):s(null,g.util.urlFormat(y.httpRequest.endpoint))});else{if(y.build(),y.response.error)throw y.response.error;return g.util.urlFormat(y.httpRequest.endpoint)}}}),D.exports=g.Signers.Presign},{"../core":19}],66:[function(C,D,_){var g=C("../core"),v=g.util.inherit;g.Signers.RequestSigner=v({constructor:function(l){this.request=l},setServiceClientId:function(l){this.serviceClientId=l},getServiceClientId:function(){return this.serviceClientId}}),g.Signers.RequestSigner.getVersion=function(l){switch(l){case"v2":return g.Signers.V2;case"v3":return g.Signers.V3;case"s3v4":return g.Signers.V4;case"v4":return g.Signers.V4;case"s3":return g.Signers.S3;case"v3https":return g.Signers.V3Https;case"bearer":return g.Signers.Bearer}throw new Error("Unknown signing version "+l)},C("./v2"),C("./v3"),C("./v3https"),C("./v4"),C("./s3"),C("./presign"),C("./bearer")},{"../core":19,"./bearer":64,"./presign":65,"./s3":67,"./v2":68,"./v3":69,"./v3https":70,"./v4":71}],67:[function(C,D,_){var g=C("../core"),v=g.util.inherit;g.Signers.S3=v(g.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,analytics:1,cors:1,lifecycle:1,delete:1,inventory:1,location:1,logging:1,metrics:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(l,u){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=g.util.date.rfc822(u)),l.sessionToken&&(this.request.headers["x-amz-security-token"]=l.sessionToken);var a=this.sign(l.secretAccessKey,this.stringToSign()),y="AWS "+l.accessKeyId+":"+a;this.request.headers.Authorization=y},stringToSign:function(){var l=this.request,u=[];u.push(l.method),u.push(l.headers["Content-MD5"]||""),u.push(l.headers["Content-Type"]||""),u.push(l.headers["presigned-expires"]||"");var a=this.canonicalizedAmzHeaders();return a&&u.push(a),u.push(this.canonicalizedResource()),u.join(`
`)},canonicalizedAmzHeaders:function(){var l=[];g.util.each(this.request.headers,function(a){a.match(/^x-amz-/i)&&l.push(a)}),l.sort(function(a,y){return a.toLowerCase()<y.toLowerCase()?-1:1});var u=[];return g.util.arrayEach.call(this,l,function(a){u.push(a.toLowerCase()+":"+String(this.request.headers[a]))}),u.join(`
`)},canonicalizedResource:function(){var l=this.request,u=l.path.split("?"),a=u[0],y=u[1],p="";if(l.virtualHostedBucket&&(p+="/"+l.virtualHostedBucket),p+=a,y){var s=[];g.util.arrayEach.call(this,y.split("&"),function(d){var c=d.split("=")[0],S=d.split("=")[1];if(this.subResources[c]||this.responseHeaders[c]){var h={name:c};S!==void 0&&(this.subResources[c]?h.value=S:h.value=decodeURIComponent(S)),s.push(h)}}),s.sort(function(d,c){return d.name<c.name?-1:1}),s.length&&(y=[],g.util.arrayEach(s,function(d){d.value===void 0?y.push(d.name):y.push(d.name+"="+d.value)}),p+="?"+y.join("&"))}return p},sign:function(l,u){return g.util.crypto.hmac(l,u,"base64","sha1")}}),D.exports=g.Signers.S3},{"../core":19}],68:[function(C,D,_){var g=C("../core"),v=g.util.inherit;g.Signers.V2=v(g.Signers.RequestSigner,{addAuthorization:function(l,u){u||(u=g.util.date.getDate());var a=this.request;a.params.Timestamp=g.util.date.iso8601(u),a.params.SignatureVersion="2",a.params.SignatureMethod="HmacSHA256",a.params.AWSAccessKeyId=l.accessKeyId,l.sessionToken&&(a.params.SecurityToken=l.sessionToken),delete a.params.Signature,a.params.Signature=this.signature(l),a.body=g.util.queryParamsToString(a.params),a.headers["Content-Length"]=a.body.length},signature:function(l){return g.util.crypto.hmac(l.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var l=[];return l.push(this.request.method),l.push(this.request.endpoint.host.toLowerCase()),l.push(this.request.pathname()),l.push(g.util.queryParamsToString(this.request.params)),l.join(`
`)}}),D.exports=g.Signers.V2},{"../core":19}],69:[function(C,D,_){var g=C("../core"),v=g.util.inherit;g.Signers.V3=v(g.Signers.RequestSigner,{addAuthorization:function(l,u){var a=g.util.date.rfc822(u);this.request.headers["X-Amz-Date"]=a,l.sessionToken&&(this.request.headers["x-amz-security-token"]=l.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(l,a)},authorization:function(l){return"AWS3 AWSAccessKeyId="+l.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(l)},signedHeaders:function(){var l=[];return g.util.arrayEach(this.headersToSign(),function(a){l.push(a.toLowerCase())}),l.sort().join(";")},canonicalHeaders:function(){var l=this.request.headers,u=[];return g.util.arrayEach(this.headersToSign(),function(y){u.push(y.toLowerCase().trim()+":"+String(l[y]).trim())}),u.sort().join(`
`)+`
`},headersToSign:function(){var l=[];return g.util.each(this.request.headers,function(a){(a==="Host"||a==="Content-Encoding"||a.match(/^X-Amz/i))&&l.push(a)}),l},signature:function(l){return g.util.crypto.hmac(l.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var l=[];return l.push(this.request.method),l.push("/"),l.push(""),l.push(this.canonicalHeaders()),l.push(this.request.body),g.util.crypto.sha256(l.join(`
`))}}),D.exports=g.Signers.V3},{"../core":19}],70:[function(C,D,_){var g=C("../core"),v=g.util.inherit;C("./v3"),g.Signers.V3Https=v(g.Signers.V3,{authorization:function(l){return"AWS3-HTTPS AWSAccessKeyId="+l.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(l)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),D.exports=g.Signers.V3Https},{"../core":19,"./v3":69}],71:[function(C,D,_){var g=C("../core"),v=C("./v4_credentials"),E=g.util.inherit,l="presigned-expires";g.Signers.V4=E(g.Signers.RequestSigner,{constructor:function(a,y,p){g.Signers.RequestSigner.call(this,a),this.serviceName=y,p=p||{},this.signatureCache=typeof p.signatureCache=="boolean"?p.signatureCache:!0,this.operation=p.operation,this.signatureVersion=p.signatureVersion},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(a,y){var p=g.util.date.iso8601(y).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(a,p):this.addHeaders(a,p),this.request.headers.Authorization=this.authorization(a,p)},addHeaders:function(a,y){this.request.headers["X-Amz-Date"]=y,a.sessionToken&&(this.request.headers["x-amz-security-token"]=a.sessionToken)},updateForPresigned:function(a,y){var p=this.credentialString(y),s={"X-Amz-Date":y,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":a.accessKeyId+"/"+p,"X-Amz-Expires":this.request.headers[l],"X-Amz-SignedHeaders":this.signedHeaders()};a.sessionToken&&(s["X-Amz-Security-Token"]=a.sessionToken),this.request.headers["Content-Type"]&&(s["Content-Type"]=this.request.headers["Content-Type"]),this.request.headers["Content-MD5"]&&(s["Content-MD5"]=this.request.headers["Content-MD5"]),this.request.headers["Cache-Control"]&&(s["Cache-Control"]=this.request.headers["Cache-Control"]),g.util.each.call(this,this.request.headers,function(c,S){if(c!==l&&this.isSignableHeader(c)){var h=c.toLowerCase();h.indexOf("x-amz-meta-")===0?s[h]=S:h.indexOf("x-amz-")===0&&(s[c]=S)}});var d=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=d+g.util.queryParamsToString(s)},authorization:function(a,y){var p=[],s=this.credentialString(y);return p.push(this.algorithm+" Credential="+a.accessKeyId+"/"+s),p.push("SignedHeaders="+this.signedHeaders()),p.push("Signature="+this.signature(a,y)),p.join(", ")},signature:function(a,y){var p=v.getSigningKey(a,y.substr(0,8),this.request.region,this.serviceName,this.signatureCache);return g.util.crypto.hmac(p,this.stringToSign(y),"hex")},stringToSign:function(a){var y=[];return y.push("AWS4-HMAC-SHA256"),y.push(a),y.push(this.credentialString(a)),y.push(this.hexEncodedHash(this.canonicalString())),y.join(`
`)},canonicalString:function(){var a=[],y=this.request.pathname();return this.serviceName!=="s3"&&this.signatureVersion!=="s3v4"&&(y=g.util.uriEscapePath(y)),a.push(this.request.method),a.push(y),a.push(this.request.search()),a.push(this.canonicalHeaders()+`
`),a.push(this.signedHeaders()),a.push(this.hexEncodedBodyHash()),a.join(`
`)},canonicalHeaders:function(){var a=[];g.util.each.call(this,this.request.headers,function(p,s){a.push([p,s])}),a.sort(function(p,s){return p[0].toLowerCase()<s[0].toLowerCase()?-1:1});var y=[];return g.util.arrayEach.call(this,a,function(p){var s=p[0].toLowerCase();if(this.isSignableHeader(s)){var d=p[1];if(typeof d>"u"||d===null||typeof d.toString!="function")throw g.util.error(new Error("Header "+s+" contains invalid value"),{code:"InvalidHeader"});y.push(s+":"+this.canonicalHeaderValues(d.toString()))}}),y.join(`
`)},canonicalHeaderValues:function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var a=[];return g.util.each.call(this,this.request.headers,function(y){y=y.toLowerCase(),this.isSignableHeader(y)&&a.push(y)}),a.sort().join(";")},credentialString:function(a){return v.createScope(a.substr(0,8),this.request.region,this.serviceName)},hexEncodedHash:function(a){return g.util.crypto.sha256(a,"hex")},hexEncodedBodyHash:function(){var a=this.request;return this.isPresigned()&&["s3","s3-object-lambda"].indexOf(this.serviceName)>-1&&!a.body?"UNSIGNED-PAYLOAD":a.headers["X-Amz-Content-Sha256"]?a.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",l,"expect","x-amzn-trace-id"],isSignableHeader:function(a){return a.toLowerCase().indexOf("x-amz-")===0?!0:this.unsignableHeaders.indexOf(a)<0},isPresigned:function(){return!!this.request.headers[l]}}),D.exports=g.Signers.V4},{"../core":19,"./v4_credentials":72}],72:[function(C,D,_){var g=C("../core"),v={},E=[],l=50,u="aws4_request";D.exports={createScope:function(y,p,s){return[y.substr(0,8),p,s,u].join("/")},getSigningKey:function(y,p,s,d,c){var S=g.util.crypto.hmac(y.secretAccessKey,y.accessKeyId,"base64"),h=[S,p,s,d].join("_");if(c=c!==!1,c&&h in v)return v[h];var I=g.util.crypto.hmac("AWS4"+y.secretAccessKey,p,"buffer"),f=g.util.crypto.hmac(I,s,"buffer"),T=g.util.crypto.hmac(f,d,"buffer"),w=g.util.crypto.hmac(T,u,"buffer");return c&&(v[h]=w,E.push(h),E.length>l&&delete v[E.shift()]),w},emptyCache:function(){v={},E=[]}}},{"../core":19}],73:[function(C,D,_){function g(v,E){this.currentState=E||null,this.states=v||{}}g.prototype.runTo=function(E,l,u,a){typeof E=="function"&&(a=u,u=l,l=E,E=null);var y=this,p=y.states[y.currentState];p.fn.call(u||y,a,function(s){if(s)if(p.fail)y.currentState=p.fail;else return l?l.call(u,s):null;else if(p.accept)y.currentState=p.accept;else return l?l.call(u):null;if(y.currentState===E)return l?l.call(u,s):null;y.runTo(E,l,u,s)})},g.prototype.addState=function(E,l,u,a){return typeof l=="function"?(a=l,l=null,u=null):typeof u=="function"&&(a=u,u=null),this.currentState||(this.currentState=E),this.states[E]={accept:l,fail:u,fn:a},this},D.exports=g},{}],74:[function(C,D,_){(function(g,v){(function(){var E,l={environment:"nodejs",engine:function(){if(l.isBrowser()&&typeof navigator<"u")return navigator.userAgent;var a=g.platform+"/"+g.version;return g.env.AWS_EXECUTION_ENV&&(a+=" exec-env/"+g.env.AWS_EXECUTION_ENV),a},userAgent:function(){var a=l.environment,y="aws-sdk-"+a+"/"+C("./core").VERSION;return a==="nodejs"&&(y+=" "+l.engine()),y},uriEscape:function(a){var y=encodeURIComponent(a);return y=y.replace(/[^A-Za-z0-9_.~\-%]+/g,escape),y=y.replace(/[*]/g,function(p){return"%"+p.charCodeAt(0).toString(16).toUpperCase()}),y},uriEscapePath:function(a){var y=[];return l.arrayEach(a.split("/"),function(p){y.push(l.uriEscape(p))}),y.join("/")},urlParse:function(a){return l.url.parse(a)},urlFormat:function(a){return l.url.format(a)},queryStringParse:function(a){return l.querystring.parse(a)},queryParamsToString:function(a){var y=[],p=l.uriEscape,s=Object.keys(a).sort();return l.arrayEach(s,function(d){var c=a[d],S=p(d),h=S+"=";if(Array.isArray(c)){var I=[];l.arrayEach(c,function(f){I.push(p(f))}),h=S+"="+I.sort().join("&"+S+"=")}else c!=null&&(h=S+"="+p(c));y.push(h)}),y.join("&")},readFileSync:function(a){return l.isBrowser()?null:C("fs").readFileSync(a,"utf-8")},base64:{encode:function(a){if(typeof a=="number")throw l.error(new Error("Cannot base64 encode number "+a));if(a===null||typeof a>"u")return a;var y=l.buffer.toBuffer(a);return y.toString("base64")},decode:function(a){if(typeof a=="number")throw l.error(new Error("Cannot base64 decode number "+a));return a===null||typeof a>"u"?a:l.buffer.toBuffer(a,"base64")}},buffer:{toBuffer:function(u,a){return typeof l.Buffer.from=="function"&&l.Buffer.from!==Uint8Array.from?l.Buffer.from(u,a):new l.Buffer(u,a)},alloc:function(u,a,y){if(typeof u!="number")throw new Error("size passed to alloc must be a number.");if(typeof l.Buffer.alloc=="function")return l.Buffer.alloc(u,a,y);var p=new l.Buffer(u);return a!==void 0&&typeof p.fill=="function"&&p.fill(a,void 0,void 0,y),p},toStream:function(a){l.Buffer.isBuffer(a)||(a=l.buffer.toBuffer(a));var y=new l.stream.Readable,p=0;return y._read=function(s){if(p>=a.length)return y.push(null);var d=p+s;d>a.length&&(d=a.length),y.push(a.slice(p,d)),p=d},y},concat:function(u){var a=0,y=0,p=null,s;for(s=0;s<u.length;s++)a+=u[s].length;for(p=l.buffer.alloc(a),s=0;s<u.length;s++)u[s].copy(p,y),y+=u[s].length;return p}},string:{byteLength:function(a){if(a==null)return 0;if(typeof a=="string"&&(a=l.buffer.toBuffer(a)),typeof a.byteLength=="number")return a.byteLength;if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.path=="string")return C("fs").lstatSync(a.path).size;throw l.error(new Error("Cannot determine length of "+a),{object:a})},upperFirst:function(a){return a[0].toUpperCase()+a.substr(1)},lowerFirst:function(a){return a[0].toLowerCase()+a.substr(1)}},ini:{parse:function(a){var y,p={};return l.arrayEach(a.split(/\r?\n/),function(s){s=s.split(/(^|\s)[;#]/)[0].trim();var d=s[0]==="["&&s[s.length-1]==="]";if(d){if(y=s.substring(1,s.length-1),y==="__proto__"||y.split(/\s/)[1]==="__proto__")throw l.error(new Error("Cannot load profile name '"+y+"' from shared ini file."))}else if(y){var c=s.indexOf("="),S=0,h=s.length-1,I=c!==-1&&c!==S&&c!==h;if(I){var f=s.substring(0,c).trim(),T=s.substring(c+1).trim();p[y]=p[y]||{},p[y][f]=T}}}),p}},fn:{noop:function(){},callback:function(u){if(u)throw u},makeAsync:function(a,y){return y&&y<=a.length?a:function(){var p=Array.prototype.slice.call(arguments,0),s=p.pop(),d=a.apply(null,p);s(d)}}},date:{getDate:function(){return E||(E=C("./core")),E.config.systemClockOffset?new Date(new Date().getTime()+E.config.systemClockOffset):new Date},iso8601:function(a){return a===void 0&&(a=l.date.getDate()),a.toISOString().replace(/\.\d{3}Z$/,"Z")},rfc822:function(a){return a===void 0&&(a=l.date.getDate()),a.toUTCString()},unixTimestamp:function(a){return a===void 0&&(a=l.date.getDate()),a.getTime()/1e3},from:function(a){return typeof a=="number"?new Date(a*1e3):new Date(a)},format:function(a,y){return y||(y="iso8601"),l.date[y](l.date.from(a))},parseTimestamp:function(a){if(typeof a=="number")return new Date(a*1e3);if(a.match(/^\d+$/))return new Date(a*1e3);if(a.match(/^\d{4}/))return new Date(a);if(a.match(/^\w{3},/))return new Date(a);throw l.error(new Error("unhandled timestamp format: "+a),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(a){var y=l.crypto.crc32Table,p=-1;typeof a=="string"&&(a=l.buffer.toBuffer(a));for(var s=0;s<a.length;s++){var d=a.readUInt8(s);p=p>>>8^y[(p^d)&255]}return(p^-1)>>>0},hmac:function(a,y,p,s){return p||(p="binary"),p==="buffer"&&(p=void 0),s||(s="sha256"),typeof y=="string"&&(y=l.buffer.toBuffer(y)),l.crypto.lib.createHmac(s,a).update(y).digest(p)},md5:function(a,y,p){return l.crypto.hash("md5",a,y,p)},sha256:function(a,y,p){return l.crypto.hash("sha256",a,y,p)},hash:function(u,a,y,p){var s=l.crypto.createHash(u);y||(y="binary"),y==="buffer"&&(y=void 0),typeof a=="string"&&(a=l.buffer.toBuffer(a));var d=l.arraySliceFn(a),c=l.Buffer.isBuffer(a);if(l.isBrowser()&&typeof ArrayBuffer<"u"&&a&&a.buffer instanceof ArrayBuffer&&(c=!0),p&&typeof a=="object"&&typeof a.on=="function"&&!c)a.on("data",function(T){s.update(T)}),a.on("error",function(T){p(T)}),a.on("end",function(){p(null,s.digest(y))});else if(p&&d&&!c&&typeof FileReader<"u"){var S=0,h=1024*512,I=new FileReader;I.onerror=function(){p(new Error("Failed to read data."))},I.onload=function(){var T=new l.Buffer(new Uint8Array(I.result));s.update(T),S+=T.length,I._continueReading()},I._continueReading=function(){if(S>=a.size){p(null,s.digest(y));return}var T=S+h;T>a.size&&(T=a.size),I.readAsArrayBuffer(d.call(a,S,T))},I._continueReading()}else{l.isBrowser()&&typeof a=="object"&&!c&&(a=new l.Buffer(new Uint8Array(a)));var f=s.update(a).digest(y);return p&&p(null,f),f}},toHex:function(a){for(var y=[],p=0;p<a.length;p++)y.push(("0"+a.charCodeAt(p).toString(16)).substr(-2,2));return y.join("")},createHash:function(a){return l.crypto.lib.createHash(a)}},abort:{},each:function(a,y){for(var p in a)if(Object.prototype.hasOwnProperty.call(a,p)){var s=y.call(this,p,a[p]);if(s===l.abort)break}},arrayEach:function(a,y){for(var p in a)if(Object.prototype.hasOwnProperty.call(a,p)){var s=y.call(this,a[p],parseInt(p,10));if(s===l.abort)break}},update:function(a,y){return l.each(y,function(s,d){a[s]=d}),a},merge:function(a,y){return l.update(l.copy(a),y)},copy:function(a){if(a==null)return a;var y={};for(var p in a)y[p]=a[p];return y},isEmpty:function(a){for(var y in a)if(Object.prototype.hasOwnProperty.call(a,y))return!1;return!0},arraySliceFn:function(a){var y=a.slice||a.webkitSlice||a.mozSlice;return typeof y=="function"?y:null},isType:function(a,y){return typeof y=="function"&&(y=l.typeName(y)),Object.prototype.toString.call(a)==="[object "+y+"]"},typeName:function(a){if(Object.prototype.hasOwnProperty.call(a,"name"))return a.name;var y=a.toString(),p=y.match(/^\s*function (.+)\(/);return p?p[1]:y},error:function(a,y){var p=null;typeof a.message=="string"&&a.message!==""&&(typeof y=="string"||y&&y.message)&&(p=l.copy(a),p.message=a.message),a.message=a.message||null,typeof y=="string"?a.message=y:typeof y=="object"&&y!==null&&(l.update(a,y),y.message&&(a.message=y.message),(y.code||y.name)&&(a.code=y.code||y.name),y.stack&&(a.stack=y.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(a,"name",{writable:!0,enumerable:!1}),Object.defineProperty(a,"message",{enumerable:!0})),a.name=String(y&&y.name||a.name||a.code||"Error"),a.time=new Date,p&&(a.originalError=p);for(var s in y||{})if(s[0]==="["&&s[s.length-1]==="]"){if(s=s.slice(1,-1),s==="code"||s==="message")continue;a["["+s+"]"]="See error."+s+" for details.",Object.defineProperty(a,s,{value:a[s]||y&&y[s]||p&&p[s],enumerable:!1,writable:!0})}return a},inherit:function(a,y){var p=null;if(y===void 0)y=a,a=Object,p={};else{var s=function(){};s.prototype=a.prototype,p=new s}return y.constructor===Object&&(y.constructor=function(){if(a!==Object)return a.apply(this,arguments)}),y.constructor.prototype=p,l.update(y.constructor.prototype,y),y.constructor.__super__=a,y.constructor},mixin:function(){for(var a=arguments[0],y=1;y<arguments.length;y++)for(var p in arguments[y].prototype){var s=arguments[y].prototype[p];p!=="constructor"&&(a.prototype[p]=s)}return a},hideProperties:function(a,y){typeof Object.defineProperty=="function"&&l.arrayEach(y,function(p){Object.defineProperty(a,p,{enumerable:!1,writable:!0,configurable:!0})})},property:function(a,y,p,s,d){var c={configurable:!0,enumerable:s!==void 0?s:!0};typeof p=="function"&&!d?c.get=p:(c.value=p,c.writable=!0),Object.defineProperty(a,y,c)},memoizedProperty:function(a,y,p,s){var d=null;l.property(a,y,function(){return d===null&&(d=p()),d},s)},hoistPayloadMember:function(a){var y=a.request,p=y.operation,s=y.service.api.operations[p],d=s.output;if(d.payload&&!s.hasEventOutput){var c=d.members[d.payload],S=a.data[d.payload];c.type==="structure"&&l.each(S,function(h,I){l.property(a.data,h,I,!1)})}},computeSha256:function(a,y){if(l.isNode()){var p=l.stream.Stream,s=C("fs");if(typeof p=="function"&&a instanceof p)if(typeof a.path=="string"){var d={};typeof a.start=="number"&&(d.start=a.start),typeof a.end=="number"&&(d.end=a.end),a=s.createReadStream(a.path,d)}else return y(new Error("Non-file stream objects are not supported with SigV4"))}l.crypto.sha256(a,"hex",function(c,S){c?y(c):y(null,S)})},isClockSkewed:function(a){if(a)return l.property(E.config,"isClockSkewed",Math.abs(new Date().getTime()-a)>=3e5,!1),E.config.isClockSkewed},applyClockOffset:function(a){a&&(E.config.systemClockOffset=a-new Date().getTime())},extractRequestId:function(a){var y=a.httpResponse.headers["x-amz-request-id"]||a.httpResponse.headers["x-amzn-requestid"];!y&&a.data&&a.data.ResponseMetadata&&(y=a.data.ResponseMetadata.RequestId),y&&(a.requestId=y),a.error&&(a.error.requestId=y)},addPromises:function(a,y){var p=!1;y===void 0&&E&&E.config&&(y=E.config.getPromisesDependency()),y===void 0&&typeof Promise<"u"&&(y=Promise),typeof y!="function"&&(p=!0),Array.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++){var d=a[s];p?d.deletePromisesFromClass&&d.deletePromisesFromClass():d.addPromisesToClass&&d.addPromisesToClass(y)}},promisifyMethod:function(a,y){return function(){var s=this,d=Array.prototype.slice.call(arguments);return new y(function(c,S){d.push(function(h,I){h?S(h):c(I)}),s[a].apply(s,d)})}},isDualstackAvailable:function(a){if(!a)return!1;var y=C("../apis/metadata.json");return typeof a!="string"&&(a=a.serviceIdentifier),typeof a!="string"||!y.hasOwnProperty(a)?!1:!!y[a].dualstackAvailable},calculateRetryDelay:function(a,y,p){y||(y={});var s=y.customBackoff||null;if(typeof s=="function")return s(a,p);var d=typeof y.base=="number"?y.base:100,c=Math.random()*(Math.pow(2,a)*d);return c},handleRequestWithRetries:function(a,y,p){y||(y={});var s=E.HttpClient.getInstance(),d=y.httpOptions||{},c=0,S=function(I){var f=y.maxRetries||0;if(I&&I.code==="TimeoutError"&&(I.retryable=!0),I&&I.retryable&&c<f){var T=l.calculateRetryDelay(c,y.retryDelayOptions,I);if(T>=0){c++,setTimeout(h,T+(I.retryAfter||0));return}}p(I)},h=function(){var I="";s.handleRequest(a,d,function(f){f.on("data",function(T){I+=T.toString()}),f.on("end",function(){var T=f.statusCode;if(T<300)p(null,I);else{var w=parseInt(f.headers["retry-after"],10)*1e3||0,x=l.error(new Error,{statusCode:T,retryable:T>=500||T===429});w&&x.retryable&&(x.retryAfter=w),S(x)}})},S)};E.util.defer(h)},uuid:{v4:function(){return C("uuid").v4()}},convertPayloadToString:function(a){var y=a.request,p=y.operation,s=y.service.api.operations[p].output||{};s.payload&&a.data[s.payload]&&(a.data[s.payload]=a.data[s.payload].toString())},defer:function(a){typeof g=="object"&&typeof g.nextTick=="function"?g.nextTick(a):typeof v=="function"?v(a):setTimeout(a,0)},getRequestPayloadShape:function(a){var y=a.service.api.operations;if(y){var p=(y||{})[a.operation];if(!(!p||!p.input||!p.input.payload))return p.input.members[p.input.payload]}},getProfilesFromSharedConfig:function(a,y){var p={},s={};if(g.env[l.configOptInEnv])var s=a.loadFrom({isConfig:!0,filename:g.env[l.sharedConfigFileEnv]});var d={};try{var d=a.loadFrom({filename:y||g.env[l.configOptInEnv]&&g.env[l.sharedCredentialsFileEnv]})}catch(I){if(!g.env[l.configOptInEnv])throw I}for(var c=0,S=Object.keys(s);c<S.length;c++)p[S[c]]=h(p[S[c]]||{},s[S[c]]);for(var c=0,S=Object.keys(d);c<S.length;c++)p[S[c]]=h(p[S[c]]||{},d[S[c]]);return p;function h(I,f){for(var T=0,w=Object.keys(f);T<w.length;T++)I[w[T]]=f[w[T]];return I}},ARN:{validate:function(a){return a&&a.indexOf("arn:")===0&&a.split(":").length>=6},parse:function(a){var y=a.split(":");return{partition:y[1],service:y[2],region:y[3],accountId:y[4],resource:y.slice(5).join(":")}},build:function(a){if(a.service===void 0||a.region===void 0||a.accountId===void 0||a.resource===void 0)throw l.error(new Error("Input ARN object is invalid"));return"arn:"+(a.partition||"aws")+":"+a.service+":"+a.region+":"+a.accountId+":"+a.resource}},defaultProfile:"default",configOptInEnv:"AWS_SDK_LOAD_CONFIG",sharedCredentialsFileEnv:"AWS_SHARED_CREDENTIALS_FILE",sharedConfigFileEnv:"AWS_CONFIG_FILE",imdsDisabledEnv:"AWS_EC2_METADATA_DISABLED"};D.exports=l}).call(this)}).call(this,C("_process"),C("timers").setImmediate)},{"../apis/metadata.json":4,"./core":19,_process:91,fs:82,timers:99,uuid:102}],75:[function(C,D,_){var g=C("../util"),v=C("../model/shape");function E(){}E.prototype.parse=function(c,S){if(c.replace(/^\s+/,"")==="")return{};var h,I;try{if(window.DOMParser){try{var f=new DOMParser;h=f.parseFromString(c,"text/xml")}catch(F){throw g.error(new Error("Parse error in document"),{originalError:F,code:"XMLParserError",retryable:!0})}if(h.documentElement===null)throw g.error(new Error("Cannot parse empty document."),{code:"XMLParserError",retryable:!0});var T=h.getElementsByTagName("parsererror")[0];if(T&&(T.parentNode===h||T.parentNode.nodeName==="body"||T.parentNode.parentNode===h||T.parentNode.parentNode.nodeName==="body")){var w=T.getElementsByTagName("div")[0]||T;throw g.error(new Error(w.textContent||"Parser error in document"),{code:"XMLParserError",retryable:!0})}}else if(window.ActiveXObject){if(h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async=!1,!h.loadXML(c))throw g.error(new Error("Parse error in document"),{code:"XMLParserError",retryable:!0})}else throw new Error("Cannot load XML parser")}catch(F){I=F}if(h&&h.documentElement&&!I){var x=u(h.documentElement,S),P=l(h.documentElement,"ResponseMetadata");return P&&(x.ResponseMetadata=u(P,{})),x}else{if(I)throw g.error(I||new Error,{code:"XMLParserError",retryable:!0});return{}}};function l(c,S){for(var h=c.getElementsByTagName(S),I=0,f=h.length;I<f;I++)if(h[I].parentNode===c)return h[I]}function u(c,S){switch(S||(S={}),S.type){case"structure":return a(c,S);case"map":return y(c,S);case"list":return p(c,S);case void 0:case null:return d(c);default:return s(c,S)}}function a(c,S){var h={};return c===null||g.each(S.members,function(I,f){if(f.isXmlAttribute){if(Object.prototype.hasOwnProperty.call(c.attributes,f.name)){var T=c.attributes[f.name].value;h[I]=u({textContent:T},f)}}else{var w=f.flattened?c:l(c,f.name);w?h[I]=u(w,f):!f.flattened&&f.type==="list"&&!S.api.xmlNoDefaultLists&&(h[I]=f.defaultValue)}}),h}function y(c,S){for(var h={},I=S.key.name||"key",f=S.value.name||"value",T=S.flattened?S.name:"entry",w=c.firstElementChild;w;){if(w.nodeName===T){var x=l(w,I).textContent,P=l(w,f);h[x]=u(P,S.value)}w=w.nextElementSibling}return h}function p(c,S){for(var h=[],I=S.flattened?S.name:S.member.name||"member",f=c.firstElementChild;f;)f.nodeName===I&&h.push(u(f,S.member)),f=f.nextElementSibling;return h}function s(c,S){if(c.getAttribute){var h=c.getAttribute("encoding");h==="base64"&&(S=new v.create({type:h}))}var I=c.textContent;return I===""&&(I=null),typeof S.toType=="function"?S.toType(I):I}function d(c){if(c==null)return"";if(!c.firstElementChild)return c.parentNode.parentNode===null?{}:c.childNodes.length===0?"":c.textContent;for(var S={type:"structure",members:{}},h=c.firstElementChild;h;){var I=h.nodeName;Object.prototype.hasOwnProperty.call(S.members,I)?S.members[I].type="list":S.members[I]={name:I},h=h.nextElementSibling}return a(c,S)}D.exports=E},{"../model/shape":45,"../util":74}],76:[function(C,D,_){var g=C("../util"),v=C("./xml-node").XmlNode,E=C("./xml-text").XmlText;function l(){}l.prototype.toXML=function(c,S,h,I){var f=new v(h);return d(f,S,!0),u(f,c,S),f.children.length>0||I?f.toString():""};function u(c,S,h){switch(h.type){case"structure":return a(c,S,h);case"map":return y(c,S,h);case"list":return p(c,S,h);default:return s(c,S,h)}}function a(c,S,h){g.arrayEach(h.memberNames,function(I){var f=h.members[I];if(f.location==="body"){var T=S[I],w=f.name;if(T!=null)if(f.isXmlAttribute)c.addAttribute(w,T);else if(f.flattened)u(c,T,f);else{var x=new v(w);c.addChildNode(x),d(x,f),u(x,T,f)}}})}function y(c,S,h){var I=h.key.name||"key",f=h.value.name||"value";g.each(S,function(T,w){var x=new v(h.flattened?h.name:"entry");c.addChildNode(x);var P=new v(I),F=new v(f);x.addChildNode(P),x.addChildNode(F),u(P,T,h.key),u(F,w,h.value)})}function p(c,S,h){h.flattened?g.arrayEach(S,function(I){var f=h.member.name||h.name,T=new v(f);c.addChildNode(T),u(T,I,h.member)}):g.arrayEach(S,function(I){var f=h.member.name||"member",T=new v(f);c.addChildNode(T),u(T,I,h.member)})}function s(c,S,h){c.addChildNode(new E(h.toWireFormat(S)))}function d(c,S,h){var I,f="xmlns";S.xmlNamespaceUri?(I=S.xmlNamespaceUri,S.xmlNamespacePrefix&&(f+=":"+S.xmlNamespacePrefix)):h&&S.api.xmlNamespaceUri&&(I=S.api.xmlNamespaceUri),I&&c.addAttribute(f,I)}D.exports=l},{"../util":74,"./xml-node":79,"./xml-text":80}],77:[function(C,D,_){function g(v){return v.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}D.exports={escapeAttribute:g}},{}],78:[function(C,D,_){function g(v){return v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}D.exports={escapeElement:g}},{}],79:[function(C,D,_){var g=C("./escape-attribute").escapeAttribute;function v(E,l){l===void 0&&(l=[]),this.name=E,this.children=l,this.attributes={}}v.prototype.addAttribute=function(E,l){return this.attributes[E]=l,this},v.prototype.addChildNode=function(E){return this.children.push(E),this},v.prototype.removeAttribute=function(E){return delete this.attributes[E],this},v.prototype.toString=function(){for(var E=!!this.children.length,l="<"+this.name,u=this.attributes,a=0,y=Object.keys(u);a<y.length;a++){var p=y[a],s=u[p];typeof s<"u"&&s!==null&&(l+=" "+p+'="'+g(""+s)+'"')}return l+=E?">"+this.children.map(function(d){return d.toString()}).join("")+"</"+this.name+">":"/>"},D.exports={XmlNode:v}},{"./escape-attribute":77}],80:[function(C,D,_){var g=C("./escape-element").escapeElement;function v(E){this.value=E}v.prototype.toString=function(){return g(""+this.value)},D.exports={XmlText:v}},{"./escape-element":78}],81:[function(C,D,_){"use strict";_.byteLength=p,_.toByteArray=d,_.fromByteArray=h;for(var g=[],v=[],E=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=l.length;u<a;++u)g[u]=l[u],v[l.charCodeAt(u)]=u;v[45]=62,v[95]=63;function y(I){var f=I.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=I.indexOf("=");T===-1&&(T=f);var w=T===f?0:4-T%4;return[T,w]}function p(I){var f=y(I),T=f[0],w=f[1];return(T+w)*3/4-w}function s(I,f,T){return(f+T)*3/4-T}function d(I){var f,T=y(I),w=T[0],x=T[1],P=new E(s(I,w,x)),F=0,W=x>0?w-4:w,V;for(V=0;V<W;V+=4)f=v[I.charCodeAt(V)]<<18|v[I.charCodeAt(V+1)]<<12|v[I.charCodeAt(V+2)]<<6|v[I.charCodeAt(V+3)],P[F++]=f>>16&255,P[F++]=f>>8&255,P[F++]=f&255;return x===2&&(f=v[I.charCodeAt(V)]<<2|v[I.charCodeAt(V+1)]>>4,P[F++]=f&255),x===1&&(f=v[I.charCodeAt(V)]<<10|v[I.charCodeAt(V+1)]<<4|v[I.charCodeAt(V+2)]>>2,P[F++]=f>>8&255,P[F++]=f&255),P}function c(I){return g[I>>18&63]+g[I>>12&63]+g[I>>6&63]+g[I&63]}function S(I,f,T){for(var w,x=[],P=f;P<T;P+=3)w=(I[P]<<16&16711680)+(I[P+1]<<8&65280)+(I[P+2]&255),x.push(c(w));return x.join("")}function h(I){for(var f,T=I.length,w=T%3,x=[],P=16383,F=0,W=T-w;F<W;F+=P)x.push(S(I,F,F+P>W?W:F+P));return w===1?(f=I[T-1],x.push(g[f>>2]+g[f<<4&63]+"==")):w===2&&(f=(I[T-2]<<8)+I[T-1],x.push(g[f>>10]+g[f>>4&63]+g[f<<2&63]+"=")),x.join("")}},{}],82:[function(C,D,_){},{}],83:[function(C,D,_){typeof Object.create=="function"?D.exports=function(v,E){v.super_=E,v.prototype=Object.create(E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}})}:D.exports=function(v,E){v.super_=E;var l=function(){};l.prototype=E.prototype,v.prototype=new l,v.prototype.constructor=v}},{}],84:[function(C,D,_){D.exports=function(v){return v&&typeof v=="object"&&typeof v.copy=="function"&&typeof v.fill=="function"&&typeof v.readUInt8=="function"}},{}],85:[function(C,D,_){(function(g,v){(function(){var E=/%[sdj%]/g;_.format=function(J){if(!W(J)){for(var Z=[],ne=0;ne<arguments.length;ne++)Z.push(a(arguments[ne]));return Z.join(" ")}for(var ne=1,le=arguments,de=le.length,ce=String(J).replace(E,function(ye){if(ye==="%%")return"%";if(ne>=de)return ye;switch(ye){case"%s":return String(le[ne++]);case"%d":return Number(le[ne++]);case"%j":try{return JSON.stringify(le[ne++])}catch{return"[Circular]"}default:return ye}}),re=le[ne];ne<de;re=le[++ne])x(re)||!$(re)?ce+=" "+re:ce+=" "+a(re);return ce},_.deprecate=function(J,Z){if(j(v.process))return function(){return _.deprecate(J,Z).apply(this,arguments)};if(g.noDeprecation===!0)return J;var ne=!1;function le(){if(!ne){if(g.throwDeprecation)throw new Error(Z);g.traceDeprecation?console.trace(Z):console.error(Z),ne=!0}return J.apply(this,arguments)}return le};var l={},u;_.debuglog=function(J){if(j(u)&&(u=g.env.NODE_DEBUG||""),J=J.toUpperCase(),!l[J])if(new RegExp("\\b"+J+"\\b","i").test(u)){var Z=g.pid;l[J]=function(){var ne=_.format.apply(_,arguments);console.error("%s %d: %s",J,Z,ne)}}else l[J]=function(){};return l[J]};function a(J,Z){var ne={seen:[],stylize:p};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),w(Z)?ne.showHidden=Z:Z&&_._extend(ne,Z),j(ne.showHidden)&&(ne.showHidden=!1),j(ne.depth)&&(ne.depth=2),j(ne.colors)&&(ne.colors=!1),j(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=y),d(ne,J,ne.depth)}_.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function y(J,Z){var ne=a.styles[Z];return ne?"\x1B["+a.colors[ne][0]+"m"+J+"\x1B["+a.colors[ne][1]+"m":J}function p(J,Z){return J}function s(J){var Z={};return J.forEach(function(ne,le){Z[ne]=!0}),Z}function d(J,Z,ne){if(J.customInspect&&Z&&ae(Z.inspect)&&Z.inspect!==_.inspect&&!(Z.constructor&&Z.constructor.prototype===Z)){var le=Z.inspect(ne,J);return W(le)||(le=d(J,le,ne)),le}var de=c(J,Z);if(de)return de;var ce=Object.keys(Z),re=s(ce);if(J.showHidden&&(ce=Object.getOwnPropertyNames(Z)),X(Z)&&(ce.indexOf("message")>=0||ce.indexOf("description")>=0))return S(Z);if(ce.length===0){if(ae(Z)){var ye=Z.name?": "+Z.name:"";return J.stylize("[Function"+ye+"]","special")}if(Y(Z))return J.stylize(RegExp.prototype.toString.call(Z),"regexp");if(Se(Z))return J.stylize(Date.prototype.toString.call(Z),"date");if(X(Z))return S(Z)}var Ie="",be=!1,je=["{","}"];if(T(Z)&&(be=!0,je=["[","]"]),ae(Z)){var we=Z.name?": "+Z.name:"";Ie=" [Function"+we+"]"}if(Y(Z)&&(Ie=" "+RegExp.prototype.toString.call(Z)),Se(Z)&&(Ie=" "+Date.prototype.toUTCString.call(Z)),X(Z)&&(Ie=" "+S(Z)),ce.length===0&&(!be||Z.length==0))return je[0]+Ie+je[1];if(ne<0)return Y(Z)?J.stylize(RegExp.prototype.toString.call(Z),"regexp"):J.stylize("[Object]","special");J.seen.push(Z);var Fe;return be?Fe=h(J,Z,ne,re,ce):Fe=ce.map(function(U){return I(J,Z,ne,re,U,be)}),J.seen.pop(),f(Fe,Ie,je)}function c(J,Z){if(j(Z))return J.stylize("undefined","undefined");if(W(Z)){var ne="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(ne,"string")}if(F(Z))return J.stylize(""+Z,"number");if(w(Z))return J.stylize(""+Z,"boolean");if(x(Z))return J.stylize("null","null")}function S(J){return"["+Error.prototype.toString.call(J)+"]"}function h(J,Z,ne,le,de){for(var ce=[],re=0,ye=Z.length;re<ye;++re)Ce(Z,String(re))?ce.push(I(J,Z,ne,le,String(re),!0)):ce.push("");return de.forEach(function(Ie){Ie.match(/^\d+$/)||ce.push(I(J,Z,ne,le,Ie,!0))}),ce}function I(J,Z,ne,le,de,ce){var re,ye,Ie;if(Ie=Object.getOwnPropertyDescriptor(Z,de)||{value:Z[de]},Ie.get?Ie.set?ye=J.stylize("[Getter/Setter]","special"):ye=J.stylize("[Getter]","special"):Ie.set&&(ye=J.stylize("[Setter]","special")),Ce(le,de)||(re="["+de+"]"),ye||(J.seen.indexOf(Ie.value)<0?(x(ne)?ye=d(J,Ie.value,null):ye=d(J,Ie.value,ne-1),ye.indexOf(`
`)>-1&&(ce?ye=ye.split(`
`).map(function(be){return"  "+be}).join(`
`).substr(2):ye=`
`+ye.split(`
`).map(function(be){return"   "+be}).join(`
`))):ye=J.stylize("[Circular]","special")),j(re)){if(ce&&de.match(/^\d+$/))return ye;re=JSON.stringify(""+de),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=J.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=J.stylize(re,"string"))}return re+": "+ye}function f(J,Z,ne){var le=0,de=J.reduce(function(ce,re){return le++,re.indexOf(`
`)>=0&&le++,ce+re.replace(/\u001b\[\d\d?m/g,"").length+1},0);return de>60?ne[0]+(Z===""?"":Z+`
 `)+" "+J.join(`,
  `)+" "+ne[1]:ne[0]+Z+" "+J.join(", ")+" "+ne[1]}function T(J){return Array.isArray(J)}_.isArray=T;function w(J){return typeof J=="boolean"}_.isBoolean=w;function x(J){return J===null}_.isNull=x;function P(J){return J==null}_.isNullOrUndefined=P;function F(J){return typeof J=="number"}_.isNumber=F;function W(J){return typeof J=="string"}_.isString=W;function V(J){return typeof J=="symbol"}_.isSymbol=V;function j(J){return J===void 0}_.isUndefined=j;function Y(J){return $(J)&&$e(J)==="[object RegExp]"}_.isRegExp=Y;function $(J){return typeof J=="object"&&J!==null}_.isObject=$;function Se(J){return $(J)&&$e(J)==="[object Date]"}_.isDate=Se;function X(J){return $(J)&&($e(J)==="[object Error]"||J instanceof Error)}_.isError=X;function ae(J){return typeof J=="function"}_.isFunction=ae;function Te(J){return J===null||typeof J=="boolean"||typeof J=="number"||typeof J=="string"||typeof J=="symbol"||typeof J>"u"}_.isPrimitive=Te,_.isBuffer=C("./support/isBuffer");function $e(J){return Object.prototype.toString.call(J)}function Be(J){return J<10?"0"+J.toString(10):J.toString(10)}var xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Le(){var J=new Date,Z=[Be(J.getHours()),Be(J.getMinutes()),Be(J.getSeconds())].join(":");return[J.getDate(),xe[J.getMonth()],Z].join(" ")}_.log=function(){console.log("%s - %s",Le(),_.format.apply(_,arguments))},_.inherits=C("inherits"),_._extend=function(J,Z){if(!Z||!$(Z))return J;for(var ne=Object.keys(Z),le=ne.length;le--;)J[ne[le]]=Z[ne[le]];return J};function Ce(J,Z){return Object.prototype.hasOwnProperty.call(J,Z)}}).call(this)}).call(this,C("_process"),typeof m.g<"u"?m.g:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":84,_process:91,inherits:83}],86:[function(C,D,_){(function(g,v){(function(){"use strict";var E=C("base64-js"),l=C("ieee754"),u=C("isarray");_.Buffer=s,_.SlowBuffer=P,_.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=g.TYPED_ARRAY_SUPPORT!==void 0?g.TYPED_ARRAY_SUPPORT:a(),_.kMaxLength=y();function a(){try{var O=new Uint8Array(1);return O.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},O.foo()===42&&typeof O.subarray=="function"&&O.subarray(1,1).byteLength===0}catch{return!1}}function y(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(O,R){if(y()<R)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(O=new Uint8Array(R),O.__proto__=s.prototype):(O===null&&(O=new s(R)),O.length=R),O}function s(O,R,N){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(O,R,N);if(typeof O=="number"){if(typeof R=="string")throw new Error("If encoding is specified then the first argument must be a string");return h(this,O)}return d(this,O,R,N)}s.poolSize=8192,s._augment=function(O){return O.__proto__=s.prototype,O};function d(O,R,N,H){if(typeof R=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&R instanceof ArrayBuffer?T(O,R,N,H):typeof R=="string"?I(O,R,N):w(O,R)}s.from=function(O,R,N){return d(null,O,R,N)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0}));function c(O){if(typeof O!="number")throw new TypeError('"size" argument must be a number');if(O<0)throw new RangeError('"size" argument must not be negative')}function S(O,R,N,H){return c(R),R<=0?p(O,R):N!==void 0?typeof H=="string"?p(O,R).fill(N,H):p(O,R).fill(N):p(O,R)}s.alloc=function(O,R,N){return S(null,O,R,N)};function h(O,R){if(c(R),O=p(O,R<0?0:x(R)|0),!s.TYPED_ARRAY_SUPPORT)for(var N=0;N<R;++N)O[N]=0;return O}s.allocUnsafe=function(O){return h(null,O)},s.allocUnsafeSlow=function(O){return h(null,O)};function I(O,R,N){if((typeof N!="string"||N==="")&&(N="utf8"),!s.isEncoding(N))throw new TypeError('"encoding" must be a valid string encoding');var H=F(R,N)|0;O=p(O,H);var z=O.write(R,N);return z!==H&&(O=O.slice(0,z)),O}function f(O,R){var N=R.length<0?0:x(R.length)|0;O=p(O,N);for(var H=0;H<N;H+=1)O[H]=R[H]&255;return O}function T(O,R,N,H){if(R.byteLength,N<0||R.byteLength<N)throw new RangeError("'offset' is out of bounds");if(R.byteLength<N+(H||0))throw new RangeError("'length' is out of bounds");return N===void 0&&H===void 0?R=new Uint8Array(R):H===void 0?R=new Uint8Array(R,N):R=new Uint8Array(R,N,H),s.TYPED_ARRAY_SUPPORT?(O=R,O.__proto__=s.prototype):O=f(O,R),O}function w(O,R){if(s.isBuffer(R)){var N=x(R.length)|0;return O=p(O,N),O.length===0||R.copy(O,0,0,N),O}if(R){if(typeof ArrayBuffer<"u"&&R.buffer instanceof ArrayBuffer||"length"in R)return typeof R.length!="number"||ie(R.length)?p(O,0):f(O,R);if(R.type==="Buffer"&&u(R.data))return f(O,R.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(O){if(O>=y())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y().toString(16)+" bytes");return O|0}function P(O){return+O!=O&&(O=0),s.alloc(+O)}s.isBuffer=function(R){return!!(R!=null&&R._isBuffer)},s.compare=function(R,N){if(!s.isBuffer(R)||!s.isBuffer(N))throw new TypeError("Arguments must be Buffers");if(R===N)return 0;for(var H=R.length,z=N.length,B=0,L=Math.min(H,z);B<L;++B)if(R[B]!==N[B]){H=R[B],z=N[B];break}return H<z?-1:z<H?1:0},s.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(R,N){if(!u(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return s.alloc(0);var H;if(N===void 0)for(N=0,H=0;H<R.length;++H)N+=R[H].length;var z=s.allocUnsafe(N),B=0;for(H=0;H<R.length;++H){var L=R[H];if(!s.isBuffer(L))throw new TypeError('"list" argument must be an Array of Buffers');L.copy(z,B),B+=L.length}return z};function F(O,R){if(s.isBuffer(O))return O.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(O)||O instanceof ArrayBuffer))return O.byteLength;typeof O!="string"&&(O=""+O);var N=O.length;if(N===0)return 0;for(var H=!1;;)switch(R){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":case void 0:return G(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return he(O).length;default:if(H)return G(O).length;R=(""+R).toLowerCase(),H=!0}}s.byteLength=F;function W(O,R,N){var H=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,R>>>=0,N<=R))return"";for(O||(O="utf8");;)switch(O){case"hex":return ne(this,R,N);case"utf8":case"utf-8":return xe(this,R,N);case"ascii":return J(this,R,N);case"latin1":case"binary":return Z(this,R,N);case"base64":return Be(this,R,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,R,N);default:if(H)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),H=!0}}s.prototype._isBuffer=!0;function V(O,R,N){var H=O[R];O[R]=O[N],O[N]=H}s.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<R;N+=2)V(this,N,N+1);return this},s.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<R;N+=4)V(this,N,N+3),V(this,N+1,N+2);return this},s.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<R;N+=8)V(this,N,N+7),V(this,N+1,N+6),V(this,N+2,N+5),V(this,N+3,N+4);return this},s.prototype.toString=function(){var R=this.length|0;return R===0?"":arguments.length===0?xe(this,0,R):W.apply(this,arguments)},s.prototype.equals=function(R){if(!s.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:s.compare(this,R)===0},s.prototype.inspect=function(){var R="",N=_.INSPECT_MAX_BYTES;return this.length>0&&(R=this.toString("hex",0,N).match(/.{2}/g).join(" "),this.length>N&&(R+=" ... ")),"<Buffer "+R+">"},s.prototype.compare=function(R,N,H,z,B){if(!s.isBuffer(R))throw new TypeError("Argument must be a Buffer");if(N===void 0&&(N=0),H===void 0&&(H=R?R.length:0),z===void 0&&(z=0),B===void 0&&(B=this.length),N<0||H>R.length||z<0||B>this.length)throw new RangeError("out of range index");if(z>=B&&N>=H)return 0;if(z>=B)return-1;if(N>=H)return 1;if(N>>>=0,H>>>=0,z>>>=0,B>>>=0,this===R)return 0;for(var L=B-z,A=H-N,M=Math.min(L,A),k=this.slice(z,B),K=R.slice(N,H),q=0;q<M;++q)if(k[q]!==K[q]){L=k[q],A=K[q];break}return L<A?-1:A<L?1:0};function j(O,R,N,H,z){if(O.length===0)return-1;if(typeof N=="string"?(H=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,isNaN(N)&&(N=z?0:O.length-1),N<0&&(N=O.length+N),N>=O.length){if(z)return-1;N=O.length-1}else if(N<0)if(z)N=0;else return-1;if(typeof R=="string"&&(R=s.from(R,H)),s.isBuffer(R))return R.length===0?-1:Y(O,R,N,H,z);if(typeof R=="number")return R=R&255,s.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(O,R,N):Uint8Array.prototype.lastIndexOf.call(O,R,N):Y(O,[R],N,H,z);throw new TypeError("val must be string, number or Buffer")}function Y(O,R,N,H,z){var B=1,L=O.length,A=R.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(O.length<2||R.length<2)return-1;B=2,L/=2,A/=2,N/=2}function M(ue,me){return B===1?ue[me]:ue.readUInt16BE(me*B)}var k;if(z){var K=-1;for(k=N;k<L;k++)if(M(O,k)===M(R,K===-1?0:k-K)){if(K===-1&&(K=k),k-K+1===A)return K*B}else K!==-1&&(k-=k-K),K=-1}else for(N+A>L&&(N=L-A),k=N;k>=0;k--){for(var q=!0,oe=0;oe<A;oe++)if(M(O,k+oe)!==M(R,oe)){q=!1;break}if(q)return k}return-1}s.prototype.includes=function(R,N,H){return this.indexOf(R,N,H)!==-1},s.prototype.indexOf=function(R,N,H){return j(this,R,N,H,!0)},s.prototype.lastIndexOf=function(R,N,H){return j(this,R,N,H,!1)};function $(O,R,N,H){N=Number(N)||0;var z=O.length-N;H?(H=Number(H),H>z&&(H=z)):H=z;var B=R.length;if(B%2!==0)throw new TypeError("Invalid hex string");H>B/2&&(H=B/2);for(var L=0;L<H;++L){var A=parseInt(R.substr(L*2,2),16);if(isNaN(A))return L;O[N+L]=A}return L}function Se(O,R,N,H){return se(G(R,O.length-N),O,N,H)}function X(O,R,N,H){return se(ee(R),O,N,H)}function ae(O,R,N,H){return X(O,R,N,H)}function Te(O,R,N,H){return se(he(R),O,N,H)}function $e(O,R,N,H){return se(pe(R,O.length-N),O,N,H)}s.prototype.write=function(R,N,H,z){if(N===void 0)z="utf8",H=this.length,N=0;else if(H===void 0&&typeof N=="string")z=N,H=this.length,N=0;else if(isFinite(N))N=N|0,isFinite(H)?(H=H|0,z===void 0&&(z="utf8")):(z=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var B=this.length-N;if((H===void 0||H>B)&&(H=B),R.length>0&&(H<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var L=!1;;)switch(z){case"hex":return $(this,R,N,H);case"utf8":case"utf-8":return Se(this,R,N,H);case"ascii":return X(this,R,N,H);case"latin1":case"binary":return ae(this,R,N,H);case"base64":return Te(this,R,N,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,R,N,H);default:if(L)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),L=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Be(O,R,N){return R===0&&N===O.length?E.fromByteArray(O):E.fromByteArray(O.slice(R,N))}function xe(O,R,N){N=Math.min(O.length,N);for(var H=[],z=R;z<N;){var B=O[z],L=null,A=B>239?4:B>223?3:B>191?2:1;if(z+A<=N){var M,k,K,q;switch(A){case 1:B<128&&(L=B);break;case 2:M=O[z+1],(M&192)===128&&(q=(B&31)<<6|M&63,q>127&&(L=q));break;case 3:M=O[z+1],k=O[z+2],(M&192)===128&&(k&192)===128&&(q=(B&15)<<12|(M&63)<<6|k&63,q>2047&&(q<55296||q>57343)&&(L=q));break;case 4:M=O[z+1],k=O[z+2],K=O[z+3],(M&192)===128&&(k&192)===128&&(K&192)===128&&(q=(B&15)<<18|(M&63)<<12|(k&63)<<6|K&63,q>65535&&q<1114112&&(L=q))}}L===null?(L=65533,A=1):L>65535&&(L-=65536,H.push(L>>>10&1023|55296),L=56320|L&1023),H.push(L),z+=A}return Ce(H)}var Le=4096;function Ce(O){var R=O.length;if(R<=Le)return String.fromCharCode.apply(String,O);for(var N="",H=0;H<R;)N+=String.fromCharCode.apply(String,O.slice(H,H+=Le));return N}function J(O,R,N){var H="";N=Math.min(O.length,N);for(var z=R;z<N;++z)H+=String.fromCharCode(O[z]&127);return H}function Z(O,R,N){var H="";N=Math.min(O.length,N);for(var z=R;z<N;++z)H+=String.fromCharCode(O[z]);return H}function ne(O,R,N){var H=O.length;(!R||R<0)&&(R=0),(!N||N<0||N>H)&&(N=H);for(var z="",B=R;B<N;++B)z+=Q(O[B]);return z}function le(O,R,N){for(var H=O.slice(R,N),z="",B=0;B<H.length;B+=2)z+=String.fromCharCode(H[B]+H[B+1]*256);return z}s.prototype.slice=function(R,N){var H=this.length;R=~~R,N=N===void 0?H:~~N,R<0?(R+=H,R<0&&(R=0)):R>H&&(R=H),N<0?(N+=H,N<0&&(N=0)):N>H&&(N=H),N<R&&(N=R);var z;if(s.TYPED_ARRAY_SUPPORT)z=this.subarray(R,N),z.__proto__=s.prototype;else{var B=N-R;z=new s(B,void 0);for(var L=0;L<B;++L)z[L]=this[L+R]}return z};function de(O,R,N){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+R>N)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(R,N,H){R=R|0,N=N|0,H||de(R,N,this.length);for(var z=this[R],B=1,L=0;++L<N&&(B*=256);)z+=this[R+L]*B;return z},s.prototype.readUIntBE=function(R,N,H){R=R|0,N=N|0,H||de(R,N,this.length);for(var z=this[R+--N],B=1;N>0&&(B*=256);)z+=this[R+--N]*B;return z},s.prototype.readUInt8=function(R,N){return N||de(R,1,this.length),this[R]},s.prototype.readUInt16LE=function(R,N){return N||de(R,2,this.length),this[R]|this[R+1]<<8},s.prototype.readUInt16BE=function(R,N){return N||de(R,2,this.length),this[R]<<8|this[R+1]},s.prototype.readUInt32LE=function(R,N){return N||de(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},s.prototype.readUInt32BE=function(R,N){return N||de(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},s.prototype.readIntLE=function(R,N,H){R=R|0,N=N|0,H||de(R,N,this.length);for(var z=this[R],B=1,L=0;++L<N&&(B*=256);)z+=this[R+L]*B;return B*=128,z>=B&&(z-=Math.pow(2,8*N)),z},s.prototype.readIntBE=function(R,N,H){R=R|0,N=N|0,H||de(R,N,this.length);for(var z=N,B=1,L=this[R+--z];z>0&&(B*=256);)L+=this[R+--z]*B;return B*=128,L>=B&&(L-=Math.pow(2,8*N)),L},s.prototype.readInt8=function(R,N){return N||de(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},s.prototype.readInt16LE=function(R,N){N||de(R,2,this.length);var H=this[R]|this[R+1]<<8;return H&32768?H|4294901760:H},s.prototype.readInt16BE=function(R,N){N||de(R,2,this.length);var H=this[R+1]|this[R]<<8;return H&32768?H|4294901760:H},s.prototype.readInt32LE=function(R,N){return N||de(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},s.prototype.readInt32BE=function(R,N){return N||de(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},s.prototype.readFloatLE=function(R,N){return N||de(R,4,this.length),l.read(this,R,!0,23,4)},s.prototype.readFloatBE=function(R,N){return N||de(R,4,this.length),l.read(this,R,!1,23,4)},s.prototype.readDoubleLE=function(R,N){return N||de(R,8,this.length),l.read(this,R,!0,52,8)},s.prototype.readDoubleBE=function(R,N){return N||de(R,8,this.length),l.read(this,R,!1,52,8)};function ce(O,R,N,H,z,B){if(!s.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>z||R<B)throw new RangeError('"value" argument is out of bounds');if(N+H>O.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(R,N,H,z){if(R=+R,N=N|0,H=H|0,!z){var B=Math.pow(2,8*H)-1;ce(this,R,N,H,B,0)}var L=1,A=0;for(this[N]=R&255;++A<H&&(L*=256);)this[N+A]=R/L&255;return N+H},s.prototype.writeUIntBE=function(R,N,H,z){if(R=+R,N=N|0,H=H|0,!z){var B=Math.pow(2,8*H)-1;ce(this,R,N,H,B,0)}var L=H-1,A=1;for(this[N+L]=R&255;--L>=0&&(A*=256);)this[N+L]=R/A&255;return N+H},s.prototype.writeUInt8=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,1,255,0),s.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),this[N]=R&255,N+1};function re(O,R,N,H){R<0&&(R=65535+R+1);for(var z=0,B=Math.min(O.length-N,2);z<B;++z)O[N+z]=(R&255<<8*(H?z:1-z))>>>(H?z:1-z)*8}s.prototype.writeUInt16LE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[N]=R&255,this[N+1]=R>>>8):re(this,R,N,!0),N+2},s.prototype.writeUInt16BE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[N]=R>>>8,this[N+1]=R&255):re(this,R,N,!1),N+2};function ye(O,R,N,H){R<0&&(R=4294967295+R+1);for(var z=0,B=Math.min(O.length-N,4);z<B;++z)O[N+z]=R>>>(H?z:3-z)*8&255}s.prototype.writeUInt32LE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[N+3]=R>>>24,this[N+2]=R>>>16,this[N+1]=R>>>8,this[N]=R&255):ye(this,R,N,!0),N+4},s.prototype.writeUInt32BE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255):ye(this,R,N,!1),N+4},s.prototype.writeIntLE=function(R,N,H,z){if(R=+R,N=N|0,!z){var B=Math.pow(2,8*H-1);ce(this,R,N,H,B-1,-B)}var L=0,A=1,M=0;for(this[N]=R&255;++L<H&&(A*=256);)R<0&&M===0&&this[N+L-1]!==0&&(M=1),this[N+L]=(R/A>>0)-M&255;return N+H},s.prototype.writeIntBE=function(R,N,H,z){if(R=+R,N=N|0,!z){var B=Math.pow(2,8*H-1);ce(this,R,N,H,B-1,-B)}var L=H-1,A=1,M=0;for(this[N+L]=R&255;--L>=0&&(A*=256);)R<0&&M===0&&this[N+L+1]!==0&&(M=1),this[N+L]=(R/A>>0)-M&255;return N+H},s.prototype.writeInt8=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,1,127,-128),s.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),R<0&&(R=255+R+1),this[N]=R&255,N+1},s.prototype.writeInt16LE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[N]=R&255,this[N+1]=R>>>8):re(this,R,N,!0),N+2},s.prototype.writeInt16BE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[N]=R>>>8,this[N+1]=R&255):re(this,R,N,!1),N+2},s.prototype.writeInt32LE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[N]=R&255,this[N+1]=R>>>8,this[N+2]=R>>>16,this[N+3]=R>>>24):ye(this,R,N,!0),N+4},s.prototype.writeInt32BE=function(R,N,H){return R=+R,N=N|0,H||ce(this,R,N,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),s.TYPED_ARRAY_SUPPORT?(this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=R&255):ye(this,R,N,!1),N+4};function Ie(O,R,N,H,z,B){if(N+H>O.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function be(O,R,N,H,z){return z||Ie(O,R,N,4,34028234663852886e22,-34028234663852886e22),l.write(O,R,N,H,23,4),N+4}s.prototype.writeFloatLE=function(R,N,H){return be(this,R,N,!0,H)},s.prototype.writeFloatBE=function(R,N,H){return be(this,R,N,!1,H)};function je(O,R,N,H,z){return z||Ie(O,R,N,8,17976931348623157e292,-17976931348623157e292),l.write(O,R,N,H,52,8),N+8}s.prototype.writeDoubleLE=function(R,N,H){return je(this,R,N,!0,H)},s.prototype.writeDoubleBE=function(R,N,H){return je(this,R,N,!1,H)},s.prototype.copy=function(R,N,H,z){if(H||(H=0),!z&&z!==0&&(z=this.length),N>=R.length&&(N=R.length),N||(N=0),z>0&&z<H&&(z=H),z===H||R.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("sourceStart out of bounds");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),R.length-N<z-H&&(z=R.length-N+H);var B=z-H,L;if(this===R&&H<N&&N<z)for(L=B-1;L>=0;--L)R[L+N]=this[L+H];else if(B<1e3||!s.TYPED_ARRAY_SUPPORT)for(L=0;L<B;++L)R[L+N]=this[L+H];else Uint8Array.prototype.set.call(R,this.subarray(H,H+B),N);return B},s.prototype.fill=function(R,N,H,z){if(typeof R=="string"){if(typeof N=="string"?(z=N,N=0,H=this.length):typeof H=="string"&&(z=H,H=this.length),R.length===1){var B=R.charCodeAt(0);B<256&&(R=B)}if(z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!s.isEncoding(z))throw new TypeError("Unknown encoding: "+z)}else typeof R=="number"&&(R=R&255);if(N<0||this.length<N||this.length<H)throw new RangeError("Out of range index");if(H<=N)return this;N=N>>>0,H=H===void 0?this.length:H>>>0,R||(R=0);var L;if(typeof R=="number")for(L=N;L<H;++L)this[L]=R;else{var A=s.isBuffer(R)?R:G(new s(R,z).toString()),M=A.length;for(L=0;L<H-N;++L)this[L+N]=A[L%M]}return this};var we=/[^+\/0-9A-Za-z-_]/g;function Fe(O){if(O=U(O).replace(we,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function U(O){return O.trim?O.trim():O.replace(/^\s+|\s+$/g,"")}function Q(O){return O<16?"0"+O.toString(16):O.toString(16)}function G(O,R){R=R||1/0;for(var N,H=O.length,z=null,B=[],L=0;L<H;++L){if(N=O.charCodeAt(L),N>55295&&N<57344){if(!z){if(N>56319){(R-=3)>-1&&B.push(239,191,189);continue}else if(L+1===H){(R-=3)>-1&&B.push(239,191,189);continue}z=N;continue}if(N<56320){(R-=3)>-1&&B.push(239,191,189),z=N;continue}N=(z-55296<<10|N-56320)+65536}else z&&(R-=3)>-1&&B.push(239,191,189);if(z=null,N<128){if((R-=1)<0)break;B.push(N)}else if(N<2048){if((R-=2)<0)break;B.push(N>>6|192,N&63|128)}else if(N<65536){if((R-=3)<0)break;B.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((R-=4)<0)break;B.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return B}function ee(O){for(var R=[],N=0;N<O.length;++N)R.push(O.charCodeAt(N)&255);return R}function pe(O,R){for(var N,H,z,B=[],L=0;L<O.length&&!((R-=2)<0);++L)N=O.charCodeAt(L),H=N>>8,z=N%256,B.push(z),B.push(H);return B}function he(O){return E.toByteArray(Fe(O))}function se(O,R,N,H){for(var z=0;z<H&&!(z+N>=R.length||z>=O.length);++z)R[z+N]=O[z];return z}function ie(O){return O!==O}}).call(this)}).call(this,typeof m.g<"u"?m.g:typeof self<"u"?self:typeof window<"u"?window:{},C("buffer").Buffer)},{"base64-js":81,buffer:86,ieee754:88,isarray:89}],87:[function(C,D,_){function g(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}D.exports=g,g.EventEmitter=g,g.prototype._events=void 0,g.prototype._maxListeners=void 0,g.defaultMaxListeners=10,g.prototype.setMaxListeners=function(a){if(!E(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},g.prototype.emit=function(a){var y,p,s,d,c,S;if(this._events||(this._events={}),a==="error"&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(y=arguments[1],y instanceof Error)throw y;var h=new Error('Uncaught, unspecified "error" event. ('+y+")");throw h.context=y,h}if(p=this._events[a],u(p))return!1;if(v(p))switch(arguments.length){case 1:p.call(this);break;case 2:p.call(this,arguments[1]);break;case 3:p.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),p.apply(this,d)}else if(l(p))for(d=Array.prototype.slice.call(arguments,1),S=p.slice(),s=S.length,c=0;c<s;c++)S[c].apply(this,d);return!0},g.prototype.addListener=function(a,y){var p;if(!v(y))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,v(y.listener)?y.listener:y),this._events[a]?l(this._events[a])?this._events[a].push(y):this._events[a]=[this._events[a],y]:this._events[a]=y,l(this._events[a])&&!this._events[a].warned&&(u(this._maxListeners)?p=g.defaultMaxListeners:p=this._maxListeners,p&&p>0&&this._events[a].length>p&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),typeof console.trace=="function"&&console.trace())),this},g.prototype.on=g.prototype.addListener,g.prototype.once=function(a,y){if(!v(y))throw TypeError("listener must be a function");var p=!1;function s(){this.removeListener(a,s),p||(p=!0,y.apply(this,arguments))}return s.listener=y,this.on(a,s),this},g.prototype.removeListener=function(a,y){var p,s,d,c;if(!v(y))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(p=this._events[a],d=p.length,s=-1,p===y||v(p.listener)&&p.listener===y)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,y);else if(l(p)){for(c=d;c-- >0;)if(p[c]===y||p[c].listener&&p[c].listener===y){s=c;break}if(s<0)return this;p.length===1?(p.length=0,delete this._events[a]):p.splice(s,1),this._events.removeListener&&this.emit("removeListener",a,y)}return this},g.prototype.removeAllListeners=function(a){var y,p;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[a]&&delete this._events[a],this;if(arguments.length===0){for(y in this._events)y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events={},this}if(p=this._events[a],v(p))this.removeListener(a,p);else if(p)for(;p.length;)this.removeListener(a,p[p.length-1]);return delete this._events[a],this},g.prototype.listeners=function(a){var y;return!this._events||!this._events[a]?y=[]:v(this._events[a])?y=[this._events[a]]:y=this._events[a].slice(),y},g.prototype.listenerCount=function(a){if(this._events){var y=this._events[a];if(v(y))return 1;if(y)return y.length}return 0},g.listenerCount=function(a,y){return a.listenerCount(y)};function v(a){return typeof a=="function"}function E(a){return typeof a=="number"}function l(a){return typeof a=="object"&&a!==null}function u(a){return a===void 0}},{}],88:[function(C,D,_){_.read=function(g,v,E,l,u){var a,y,p=u*8-l-1,s=(1<<p)-1,d=s>>1,c=-7,S=E?u-1:0,h=E?-1:1,I=g[v+S];for(S+=h,a=I&(1<<-c)-1,I>>=-c,c+=p;c>0;a=a*256+g[v+S],S+=h,c-=8);for(y=a&(1<<-c)-1,a>>=-c,c+=l;c>0;y=y*256+g[v+S],S+=h,c-=8);if(a===0)a=1-d;else{if(a===s)return y?NaN:(I?-1:1)*(1/0);y=y+Math.pow(2,l),a=a-d}return(I?-1:1)*y*Math.pow(2,a-l)},_.write=function(g,v,E,l,u,a){var y,p,s,d=a*8-u-1,c=(1<<d)-1,S=c>>1,h=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=l?0:a-1,f=l?1:-1,T=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(p=isNaN(v)?1:0,y=c):(y=Math.floor(Math.log(v)/Math.LN2),v*(s=Math.pow(2,-y))<1&&(y--,s*=2),y+S>=1?v+=h/s:v+=h*Math.pow(2,1-S),v*s>=2&&(y++,s/=2),y+S>=c?(p=0,y=c):y+S>=1?(p=(v*s-1)*Math.pow(2,u),y=y+S):(p=v*Math.pow(2,S-1)*Math.pow(2,u),y=0));u>=8;g[E+I]=p&255,I+=f,p/=256,u-=8);for(y=y<<u|p,d+=u;d>0;g[E+I]=y&255,I+=f,y/=256,d-=8);g[E+I-f]|=T*128}},{}],89:[function(C,D,_){var g={}.toString;D.exports=Array.isArray||function(v){return g.call(v)=="[object Array]"}},{}],90:[function(C,D,_){(function(g){"use strict";function v(A){return A!==null?Object.prototype.toString.call(A)==="[object Array]":!1}function E(A){return A!==null?Object.prototype.toString.call(A)==="[object Object]":!1}function l(A,M){if(A===M)return!0;var k=Object.prototype.toString.call(A);if(k!==Object.prototype.toString.call(M))return!1;if(v(A)===!0){if(A.length!==M.length)return!1;for(var K=0;K<A.length;K++)if(l(A[K],M[K])===!1)return!1;return!0}if(E(A)===!0){var q={};for(var oe in A)if(hasOwnProperty.call(A,oe)){if(l(A[oe],M[oe])===!1)return!1;q[oe]=!0}for(var ue in M)if(hasOwnProperty.call(M,ue)&&q[ue]!==!0)return!1;return!0}return!1}function u(A){if(A===""||A===!1||A===null)return!0;if(v(A)&&A.length===0)return!0;if(E(A)){for(var M in A)if(A.hasOwnProperty(M))return!1;return!0}else return!1}function a(A){for(var M=Object.keys(A),k=[],K=0;K<M.length;K++)k.push(A[M[K]]);return k}function y(A,M){var k={};for(var K in A)k[K]=A[K];for(var q in M)k[q]=M[q];return k}var p;typeof String.prototype.trimLeft=="function"?p=function(A){return A.trimLeft()}:p=function(A){return A.match(/^\s*(.*)/)[1]};var s=0,d=1,c=2,S=3,h=4,I=5,f=6,T=7,w=8,x=9,P={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},F="EOF",W="UnquotedIdentifier",V="QuotedIdentifier",j="Rbracket",Y="Rparen",$="Comma",Se="Colon",X="Rbrace",ae="Number",Te="Current",$e="Expref",Be="Pipe",xe="Or",Le="And",Ce="EQ",J="GT",Z="LT",ne="GTE",le="LTE",de="NE",ce="Flatten",re="Star",ye="Filter",Ie="Dot",be="Not",je="Lbrace",we="Lbracket",Fe="Lparen",U="Literal",Q={".":Ie,"*":re,",":$,":":Se,"{":je,"}":X,"]":j,"(":Fe,")":Y,"@":Te},G={"<":!0,">":!0,"=":!0,"!":!0},ee={" ":!0,"	":!0,"\n":!0};function pe(A){return A>="a"&&A<="z"||A>="A"&&A<="Z"||A==="_"}function he(A){return A>="0"&&A<="9"||A==="-"}function se(A){return A>="a"&&A<="z"||A>="A"&&A<="Z"||A>="0"&&A<="9"||A==="_"}function ie(){}ie.prototype={tokenize:function(A){var M=[];this._current=0;for(var k,K,q;this._current<A.length;)if(pe(A[this._current]))k=this._current,K=this._consumeUnquotedIdentifier(A),M.push({type:W,value:K,start:k});else if(Q[A[this._current]]!==void 0)M.push({type:Q[A[this._current]],value:A[this._current],start:this._current}),this._current++;else if(he(A[this._current]))q=this._consumeNumber(A),M.push(q);else if(A[this._current]==="[")q=this._consumeLBracket(A),M.push(q);else if(A[this._current]==='"')k=this._current,K=this._consumeQuotedIdentifier(A),M.push({type:V,value:K,start:k});else if(A[this._current]==="'")k=this._current,K=this._consumeRawStringLiteral(A),M.push({type:U,value:K,start:k});else if(A[this._current]==="`"){k=this._current;var oe=this._consumeLiteral(A);M.push({type:U,value:oe,start:k})}else if(G[A[this._current]]!==void 0)M.push(this._consumeOperator(A));else if(ee[A[this._current]]!==void 0)this._current++;else if(A[this._current]==="&")k=this._current,this._current++,A[this._current]==="&"?(this._current++,M.push({type:Le,value:"&&",start:k})):M.push({type:$e,value:"&",start:k});else if(A[this._current]==="|")k=this._current,this._current++,A[this._current]==="|"?(this._current++,M.push({type:xe,value:"||",start:k})):M.push({type:Be,value:"|",start:k});else{var ue=new Error("Unknown character:"+A[this._current]);throw ue.name="LexerError",ue}return M},_consumeUnquotedIdentifier:function(A){var M=this._current;for(this._current++;this._current<A.length&&se(A[this._current]);)this._current++;return A.slice(M,this._current)},_consumeQuotedIdentifier:function(A){var M=this._current;this._current++;for(var k=A.length;A[this._current]!=='"'&&this._current<k;){var K=this._current;A[K]==="\\"&&(A[K+1]==="\\"||A[K+1]==='"')?K+=2:K++,this._current=K}return this._current++,JSON.parse(A.slice(M,this._current))},_consumeRawStringLiteral:function(A){var M=this._current;this._current++;for(var k=A.length;A[this._current]!=="'"&&this._current<k;){var K=this._current;A[K]==="\\"&&(A[K+1]==="\\"||A[K+1]==="'")?K+=2:K++,this._current=K}this._current++;var q=A.slice(M+1,this._current-1);return q.replace("\\'","'")},_consumeNumber:function(A){var M=this._current;this._current++;for(var k=A.length;he(A[this._current])&&this._current<k;)this._current++;var K=parseInt(A.slice(M,this._current));return{type:ae,value:K,start:M}},_consumeLBracket:function(A){var M=this._current;return this._current++,A[this._current]==="?"?(this._current++,{type:ye,value:"[?",start:M}):A[this._current]==="]"?(this._current++,{type:ce,value:"[]",start:M}):{type:we,value:"[",start:M}},_consumeOperator:function(A){var M=this._current,k=A[M];if(this._current++,k==="!")return A[this._current]==="="?(this._current++,{type:de,value:"!=",start:M}):{type:be,value:"!",start:M};if(k==="<")return A[this._current]==="="?(this._current++,{type:le,value:"<=",start:M}):{type:Z,value:"<",start:M};if(k===">")return A[this._current]==="="?(this._current++,{type:ne,value:">=",start:M}):{type:J,value:">",start:M};if(k==="="&&A[this._current]==="=")return this._current++,{type:Ce,value:"==",start:M}},_consumeLiteral:function(A){this._current++;for(var M=this._current,k=A.length,K;A[this._current]!=="`"&&this._current<k;){var q=this._current;A[q]==="\\"&&(A[q+1]==="\\"||A[q+1]==="`")?q+=2:q++,this._current=q}var oe=p(A.slice(M,this._current));return oe=oe.replace("\\`","`"),this._looksLikeJSON(oe)?K=JSON.parse(oe):K=JSON.parse('"'+oe+'"'),this._current++,K},_looksLikeJSON:function(A){var M='[{"',k=["true","false","null"],K="-0123456789";if(A==="")return!1;if(M.indexOf(A[0])>=0)return!0;if(k.indexOf(A)>=0)return!0;if(K.indexOf(A[0])>=0)try{return JSON.parse(A),!0}catch{return!1}else return!1}};var O={};O[F]=0,O[W]=0,O[V]=0,O[j]=0,O[Y]=0,O[$]=0,O[X]=0,O[ae]=0,O[Te]=0,O[$e]=0,O[Be]=1,O[xe]=2,O[Le]=3,O[Ce]=5,O[J]=5,O[Z]=5,O[ne]=5,O[le]=5,O[de]=5,O[ce]=9,O[re]=20,O[ye]=21,O[Ie]=40,O[be]=45,O[je]=50,O[we]=55,O[Fe]=60;function R(){}R.prototype={parse:function(A){this._loadTokens(A),this.index=0;var M=this.expression(0);if(this._lookahead(0)!==F){var k=this._lookaheadToken(0),K=new Error("Unexpected token type: "+k.type+", value: "+k.value);throw K.name="ParserError",K}return M},_loadTokens:function(A){var M=new ie,k=M.tokenize(A);k.push({type:F,value:"",start:A.length}),this.tokens=k},expression:function(A){var M=this._lookaheadToken(0);this._advance();for(var k=this.nud(M),K=this._lookahead(0);A<O[K];)this._advance(),k=this.led(K,k),K=this._lookahead(0);return k},_lookahead:function(A){return this.tokens[this.index+A].type},_lookaheadToken:function(A){return this.tokens[this.index+A]},_advance:function(){this.index++},nud:function(A){var M,k,K;switch(A.type){case U:return{type:"Literal",value:A.value};case W:return{type:"Field",name:A.value};case V:var q={type:"Field",name:A.value};if(this._lookahead(0)===Fe)throw new Error("Quoted identifier not allowed for function names.");return q;case be:return k=this.expression(O.Not),{type:"NotExpression",children:[k]};case re:return M={type:"Identity"},k=null,this._lookahead(0)===j?k={type:"Identity"}:k=this._parseProjectionRHS(O.Star),{type:"ValueProjection",children:[M,k]};case ye:return this.led(A.type,{type:"Identity"});case je:return this._parseMultiselectHash();case ce:return M={type:ce,children:[{type:"Identity"}]},k=this._parseProjectionRHS(O.Flatten),{type:"Projection",children:[M,k]};case we:return this._lookahead(0)===ae||this._lookahead(0)===Se?(k=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},k)):this._lookahead(0)===re&&this._lookahead(1)===j?(this._advance(),this._advance(),k=this._parseProjectionRHS(O.Star),{type:"Projection",children:[{type:"Identity"},k]}):this._parseMultiselectList();case Te:return{type:Te};case $e:return K=this.expression(O.Expref),{type:"ExpressionReference",children:[K]};case Fe:for(var oe=[];this._lookahead(0)!==Y;)this._lookahead(0)===Te?(K={type:Te},this._advance()):K=this.expression(0),oe.push(K);return this._match(Y),oe[0];default:this._errorToken(A)}},led:function(A,M){var k;switch(A){case Ie:var K=O.Dot;return this._lookahead(0)!==re?(k=this._parseDotRHS(K),{type:"Subexpression",children:[M,k]}):(this._advance(),k=this._parseProjectionRHS(K),{type:"ValueProjection",children:[M,k]});case Be:return k=this.expression(O.Pipe),{type:Be,children:[M,k]};case xe:return k=this.expression(O.Or),{type:"OrExpression",children:[M,k]};case Le:return k=this.expression(O.And),{type:"AndExpression",children:[M,k]};case Fe:for(var q=M.name,oe=[],ue,me;this._lookahead(0)!==Y;)this._lookahead(0)===Te?(ue={type:Te},this._advance()):ue=this.expression(0),this._lookahead(0)===$&&this._match($),oe.push(ue);return this._match(Y),me={type:"Function",name:q,children:oe},me;case ye:var Ye=this.expression(0);return this._match(j),this._lookahead(0)===ce?k={type:"Identity"}:k=this._parseProjectionRHS(O.Filter),{type:"FilterProjection",children:[M,k,Ye]};case ce:var vt={type:ce,children:[M]},nt=this._parseProjectionRHS(O.Flatten);return{type:"Projection",children:[vt,nt]};case Ce:case de:case J:case ne:case Z:case le:return this._parseComparator(M,A);case we:var Ee=this._lookaheadToken(0);return Ee.type===ae||Ee.type===Se?(k=this._parseIndexExpression(),this._projectIfSlice(M,k)):(this._match(re),this._match(j),k=this._parseProjectionRHS(O.Star),{type:"Projection",children:[M,k]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(A){if(this._lookahead(0)===A)this._advance();else{var M=this._lookaheadToken(0),k=new Error("Expected "+A+", got: "+M.type);throw k.name="ParserError",k}},_errorToken:function(A){var M=new Error("Invalid token ("+A.type+'): "'+A.value+'"');throw M.name="ParserError",M},_parseIndexExpression:function(){if(this._lookahead(0)===Se||this._lookahead(1)===Se)return this._parseSliceExpression();var A={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(j),A},_projectIfSlice:function(A,M){var k={type:"IndexExpression",children:[A,M]};return M.type==="Slice"?{type:"Projection",children:[k,this._parseProjectionRHS(O.Star)]}:k},_parseSliceExpression:function(){for(var A=[null,null,null],M=0,k=this._lookahead(0);k!==j&&M<3;){if(k===Se)M++,this._advance();else if(k===ae)A[M]=this._lookaheadToken(0).value,this._advance();else{var K=this._lookahead(0),q=new Error("Syntax error, unexpected token: "+K.value+"("+K.type+")");throw q.name="Parsererror",q}k=this._lookahead(0)}return this._match(j),{type:"Slice",children:A}},_parseComparator:function(A,M){var k=this.expression(O[M]);return{type:"Comparator",name:M,children:[A,k]}},_parseDotRHS:function(A){var M=this._lookahead(0),k=[W,V,re];if(k.indexOf(M)>=0)return this.expression(A);if(M===we)return this._match(we),this._parseMultiselectList();if(M===je)return this._match(je),this._parseMultiselectHash()},_parseProjectionRHS:function(A){var M;if(O[this._lookahead(0)]<10)M={type:"Identity"};else if(this._lookahead(0)===we)M=this.expression(A);else if(this._lookahead(0)===ye)M=this.expression(A);else if(this._lookahead(0)===Ie)this._match(Ie),M=this._parseDotRHS(A);else{var k=this._lookaheadToken(0),K=new Error("Sytanx error, unexpected token: "+k.value+"("+k.type+")");throw K.name="ParserError",K}return M},_parseMultiselectList:function(){for(var A=[];this._lookahead(0)!==j;){var M=this.expression(0);if(A.push(M),this._lookahead(0)===$&&(this._match($),this._lookahead(0)===j))throw new Error("Unexpected token Rbracket")}return this._match(j),{type:"MultiSelectList",children:A}},_parseMultiselectHash:function(){for(var A=[],M=[W,V],k,K,q,oe;;){if(k=this._lookaheadToken(0),M.indexOf(k.type)<0)throw new Error("Expecting an identifier token, got: "+k.type);if(K=k.value,this._advance(),this._match(Se),q=this.expression(0),oe={type:"KeyValuePair",name:K,value:q},A.push(oe),this._lookahead(0)===$)this._match($);else if(this._lookahead(0)===X){this._match(X);break}}return{type:"MultiSelectHash",children:A}}};function N(A){this.runtime=A}N.prototype={search:function(A,M){return this.visit(A,M)},visit:function(A,M){var k,K,q,oe,ue,me,Ye,vt,nt,Ee;switch(A.type){case"Field":return M!==null&&E(M)?(me=M[A.name],me===void 0?null:me):null;case"Subexpression":for(q=this.visit(A.children[0],M),Ee=1;Ee<A.children.length;Ee++)if(q=this.visit(A.children[1],q),q===null)return null;return q;case"IndexExpression":return Ye=this.visit(A.children[0],M),vt=this.visit(A.children[1],Ye),vt;case"Index":if(!v(M))return null;var Et=A.value;return Et<0&&(Et=M.length+Et),q=M[Et],q===void 0&&(q=null),q;case"Slice":if(!v(M))return null;var jt=A.children.slice(0),St=this.computeSliceParams(M.length,jt),lt=St[0],En=St[1],Ot=St[2];if(q=[],Ot>0)for(Ee=lt;Ee<En;Ee+=Ot)q.push(M[Ee]);else for(Ee=lt;Ee>En;Ee+=Ot)q.push(M[Ee]);return q;case"Projection":var at=this.visit(A.children[0],M);if(!v(at))return null;for(nt=[],Ee=0;Ee<at.length;Ee++)K=this.visit(A.children[1],at[Ee]),K!==null&&nt.push(K);return nt;case"ValueProjection":if(at=this.visit(A.children[0],M),!E(at))return null;nt=[];var Cn=a(at);for(Ee=0;Ee<Cn.length;Ee++)K=this.visit(A.children[1],Cn[Ee]),K!==null&&nt.push(K);return nt;case"FilterProjection":if(at=this.visit(A.children[0],M),!v(at))return null;var ve=[],Ke=[];for(Ee=0;Ee<at.length;Ee++)k=this.visit(A.children[2],at[Ee]),u(k)||ve.push(at[Ee]);for(var Ze=0;Ze<ve.length;Ze++)K=this.visit(A.children[1],ve[Ze]),K!==null&&Ke.push(K);return Ke;case"Comparator":switch(oe=this.visit(A.children[0],M),ue=this.visit(A.children[1],M),A.name){case Ce:q=l(oe,ue);break;case de:q=!l(oe,ue);break;case J:q=oe>ue;break;case ne:q=oe>=ue;break;case Z:q=oe<ue;break;case le:q=oe<=ue;break;default:throw new Error("Unknown comparator: "+A.name)}return q;case ce:var ot=this.visit(A.children[0],M);if(!v(ot))return null;var Kt=[];for(Ee=0;Ee<ot.length;Ee++)K=ot[Ee],v(K)?Kt.push.apply(Kt,K):Kt.push(K);return Kt;case"Identity":return M;case"MultiSelectList":if(M===null)return null;for(nt=[],Ee=0;Ee<A.children.length;Ee++)nt.push(this.visit(A.children[Ee],M));return nt;case"MultiSelectHash":if(M===null)return null;nt={};var Lt;for(Ee=0;Ee<A.children.length;Ee++)Lt=A.children[Ee],nt[Lt.name]=this.visit(Lt.value,M);return nt;case"OrExpression":return k=this.visit(A.children[0],M),u(k)&&(k=this.visit(A.children[1],M)),k;case"AndExpression":return oe=this.visit(A.children[0],M),u(oe)===!0?oe:this.visit(A.children[1],M);case"NotExpression":return oe=this.visit(A.children[0],M),u(oe);case"Literal":return A.value;case Be:return Ye=this.visit(A.children[0],M),this.visit(A.children[1],Ye);case Te:return M;case"Function":var Vt=[];for(Ee=0;Ee<A.children.length;Ee++)Vt.push(this.visit(A.children[Ee],M));return this.runtime.callFunction(A.name,Vt);case"ExpressionReference":var ct=A.children[0];return ct.jmespathType=$e,ct;default:throw new Error("Unknown node type: "+A.type)}},computeSliceParams:function(A,M){var k=M[0],K=M[1],q=M[2],oe=[null,null,null];if(q===null)q=1;else if(q===0){var ue=new Error("Invalid slice, step cannot be 0");throw ue.name="RuntimeError",ue}var me=q<0;return k===null?k=me?A-1:0:k=this.capSliceRange(A,k,q),K===null?K=me?-1:A:K=this.capSliceRange(A,K,q),oe[0]=k,oe[1]=K,oe[2]=q,oe},capSliceRange:function(A,M,k){return M<0?(M+=A,M<0&&(M=k<0?-1:0)):M>=A&&(M=k<0?A-1:A),M}};function H(A){this._interpreter=A,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[s]}]},avg:{_func:this._functionAvg,_signature:[{types:[w]}]},ceil:{_func:this._functionCeil,_signature:[{types:[s]}]},contains:{_func:this._functionContains,_signature:[{types:[c,S]},{types:[d]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[c]},{types:[c]}]},floor:{_func:this._functionFloor,_signature:[{types:[s]}]},length:{_func:this._functionLength,_signature:[{types:[c,S,h]}]},map:{_func:this._functionMap,_signature:[{types:[f]},{types:[S]}]},max:{_func:this._functionMax,_signature:[{types:[w,x]}]},merge:{_func:this._functionMerge,_signature:[{types:[h],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[S]},{types:[f]}]},sum:{_func:this._functionSum,_signature:[{types:[w]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[c]},{types:[c]}]},min:{_func:this._functionMin,_signature:[{types:[w,x]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[S]},{types:[f]}]},type:{_func:this._functionType,_signature:[{types:[d]}]},keys:{_func:this._functionKeys,_signature:[{types:[h]}]},values:{_func:this._functionValues,_signature:[{types:[h]}]},sort:{_func:this._functionSort,_signature:[{types:[x,w]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[S]},{types:[f]}]},join:{_func:this._functionJoin,_signature:[{types:[c]},{types:[x]}]},reverse:{_func:this._functionReverse,_signature:[{types:[c,S]}]},to_array:{_func:this._functionToArray,_signature:[{types:[d]}]},to_string:{_func:this._functionToString,_signature:[{types:[d]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[d]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[d],variadic:!0}]}}}H.prototype={callFunction:function(A,M){var k=this.functionTable[A];if(k===void 0)throw new Error("Unknown function: "+A+"()");return this._validateArgs(A,M,k._signature),k._func.call(this,M)},_validateArgs:function(A,M,k){var K;if(k[k.length-1].variadic){if(M.length<k.length)throw K=k.length===1?" argument":" arguments",new Error("ArgumentError: "+A+"() takes at least"+k.length+K+" but received "+M.length)}else if(M.length!==k.length)throw K=k.length===1?" argument":" arguments",new Error("ArgumentError: "+A+"() takes "+k.length+K+" but received "+M.length);for(var q,oe,ue,me=0;me<k.length;me++){ue=!1,q=k[me].types,oe=this._getTypeName(M[me]);for(var Ye=0;Ye<q.length;Ye++)if(this._typeMatches(oe,q[Ye],M[me])){ue=!0;break}if(!ue){var vt=q.map(function(nt){return P[nt]}).join(",");throw new Error("TypeError: "+A+"() expected argument "+(me+1)+" to be type "+vt+" but received type "+P[oe]+" instead.")}}},_typeMatches:function(A,M,k){if(M===d)return!0;if(M===x||M===w||M===S){if(M===S)return A===S;if(A===S){var K;M===w?K=s:M===x&&(K=c);for(var q=0;q<k.length;q++)if(!this._typeMatches(this._getTypeName(k[q]),K,k[q]))return!1;return!0}}else return A===M},_getTypeName:function(A){switch(Object.prototype.toString.call(A)){case"[object String]":return c;case"[object Number]":return s;case"[object Array]":return S;case"[object Boolean]":return I;case"[object Null]":return T;case"[object Object]":return A.jmespathType===$e?f:h}},_functionStartsWith:function(A){return A[0].lastIndexOf(A[1])===0},_functionEndsWith:function(A){var M=A[0],k=A[1];return M.indexOf(k,M.length-k.length)!==-1},_functionReverse:function(A){var M=this._getTypeName(A[0]);if(M===c){for(var k=A[0],K="",q=k.length-1;q>=0;q--)K+=k[q];return K}else{var oe=A[0].slice(0);return oe.reverse(),oe}},_functionAbs:function(A){return Math.abs(A[0])},_functionCeil:function(A){return Math.ceil(A[0])},_functionAvg:function(A){for(var M=0,k=A[0],K=0;K<k.length;K++)M+=k[K];return M/k.length},_functionContains:function(A){return A[0].indexOf(A[1])>=0},_functionFloor:function(A){return Math.floor(A[0])},_functionLength:function(A){return E(A[0])?Object.keys(A[0]).length:A[0].length},_functionMap:function(A){for(var M=[],k=this._interpreter,K=A[0],q=A[1],oe=0;oe<q.length;oe++)M.push(k.visit(K,q[oe]));return M},_functionMerge:function(A){for(var M={},k=0;k<A.length;k++){var K=A[k];for(var q in K)M[q]=K[q]}return M},_functionMax:function(A){if(A[0].length>0){var M=this._getTypeName(A[0][0]);if(M===s)return Math.max.apply(Math,A[0]);for(var k=A[0],K=k[0],q=1;q<k.length;q++)K.localeCompare(k[q])<0&&(K=k[q]);return K}else return null},_functionMin:function(A){if(A[0].length>0){var M=this._getTypeName(A[0][0]);if(M===s)return Math.min.apply(Math,A[0]);for(var k=A[0],K=k[0],q=1;q<k.length;q++)k[q].localeCompare(K)<0&&(K=k[q]);return K}else return null},_functionSum:function(A){for(var M=0,k=A[0],K=0;K<k.length;K++)M+=k[K];return M},_functionType:function(A){switch(this._getTypeName(A[0])){case s:return"number";case c:return"string";case S:return"array";case h:return"object";case I:return"boolean";case f:return"expref";case T:return"null"}},_functionKeys:function(A){return Object.keys(A[0])},_functionValues:function(A){for(var M=A[0],k=Object.keys(M),K=[],q=0;q<k.length;q++)K.push(M[k[q]]);return K},_functionJoin:function(A){var M=A[0],k=A[1];return k.join(M)},_functionToArray:function(A){return this._getTypeName(A[0])===S?A[0]:[A[0]]},_functionToString:function(A){return this._getTypeName(A[0])===c?A[0]:JSON.stringify(A[0])},_functionToNumber:function(A){var M=this._getTypeName(A[0]),k;return M===s?A[0]:M===c&&(k=+A[0],!isNaN(k))?k:null},_functionNotNull:function(A){for(var M=0;M<A.length;M++)if(this._getTypeName(A[M])!==T)return A[M];return null},_functionSort:function(A){var M=A[0].slice(0);return M.sort(),M},_functionSortBy:function(A){var M=A[0].slice(0);if(M.length===0)return M;var k=this._interpreter,K=A[1],q=this._getTypeName(k.visit(K,M[0]));if([s,c].indexOf(q)<0)throw new Error("TypeError");for(var oe=this,ue=[],me=0;me<M.length;me++)ue.push([me,M[me]]);ue.sort(function(vt,nt){var Ee=k.visit(K,vt[1]),Et=k.visit(K,nt[1]);if(oe._getTypeName(Ee)!==q)throw new Error("TypeError: expected "+q+", received "+oe._getTypeName(Ee));if(oe._getTypeName(Et)!==q)throw new Error("TypeError: expected "+q+", received "+oe._getTypeName(Et));return Ee>Et?1:Ee<Et?-1:vt[0]-nt[0]});for(var Ye=0;Ye<ue.length;Ye++)M[Ye]=ue[Ye][1];return M},_functionMaxBy:function(A){for(var M=A[1],k=A[0],K=this.createKeyFunction(M,[s,c]),q=-1/0,oe,ue,me=0;me<k.length;me++)ue=K(k[me]),ue>q&&(q=ue,oe=k[me]);return oe},_functionMinBy:function(A){for(var M=A[1],k=A[0],K=this.createKeyFunction(M,[s,c]),q=1/0,oe,ue,me=0;me<k.length;me++)ue=K(k[me]),ue<q&&(q=ue,oe=k[me]);return oe},createKeyFunction:function(A,M){var k=this,K=this._interpreter,q=function(oe){var ue=K.visit(A,oe);if(M.indexOf(k._getTypeName(ue))<0){var me="TypeError: expected one of "+M+", received "+k._getTypeName(ue);throw new Error(me)}return ue};return q}};function z(A){var M=new R,k=M.parse(A);return k}function B(A){var M=new ie;return M.tokenize(A)}function L(A,M){var k=new R,K=new H,q=new N(K);K._interpreter=q;var oe=k.parse(M);return q.search(oe,A)}g.tokenize=B,g.compile=z,g.search=L,g.strictDeepEqual=l})(typeof _>"u"?this.jmespath={}:_)},{}],91:[function(C,D,_){var g=D.exports={},v,E;function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?v=setTimeout:v=l}catch{v=l}try{typeof clearTimeout=="function"?E=clearTimeout:E=u}catch{E=u}})();function a(T){if(v===setTimeout)return setTimeout(T,0);if((v===l||!v)&&setTimeout)return v=setTimeout,setTimeout(T,0);try{return v(T,0)}catch{try{return v.call(null,T,0)}catch{return v.call(this,T,0)}}}function y(T){if(E===clearTimeout)return clearTimeout(T);if((E===u||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(T);try{return E(T)}catch{try{return E.call(null,T)}catch{return E.call(this,T)}}}var p=[],s=!1,d,c=-1;function S(){!s||!d||(s=!1,d.length?p=d.concat(p):c=-1,p.length&&h())}function h(){if(!s){var T=a(S);s=!0;for(var w=p.length;w;){for(d=p,p=[];++c<w;)d&&d[c].run();c=-1,w=p.length}d=null,s=!1,y(T)}}g.nextTick=function(T){var w=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];p.push(new I(T,w)),p.length===1&&!s&&a(h)};function I(T,w){this.fun=T,this.array=w}I.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={};function f(){}g.on=f,g.addListener=f,g.once=f,g.off=f,g.removeListener=f,g.removeAllListeners=f,g.emit=f,g.prependListener=f,g.prependOnceListener=f,g.listeners=function(T){return[]},g.binding=function(T){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(T){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},{}],92:[function(C,D,_){(function(g){(function(){(function(v){var E=typeof _=="object"&&_&&!_.nodeType&&_,l=typeof D=="object"&&D&&!D.nodeType&&D,u=typeof g=="object"&&g;(u.global===u||u.window===u||u.self===u)&&(v=u);var a,y=2147483647,p=36,s=1,d=26,c=38,S=700,h=72,I=128,f="-",T=/^xn--/,w=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=p-s,W=Math.floor,V=String.fromCharCode,j;function Y(Z){throw new RangeError(P[Z])}function $(Z,ne){for(var le=Z.length,de=[];le--;)de[le]=ne(Z[le]);return de}function Se(Z,ne){var le=Z.split("@"),de="";le.length>1&&(de=le[0]+"@",Z=le[1]),Z=Z.replace(x,".");var ce=Z.split("."),re=$(ce,ne).join(".");return de+re}function X(Z){for(var ne=[],le=0,de=Z.length,ce,re;le<de;)ce=Z.charCodeAt(le++),ce>=55296&&ce<=56319&&le<de?(re=Z.charCodeAt(le++),(re&64512)==56320?ne.push(((ce&1023)<<10)+(re&1023)+65536):(ne.push(ce),le--)):ne.push(ce);return ne}function ae(Z){return $(Z,function(ne){var le="";return ne>65535&&(ne-=65536,le+=V(ne>>>10&1023|55296),ne=56320|ne&1023),le+=V(ne),le}).join("")}function Te(Z){return Z-48<10?Z-22:Z-65<26?Z-65:Z-97<26?Z-97:p}function $e(Z,ne){return Z+22+75*(Z<26)-((ne!=0)<<5)}function Be(Z,ne,le){var de=0;for(Z=le?W(Z/S):Z>>1,Z+=W(Z/ne);Z>F*d>>1;de+=p)Z=W(Z/F);return W(de+(F+1)*Z/(Z+c))}function xe(Z){var ne=[],le=Z.length,de,ce=0,re=I,ye=h,Ie,be,je,we,Fe,U,Q,G,ee;for(Ie=Z.lastIndexOf(f),Ie<0&&(Ie=0),be=0;be<Ie;++be)Z.charCodeAt(be)>=128&&Y("not-basic"),ne.push(Z.charCodeAt(be));for(je=Ie>0?Ie+1:0;je<le;){for(we=ce,Fe=1,U=p;je>=le&&Y("invalid-input"),Q=Te(Z.charCodeAt(je++)),(Q>=p||Q>W((y-ce)/Fe))&&Y("overflow"),ce+=Q*Fe,G=U<=ye?s:U>=ye+d?d:U-ye,!(Q<G);U+=p)ee=p-G,Fe>W(y/ee)&&Y("overflow"),Fe*=ee;de=ne.length+1,ye=Be(ce-we,de,we==0),W(ce/de)>y-re&&Y("overflow"),re+=W(ce/de),ce%=de,ne.splice(ce++,0,re)}return ae(ne)}function Le(Z){var ne,le,de,ce,re,ye,Ie,be,je,we,Fe,U=[],Q,G,ee,pe;for(Z=X(Z),Q=Z.length,ne=I,le=0,re=h,ye=0;ye<Q;++ye)Fe=Z[ye],Fe<128&&U.push(V(Fe));for(de=ce=U.length,ce&&U.push(f);de<Q;){for(Ie=y,ye=0;ye<Q;++ye)Fe=Z[ye],Fe>=ne&&Fe<Ie&&(Ie=Fe);for(G=de+1,Ie-ne>W((y-le)/G)&&Y("overflow"),le+=(Ie-ne)*G,ne=Ie,ye=0;ye<Q;++ye)if(Fe=Z[ye],Fe<ne&&++le>y&&Y("overflow"),Fe==ne){for(be=le,je=p;we=je<=re?s:je>=re+d?d:je-re,!(be<we);je+=p)pe=be-we,ee=p-we,U.push(V($e(we+pe%ee,0))),be=W(pe/ee);U.push(V($e(be,0))),re=Be(le,G,de==ce),le=0,++de}++le,++ne}return U.join("")}function Ce(Z){return Se(Z,function(ne){return T.test(ne)?xe(ne.slice(4).toLowerCase()):ne})}function J(Z){return Se(Z,function(ne){return w.test(ne)?"xn--"+Le(ne):ne})}a={version:"1.4.1",ucs2:{decode:X,encode:ae},decode:xe,encode:Le,toASCII:J,toUnicode:Ce},b=(function(){return a}).call(_,m,_,D),b!==void 0&&(D.exports=b)})(this)}).call(this)}).call(this,typeof m.g<"u"?m.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],93:[function(C,D,_){"use strict";function g(E,l){return Object.prototype.hasOwnProperty.call(E,l)}D.exports=function(E,l,u,a){l=l||"&",u=u||"=";var y={};if(typeof E!="string"||E.length===0)return y;var p=/\+/g;E=E.split(l);var s=1e3;a&&typeof a.maxKeys=="number"&&(s=a.maxKeys);var d=E.length;s>0&&d>s&&(d=s);for(var c=0;c<d;++c){var S=E[c].replace(p,"%20"),h=S.indexOf(u),I,f,T,w;h>=0?(I=S.substr(0,h),f=S.substr(h+1)):(I=S,f=""),T=decodeURIComponent(I),w=decodeURIComponent(f),g(y,T)?v(y[T])?y[T].push(w):y[T]=[y[T],w]:y[T]=w}return y};var v=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"}},{}],94:[function(C,D,_){"use strict";var g=function(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}};D.exports=function(u,a,y,p){return a=a||"&",y=y||"=",u===null&&(u=void 0),typeof u=="object"?E(l(u),function(s){var d=encodeURIComponent(g(s))+y;return v(u[s])?E(u[s],function(c){return d+encodeURIComponent(g(c))}).join(a):d+encodeURIComponent(g(u[s]))}).join(a):p?encodeURIComponent(g(p))+y+encodeURIComponent(g(u)):""};var v=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function E(u,a){if(u.map)return u.map(a);for(var y=[],p=0;p<u.length;p++)y.push(a(u[p],p));return y}var l=Object.keys||function(u){var a=[];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&a.push(y);return a}},{}],95:[function(C,D,_){"use strict";_.decode=_.parse=C("./decode"),_.encode=_.stringify=C("./encode")},{"./decode":93,"./encode":94}],96:[function(C,D,_){"use strict";function g(v,E){return Object.prototype.hasOwnProperty.call(v,E)}D.exports=function(v,E,l,u){E=E||"&",l=l||"=";var a={};if(typeof v!="string"||v.length===0)return a;var y=/\+/g;v=v.split(E);var p=1e3;u&&typeof u.maxKeys=="number"&&(p=u.maxKeys);var s=v.length;p>0&&s>p&&(s=p);for(var d=0;d<s;++d){var c=v[d].replace(y,"%20"),S=c.indexOf(l),h,I,f,T;S>=0?(h=c.substr(0,S),I=c.substr(S+1)):(h=c,I=""),f=decodeURIComponent(h),T=decodeURIComponent(I),g(a,f)?Array.isArray(a[f])?a[f].push(T):a[f]=[a[f],T]:a[f]=T}return a}},{}],97:[function(C,D,_){"use strict";var g=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};D.exports=function(v,E,l,u){return E=E||"&",l=l||"=",v===null&&(v=void 0),typeof v=="object"?Object.keys(v).map(function(a){var y=encodeURIComponent(g(a))+l;return Array.isArray(v[a])?v[a].map(function(p){return y+encodeURIComponent(g(p))}).join(E):y+encodeURIComponent(g(v[a]))}).join(E):u?encodeURIComponent(g(u))+l+encodeURIComponent(g(v)):""}},{}],98:[function(C,D,_){arguments[4][95][0].apply(_,arguments)},{"./decode":96,"./encode":97,dup:95}],99:[function(C,D,_){(function(g,v){(function(){var E=C("process/browser.js").nextTick,l=Function.prototype.apply,u=Array.prototype.slice,a={},y=0;_.setTimeout=function(){return new p(l.call(setTimeout,window,arguments),clearTimeout)},_.setInterval=function(){return new p(l.call(setInterval,window,arguments),clearInterval)},_.clearTimeout=_.clearInterval=function(s){s.close()};function p(s,d){this._id=s,this._clearFn=d}p.prototype.unref=p.prototype.ref=function(){},p.prototype.close=function(){this._clearFn.call(window,this._id)},_.enroll=function(s,d){clearTimeout(s._idleTimeoutId),s._idleTimeout=d},_.unenroll=function(s){clearTimeout(s._idleTimeoutId),s._idleTimeout=-1},_._unrefActive=_.active=function(s){clearTimeout(s._idleTimeoutId);var d=s._idleTimeout;d>=0&&(s._idleTimeoutId=setTimeout(function(){s._onTimeout&&s._onTimeout()},d))},_.setImmediate=typeof g=="function"?g:function(s){var d=y++,c=arguments.length<2?!1:u.call(arguments,1);return a[d]=!0,E(function(){a[d]&&(c?s.apply(null,c):s.call(null),_.clearImmediate(d))}),d},_.clearImmediate=typeof v=="function"?v:function(s){delete a[s]}}).call(this)}).call(this,C("timers").setImmediate,C("timers").clearImmediate)},{"process/browser.js":91,timers:99}],100:[function(C,D,_){var g=C("punycode");_.parse=w,_.resolve=P,_.resolveObject=F,_.format=x,_.Url=v;function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var E=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(u),y=["'"].concat(a),p=["%","/","?",";","#"].concat(y),s=["/","?","#"],d=255,c=/^[a-z0-9A-Z_-]{0,63}$/,S=/^([a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},I={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=C("querystring");function w($,Se,X){if($&&V($)&&$ instanceof v)return $;var ae=new v;return ae.parse($,Se,X),ae}v.prototype.parse=function($,Se,X){if(!W($))throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var ae=$;ae=ae.trim();var Te=E.exec(ae);if(Te){Te=Te[0];var $e=Te.toLowerCase();this.protocol=$e,ae=ae.substr(Te.length)}if(X||Te||ae.match(/^\/\/[^@\/]+@[^@\/]+/)){var Be=ae.substr(0,2)==="//";Be&&!(Te&&I[Te])&&(ae=ae.substr(2),this.slashes=!0)}if(!I[Te]&&(Be||Te&&!f[Te])){for(var xe=-1,Le=0;Le<s.length;Le++){var Ce=ae.indexOf(s[Le]);Ce!==-1&&(xe===-1||Ce<xe)&&(xe=Ce)}var J,Z;xe===-1?Z=ae.lastIndexOf("@"):Z=ae.lastIndexOf("@",xe),Z!==-1&&(J=ae.slice(0,Z),ae=ae.slice(Z+1),this.auth=decodeURIComponent(J)),xe=-1;for(var Le=0;Le<p.length;Le++){var Ce=ae.indexOf(p[Le]);Ce!==-1&&(xe===-1||Ce<xe)&&(xe=Ce)}xe===-1&&(xe=ae.length),this.host=ae.slice(0,xe),ae=ae.slice(xe),this.parseHost(),this.hostname=this.hostname||"";var ne=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ne)for(var le=this.hostname.split(/\./),Le=0,de=le.length;Le<de;Le++){var ce=le[Le];if(ce&&!ce.match(c)){for(var re="",ye=0,Ie=ce.length;ye<Ie;ye++)ce.charCodeAt(ye)>127?re+="x":re+=ce[ye];if(!re.match(c)){var be=le.slice(0,Le),je=le.slice(Le+1),we=ce.match(S);we&&(be.push(we[1]),je.unshift(we[2])),je.length&&(ae="/"+je.join(".")+ae),this.hostname=be.join(".");break}}}if(this.hostname.length>d?this.hostname="":this.hostname=this.hostname.toLowerCase(),!ne){for(var Fe=this.hostname.split("."),U=[],Le=0;Le<Fe.length;++Le){var Q=Fe[Le];U.push(Q.match(/[^A-Za-z0-9_-]/)?"xn--"+g.encode(Q):Q)}this.hostname=U.join(".")}var G=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+G,this.href+=this.host,ne&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ae[0]!=="/"&&(ae="/"+ae))}if(!h[$e])for(var Le=0,de=y.length;Le<de;Le++){var pe=y[Le],he=encodeURIComponent(pe);he===pe&&(he=escape(pe)),ae=ae.split(pe).join(he)}var se=ae.indexOf("#");se!==-1&&(this.hash=ae.substr(se),ae=ae.slice(0,se));var ie=ae.indexOf("?");if(ie!==-1?(this.search=ae.substr(ie),this.query=ae.substr(ie+1),Se&&(this.query=T.parse(this.query)),ae=ae.slice(0,ie)):Se&&(this.search="",this.query={}),ae&&(this.pathname=ae),f[$e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",Q=this.search||"";this.path=G+Q}return this.href=this.format(),this};function x($){return W($)&&($=w($)),$ instanceof v?$.format():v.prototype.format.call($)}v.prototype.format=function(){var $=this.auth||"";$&&($=encodeURIComponent($),$=$.replace(/%3A/i,":"),$+="@");var Se=this.protocol||"",X=this.pathname||"",ae=this.hash||"",Te=!1,$e="";this.host?Te=$+this.host:this.hostname&&(Te=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Te+=":"+this.port)),this.query&&V(this.query)&&Object.keys(this.query).length&&($e=T.stringify(this.query));var Be=this.search||$e&&"?"+$e||"";return Se&&Se.substr(-1)!==":"&&(Se+=":"),this.slashes||(!Se||f[Se])&&Te!==!1?(Te="//"+(Te||""),X&&X.charAt(0)!=="/"&&(X="/"+X)):Te||(Te=""),ae&&ae.charAt(0)!=="#"&&(ae="#"+ae),Be&&Be.charAt(0)!=="?"&&(Be="?"+Be),X=X.replace(/[?#]/g,function(xe){return encodeURIComponent(xe)}),Be=Be.replace("#","%23"),Se+Te+X+Be+ae};function P($,Se){return w($,!1,!0).resolve(Se)}v.prototype.resolve=function($){return this.resolveObject(w($,!1,!0)).format()};function F($,Se){return $?w($,!1,!0).resolveObject(Se):Se}v.prototype.resolveObject=function($){if(W($)){var Se=new v;Se.parse($,!1,!0),$=Se}var X=new v;if(Object.keys(this).forEach(function(Ie){X[Ie]=this[Ie]},this),X.hash=$.hash,$.href==="")return X.href=X.format(),X;if($.slashes&&!$.protocol)return Object.keys($).forEach(function(Ie){Ie!=="protocol"&&(X[Ie]=$[Ie])}),f[X.protocol]&&X.hostname&&!X.pathname&&(X.path=X.pathname="/"),X.href=X.format(),X;if($.protocol&&$.protocol!==X.protocol){if(!f[$.protocol])return Object.keys($).forEach(function(Ie){X[Ie]=$[Ie]}),X.href=X.format(),X;if(X.protocol=$.protocol,!$.host&&!I[$.protocol]){for(var J=($.pathname||"").split("/");J.length&&!($.host=J.shift()););$.host||($.host=""),$.hostname||($.hostname=""),J[0]!==""&&J.unshift(""),J.length<2&&J.unshift(""),X.pathname=J.join("/")}else X.pathname=$.pathname;if(X.search=$.search,X.query=$.query,X.host=$.host||"",X.auth=$.auth,X.hostname=$.hostname||$.host,X.port=$.port,X.pathname||X.search){var ae=X.pathname||"",Te=X.search||"";X.path=ae+Te}return X.slashes=X.slashes||$.slashes,X.href=X.format(),X}var $e=X.pathname&&X.pathname.charAt(0)==="/",Be=$.host||$.pathname&&$.pathname.charAt(0)==="/",xe=Be||$e||X.host&&$.pathname,Le=xe,Ce=X.pathname&&X.pathname.split("/")||[],J=$.pathname&&$.pathname.split("/")||[],Z=X.protocol&&!f[X.protocol];if(Z&&(X.hostname="",X.port=null,X.host&&(Ce[0]===""?Ce[0]=X.host:Ce.unshift(X.host)),X.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(J[0]===""?J[0]=$.host:J.unshift($.host)),$.host=null),xe=xe&&(J[0]===""||Ce[0]==="")),Be)X.host=$.host||$.host===""?$.host:X.host,X.hostname=$.hostname||$.hostname===""?$.hostname:X.hostname,X.search=$.search,X.query=$.query,Ce=J;else if(J.length)Ce||(Ce=[]),Ce.pop(),Ce=Ce.concat(J),X.search=$.search,X.query=$.query;else if(!Y($.search)){if(Z){X.hostname=X.host=Ce.shift();var ne=X.host&&X.host.indexOf("@")>0?X.host.split("@"):!1;ne&&(X.auth=ne.shift(),X.host=X.hostname=ne.shift())}return X.search=$.search,X.query=$.query,(!j(X.pathname)||!j(X.search))&&(X.path=(X.pathname?X.pathname:"")+(X.search?X.search:"")),X.href=X.format(),X}if(!Ce.length)return X.pathname=null,X.search?X.path="/"+X.search:X.path=null,X.href=X.format(),X;for(var le=Ce.slice(-1)[0],de=(X.host||$.host)&&(le==="."||le==="..")||le==="",ce=0,re=Ce.length;re>=0;re--)le=Ce[re],le=="."?Ce.splice(re,1):le===".."?(Ce.splice(re,1),ce++):ce&&(Ce.splice(re,1),ce--);if(!xe&&!Le)for(;ce--;ce)Ce.unshift("..");xe&&Ce[0]!==""&&(!Ce[0]||Ce[0].charAt(0)!=="/")&&Ce.unshift(""),de&&Ce.join("/").substr(-1)!=="/"&&Ce.push("");var ye=Ce[0]===""||Ce[0]&&Ce[0].charAt(0)==="/";if(Z){X.hostname=X.host=ye?"":Ce.length?Ce.shift():"";var ne=X.host&&X.host.indexOf("@")>0?X.host.split("@"):!1;ne&&(X.auth=ne.shift(),X.host=X.hostname=ne.shift())}return xe=xe||X.host&&Ce.length,xe&&!ye&&Ce.unshift(""),Ce.length?X.pathname=Ce.join("/"):(X.pathname=null,X.path=null),(!j(X.pathname)||!j(X.search))&&(X.path=(X.pathname?X.pathname:"")+(X.search?X.search:"")),X.auth=$.auth||X.auth,X.slashes=X.slashes||$.slashes,X.href=X.format(),X},v.prototype.parseHost=function(){var $=this.host,Se=l.exec($);Se&&(Se=Se[0],Se!==":"&&(this.port=Se.substr(1)),$=$.substr(0,$.length-Se.length)),$&&(this.hostname=$)};function W($){return typeof $=="string"}function V($){return typeof $=="object"&&$!==null}function j($){return $===null}function Y($){return $==null}},{punycode:92,querystring:95}],101:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;for(var g=[],v=0;v<256;++v)g[v]=(v+256).toString(16).substr(1);function E(u,a){var y=a||0,p=g;return[p[u[y++]],p[u[y++]],p[u[y++]],p[u[y++]],"-",p[u[y++]],p[u[y++]],"-",p[u[y++]],p[u[y++]],"-",p[u[y++]],p[u[y++]],"-",p[u[y++]],p[u[y++]],p[u[y++]],p[u[y++]],p[u[y++]],p[u[y++]]].join("")}var l=E;_.default=l},{}],102:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"v1",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(_,"v3",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(_,"v4",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(_,"v5",{enumerable:!0,get:function(){return l.default}});var g=u(C("./v1.js")),v=u(C("./v3.js")),E=u(C("./v4.js")),l=u(C("./v5.js"));function u(a){return a&&a.__esModule?a:{default:a}}},{"./v1.js":106,"./v3.js":107,"./v4.js":109,"./v5.js":110}],103:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;function g(h){if(typeof h=="string"){var I=unescape(encodeURIComponent(h));h=new Array(I.length);for(var f=0;f<I.length;f++)h[f]=I.charCodeAt(f)}return v(E(l(h),h.length*8))}function v(h){var I,f,T=[],w=h.length*32,x="0123456789abcdef",P;for(I=0;I<w;I+=8)f=h[I>>5]>>>I%32&255,P=parseInt(x.charAt(f>>>4&15)+x.charAt(f&15),16),T.push(P);return T}function E(h,I){h[I>>5]|=128<<I%32,h[(I+64>>>9<<4)+14]=I;var f,T,w,x,P,F=1732584193,W=-271733879,V=-1732584194,j=271733878;for(f=0;f<h.length;f+=16)T=F,w=W,x=V,P=j,F=p(F,W,V,j,h[f],7,-680876936),j=p(j,F,W,V,h[f+1],12,-389564586),V=p(V,j,F,W,h[f+2],17,606105819),W=p(W,V,j,F,h[f+3],22,-1044525330),F=p(F,W,V,j,h[f+4],7,-176418897),j=p(j,F,W,V,h[f+5],12,1200080426),V=p(V,j,F,W,h[f+6],17,-1473231341),W=p(W,V,j,F,h[f+7],22,-45705983),F=p(F,W,V,j,h[f+8],7,1770035416),j=p(j,F,W,V,h[f+9],12,-1958414417),V=p(V,j,F,W,h[f+10],17,-42063),W=p(W,V,j,F,h[f+11],22,-1990404162),F=p(F,W,V,j,h[f+12],7,1804603682),j=p(j,F,W,V,h[f+13],12,-40341101),V=p(V,j,F,W,h[f+14],17,-1502002290),W=p(W,V,j,F,h[f+15],22,1236535329),F=s(F,W,V,j,h[f+1],5,-165796510),j=s(j,F,W,V,h[f+6],9,-1069501632),V=s(V,j,F,W,h[f+11],14,643717713),W=s(W,V,j,F,h[f],20,-373897302),F=s(F,W,V,j,h[f+5],5,-701558691),j=s(j,F,W,V,h[f+10],9,38016083),V=s(V,j,F,W,h[f+15],14,-660478335),W=s(W,V,j,F,h[f+4],20,-405537848),F=s(F,W,V,j,h[f+9],5,568446438),j=s(j,F,W,V,h[f+14],9,-1019803690),V=s(V,j,F,W,h[f+3],14,-187363961),W=s(W,V,j,F,h[f+8],20,1163531501),F=s(F,W,V,j,h[f+13],5,-1444681467),j=s(j,F,W,V,h[f+2],9,-51403784),V=s(V,j,F,W,h[f+7],14,1735328473),W=s(W,V,j,F,h[f+12],20,-1926607734),F=d(F,W,V,j,h[f+5],4,-378558),j=d(j,F,W,V,h[f+8],11,-2022574463),V=d(V,j,F,W,h[f+11],16,1839030562),W=d(W,V,j,F,h[f+14],23,-35309556),F=d(F,W,V,j,h[f+1],4,-1530992060),j=d(j,F,W,V,h[f+4],11,1272893353),V=d(V,j,F,W,h[f+7],16,-155497632),W=d(W,V,j,F,h[f+10],23,-1094730640),F=d(F,W,V,j,h[f+13],4,681279174),j=d(j,F,W,V,h[f],11,-358537222),V=d(V,j,F,W,h[f+3],16,-722521979),W=d(W,V,j,F,h[f+6],23,76029189),F=d(F,W,V,j,h[f+9],4,-640364487),j=d(j,F,W,V,h[f+12],11,-421815835),V=d(V,j,F,W,h[f+15],16,530742520),W=d(W,V,j,F,h[f+2],23,-995338651),F=c(F,W,V,j,h[f],6,-198630844),j=c(j,F,W,V,h[f+7],10,1126891415),V=c(V,j,F,W,h[f+14],15,-1416354905),W=c(W,V,j,F,h[f+5],21,-57434055),F=c(F,W,V,j,h[f+12],6,1700485571),j=c(j,F,W,V,h[f+3],10,-1894986606),V=c(V,j,F,W,h[f+10],15,-1051523),W=c(W,V,j,F,h[f+1],21,-2054922799),F=c(F,W,V,j,h[f+8],6,1873313359),j=c(j,F,W,V,h[f+15],10,-30611744),V=c(V,j,F,W,h[f+6],15,-1560198380),W=c(W,V,j,F,h[f+13],21,1309151649),F=c(F,W,V,j,h[f+4],6,-145523070),j=c(j,F,W,V,h[f+11],10,-1120210379),V=c(V,j,F,W,h[f+2],15,718787259),W=c(W,V,j,F,h[f+9],21,-343485551),F=u(F,T),W=u(W,w),V=u(V,x),j=u(j,P);return[F,W,V,j]}function l(h){var I,f=[];for(f[(h.length>>2)-1]=void 0,I=0;I<f.length;I+=1)f[I]=0;var T=h.length*8;for(I=0;I<T;I+=8)f[I>>5]|=(h[I/8]&255)<<I%32;return f}function u(h,I){var f=(h&65535)+(I&65535),T=(h>>16)+(I>>16)+(f>>16);return T<<16|f&65535}function a(h,I){return h<<I|h>>>32-I}function y(h,I,f,T,w,x){return u(a(u(u(I,h),u(T,x)),w),f)}function p(h,I,f,T,w,x,P){return y(I&f|~I&T,h,I,w,x,P)}function s(h,I,f,T,w,x,P){return y(I&T|f&~T,h,I,w,x,P)}function d(h,I,f,T,w,x,P){return y(I^f^T,h,I,w,x,P)}function c(h,I,f,T,w,x,P){return y(f^(I|~T),h,I,w,x,P)}var S=g;_.default=S},{}],104:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=E;var g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),v=new Uint8Array(16);function E(){if(!g)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(v)}},{}],105:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;function g(u,a,y,p){switch(u){case 0:return a&y^~a&p;case 1:return a^y^p;case 2:return a&y^a&p^y&p;case 3:return a^y^p}}function v(u,a){return u<<a|u>>>32-a}function E(u){var a=[1518500249,1859775393,2400959708,3395469782],y=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof u=="string"){var p=unescape(encodeURIComponent(u));u=new Array(p.length);for(var s=0;s<p.length;s++)u[s]=p.charCodeAt(s)}u.push(128);for(var d=u.length/4+2,c=Math.ceil(d/16),S=new Array(c),s=0;s<c;s++){S[s]=new Array(16);for(var h=0;h<16;h++)S[s][h]=u[s*64+h*4]<<24|u[s*64+h*4+1]<<16|u[s*64+h*4+2]<<8|u[s*64+h*4+3]}S[c-1][14]=(u.length-1)*8/Math.pow(2,32),S[c-1][14]=Math.floor(S[c-1][14]),S[c-1][15]=(u.length-1)*8&4294967295;for(var s=0;s<c;s++){for(var I=new Array(80),f=0;f<16;f++)I[f]=S[s][f];for(var f=16;f<80;f++)I[f]=v(I[f-3]^I[f-8]^I[f-14]^I[f-16],1);for(var T=y[0],w=y[1],x=y[2],P=y[3],F=y[4],f=0;f<80;f++){var W=Math.floor(f/20),V=v(T,5)+g(W,w,x,P)+F+a[W]+I[f]>>>0;F=P,P=x,x=v(w,30)>>>0,w=T,T=V}y[0]=y[0]+T>>>0,y[1]=y[1]+w>>>0,y[2]=y[2]+x>>>0,y[3]=y[3]+P>>>0,y[4]=y[4]+F>>>0}return[y[0]>>24&255,y[0]>>16&255,y[0]>>8&255,y[0]&255,y[1]>>24&255,y[1]>>16&255,y[1]>>8&255,y[1]&255,y[2]>>24&255,y[2]>>16&255,y[2]>>8&255,y[2]&255,y[3]>>24&255,y[3]>>16&255,y[3]>>8&255,y[3]&255,y[4]>>24&255,y[4]>>16&255,y[4]>>8&255,y[4]&255]}var l=E;_.default=l},{}],106:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var g=E(C("./rng.js")),v=E(C("./bytesToUuid.js"));function E(d){return d&&d.__esModule?d:{default:d}}var l,u,a=0,y=0;function p(d,c,S){var h=c&&S||0,I=c||[];d=d||{};var f=d.node||l,T=d.clockseq!==void 0?d.clockseq:u;if(f==null||T==null){var w=d.random||(d.rng||g.default)();f==null&&(f=l=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),T==null&&(T=u=(w[6]<<8|w[7])&16383)}var x=d.msecs!==void 0?d.msecs:new Date().getTime(),P=d.nsecs!==void 0?d.nsecs:y+1,F=x-a+(P-y)/1e4;if(F<0&&d.clockseq===void 0&&(T=T+1&16383),(F<0||x>a)&&d.nsecs===void 0&&(P=0),P>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=x,y=P,u=T,x+=122192928e5;var W=((x&268435455)*1e4+P)%4294967296;I[h++]=W>>>24&255,I[h++]=W>>>16&255,I[h++]=W>>>8&255,I[h++]=W&255;var V=x/4294967296*1e4&268435455;I[h++]=V>>>8&255,I[h++]=V&255,I[h++]=V>>>24&15|16,I[h++]=V>>>16&255,I[h++]=T>>>8|128,I[h++]=T&255;for(var j=0;j<6;++j)I[h+j]=f[j];return c||(0,v.default)(I)}var s=p;_.default=s},{"./bytesToUuid.js":101,"./rng.js":104}],107:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var g=E(C("./v35.js")),v=E(C("./md5.js"));function E(a){return a&&a.__esModule?a:{default:a}}var u=(0,g.default)("v3",48,v.default);_.default=u},{"./md5.js":103,"./v35.js":108}],108:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=y,_.URL=_.DNS=void 0;var g=v(C("./bytesToUuid.js"));function v(p){return p&&p.__esModule?p:{default:p}}function E(p){var s=[];return p.replace(/[a-fA-F0-9]{2}/g,function(d){s.push(parseInt(d,16))}),s}function l(p){p=unescape(encodeURIComponent(p));for(var s=new Array(p.length),d=0;d<p.length;d++)s[d]=p.charCodeAt(d);return s}let u="6ba7b810-9dad-11d1-80b4-00c04fd430c8";_.DNS=u;let a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";_.URL=a;function y(p,s,d){var c=function(S,h,I,f){var T=I&&f||0;if(typeof S=="string"&&(S=l(S)),typeof h=="string"&&(h=E(h)),!Array.isArray(S))throw TypeError("value must be an array of bytes");if(!Array.isArray(h)||h.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var w=d(h.concat(S));if(w[6]=w[6]&15|s,w[8]=w[8]&63|128,I)for(var x=0;x<16;++x)I[T+x]=w[x];return I||(0,g.default)(w)};try{c.name=p}catch{}return c.DNS=u,c.URL=a,c}},{"./bytesToUuid.js":101}],109:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var g=E(C("./rng.js")),v=E(C("./bytesToUuid.js"));function E(a){return a&&a.__esModule?a:{default:a}}function l(a,y,p){var s=y&&p||0;typeof a=="string"&&(y=a==="binary"?new Array(16):null,a=null),a=a||{};var d=a.random||(a.rng||g.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,y)for(var c=0;c<16;++c)y[s+c]=d[c];return y||(0,v.default)(d)}var u=l;_.default=u},{"./bytesToUuid.js":101,"./rng.js":104}],110:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var g=E(C("./v35.js")),v=E(C("./sha1.js"));function E(a){return a&&a.__esModule?a:{default:a}}var u=(0,g.default)("v5",80,v.default);_.default=u},{"./sha1.js":105,"./v35.js":108}],111:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var g=C("./utils/LRU"),v=1e3,E=function(){function l(u){u===void 0&&(u=v),this.maxSize=u,this.cache=new g.LRUCache(u)}return Object.defineProperty(l.prototype,"size",{get:function(){return this.cache.length},enumerable:!0,configurable:!0}),l.prototype.put=function(u,a){var y=typeof u!="string"?l.getKeyString(u):u,p=this.populateValue(a);this.cache.put(y,p)},l.prototype.get=function(u){var a=typeof u!="string"?l.getKeyString(u):u,y=Date.now(),p=this.cache.get(a);if(p){for(var s=p.length-1;s>=0;s--){var d=p[s];d.Expire<y&&p.splice(s,1)}if(p.length===0){this.cache.remove(a);return}}return p},l.getKeyString=function(u){for(var a=[],y=Object.keys(u).sort(),p=0;p<y.length;p++){var s=y[p];u[s]!==void 0&&a.push(u[s])}return a.join(" ")},l.prototype.populateValue=function(u){var a=Date.now();return u.map(function(y){return{Address:y.Address||"",Expire:a+(y.CachePeriodInMinutes||1)*60*1e3}})},l.prototype.empty=function(){this.cache.empty()},l.prototype.remove=function(u){var a=typeof u!="string"?l.getKeyString(u):u;this.cache.remove(a)},l}();_.EndpointCache=E},{"./utils/LRU":112}],112:[function(C,D,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function E(l,u){this.key=l,this.value=u}return E}(),v=function(){function E(l){if(this.nodeMap={},this.size=0,typeof l!="number"||l<1)throw new Error("Cache size can only be positive number");this.sizeLimit=l}return Object.defineProperty(E.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),E.prototype.prependToList=function(l){this.headerNode?(this.headerNode.prev=l,l.next=this.headerNode):this.tailNode=l,this.headerNode=l,this.size++},E.prototype.removeFromTail=function(){if(this.tailNode){var l=this.tailNode,u=l.prev;return u&&(u.next=void 0),l.prev=void 0,this.tailNode=u,this.size--,l}},E.prototype.detachFromList=function(l){this.headerNode===l&&(this.headerNode=l.next),this.tailNode===l&&(this.tailNode=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),l.next=void 0,l.prev=void 0,this.size--},E.prototype.get=function(l){if(this.nodeMap[l]){var u=this.nodeMap[l];return this.detachFromList(u),this.prependToList(u),u.value}},E.prototype.remove=function(l){if(this.nodeMap[l]){var u=this.nodeMap[l];this.detachFromList(u),delete this.nodeMap[l]}},E.prototype.put=function(l,u){if(this.nodeMap[l])this.remove(l);else if(this.size===this.sizeLimit){var a=this.removeFromTail(),y=a.key;delete this.nodeMap[y]}var p=new g(l,u);this.nodeMap[l]=p,this.prependToList(p)},E.prototype.empty=function(){for(var l=Object.keys(this.nodeMap),u=0;u<l.length;u++){var a=l[u],y=this.nodeMap[a];this.detachFromList(y),delete this.nodeMap[a]}},E}();_.LRUCache=v},{}],113:[function(C,D,_){C("./browser_loader");var g=C("./core");typeof window<"u"&&(window.AWS=g),typeof D<"u"&&(D.exports=g),typeof self<"u"&&(self.AWS=g),Object.prototype.hasOwnProperty.call(g,"Connect")||(g.apiLoader.services.connect={},g.Connect=g.Service.defineService("connect",["2017-02-15"])),g.apiLoader.services.connect["2017-02-15"]=C("../apis/connect-2017-02-15.min")},{"../apis/connect-2017-02-15.min":3,"./browser_loader":16,"./core":19}]},{},[113])},754:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,e.ClientMethods=e.makeEnum(["getAgentSnapshot","putAgentState","getAgentStates","getDialableCountryCodes","getRoutingProfileQueues","getAgentPermissions","getAgentConfiguration","updateAgentConfiguration","acceptContact","createOutboundContact","createTaskContact","clearContact","completeContact","destroyContact","rejectContact","notifyContactIssue","updateContactAttributes","createAdditionalConnection","destroyConnection","holdConnection","resumeConnection","toggleActiveConnections","conferenceConnections","sendClientLogs","sendDigits","sendSoftphoneCallReport","sendSoftphoneCallMetrics","getEndpoints","getNewAuthToken","createTransport","muteParticipant","unmuteParticipant","updateMonitorParticipantState","pauseContact","resumeContact"]),e.AgentAppClientMethods={GET_CONTACT:"AgentAppService.Lcms.getContact",DELETE_SPEAKER:"AgentAppService.VoiceId.deleteSpeaker",ENROLL_BY_SESSION:"AgentAppService.VoiceId.enrollBySession",EVALUATE_SESSION:"AgentAppService.VoiceId.evaluateSession",DESCRIBE_SPEAKER:"AgentAppService.VoiceId.describeSpeaker",OPT_OUT_SPEAKER:"AgentAppService.VoiceId.optOutSpeaker",UPDATE_VOICE_ID_DATA:"AgentAppService.Lcms.updateVoiceIdData",DESCRIBE_SESSION:"AgentAppService.VoiceId.describeSession",UPDATE_SESSION:"AgentAppService.VoiceId.updateSession",START_VOICE_ID_SESSION:"AgentAppService.Nasa.startVoiceIdSession",LIST_INTEGRATION_ASSOCIATIONS:"AgentAppService.Acs.listIntegrationAssociations"},e.MasterMethods=e.makeEnum(["becomeMaster","checkMaster"]),e.TaskTemplatesClientMethods=e.makeEnum(["listTaskTemplates","getTaskTemplate","createTemplatedTask","updateContact"]),e.ApiProxyClientMethods=e.makeEnum(["qrIntegrationExists","qrSearchQuickResponses"]),e.RetryableClientMethodsList=[e.ClientMethods.GET_AGENT_SNAPSHOT,e.ClientMethods.GET_AGENT_CONFIGURATION,e.ClientMethods.GET_AGENT_PERMISSIONS,e.ClientMethods.GET_AGENT_STATES,e.ClientMethods.GET_DIALABLE_COUNTRY_CODES,e.ClientMethods.GET_ROUTING_PROFILE_QUEUES],e.RetryableErrors=e.makeEnum(["unauthorized","accessDenied"]),e.RetryStatus=e.makeEnum(["retrying","exhausted","none"]);var m=function(){};m.EMPTY_CALLBACKS={success:function(){},failure:function(){}},m.prototype.call=function(u,a,y){e.assertNotNull(u,"method");var p=a||{},s=y||m.EMPTY_CALLBACKS;this._callImpl(u,p,s)},m.prototype._callImpl=function(u,a,y){throw new e.NotImplementedError};var b=function(){m.call(this)};b.prototype=Object.create(m.prototype),b.prototype.constructor=b,b.prototype._callImpl=function(u,a,y){if(y&&y.failure){var p=e.sprintf("No such method exists on NULL client: %s",u);y.failure(new e.ValueError(p),{message:p})}};var C=function(u,a,y){m.call(this),this.conduit=u,this.requestEvent=a,this.responseEvent=y,this._requestIdCallbacksMap={},this.conduit.onUpstream(y,e.hitch(this,this._handleResponse))};C.prototype=Object.create(m.prototype),C.prototype.constructor=C,C.prototype._callImpl=function(u,a,y){var p=e.EventFactory.createRequest(this.requestEvent,u,a);this._requestIdCallbacksMap[p.requestId]=y;let s=[e.ClientMethods.SEND_CLIENT_LOGS,e.ClientMethods.SEND_SOFTPHONE_CALL_METRICS,e.ClientMethods.SEND_SOFTPHONE_CALL_REPORT];try{p.event===e.EventType.API_REQUEST&&!s.includes(p.method)&&e.getLog().trace(`Sending API_REQUEST event for ${p.method} to upstream`).withObject({method:p.method,params:p.params,stack:new Error().stack}).sendInternalLogToServer()}catch(d){e.getLog().error("Stack trace Log Failed").withObject({err:d}).sendInternalLogToServer()}this.conduit.sendUpstream(p.event,p)},C.prototype._getCallbacksForRequest=function(u){var a=this._requestIdCallbacksMap[u]||null;return a!=null&&delete this._requestIdCallbacksMap[u],a},C.prototype._handleResponse=function(u){var a=this._getCallbacksForRequest(u.requestId);a!=null&&(u.err&&a.failure?a.failure(u.err,u.data):a.success&&a.success(u.data))};var D=function(u){C.call(this,u,e.EventType.API_REQUEST,e.EventType.API_RESPONSE)};D.prototype=Object.create(C.prototype),D.prototype.constructor=D;var _=function(){m.call(this),e.core.getEventBus().subscribe(e.EventType.API_PROXY_RESPONSE,e.hitch(this,this._handleResponse)),this._requestIdCallbacksMap={}};_.prototype=Object.create(m.prototype),_.prototype.constructor=_,_.prototype._callImpl=function(u,a,y){var p=e.EventFactory.createRequest(e.EventType.API_PROXY_REQUEST,u,a);this._requestIdCallbacksMap[p.requestId]=y,e.core.getEventBus().trigger(e.EventType.API_PROXY_REQUEST,p)},_.prototype._getCallbacksForRequest=function(u){var a=this._requestIdCallbacksMap[u]||null;return a!=null&&delete this._requestIdCallbacksMap[u],a},_.prototype._handleResponse=function(u){var a=this._getCallbacksForRequest(u.requestId);a!=null&&(u.err&&a.failure?a.failure(u.err,u.data):a.success&&a.success(u.data))};var g=function(u){C.call(this,u,e.EventType.MASTER_REQUEST,e.EventType.MASTER_RESPONSE)};g.prototype=Object.create(C.prototype),g.prototype.constructor=g;var v=function(u,a,y){e.assertNotNull(u,"authCookieName"),e.assertNotNull(a,"authToken"),e.assertNotNull(y,"endpoint"),m.call(this),this.endpointUrl=e.getUrlWithProtocol(y),this.authToken=a,this.authCookieName=u};v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype._callImpl=function(u,a,y){var p=this,s={};s[p.authCookieName]=p.authToken;var d={method:"post",body:JSON.stringify(a||{}),headers:{Accept:"application/json","Content-Type":"application/json","X-Amz-target":u,"X-Amz-Bearer":JSON.stringify(s)}};e.fetch(p.endpointUrl,d).then(function(c){y.success(c)}).catch(function(c){let S=c.body.getReader(),h="",I=new TextDecoder;S.read().then(function f({done:T,value:w}){if(T){var x=JSON.parse(h);x.status=c.status,y.failure(x);return}return h+=I.decode(w),S.read().then(f)})})};var E=function(u,a,y){e.assertNotNull(u,"authToken"),e.assertNotNull(a,"region"),m.call(this),AWS.config.credentials=new AWS.Credentials({}),AWS.config.region=a,this.authToken=u;var p=e.getBaseUrl(),s=y||(p.includes(".awsapps.com")?p+"/connect/api":p+"/api"),d=new AWS.Endpoint(s);this.client=new AWS.Connect({endpoint:d}),this.unauthorizedFailCounter=0,this.accessDeniedFailCounter=0};E.prototype=Object.create(m.prototype),E.prototype.constructor=E,E.prototype._callImpl=function(u,a,y){var p=this,s=e.getLog();if(e.contains(this.client,u))a=this._translateParams(u,a),(u==="pauseContact"||u==="resumeContact")&&delete a.authentication,a&&a.relatedContactId&&a.relatedContactId!==null&&a.previousContactId&&delete a.previousContactId,s.trace("AWSClient: --> Calling operation '%s'",u).sendInternalLogToServer(),this.client[u](a).on("build",function(c){c.httpRequest.headers["X-Amz-Bearer"]=p.authToken}).send(function(c,S){try{if(c)c.code===e.CTIExceptions.UNAUTHORIZED_EXCEPTION||c.statusCode===401?p._retryMethod(u,y,c,S,e.RetryableErrors.UNAUTHORIZED):c.code===e.CTIExceptions.ACCESS_DENIED_EXCEPTION||c.statusCode===403?p._retryMethod(u,y,c,S,e.RetryableErrors.ACCESS_DENIED):(p.unauthorizedFailCounter=0,p.accessDeniedFailCounter=0,y.failure(p._formatCallError(p._addStatusCodeToError(c)),S)),s.trace("AWSClient: <-- Operation '%s' failed: %s",u,JSON.stringify(c)).sendInternalLogToServer();else{let h={};s.trace("AWSClient: <-- Operation '%s' succeeded.",u).withObject(S).sendInternalLogToServer(),p.unauthorizedFailCounter=0,p.accessDeniedFailCounter=0,this.httpResponse&&this.httpResponse.hasOwnProperty("body")&&(h.contentLength=this.httpResponse.body.length),y.success(S,h)}}catch(h){e.getLog().error("Failed to handle AWS API request for method %s",u).withException(h).sendInternalLogToServer()}});else{var d=e.sprintf("No such method exists on AWS client: %s",u);y.failure(new e.ValueError(d),{message:d})}},E.prototype._isRetryableMethod=function(u){return e.RetryableClientMethodsList.includes(u)},E.prototype._retryMethod=function(u,a,y,p,s){var d=this,c=e.getLog();let S=f=>d._formatCallError(d._addStatusCodeToError(f)),h={maxCount:e.core.MAX_UNAUTHORIZED_RETRY_COUNT,failCounter:d.unauthorizedFailCounter,increaseCounter:()=>d.unauthorizedFailCounter+=1,resetCounter:()=>d.unauthorizedFailCounter=0,errorMessage:"unauthorized",exhaustedRetries:d.unauthorizedFailCounter>=e.core.MAX_UNAUTHORIZED_RETRY_COUNT,retryCallback:(f,T)=>a.failure(S(f),T),defaultCallback:(f,T)=>a.authFailure(S(f),T)};switch(s){case e.RetryableErrors.UNAUTHORIZED:break;case e.RetryableErrors.ACCESS_DENIED:h=We(fe({},h),{maxCount:e.core.MAX_ACCESS_DENIED_RETRY_COUNT,failCounter:d.accessDeniedFailCounter,increaseCounter:()=>d.accessDeniedFailCounter+=1,resetCounter:()=>d.accessDeniedFailCounter=0,errorMessage:"access denied",exhaustedRetries:d.accessDeniedFailCounter>=e.core.MAX_ACCESS_DENIED_RETRY_COUNT,defaultCallback:(f,T)=>a.accessDenied(S(f),T)});break}let I=We(fe({},y),{retryStatus:e.RetryStatus.NONE});if(d._isRetryableMethod(u))if(h.exhaustedRetries)c.trace(`AWSClient: <-- Operation ${u} exhausted max ${h.maxCount} number of retries for ${h.errorMessage} error`).sendInternalLogToServer(),h.resetCounter(),I=We(fe({},I),{retryStatus:e.RetryStatus.EXHAUSTED});else{c.trace(`AWSClient: <-- Operation ${u} failed with ${h.errorMessage} error. Retrying call for a ${h.failCounter+1} time`).sendInternalLogToServer(),h.increaseCounter(),I=We(fe({},I),{retryStatus:e.RetryStatus.RETRYING}),h.retryCallback(I,p);return}else c.trace(`AWSClient: <-- Operation ${u} failed: ${JSON.stringify(y)}`).sendInternalLogToServer();h.defaultCallback(I,p)},E.prototype._formatCallError=function(u){let a=fe({type:u.code,message:u.message,stack:[],retryStatus:u.retryStatus||e.RetryStatus.NONE},u.statusCode&&{statusCode:u.statusCode});if(u.stack)try{Array.isArray(u.stack)?a.stack=u.stack:typeof u.stack=="object"?a.stack=[JSON.stringify(u.stack)]:typeof u.stack=="string"&&(a.stack=u.stack.split(`
`))}finally{}return a},E.prototype._addStatusCodeToError=function(u){if(u.statusCode)return u;let a=fe({},u);if(!u.code)a.statusCode=400;else switch(a.code){case e.CTIExceptions.UNAUTHORIZED_EXCEPTION:a.statusCode=401;break;case e.CTIExceptions.ACCESS_DENIED_EXCEPTION:a.statusCode=403;break}return a},E.prototype._requiresAuthenticationParam=function(u){return u!==e.ClientMethods.COMPLETE_CONTACT&&u!==e.ClientMethods.CLEAR_CONTACT&&u!==e.ClientMethods.REJECT_CONTACT&&u!==e.ClientMethods.CREATE_TASK_CONTACT&&u!==e.ClientMethods.UPDATE_MONITOR_PARTICIPANT_STATE},E.prototype._translateParams=function(u,a){switch(u){case e.ClientMethods.UPDATE_AGENT_CONFIGURATION:a.configuration=this._translateAgentConfiguration(a.configuration);break;case e.ClientMethods.SEND_SOFTPHONE_CALL_METRICS:a.softphoneStreamStatistics=this._translateSoftphoneStreamStatistics(a.softphoneStreamStatistics);break;case e.ClientMethods.SEND_SOFTPHONE_CALL_REPORT:a.report=this._translateSoftphoneCallReport(a.report);break;default:break}return this._requiresAuthenticationParam(u)&&(a.authentication={authToken:this.authToken}),a},E.prototype._translateAgentConfiguration=function(u){return{name:u.name,softphoneEnabled:u.softphoneEnabled,softphoneAutoAccept:u.softphoneAutoAccept,extension:u.extension,routingProfile:this._translateRoutingProfile(u.routingProfile),agentPreferences:u.agentPreferences}},E.prototype._translateRoutingProfile=function(u){return{name:u.name,routingProfileARN:u.routingProfileARN,defaultOutboundQueue:this._translateQueue(u.defaultOutboundQueue)}},E.prototype._translateQueue=function(u){return{queueARN:u.queueARN,name:u.name}},E.prototype._translateSoftphoneStreamStatistics=function(u){return u.forEach(function(a){"packetsCount"in a&&(a.packetCount=a.packetsCount,delete a.packetsCount)}),u},E.prototype._translateSoftphoneCallReport=function(u){return"handshakingTimeMillis"in u&&(u.handshakeTimeMillis=u.handshakingTimeMillis,delete u.handshakingTimeMillis),"preTalkingTimeMillis"in u&&(u.preTalkTimeMillis=u.preTalkingTimeMillis,delete u.preTalkingTimeMillis),"handshakingFailure"in u&&(u.handshakeFailure=u.handshakingFailure,delete u.handshakingFailure),"talkingTimeMillis"in u&&(u.talkTimeMillis=u.talkingTimeMillis,delete u.talkingTimeMillis),u.softphoneStreamStatistics=this._translateSoftphoneStreamStatistics(u.softphoneStreamStatistics),u};var l=function(u){if(e.assertNotNull(u,"endpoint"),m.call(this),u.includes("/task-templates"))this.endpointUrl=e.getUrlWithProtocol(u);else{var a=new AWS.Endpoint(u),y=u.includes(".awsapps.com")?"/connect":"";this.endpointUrl=e.getUrlWithProtocol(`${a.host}${y}/task-templates/api/ccp`)}};l.prototype=Object.create(m.prototype),l.prototype.constructor=l,l.prototype._callImpl=function(u,a,y){a&&a.relatedContactId&&a.relatedContactId!==null&&a.previousContactId&&delete a.previousContactId,e.assertNotNull(u,"method"),e.assertNotNull(a,"params");var p={credentials:"include",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","x-csrf-token":"csrf"}},s=a.instanceId,d=this.endpointUrl,c=e.TaskTemplatesClientMethods;switch(u){case c.LIST_TASK_TEMPLATES:if(d+=`/proxy/instance/${s}/task/template`,a.queryParams){let I=new URLSearchParams(a.queryParams).toString();I&&(d+=`?${I}`)}break;case c.GET_TASK_TEMPLATE:e.assertNotNull(a.templateParams,"params.templateParams");let S=e.assertNotNull(a.templateParams.id,"params.templateParams.id"),h=a.templateParams.version;d+=`/proxy/instance/${s}/task/template/${S}`,h&&(d+=`?snapshotVersion=${h}`);break;case c.CREATE_TEMPLATED_TASK:d+=`/${u}`,p.body=JSON.stringify(a),p.method="PUT";break;case c.UPDATE_CONTACT:d+=`/${u}`,p.body=JSON.stringify(a),p.method="POST"}e.fetch(d,p).then(function(S){y.success(S)}).catch(function(S){let h=S.body.getReader(),I="",f=new TextDecoder;h.read().then(function T({done:w,value:x}){if(w){var P=JSON.parse(I);P.status=S.status,y.failure(P);return}return I+=f.decode(x),h.read().then(T)})})},e.ClientBase=m,e.NullClient=b,e.UpstreamConduitClient=D,e.ApiProxyClient=_,e.UpstreamConduitMasterClient=g,e.AWSClient=E,e.AgentAppClient=v,e.TaskTemplatesClient=l})()},895:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,e.core={},e.core.initialized=!1,e.version="2.14.6",e.outerContextStreamsVersion=null,e.DEFAULT_BATCH_SIZE=500;var m=1e3,b=3e3,C=5e3,D=5e3,_=1e4,g=10,v="Amazon Connect CCP",E="https://{alias}.awsapps.com/auth/?client_id={client_id}&redirect_uri={redirect}",l={"us-east-1":"06919f4fd8ed324e"},u="/auth/authorize",a="/connect/auth/authorize",y=2e3,p=5,s="/connect/whitelisted-origins",d="/whitelisted-origins",c=2e3,S=5,h="IframeRefreshAttempts",I="IframeRefreshAttemptsDr",f="IframeInitializationSuccess",T="IframeInitializationSuccessDr",w="IframeInitializationTime",x="IframeInitializationTimeDr",P="SetRingerDeviceBeforeInitRingtoneEngine",F="ConnectedCCPSingleTabCount",W="CCPTabsAcrossBrowserCount",V="MultipleInitSoftphoneManagerCalls";let j="SnapshotReceivedByClient",Y="SnapshotEventTriggerStepTime",$="SnapshotTotalProcessingTime",Se="SnapshotComparisonStepTime";var X=1e3;let ae={GUIDES:"customviews"},Te={"0-100":[0,100],"101-500":[101,500],"501-1000":[501,1e3],"1000-3000":[1001,3e3],"3001-5000":[3001,5e3],"5001-10000":[5001,1e4],"10001-20000":[10001,2e4],"20000+":[20001,Number.MAX_SAFE_INTEGER]};e.numberOfConnectedCCPs=0,e.numberOfConnectedCCPsInThisTab=0,e.core.MAX_AUTHORIZE_RETRY_COUNT_FOR_SESSION=3,e.core.MAX_CTI_AUTH_RETRY_COUNT=10,e.core.ctiAuthRetryCount=0,e.core.authorizeTimeoutId=null,e.core.ctiTimeoutId=null,e.core.MAX_UNAUTHORIZED_RETRY_COUNT=20,e.core.MAX_ACCESS_DENIED_RETRY_COUNT=10,e.SessionStorageKeys=e.makeEnum(["tab_id","authorize_retry_count"]);var $e=function(U){var Q="https://lily.us-east-1.amazonaws.com/taw/auth/code";return e.assertNotNull(Q),U.loginUrl?U.loginUrl:U.alias?(log.warn("The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters."),E.replace("{alias}",U.alias).replace("{client_id}",l["us-east-1"]).replace("{redirect}",i.encodeURIComponent(Q))):U.ccpUrl},Be=function(U){var Q="https://lily.us-east-1.amazonaws.com/taw/auth/code";return e.assertNotNull(Q),U.loginUrl?U.loginUrl:U.alias?(log.warn("The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters."),E.replace("{alias}",U.alias).replace("{client_id}",l["us-east-1"]).replace("{redirect}",i.encodeURIComponent(Q))):U.ccpUrl};class xe{constructor(Q){this.key=`${Q}ParamsStorage::${i.location.origin}`}get(){try{let Q=i.localStorage.getItem(this.key);return Q&&JSON.parse(Q)}catch(Q){e.getLog().error(`${this.key}:: Failed to get softphone params from local storage!`).withException(Q).sendInternalLogToServer()}return null}set(Q){try{Q&&i.localStorage.setItem(this.key,JSON.stringify(Q))}catch(G){e.getLog().error(`${this.key}:: Failed to set softphone params to local storage!`).withException(G).sendInternalLogToServer()}}clean(){i.localStorage.removeItem(this.key)}}class Le extends xe{constructor(){super("Softphone")}}let Ce=new Le;class J extends xe{constructor(){super("Ringtone")}}let Z=new J;function ne(U){var Q=U.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/ig);return Q.length?Q[0]:""}e.core.checkNotInitialized=function(){if(e.core.initialized){var U=e.getLog();U.warn("Connect core already initialized, only needs to be initialized once.").sendInternalLogToServer()}};var le=function(U,Q){var G=U.getAgentStates().find(function(ee){return ee.type===e.AgentStateType.OFFLINE});U.setState(G,Q)},de=function(U){e.getLog().info("[Disaster Recovery] Signal sharedworker to set contacts suppressor to %s for instance %s.",U,e.core.region).sendInternalLogToServer(),e.core.getUpstream().sendUpstream(e.DisasterRecoveryEvents.SUPPRESS,{suppress:U,shouldSendFailoverDownstream:!1})},ce=function(U,Q){e.getLog().info("[DISASTER RECOVERY] Signal sharedworker to set forceOffline to %s for instance %s.",U,e.core.region).sendInternalLogToServer(),e.core.getUpstream().sendUpstream(e.DisasterRecoveryEvents.FORCE_OFFLINE,{offline:U,nextActiveArn:Q})},re=function(U,Q){var G=e.getLog();let ee=e.agent.initialized?e.core.getAgentDataProvider().getInstanceId():e.core.region;G.info(`[Disaster Recovery] Attempting to force instance ${ee} offline using ${U?"soft":"hard"} failover`).sendInternalLogToServer(),e.agent(function(pe){var he=0,se=pe.getContacts(),ie=!1;if(se.length)for(let O of se){if(ie)break;U&&(O.getType()===e.ContactType.QUEUE_CALLBACK||O.getType()==e.ContactType.VOICE)?(G.info("[Disaster Recovery] Will wait to complete failover of instance %s until voice contact with ID %s is destroyed",e.core.region,O.getContactId()).sendInternalLogToServer(),e.core.getUpstream().sendDownstream(e.DisasterRecoveryEvents.FAILOVER_PENDING,{nextActiveArn:Q}),O.onDestroy(function(R){G.info("[Disaster Recovery] Voice contact with ID %s destroyed, continuing with failover in instance %s",R.getContactId(),e.core.region),re(!0,Q)})):O.getAgentConnection().destroy({success:function(){++he===se.length&&(ce(!1,Q),le(pe),G.info("[Disaster Recovery] Instance %s is now offline",e.core.region).sendInternalLogToServer())},failure:function(R){G.warn("[Disaster Recovery] An error occured while attempting to force this instance to offline in region %s",e.core.region).sendInternalLogToServer(),G.warn(R).sendInternalLogToServer(),ce(!0,Q),ie=!0}})}else ce(!1,Q),le(pe),G.info("[Disaster Recovery] Instance %s is now offline",e.core.region).sendInternalLogToServer()})};e.core.terminateCustomView=function(U,Q="",{resolveIframe:G=!0,timeout:ee=5e3,hideIframe:pe=!0}={}){let he,se=function(N,H,z){return H?.querySelector(z)||document.getElementById(N)||window.top.document.getElementById(N)};Q?he=`${ae.GUIDES}${Q}`:he=`${ae.GUIDES}`;let ie=e.agentApp.AppRegistry.get(he)?.containerDOM,O=`iframe[id='${he}']`,R=se(he,ie,O);if(!R){console.warn("[CustomViews] terminateCustomView operation failed due to iframe not found");return}try{let N={topic:"lifecycle.terminated"};R.contentWindow.postMessage(N,U),G&&(pe&&(R.style.display="none"),console.info("[CustomViews] customviews iframe hidden for resolution during termination"),setTimeout(function(){e.agentApp.stopApp(he),se(he,ie,O)?console.warn("[CustomViews] customviews application did not stop successfully in terminateCustomView operation"):console.info("[CustomViews] customviews application successfully stopped")},ee))}catch(N){throw new Error("[CustomViews] Error in terminateCustomView: ",N)}},e.core.initDisasterRecovery=function(U,Q,G){var ee=e.getLog();e.core.region=U.region,e.core.suppressContacts=Q||de,e.core.forceOffline=G||re,e.core.getUpstream().onDownstream(e.DisasterRecoveryEvents.SET_OFFLINE,function(pe){e.ifMaster(e.MasterTopics.FAILOVER,function(){e.core.forceOffline(pe&&pe.softFailover)})}),e.core.getUpstream().onUpstream(e.DisasterRecoveryEvents.FORCE_OFFLINE,function(pe){e.ifMaster(e.MasterTopics.FAILOVER,function(){e.core.forceOffline(pe&&pe.softFailover,pe&&pe.nextActiveArn)})}),e.ifMaster(e.MasterTopics.FAILOVER,function(){ee.info("[Disaster Recovery] Initializing region %s as part of a Disaster Recovery fleet",e.core.region).sendInternalLogToServer()},function(){ee.info("[Disaster Recovery] %s already part of a Disaster Recovery fleet",e.core.region).sendInternalLogToServer()}),U.pollForFailover&&e.DisasterRecoveryEvents.INIT_DR_POLLING?e.core.getUpstream().sendUpstream(e.DisasterRecoveryEvents.INIT_DR_POLLING,{instanceArn:U.instanceArn,otherArn:U.otherArn,authToken:U.authToken}):U.isPrimary?(e.core.suppressContacts(!1),ee.info("[Disaster Recovery] %s instance is set to primary",e.core.region).sendInternalLogToServer()):(e.core.suppressContacts(!0),e.core.forceOffline(),ee.info("[Disaster Recovery] %s instance is set to stand-by",e.core.region).sendInternalLogToServer())},e.core.init=function(U){e.core.eventBus=new e.EventBus,e.core.agentDataProvider=new we(e.core.getEventBus()),e.core.initClient(U),e.core.initAgentAppClient(U),e.core.initTaskTemplatesClient(U),e.core.initialized=!0},e.core.initClient=function(U){e.assertNotNull(U,"params");var Q=e.assertNotNull(U.authToken,"params.authToken"),G=e.assertNotNull(U.region,"params.region"),ee=U.endpoint||null;e.core.client=new e.AWSClient(Q,G,ee)},e.core.initAgentAppClient=function(U){e.assertNotNull(U,"params");var Q=e.assertNotNull(U.authToken,"params.authToken"),G=e.assertNotNull(U.authCookieName,"params.authCookieName"),ee=e.assertNotNull(U.agentAppEndpoint,"params.agentAppEndpoint");e.core.agentAppClient=new e.AgentAppClient(G,Q,ee)},e.core.initTaskTemplatesClient=function(U){e.assertNotNull(U,"params");var Q=U.taskTemplatesEndpoint||U.endpoint;e.assertNotNull(Q,"taskTemplatesEndpoint"),e.core.taskTemplatesClient=new e.TaskTemplatesClient(Q)},e.core.terminate=function(){e.core.client=new e.NullClient,e.core.apiProxyClient=new e.NullClient,e.core.agentAppClient=new e.NullClient,e.core.taskTemplatesClient=new e.NullClient,e.core.masterClient=new e.NullClient;var U=e.core.getEventBus();U&&U.unsubscribeAll(),e.core.bus=new e.EventBus,e.core.agentDataProvider=null,e.core.softphoneManager=null,e.core.upstream=null,e.core.keepaliveManager=null,e.storageAccess.resetStorageAccessState(),e.agent.initialized=!1,e.core.initialized=!1},e.core.softphoneUserMediaStream=null,e.core.setSoftphoneUserMediaStream=function(U){e.core.softphoneUserMediaStream=U},e.core.initRingtoneEngines=function(U,Q){e.getLog().info("[Ringtone Engine] initRingtoneEngine started").withObject({params:U}).sendInternalLogToServer(),e.assertNotNull(U,"params");let G=Q||Ie;var ee=function(se){e.assertNotNull(se,"ringtoneSettings"),e.assertNotNull(se.voice,"ringtoneSettings.voice"),e.assertTrue(se.voice.ringtoneUrl||se.voice.disabled,"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.voice.disabled must be true"),e.assertNotNull(se.queue_callback,"ringtoneSettings.queue_callback"),e.assertTrue(se.queue_callback.ringtoneUrl||se.queue_callback.disabled,"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.queue_callback.disabled must be true"),e.core.ringtoneEngines={},e.agent(function(ie){ie.onRefresh(function(){e.ifMaster(e.MasterTopics.RINGTONE,function(){let O=!1;!se.voice.disabled&&!e.core.ringtoneEngines.voice&&(e.core.ringtoneEngines.voice=new e.VoiceRingtoneEngine(se.voice),O=!0,e.getLog().info("VoiceRingtoneEngine initialized.").sendInternalLogToServer()),!se.chat.disabled&&!e.core.ringtoneEngines.chat&&(e.core.ringtoneEngines.chat=new e.ChatRingtoneEngine(se.chat),O=!0,e.getLog().info("ChatRingtoneEngine initialized.").sendInternalLogToServer()),!se.task.disabled&&!e.core.ringtoneEngines.task&&(e.core.ringtoneEngines.task=new e.TaskRingtoneEngine(se.task),O=!0,e.getLog().info("TaskRingtoneEngine initialized.").sendInternalLogToServer()),!se.queue_callback.disabled&&!e.core.ringtoneEngines.queue_callback&&(e.core.ringtoneEngines.queue_callback=new e.QueueCallbackRingtoneEngine(se.queue_callback),O=!0,e.getLog().info("QueueCallbackRingtoneEngine initialized.").sendInternalLogToServer()),O&&e.core._ringerDeviceId&&G({deviceId:e.core._ringerDeviceId})})})}),ye()},pe=function(se,ie){se.ringtone=se.ringtone||{},se.ringtone.voice=se.ringtone.voice||{},se.ringtone.queue_callback=se.ringtone.queue_callback||{},se.ringtone.chat=se.ringtone.chat||{disabled:!0},se.ringtone.task=se.ringtone.task||{disabled:!0},ie.softphone&&(ie.softphone.disableRingtone&&(se.ringtone.voice.disabled=!0,se.ringtone.queue_callback.disabled=!0),ie.softphone.ringtoneUrl&&(se.ringtone.voice.ringtoneUrl=ie.softphone.ringtoneUrl,se.ringtone.queue_callback.ringtoneUrl=ie.softphone.ringtoneUrl)),ie.chat&&(ie.chat.disableRingtone&&(se.ringtone.chat.disabled=!0),ie.chat.ringtoneUrl&&(se.ringtone.chat.ringtoneUrl=ie.chat.ringtoneUrl)),ie.task&&(ie.task.disableRingtone&&(se.ringtone.task.disabled=!0),ie.task.ringtoneUrl&&(se.ringtone.task.ringtoneUrl=ie.task.ringtoneUrl)),ie.ringtone&&(se.ringtone.voice=e.merge(se.ringtone.voice,ie.ringtone.voice||{}),se.ringtone.queue_callback=e.merge(se.ringtone.queue_callback,ie.ringtone.voice||{}),se.ringtone.chat=e.merge(se.ringtone.chat,ie.ringtone.chat||{}),se.ringtone.task=e.merge(se.ringtone.task,ie.ringtone.task||{}))};if(pe(U,U),e.isFramed()){let se;var he=e.core.getEventBus();he.subscribe(e.EventType.CONFIGURE,function(O){i.clearTimeout(se),e.getLog().info("[Ringtone Engine] Configure event handler executed").sendInternalLogToServer(),this.unsubscribe(),pe(U,O),Z.set(U.ringtone),ee(U.ringtone)});let ie=Z.get();ie&&e.core.getUpstream().onUpstream(e.EventType.ACKNOWLEDGE,function(O){O&&O.id&&(e.getLog().info("[RingtoneEngine] Embedded CCP is refreshed successfully and waiting for configure Message handler to execute").sendInternalLogToServer(),this.unsubscribe(),se=i.setTimeout(()=>{e.getLog().info("[RingtoneEngine] Embedded CCP is refreshed without configure message & Initializing setupRingtoneEngines (Ringtone Engine) from localStorage ringtone params. ").withObject({ringtone:ie}).sendInternalLogToServer(),ee(ie)},100))})}else ee(U.ringtone)};var ye=function(){var U=e.core.getEventBus();U.subscribe(e.ConfigurationEvents.SET_RINGER_DEVICE,Ie)},Ie=function(U={}){let Q=U.deviceId||"";if(e.getLog().info(`[Audio Device Settings] Attempting to set ringer device ${Q}`).sendInternalLogToServer(),e.keys(e.core.ringtoneEngines).length===0){e.getLog().info("[Audio Device Settings] setRingerDevice called before ringtone engine is initialized").sendInternalLogToServer(),Q&&(e.core._ringerDeviceId=Q,e.getLog().warn("[Audio Device Settings] stored device Id for later use, once ringtone engine is up.").sendInternalLogToServer(),e.publishMetric({name:P,data:{count:1}}));return}if(!Q){e.getLog().warn("[Audio Device Settings] Setting ringer device cancelled due to missing deviceId").sendInternalLogToServer();return}for(let G in e.core.ringtoneEngines)e.core.ringtoneEngines[G].setOutputDevice(Q).then(function(ee){e.getLog().info(`[Audio Device Settings] ringtoneType ${G} successfully set to deviceid ${ee}`).sendInternalLogToServer()}).catch(function(ee){e.getLog().error(ee)});e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.RINGER_DEVICE_CHANGED,data:{deviceId:Q}})};e.core.initSoftphoneManager=function(U){var Q=U||{};e.getLog().info("[Softphone Manager] initSoftphoneManager started").sendInternalLogToServer();var G=function(he){var se=e.merge(Q.softphone||{},he);e.getLog().info("[Softphone Manager] competeForMasterOnAgentUpdate executed").withObject({softphoneParams:se}).sendInternalLogToServer(),e.agent(function(ie){ie.getChannelConcurrency(e.ChannelType.VOICE)&&ie.onRefresh(function(){var O=this;e.getLog().info("[Softphone Manager] agent refresh handler executed").sendInternalLogToServer(),e.ifMaster(e.MasterTopics.SOFTPHONE,function(){e.getLog().info("[Softphone Manager] confirmed as softphone master topic").sendInternalLogToServer(),!e.core.softphoneManager&&ie.isSoftphoneEnabled()&&(e.becomeMaster(e.MasterTopics.SEND_LOGS),e.core.softphoneManager=new e.SoftphoneManager(se),O.unsubscribe())})})})};if(e.isFramed()&&e.isCCP()){let he;var ee=e.core.getEventBus();ee.subscribe(e.EventType.CONFIGURE,function(ie){i.clearTimeout(he),e.getLog().info("[Softphone Manager] Configure event handler executed").withObject({data:ie}).sendInternalLogToServer(),Ce.set(ie.softphone),ie.softphone&&ie.softphone.allowFramedSoftphone&&(this.unsubscribe(),G(ie.softphone)),pe(ie.softphone)});let se=Ce.get();se&&e.core.getUpstream().onUpstream(e.EventType.ACKNOWLEDGE,function(ie){ie&&ie.id&&(e.getLog().info("[Softphone Manager] Embedded CCP is refreshed successfully and waiting for configure Message handler to execute").sendInternalLogToServer(),this.unsubscribe(),he=i.setTimeout(()=>{e.getLog().info("[Softphone Manager] Embedded CCP is refreshed without configure message handler execution").withObject({softphoneParamsFromLocalStorage:se}).sendInternalLogToServer(),e.publishMetric({name:"EmbeddedCCPRefreshedWithoutInitCCP",data:{count:1}}),pe(se),se.allowFramedSoftphone&&(e.getLog().info("[Softphone Manager] Embedded CCP is refreshed & Initializing competeForMasterOnAgentUpdate (Softphone manager) from localStorage softphone params").sendInternalLogToServer(),G(se))},100))})}else G(Q),pe(Q);e.agent(function(he){he.isSoftphoneEnabled()&&he.getChannelConcurrency(e.ChannelType.VOICE)&&e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.MUTE})});function pe(he){var se=e.merge(Q.softphone||{},he);e.core.softphoneParams=se,e.isFirefoxBrowser()&&(e.core.getUpstream().onUpstream(e.EventType.MASTER_RESPONSE,function(ie){ie.data&&ie.data.topic===e.MasterTopics.SOFTPHONE&&ie.data.takeOver&&ie.data.masterId!==e.core.portStreamId&&e.core.softphoneManager&&(e.core.softphoneManager.onInitContactSub.unsubscribe(),delete e.core.softphoneManager)}),e.core.getEventBus().subscribe(e.ConnectionEvents.READY_TO_START_SESSION,function(){e.ifMaster(e.MasterTopics.SOFTPHONE,function(){e.core.softphoneManager&&e.core.softphoneManager.startSession()},function(){e.becomeMaster(e.MasterTopics.SOFTPHONE,function(){e.agent(function(ie){!e.core.softphoneManager&&ie.isSoftphoneEnabled()&&(e.becomeMaster(e.MasterTopics.SEND_LOGS),e.core.softphoneManager=new e.SoftphoneManager(se),e.core.softphoneManager.startSession())})})})}),e.contact(function(ie){e.agent(function(O){ie.onRefresh(function(R){if(e.hasOtherConnectedCCPs()&&document.visibilityState==="visible"&&(R.getStatus().type===e.ContactStatusType.CONNECTING||R.getStatus().type===e.ContactStatusType.INCOMING)){var N=R.isSoftphoneCall()&&!R.isInbound(),H=R.isSoftphoneCall()&&O.getConfiguration().softphoneAutoAccept,z=R.getType()===e.ContactType.QUEUE_CALLBACK;(N||H||z)&&e.core.triggerReadyToStartSessionEvent()}})})}))}},e.core.triggerReadyToStartSessionEvent=function(){var U=e.core.softphoneParams&&e.core.softphoneParams.allowFramedSoftphone;e.isCCP()?U?e.core.getEventBus().trigger(e.ConnectionEvents.READY_TO_START_SESSION):e.isFramed()?e.core.getUpstream().sendDownstream(e.ConnectionEvents.READY_TO_START_SESSION):e.core.getEventBus().trigger(e.ConnectionEvents.READY_TO_START_SESSION):U?e.core.getUpstream().sendUpstream(e.ConnectionEvents.READY_TO_START_SESSION):e.core.getEventBus().trigger(e.ConnectionEvents.READY_TO_START_SESSION)},e.core.initPageOptions=function(U){if(e.assertNotNull(U,"params"),e.isFramed()){var Q=e.core.getEventBus();Q.subscribe(e.EventType.CONFIGURE,function(G){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.CONFIGURE,data:G})}),Q.subscribe(e.EventType.MEDIA_DEVICE_REQUEST,function(){function G(ee){e.core.getUpstream().sendDownstream(e.EventType.MEDIA_DEVICE_RESPONSE,ee)}navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(ee){devices=ee||[],devices=devices.map(function(pe){return pe.toJSON()}),G(devices)}).catch(function(ee){G({error:ee.message})}):G({error:"No navigator or navigator.mediaDevices object found"})})}},e.core.initApiProxyService=function(){e.core.apiProxyClient=new e.ApiProxyClient,e.isFramed()&&(e.core.handleApiProxyRequest=function(U){if(!U?.method)return;let Q=function(pe){let he={data:pe,requestId:U.requestId};e.core.getUpstream().sendDownstream(e.EventType.API_RESPONSE,he)},G=function(pe){let he={err:pe,requestId:U.requestId};e.core.getUpstream().sendDownstream(e.EventType.API_RESPONSE,he)};e.core.getApiProxyClient().call(U.method,U.params,{success:Q,failure:G})})},e.core.getFrameMediaDevices=function(U){var Q=null,G=U||1e3,ee=new Promise(function(he,se){setTimeout(function(){se(new Error("Timeout exceeded"))},G)}),pe=new Promise(function(he,se){if(e.isCCP())navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(O){devices=O||[],devices=devices.map(function(R){return R.toJSON()}),he(devices)}):se(new Error("No navigator or navigator.mediaDevices object found"));else{var ie=e.core.getEventBus();Q=ie.subscribe(e.EventType.MEDIA_DEVICE_RESPONSE,function(O){O.error?se(new Error(O.error)):he(O)}),e.core.getUpstream().sendUpstream(e.EventType.MEDIA_DEVICE_REQUEST)}});return Promise.race([pe,ee]).finally(function(){Q&&Q.unsubscribe()})},e.core.authorize=function(U){var Q={credentials:"include"},G=U;return G||(G=e.core.isLegacyDomain()?a:u),e.fetch(G,Q,y,p)},e.core.verifyDomainAccess=function(U,Q){if(e.getLog().warn("This API will be deprecated in the next major version release"),!e.isFramed())return Promise.resolve();var G={headers:{"X-Amz-Bearer":U}},ee=null;return Q?ee=Q:ee=e.core.isLegacyDomain()?s:d,e.fetch(ee,G,c,S).then(function(pe){var he=ne(window.document.referrer),se=pe.whitelistedOrigins.some(function(ie){return he===ne(ie)});return se?Promise.resolve():Promise.reject()})},e.core.isLegacyDomain=function(U){return U=U||window.location.href,U.includes(".awsapps.com")},e.core.initSharedWorker=function(U){if(e.core.checkNotInitialized(),!e.core.initialized){e.assertNotNull(U,"params");var Q=e.assertNotNull(U.sharedWorkerUrl,"params.sharedWorkerUrl"),G=e.assertNotNull(U.authToken,"params.authToken"),ee=e.assertNotNull(U.refreshToken,"params.refreshToken"),pe=e.assertNotNull(U.authTokenExpiration,"params.authTokenExpiration"),he=e.assertNotNull(U.region,"params.region"),se=U.endpoint||null,ie=U.authorizeEndpoint;ie||(ie=e.core.isLegacyDomain()?a:u);var O=U.agentAppEndpoint||null,R=U.taskTemplatesEndpoint||null,N=U.authCookieName||null;try{e.core.eventBus=new e.EventBus({logEvents:!0}),e.core.agentDataProvider=new we(e.core.getEventBus()),e.core.mediaFactory=new e.MediaFactory(U);var H=new SharedWorker(Q,"ConnectSharedWorker"),z=new e.Conduit("ConnectSharedWorkerConduit",new e.PortStream(H.port),new e.WindowIOStream(window,parent));e.core.upstream=z,e.core.webSocketProvider=new je,i.onunload=function(){z.sendUpstream(e.EventType.CLOSE),H.port.close()},e.getLog().scheduleUpstreamLogPush(z),e.getLog().scheduleDownstreamClientSideLogsPush(),z.onAllUpstream(e.core.getEventBus().bridge()),z.onAllUpstream(z.passDownstream()),e.isFramed()&&(z.onAllDownstream(e.core.getEventBus().bridge()),z.onAllDownstream(function(L,A){A===e.EventType.API_REQUEST&&e.containsValue(e.ApiProxyClientMethods,L?.method)?e.core.handleApiProxyRequest(L):z.passUpstream()(L,A)})),z.sendUpstream(e.EventType.CONFIGURE,{authToken:G,authTokenExpiration:pe,endpoint:se,refreshToken:ee,region:he,authorizeEndpoint:ie,agentAppEndpoint:O,taskTemplatesEndpoint:R,authCookieName:N,longPollingOptions:U.longPollingOptions||void 0}),z.onUpstream(e.EventType.ACKNOWLEDGE,function(L){e.getLog().info("Acknowledged by the ConnectSharedWorker!").sendInternalLogToServer(),e.core.initialized=!0,e.core._setTabId(),e.core.portStreamId=L.id,this.unsubscribe()}),z.onUpstream(e.EventType.LOG,function(L){L.loggerId!==e.getLog().getLoggerId()&&e.getLog().addLogEntry(e.LogEntry.fromObject(L))}),z.onUpstream(e.EventType.SERVER_BOUND_INTERNAL_LOG,function(L){e.getLog().sendInternalLogEntryToServer(e.LogEntry.fromObject(L))}),z.onDownstream(e.EventType.SERVER_BOUND_INTERNAL_LOG,function(L){e.isFramed()&&Array.isArray(L)&&L.forEach(function(A){e.getLog().sendInternalLogEntryToServer(e.LogEntry.fromObject(A))})}),z.onDownstream(e.EventType.LOG,function(L){e.isFramed()&&L.loggerId!==e.getLog().getLoggerId()&&e.getLog().addLogEntry(e.LogEntry.fromObject(L))}),e.core.onAuthFail(e.hitch(e.core,e.core._handleAuthFail,U.loginEndpoint||null,ie)),e.core.onAuthorizeSuccess(e.hitch(e.core,e.core._handleAuthorizeSuccess)),e.getLog().info("User Agent: "+navigator.userAgent).sendInternalLogToServer(),e.getLog().info("isCCPv2: true").sendInternalLogToServer(),e.getLog().info("isFramed: "+e.isFramed()).sendInternalLogToServer(),e.core.upstream.onDownstream(e.EventType.OUTER_CONTEXT_INFO,function(L){var A=L.streamsVersion||null;e.getLog().info("StreamsJS Version: "+A).sendInternalLogToServer(),e.outerContextStreamsVersion=A}),z.onUpstream(e.EventType.UPDATE_CONNECTED_CCPS,function(L){e.getLog().info("Number of connected CCPs updated: "+L.length).sendInternalLogToServer(),e.numberOfConnectedCCPs=L.length,L[e.core.tabId]&&!isNaN(L[e.core.tabId].length)&&e.numberOfConnectedCCPsInThisTab!==L[e.core.tabId].length&&(e.numberOfConnectedCCPsInThisTab=L[e.core.tabId].length,e.numberOfConnectedCCPsInThisTab>1&&e.getLog().warn("There are "+e.numberOfConnectedCCPsInThisTab+" connected CCPs in this tab. Please adjust your implementation to avoid complications. If you are embedding CCP, please do so exclusively with initCCP. InitCCP will not let you embed more than one CCP.").sendInternalLogToServer(),e.publishMetric({name:F,data:{count:e.numberOfConnectedCCPsInThisTab}})),L.tabId&&L.streamsTabsAcrossBrowser&&e.ifMaster(e.MasterTopics.METRICS,()=>e.agent(()=>e.publishMetric({name:W,data:{tabId:L.tabId,count:L.streamsTabsAcrossBrowser}})))}),e.core.client=new e.UpstreamConduitClient(z),e.core.masterClient=new e.UpstreamConduitMasterClient(z),e.core.getEventBus().subscribe(e.EventType.TERMINATE,z.passUpstream()),e.core.getEventBus().subscribe(e.EventType.TERMINATED,function(){window.location.reload(!0)}),H.port.start(),z.onUpstream(e.VoiceIdEvents.UPDATE_DOMAIN_ID,function(L){L&&L.domainId&&(e.core.voiceIdDomainId=L.domainId)}),e.agent(function(){var L=new e.VoiceId;L.getDomainId().then(function(A){e.getLog().info("voiceId domainId successfully fetched at agent initialization: "+A).sendInternalLogToServer()}).catch(function(A){e.getLog().info("voiceId domainId not fetched at agent initialization").withObject({err:A}).sendInternalLogToServer()})});var B=e.core.getNotificationManager();B.requestPermission(),z.onDownstream(e.DisasterRecoveryEvents.INIT_DISASTER_RECOVERY,function(L){e.core.initDisasterRecovery(L)})}catch(L){e.getLog().error("Failed to initialize the API shared worker, we're dead!").withException(L).sendInternalLogToServer()}}},e.core._setTabId=function(){try{e.core.tabId=window.sessionStorage.getItem(e.SessionStorageKeys.TAB_ID),e.core.tabId||(e.core.tabId=e.randomId(),window.sessionStorage.setItem(e.SessionStorageKeys.TAB_ID,e.core.tabId)),e.core.upstream.sendUpstream(e.EventType.TAB_ID,{tabId:e.core.tabId})}catch(U){e.getLog().error("[Tab Id] There was an issue setting the tab Id").withException(U).sendInternalLogToServer()}},e.core.initCCP=function(U,Q){if(e.core.checkNotInitialized(),e.core.initialized)return;e.getLog().info("Iframe initialization started").sendInternalLogToServer();var G=Date.now();try{if(e.core._getCCPIframe()){e.getLog().error("Attempted to call initCCP when an iframe generated by initCCP already exists").sendInternalLogToServer();return}}catch(ie){e.getLog().error("Error while checking if initCCP has already been called").withException(ie).sendInternalLogToServer()}var ee={};typeof Q=="string"?ee.ccpUrl=Q:ee=Q,e.assertNotNull(U,"containerDiv"),e.assertNotNull(ee.ccpUrl,"params.ccpUrl"),ee.softphone?.disableStoringParamsInLocalStorage||(Ce.clean(),Z.clean()),e.storageAccess.init(ee.ccpUrl,U,ee.storageAccess||{});var pe=e.core._createCCPIframe(U,ee),he=new e.IFrameConduit(ee.ccpUrl,window,pe);e.core.upstream=he,e.core.eventBus=new e.EventBus({logEvents:!1}),e.storageAccess.canRequest()?e.storageAccess.setupRequestHandlers({onGrant:se}):se();function se(){e.core.agentDataProvider=new we(e.core.getEventBus()),e.core.mediaFactory=new e.MediaFactory(ee),e.core._sendIframeStyleDataUpstreamAfterReasonableWaitTime(pe,he),e.core.webSocketProvider=new je,he.onAllUpstream(e.core.getEventBus().bridge()),e.core.keepaliveManager=new be(he,e.core.getEventBus(),ee.ccpSynTimeout||m,ee.ccpAckTimeout||b),e.core.iframeRefreshTimeout=null,e.core.ccpLoadTimeoutInstance=i.setTimeout(function(){e.core.ccpLoadTimeoutInstance=null,e.core.getEventBus().trigger(e.EventType.ACK_TIMEOUT),e.getLog().info("CCP LoadTimeout triggered").sendInternalLogToServer()},ee.ccpLoadTimeout||C),e.getLog().scheduleUpstreamOuterContextCCPLogsPush(he),e.getLog().scheduleUpstreamOuterContextCCPserverBoundLogsPush(he),he.onUpstream(e.EventType.ACKNOWLEDGE,function(ie){if(e.getLog().info("Acknowledged by the CCP!").sendInternalLogToServer(),e.core.client=new e.UpstreamConduitClient(he),e.core.masterClient=new e.UpstreamConduitMasterClient(he),e.core.portStreamId=ie.id,(ee.softphone||ee.chat||ee.task||ee.pageOptions||ee.shouldAddNamespaceToLogs||ee.disasterRecoveryOn)&&he.sendUpstream(e.EventType.CONFIGURE,{softphone:ee.softphone,chat:ee.chat,task:ee.task,pageOptions:ee.pageOptions,shouldAddNamespaceToLogs:ee.shouldAddNamespaceToLogs,disasterRecoveryOn:ee.disasterRecoveryOn}),ee.disasterRecoveryOn&&(e.core.region=ee.region,e.core.suppressContacts=de,e.core.forceOffline=function(N){he.sendUpstream(e.DisasterRecoveryEvents.SET_OFFLINE,N)},he.sendUpstream(e.DisasterRecoveryEvents.INIT_DISASTER_RECOVERY,ee)),e.core.ccpLoadTimeoutInstance&&(i.clearTimeout(e.core.ccpLoadTimeoutInstance),e.core.ccpLoadTimeoutInstance=null),he.sendUpstream(e.EventType.OUTER_CONTEXT_INFO,{streamsVersion:e.version}),e.core.keepaliveManager.start(),this.unsubscribe(),e.core.initialized=!0,e.core.getEventBus().trigger(e.EventType.INIT),G){var O=Date.now()-G,R=e.core.iframeRefreshAttempt||0;e.getLog().info("Iframe initialization succeeded").sendInternalLogToServer(),e.getLog().info(`Iframe initialization time ${O}`).sendInternalLogToServer(),e.getLog().info(`Iframe refresh attempts ${R}`).sendInternalLogToServer(),setTimeout(()=>{e.publishMetric({name:h,data:{count:R}}),e.publishMetric({name:f,data:{count:1}}),e.publishMetric({name:w,data:{count:O}}),ee.disasterRecoveryOn&&(e.publishMetric({name:I,data:{count:R}}),e.publishMetric({name:T,data:{count:1}}),e.publishMetric({name:x,data:{count:O}})),G=null},1e3)}}),he.onUpstream(e.EventType.LOG,function(ie){ie.loggerId!==e.getLog().getLoggerId()&&e.getLog().addLogEntry(e.LogEntry.fromObject(ie))}),e.core.getEventBus().subscribe(e.EventType.ACK_TIMEOUT,function(){if(ee.loginPopup!==!1)try{var ie=Be(ee);e.getLog().warn("ACK_TIMEOUT occurred, attempting to pop the login page if not already open.").sendInternalLogToServer(),e.core._openPopupWithLock(ie,ee.loginOptions)}catch(O){e.getLog().error("ACK_TIMEOUT occurred but we are unable to open the login popup.").withException(O).sendInternalLogToServer()}if(e.core.iframeRefreshTimeout==null)try{he.onUpstream(e.EventType.ACKNOWLEDGE,function(){this.unsubscribe(),i.clearTimeout(e.core.iframeRefreshTimeout),e.core.iframeRefreshTimeout=null,(ee.loginPopupAutoClose||ee.loginOptions&&ee.loginOptions.autoClose)&&e.core.loginWindow&&(e.core.loginWindow.close(),e.core.loginWindow=null)}),e.core._refreshIframeOnTimeout(ee,U)}catch(O){e.getLog().error("Error occurred while refreshing iframe").withException(O).sendInternalLogToServer()}}),ee.onViewContact&&e.core.onViewContact(ee.onViewContact),he.onUpstream(e.EventType.UPDATE_CONNECTED_CCPS,function(ie){e.numberOfConnectedCCPs=ie.length}),he.onUpstream(e.VoiceIdEvents.UPDATE_DOMAIN_ID,function(ie){ie&&ie.domainId&&(e.core.voiceIdDomainId=ie.domainId)}),e.core.getEventBus().subscribe(e.EventType.IFRAME_RETRIES_EXHAUSTED,function(){if(G){var ie=e.core.iframeRefreshAttempt-1;e.getLog().info("Iframe initialization failed").sendInternalLogToServer(),e.getLog().info(`Time after iframe initialization started ${Date.now()-G}`).sendInternalLogToServer(),e.getLog().info(`Iframe refresh attempts ${ie}`).sendInternalLogToServer(),e.publishMetric({name:h,data:{count:ie}}),e.publishMetric({name:f,data:{count:0}}),ee.disasterRecoveryOn&&(e.publishMetric({name:I,data:{count:ie}}),e.publishMetric({name:T,data:{count:0}})),G=null}}),e.core.softphoneParams=ee.softphone}},e.core._openPopupWithLock=function(U,Q){let G="connect-login-popup-lock"+U;try{navigator.locks.request(G,{mode:"exclusive",ifAvailable:!0},ee=>tr(this,null,function*(){if(!ee){e.getLog().info("Popup already opened by another tab.").sendInternalLogToServer();return}e.getLog().info("Opening popup window with weblock.").sendInternalLogToServer(),e.core.loginWindow=e.core.getPopupManager().open(U,e.MasterTopics.LOGIN_POPUP,Q),e.core._shouldHoldPopupLock=!0;let pe=setInterval(function(){(!e.core.loginWindow||e.core.loginWindow?.closed)&&(clearInterval(pe),e.core._shouldHoldPopupLock=!1,e.getLog().info("Cleared check popup interval.").sendInternalLogToServer())},X);for(;e.core._shouldHoldPopupLock;)yield new Promise(he=>setTimeout(he,1e3));e.getLog().info("Releasing weblock for opening login popup.").sendInternalLogToServer()}))}catch(ee){e.getLog().error("Failed to use weblock to open popup. Your browser may be out of date.").withException(ee).sendInternalLogToServer(),e.core.loginWindow||(e.core.loginWindow=e.core.getPopupManager().open(U,e.MasterTopics.LOGIN_POPUP,Q))}},e.core.onIframeRetriesExhausted=function(U){return e.core.getEventBus().subscribe(e.EventType.IFRAME_RETRIES_EXHAUSTED,U)},e.core._refreshIframeOnTimeout=function(U,Q){e.assertNotNull(U,"initCCPParams"),e.assertNotNull(Q,"containerDiv");var G=U.ccpLoadTimeout?U.ccpLoadTimeout:U.disasterRecoveryOn?_:D;i.clearTimeout(e.core.iframeRefreshTimeout),e.core.iframeRefreshTimeout=i.setTimeout(function(){if(e.core.iframeRefreshAttempt=(e.core.iframeRefreshAttempt||0)+1,e.core.iframeRefreshAttempt<=g){try{var ee=e.core._getCCPIframe();ee&&ee.parentNode.removeChild(ee);var pe=e.core._createCCPIframe(Q,U);e.core.upstream.upstream.output=pe.contentWindow,e.core._sendIframeStyleDataUpstreamAfterReasonableWaitTime(pe,e.core.upstream)}catch(he){e.getLog().error("Error while checking for, and recreating, the CCP IFrame").withException(he).sendInternalLogToServer()}e.core._refreshIframeOnTimeout(U,Q)}else e.core.getEventBus().trigger(e.EventType.IFRAME_RETRIES_EXHAUSTED),i.clearTimeout(e.core.iframeRefreshTimeout)},G)},e.core._getCCPIframe=function(){for(var U of window.document.getElementsByTagName("iframe"))if(U.name===v)return U;return null},e.core._createCCPIframe=function(U,Q){e.assertNotNull(Q,"initCCPParams"),e.assertNotNull(U,"containerDiv");var G=document.createElement("iframe");return G.src=Q.ccpUrl,G.allow="microphone; camera; autoplay; clipboard-write; identity-credentials-get",G.style=Q.style||"width: 100%; height: 100%",G.title=Q.iframeTitle||v,G.name=v,e.storageAccess.canRequest()&&(G.src=e.storageAccess.getRequestStorageAccessUrl(),G.addEventListener("load",e.storageAccess.request)),U.appendChild(G),G},e.core._sendIframeStyleDataUpstreamAfterReasonableWaitTime=function(U,Q){e.assertNotNull(U,"iframe"),e.assertNotNull(Q,"conduit"),setTimeout(function(){var G=window.getComputedStyle(U,null),ee={display:G.display,offsetWidth:U.offsetWidth,offsetHeight:U.offsetHeight,clientRectsLength:U.getClientRects().length};Q.sendUpstream(e.EventType.IFRAME_STYLE,ee)},1e4)};var be=function(U,Q,G,ee){this.conduit=U,this.eventBus=Q,this.synTimeout=G,this.ackTimeout=ee,this.ackTimer=null,this.synTimer=null,this.ackSub=null};be.prototype.start=function(){var U=this;this.conduit.sendUpstream(e.EventType.SYNCHRONIZE),this.ackSub=this.conduit.onUpstream(e.EventType.ACKNOWLEDGE,function(){this.unsubscribe(),i.clearTimeout(U.ackTimer),U._deferStart()}),this.ackTimer=i.setTimeout(function(){U.ackSub.unsubscribe(),U.eventBus.trigger(e.EventType.ACK_TIMEOUT),U._deferStart()},this.ackTimeout)},be.prototype._deferStart=function(){this.synTimer=i.setTimeout(e.hitch(this,this.start),this.synTimeout)},be.prototype.deferStart=function(){this.synTimer==null&&(this.synTimer=i.setTimeout(e.hitch(this,this.start),this.synTimeout))};var je=function(){var U={initFailure:new Set,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set,connectionOpen:new Set,connectionClose:new Set},Q=function(G,ee){G.forEach(function(pe){pe(ee)})};e.core.getUpstream().onUpstream(e.WebSocketEvents.INIT_FAILURE,function(){Q(U.initFailure)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.CONNECTION_OPEN,function(G){Q(U.connectionOpen,G)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.CONNECTION_CLOSE,function(G){Q(U.connectionClose,G)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.CONNECTION_GAIN,function(){Q(U.connectionGain)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.CONNECTION_LOST,function(G){Q(U.connectionLost,G)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.SUBSCRIPTION_UPDATE,function(G){Q(U.subscriptionUpdate,G)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.SUBSCRIPTION_FAILURE,function(G){Q(U.subscriptionFailure,G)}),e.core.getUpstream().onUpstream(e.WebSocketEvents.ALL_MESSAGE,function(G){Q(U.allMessage,G),U.topic.has(G.topic)&&Q(U.topic.get(G.topic),G)}),this.sendMessage=function(G){e.core.getUpstream().sendUpstream(e.WebSocketEvents.SEND,G)},this.onInitFailure=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.initFailure.add(G),function(){return U.initFailure.delete(G)}},this.onConnectionOpen=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.connectionOpen.add(G),function(){return U.connectionOpen.delete(G)}},this.onConnectionClose=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.connectionClose.add(G),function(){return U.connectionClose.delete(G)}},this.onConnectionGain=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.connectionGain.add(G),function(){return U.connectionGain.delete(G)}},this.onConnectionLost=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.connectionLost.add(G),function(){return U.connectionLost.delete(G)}},this.onSubscriptionUpdate=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.subscriptionUpdate.add(G),function(){return U.subscriptionUpdate.delete(G)}},this.onSubscriptionFailure=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.subscriptionFailure.add(G),function(){return U.subscriptionFailure.delete(G)}},this.subscribeTopics=function(G){e.assertNotNull(G,"topics"),e.assertTrue(e.isArray(G),"topics must be a array"),e.core.getUpstream().sendUpstream(e.WebSocketEvents.SUBSCRIBE,G)},this.onMessage=function(G,ee){return e.assertNotNull(G,"topicName"),e.assertTrue(e.isFunction(ee),"method must be a function"),U.topic.has(G)?U.topic.get(G).add(ee):U.topic.set(G,new Set([ee])),function(){return U.topic.get(G).delete(ee)}},this.onAllMessage=function(G){return e.assertTrue(e.isFunction(G),"method must be a function"),U.allMessage.add(G),function(){return U.allMessage.delete(G)}}},we=function(U){var Q=null;this.bus=U,this.bus.subscribe(e.AgentEvents.UPDATE,e.hitch(this,this.updateAgentData))};we.prototype.updateAgentData=function(U){var Q=this.agentData;this.agentData=U;try{let G=Date.parse(U.snapshot.snapshotTimestamp);if(!Q||G!==Date.parse(Q.snapshot.snapshotTimestamp)){let ee=new Date().getTime()-G;Fe(j,ee,{ContentLengthInBytes:e.core._calculateSnapshotSizingBucket(U.snapshot),IsCCPLayer:e.isCCP()})}}catch(G){e.getLog().error("[Metrics] Failed to send metrics.").withException(G).sendInternalLogToServer()}Q==null&&(e.agent.initialized=!0,this.bus.trigger(e.AgentEvents.INIT,new e.Agent)),this.bus.trigger(e.AgentEvents.REFRESH,new e.Agent),this._fireAgentUpdateEvents(Q)},we.prototype.getAgentData=function(){if(this.agentData==null)throw new e.StateError("No agent data is available yet!");return this.agentData},we.prototype.getContactData=function(U){var Q=this.getAgentData(),G=e.find(Q.snapshot.contacts,function(ee){return ee.contactId===U});if(G==null)throw new e.StateError("Contact %s no longer exists.",U);return G},we.prototype.getConnectionData=function(U,Q){var G=this.getContactData(U),ee=e.find(G.connections,function(pe){return pe.connectionId===Q});if(ee==null)throw new e.StateError("Connection %s for contact %s no longer exists.",Q,U);return ee},we.prototype.getInstanceId=function(){return this.getAgentData().configuration.routingProfile.routingProfileId.match(/instance\/([0-9a-fA-F|-]+)\//)[1]},we.prototype.getAWSAccountId=function(){return this.getAgentData().configuration.routingProfile.routingProfileId.match(/:([0-9]+):instance/)[1]},we.prototype._diffContacts=function(U){var Q={added:{},removed:{},common:{},oldMap:e.index(U==null?[]:U.snapshot.contacts,function(G){return G.contactId}),newMap:e.index(this.agentData.snapshot.contacts,function(G){return G.contactId}),endTime:0};return e.keys(Q.oldMap).forEach(function(G){e.contains(Q.newMap,G)?Q.common[G]=Q.newMap[G]:Q.removed[G]=Q.oldMap[G]}),e.keys(Q.newMap).forEach(function(G){e.contains(Q.oldMap,G)||(Q.added[G]=Q.newMap[G])}),Q.endTime=performance.now(),Q},we.prototype._fireAgentUpdateEvents=function(U){var Q=this,G=null,ee=U==null?e.AgentAvailStates.INIT:U.snapshot.state.name,pe=this.agentData.snapshot.state.name,he=U==null?e.AgentStateType.INIT:U.snapshot.state.type,se=this.agentData.snapshot.state.type;he!==se&&e.core.getAgentRoutingEventGraph().getAssociations(this,he,se).forEach(function(B){Q.bus.trigger(B,new e.Agent)}),ee!==pe&&(this.bus.trigger(e.AgentEvents.STATE_CHANGE,{agent:new e.Agent,oldState:ee,newState:pe}),e.core.getAgentStateEventGraph().getAssociations(this,ee,pe).forEach(function(B){Q.bus.trigger(B,new e.Agent)}));var ie=U&&U.snapshot.nextState?U.snapshot.nextState.name:null,O=this.agentData.snapshot.nextState?this.agentData.snapshot.nextState.name:null;ie!==O&&O&&Q.bus.trigger(e.AgentEvents.ENQUEUED_NEXT_STATE,new e.Agent);let R=performance.now();U!==null?G=this._diffContacts(U):G={added:e.index(this.agentData.snapshot.contacts,function(B){return B.contactId}),removed:{},common:{},oldMap:{},newMap:e.index(this.agentData.snapshot.contacts,function(B){return B.contactId}),endTime:performance.now()};let N=performance.now();e.values(G.added).forEach(function(B){Q.bus.trigger(e.ContactEvents.INIT,new e.Contact(B.contactId)),Q._fireContactUpdateEvents(B.contactId,e.ContactStateType.INIT,B.state.type)}),e.values(G.removed).forEach(function(B){Q.bus.trigger(e.ContactEvents.DESTROYED,new e.ContactSnapshot(B)),Q.bus.trigger(e.core.getContactEventName(e.ContactEvents.DESTROYED,B.contactId),new e.ContactSnapshot(B)),Q._unsubAllContactEventsForContact(B.contactId)}),e.keys(G.common).forEach(function(B){Q._fireContactUpdateEvents(B,G.oldMap[B].state.type,G.newMap[B].state.type)});let H=performance.now(),z={ContentLengthInBytes:e.core._calculateSnapshotSizingBucket(this.agentData.snapshot),IsCCPLayer:e.isCCP()};try{Fe(Se,G.endTime-R,z),Fe(Y,H-N,z),Fe($,H-R,z)}catch(B){e.getLog().error("[Metrics] Failed to send metrics.").withException(B).sendInternalLogToServer()}};let Fe=(U,Q,G)=>{e.publishMetric({name:U,data:{latency:Q,optionalDimensions:G}})};e.core._calculateSnapshotSizingBucket=function(U){if(U&&U.hasOwnProperty("contentLength")){let Q=parseInt(U.contentLength);for(let G of Object.keys(Te)){let[ee,pe]=Te[G];if(Q>=ee&&Q<=pe)return G}}return"undefined"},we.prototype._fireContactUpdateEvents=function(U,Q,G){var ee=this;Q!==G&&e.core.getContactEventGraph().getAssociations(this,Q,G).forEach(function(pe){ee.bus.trigger(pe,new e.Contact(U)),ee.bus.trigger(e.core.getContactEventName(pe,U),new e.Contact(U))}),ee.bus.trigger(e.ContactEvents.REFRESH,new e.Contact(U)),ee.bus.trigger(e.core.getContactEventName(e.ContactEvents.REFRESH,U),new e.Contact(U))},we.prototype._unsubAllContactEventsForContact=function(U){var Q=this;e.values(e.ContactEvents).forEach(function(G){Q.bus.getSubscriptions(e.core.getContactEventName(G,U)).map(function(ee){ee.unsubscribe()})})},e.core.onViewContact=function(U){return e.core.getEventBus().subscribe(e.ContactEvents.VIEW,U)},e.core.viewContact=function(U){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ContactEvents.VIEW,data:{contactId:U}})},e.core.onActivateChannelWithViewType=function(U){return e.core.getEventBus().subscribe(e.ChannelViewEvents.ACTIVATE_CHANNEL_WITH_VIEW_TYPE,U)},e.core.activateChannelWithViewType=function(U,Q,G,ee){let pe={viewType:U,mediaType:Q};G&&(pe.source=G),ee&&(pe.caseId=ee),e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ChannelViewEvents.ACTIVATE_CHANNEL_WITH_VIEW_TYPE,data:pe})},e.core.triggerTaskCreated=function(U){e.core.getUpstream().upstreamBus.trigger(e.TaskEvents.CREATED,U)},e.core.onAccessDenied=function(U){return e.core.getEventBus().subscribe(e.EventType.ACCESS_DENIED,U)},e.core.onAuthFail=function(U){return e.core.getEventBus().subscribe(e.EventType.AUTH_FAIL,U)},e.core.onAuthorizeSuccess=function(U){return e.core.getEventBus().subscribe(e.EventType.AUTHORIZE_SUCCESS,U)},e.core._handleAuthorizeSuccess=function(){window.sessionStorage.setItem(e.SessionStorageKeys.AUTHORIZE_RETRY_COUNT,0)},e.core._handleAuthFail=function(U,Q,G){G&&G.authorize?e.core._handleAuthorizeFail(U):e.core._handleCTIAuthFail(Q)},e.core._handleAuthorizeFail=function(U){let Q=e.core._getAuthRetryCount();if(!e.core.authorizeTimeoutId)if(Q<e.core.MAX_AUTHORIZE_RETRY_COUNT_FOR_SESSION){e.core._incrementAuthRetryCount();let G=AWS.util.calculateRetryDelay(Q+1||0,{base:2e3});e.core.authorizeTimeoutId=setTimeout(()=>{e.core._redirectToLogin(U)},G)}else e.getLog().warn("We have exhausted our authorization retries due to 401s from the authorize api. No more retries will be attempted in this session until the authorize api returns 200.").sendInternalLogToServer(),e.core.getEventBus().trigger(e.EventType.AUTHORIZE_RETRIES_EXHAUSTED)},e.core._redirectToLogin=function(U){typeof U=="string"?location.assign(U):location.reload()},e.core._handleCTIAuthFail=function(U){if(!e.core.ctiTimeoutId)if(e.core.ctiAuthRetryCount<e.core.MAX_CTI_AUTH_RETRY_COUNT){e.core.ctiAuthRetryCount++;let Q=AWS.util.calculateRetryDelay(e.core.ctiAuthRetryCount||0,{base:500});e.core.ctiTimeoutId=setTimeout(()=>{e.core.authorize(U).then(e.core._triggerAuthorizeSuccess.bind(e.core)).catch(e.core._triggerAuthFail.bind(e.core,{authorize:!0})),e.core.ctiTimeoutId=null},Q)}else e.getLog().warn("We have exhausted our authorization retries due to 401s from the CTI service. No more retries will be attempted until the page is refreshed.").sendInternalLogToServer(),e.core.getEventBus().trigger(e.EventType.CTI_AUTHORIZE_RETRIES_EXHAUSTED)},e.core._triggerAuthorizeSuccess=function(){e.core.getUpstream().upstreamBus.trigger(e.EventType.AUTHORIZE_SUCCESS)},e.core._triggerAuthFail=function(U){e.core.getUpstream().upstreamBus.trigger(e.EventType.AUTH_FAIL,U)},e.core._getAuthRetryCount=function(){let U=window.sessionStorage.getItem(e.SessionStorageKeys.AUTHORIZE_RETRY_COUNT);if(U!==null){if(isNaN(parseInt(U)))throw new e.StateError("The session storage value for auth retry count was NaN");return parseInt(U)}else return window.sessionStorage.setItem(e.SessionStorageKeys.AUTHORIZE_RETRY_COUNT,0),0},e.core._incrementAuthRetryCount=function(){window.sessionStorage.setItem(e.SessionStorageKeys.AUTHORIZE_RETRY_COUNT,(e.core._getAuthRetryCount()+1).toString())},e.core.onAuthorizeRetriesExhausted=function(U){return e.core.getEventBus().subscribe(e.EventType.AUTHORIZE_RETRIES_EXHAUSTED,U)},e.core.onCTIAuthorizeRetriesExhausted=function(U){return e.core.getEventBus().subscribe(e.EventType.CTI_AUTHORIZE_RETRIES_EXHAUSTED,U)},e.core.onSoftphoneSessionInit=function(U){return e.core.getEventBus().subscribe(e.ConnectionEvents.SESSION_INIT,U)},e.core.onConfigure=function(U){return e.core.getEventBus().subscribe(e.ConfigurationEvents.CONFIGURE,U)},e.core.onInitialized=function(U){return e.core.getEventBus().subscribe(e.EventType.INIT,U)},e.core.getContactEventName=function(U,Q){if(e.assertNotNull(U,"eventName"),e.assertNotNull(Q,"contactId"),!e.contains(e.values(e.ContactEvents),U))throw new e.ValueError("%s is not a valid contact event.",U);return e.sprintf("%s::%s",U,Q)},e.core.getEventBus=function(){return e.core.eventBus},e.core.getWebSocketManager=function(){return e.core.webSocketProvider},e.core.getAgentDataProvider=function(){return e.core.agentDataProvider},e.core.getLocalTimestamp=function(){return e.core.getAgentDataProvider().getAgentData().snapshot.localTimestamp},e.core.getSkew=function(){return e.core.getAgentDataProvider().getAgentData().snapshot.skew},e.core.getAgentRoutingEventGraph=function(){return e.core.agentRoutingEventGraph},e.core.agentRoutingEventGraph=new e.EventGraph().assoc(e.EventGraph.ANY,e.AgentStateType.ROUTABLE,e.AgentEvents.ROUTABLE).assoc(e.EventGraph.ANY,e.AgentStateType.NOT_ROUTABLE,e.AgentEvents.NOT_ROUTABLE).assoc(e.EventGraph.ANY,e.AgentStateType.OFFLINE,e.AgentEvents.OFFLINE),e.core.getAgentStateEventGraph=function(){return e.core.agentStateEventGraph},e.core.agentStateEventGraph=new e.EventGraph().assoc(e.EventGraph.ANY,e.values(e.AgentErrorStates),e.AgentEvents.ERROR).assoc(e.EventGraph.ANY,e.AgentAvailStates.AFTER_CALL_WORK,e.AgentEvents.ACW),e.core.getContactEventGraph=function(){return e.core.contactEventGraph},e.core.contactEventGraph=new e.EventGraph().assoc(e.EventGraph.ANY,e.ContactStateType.INCOMING,e.ContactEvents.INCOMING).assoc(e.EventGraph.ANY,e.ContactStateType.PENDING,e.ContactEvents.PENDING).assoc(e.EventGraph.ANY,e.ContactStateType.CONNECTING,e.ContactEvents.CONNECTING).assoc(e.EventGraph.ANY,e.ContactStateType.CONNECTED,e.ContactEvents.CONNECTED).assoc(e.ContactStateType.CONNECTING,e.ContactStateType.ERROR,e.ContactEvents.MISSED).assoc(e.ContactStateType.INCOMING,e.ContactStateType.ERROR,e.ContactEvents.MISSED).assoc(e.EventGraph.ANY,e.ContactStateType.ENDED,e.ContactEvents.ACW).assoc(e.values(e.CONTACT_ACTIVE_STATES),e.values(e.relativeComplement(e.CONTACT_ACTIVE_STATES,e.ContactStateType)),e.ContactEvents.ENDED).assoc(e.EventGraph.ANY,e.ContactStateType.ERROR,e.ContactEvents.ERROR).assoc(e.ContactStateType.CONNECTING,e.ContactStateType.MISSED,e.ContactEvents.MISSED).assoc(e.ContactStateType.INCOMING,e.ContactStateType.MISSED,e.ContactEvents.MISSED).assoc(e.ContactStateType.CONNECTING,e.ContactStateType.REJECTED,e.ContactEvents.MISSED).assoc(e.ContactStateType.INCOMING,e.ContactStateType.REJECTED,e.ContactEvents.MISSED),e.core.getClient=function(){if(!e.core.client)throw new e.StateError("The connect core has not been initialized!");return e.core.client},e.core.client=null,e.core.getApiProxyClient=function(){if(!e.core.apiProxyClient)throw new e.StateError("The connect apiProxy Client has not been initialized!");return e.core.apiProxyClient},e.core.apiProxyClient=null,e.core.getAgentAppClient=function(){if(!e.core.agentAppClient)throw new e.StateError("The connect AgentApp Client has not been initialized!");return e.core.agentAppClient},e.core.agentAppClient=null,e.core.getTaskTemplatesClient=function(){if(!e.core.taskTemplatesClient)throw new e.StateError("The connect TaskTemplates Client has not been initialized!");return e.core.taskTemplatesClient},e.core.taskTemplatesClient=null,e.core.getMasterClient=function(){if(!e.core.masterClient)throw new e.StateError("The connect master client has not been initialized!");return e.core.masterClient},e.core.masterClient=null,e.core.getSoftphoneManager=function(){return e.core.softphoneManager},e.core.softphoneManager=null,e.core.getNotificationManager=function(){return e.core.notificationManager||(e.core.notificationManager=new e.NotificationManager),e.core.notificationManager},e.core.notificationManager=null,e.core.getPopupManager=function(){return e.core.popupManager},e.core.popupManager=new e.PopupManager,e.core.getUpstream=function(){if(!e.core.upstream)throw new e.StateError("There is no upstream conduit!");return e.core.upstream},e.core.upstream=null,e.core.AgentDataProvider=we})()},592:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e;var m="<<all>>",b=e.makeEnum(["acknowledge","ack_timeout","init","api_request","api_response","auth_fail","access_denied","close","configure","log","master_request","master_response","synchronize","terminate","terminated","send_logs","reload_agent_configuration","broadcast","api_metric","client_metric","softphone_stats","softphone_report","client_side_logs","server_bound_internal_log","mute","iframe_style","iframe_retries_exhausted","update_connected_ccps","outer_context_info","media_device_request","media_device_response","tab_id","authorize_success","authorize_retries_exhausted","cti_authorize_retries_exhausted","click_stream_data","set_quick_get_agent_snapshot_flag","api_proxy_request","api_proxy_response"]),C=e.makeNamespacedEnum("connect",["loginPopup","sendLogs","softphone","ringtone","metrics","failover"]),D=e.makeNamespacedEnum("agent",["init","update","refresh","routable","not_routable","pending","contact_pending","offline","error","softphone_error","websocket_connection_lost","websocket_connection_gained","state_change","acw","mute_toggle","local_media_stream_created","enqueued_next_state"]),_=e.makeNamespacedEnum("webSocket",["init_failure","connection_open","connection_close","connection_error","connection_gain","connection_lost","subscription_update","subscription_failure","all_message","send","subscribe"]),g=e.makeNamespacedEnum("contact",["init","refresh","destroyed","incoming","pending","connecting","connected","missed","acw","view","ended","error","accepted"]),v=e.makeNamespacedEnum("taskList",["activate_channel_with_view_type"]),E=e.makeNamespacedEnum("task",["created"]),l=e.makeNamespacedEnum("connection",["session_init","ready_to_start_session"]),u=e.makeNamespacedEnum("configuration",["configure","set_speaker_device","set_microphone_device","set_ringer_device","speaker_device_changed","microphone_device_changed","ringer_device_changed","camera_device_changed","background_blur_changed"]),a=e.makeNamespacedEnum("disasterRecovery",["suppress","force_offline","set_offline","init_disaster_recovery","failover","failover_pending","init_dr_polling"]),y=e.makeNamespacedEnum("voiceId",["update_domain_id"]),p=function(){};p.createRequest=function(S,h,I){return{event:S,requestId:e.randomId(),method:h,params:I}},p.createResponse=function(S,h,I,f){return{event:S,requestId:h.requestId,data:I,err:f||null}};var s=function(S,h,I){this.subMap=S,this.id=e.randomId(),this.eventName=h,this.f=I};s.prototype.unsubscribe=function(){this.subMap.unsubscribe(this.eventName,this.id)};var d=function(){this.subIdMap={},this.subEventNameMap={}};d.prototype.subscribe=function(S,h){var I=new s(this,S,h);this.subIdMap[I.id]=I;var f=this.subEventNameMap[S]||[];return f.push(I),this.subEventNameMap[S]=f,I},d.prototype.unsubscribe=function(S,h){e.contains(this.subEventNameMap,S)&&(this.subEventNameMap[S]=this.subEventNameMap[S].filter(function(I){return I.id!==h}),this.subEventNameMap[S].length<1&&delete this.subEventNameMap[S]),e.contains(this.subIdMap,h)&&delete this.subIdMap[h]},d.prototype.getAllSubscriptions=function(){return e.values(this.subEventNameMap).reduce(function(S,h){return S.concat(h)},[])},d.prototype.getSubscriptions=function(S){return this.subEventNameMap[S]||[]};var c=function(S){var h=S||{};this.subMap=new d,this.logEvents=h.logEvents||!1};c.prototype.subscribe=function(S,h){return e.assertNotNull(S,"eventName"),e.assertNotNull(h,"f"),e.assertTrue(e.isFunction(h),"f must be a function"),this.subMap.subscribe(S,h)},c.prototype.subscribeAll=function(S){return e.assertNotNull(S,"f"),e.assertTrue(e.isFunction(S),"f must be a function"),this.subMap.subscribe(m,S)},c.prototype.getSubscriptions=function(S){return this.subMap.getSubscriptions(S)},c.prototype.trigger=function(S,h){e.assertNotNull(S,"eventName");var I=this,f=this.subMap.getSubscriptions(m),T=this.subMap.getSubscriptions(S);this.logEvents&&S!==e.EventType.LOG&&S!==e.EventType.MASTER_RESPONSE&&S!==e.EventType.API_METRIC&&S!==e.EventType.SERVER_BOUND_INTERNAL_LOG&&e.getLog().trace("Publishing event: %s",S).sendInternalLogToServer(),S.startsWith(e.ContactEvents.ACCEPTED)&&h&&h.contactId&&!(h instanceof e.Contact)&&(h=new e.Contact(h.contactId)),f.concat(T).forEach(function(w){try{w.f(h||null,S,I)}catch(x){e.getLog().error("'%s' event handler failed.",S).withException(x).sendInternalLogToServer()}})},c.prototype.bridge=function(){var S=this;return function(h,I){S.trigger(I,h)}},c.prototype.unsubscribeAll=function(){this.subMap.getAllSubscriptions().forEach(function(S){S.unsubscribe()})},e.EventBus=c,e.EventFactory=p,e.EventType=b,e.AgentEvents=D,e.ConfigurationEvents=u,e.ConnectionEvents=l,e.ConnnectionEvents=l,e.ContactEvents=g,e.ChannelViewEvents=v,e.TaskEvents=E,e.VoiceIdEvents=y,e.WebSocketEvents=_,e.MasterTopics=C,e.DisasterRecoveryEvents=a})()},286:()=>{(function(i){var e={};function m(b){if(e[b])return e[b].exports;var C=e[b]={i:b,l:!1,exports:{}};return i[b].call(C.exports,C,C.exports,m),C.l=!0,C.exports}m.m=i,m.c=e,m.d=function(b,C,D){m.o(b,C)||Object.defineProperty(b,C,{enumerable:!0,get:D})},m.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},m.t=function(b,C){if(1&C&&(b=m(b)),8&C||4&C&&typeof b=="object"&&b&&b.__esModule)return b;var D=Object.create(null);if(m.r(D),Object.defineProperty(D,"default",{enumerable:!0,value:b}),2&C&&typeof b!="string")for(var _ in b)m.d(D,_,(function(g){return b[g]}).bind(null,_));return D},m.n=function(b){var C=b&&b.__esModule?function(){return b.default}:function(){return b};return m.d(C,"a",C),C},m.o=function(b,C){return Object.prototype.hasOwnProperty.call(b,C)},m.p="",m(m.s=2)})([function(i,e,m){"use strict";var b=m(1),C="NULL",D="CLIENT_LOGGER",_="DEBUG",g=2e3,v="AMZ_WEB_SOCKET_MANAGER:",E="Network offline",l="Network online, connecting to WebSocket server",u="Network offline, ignoring this getWebSocketConnConfig request",a="Heartbeat response not received",y="Heartbeat response received",p="Sending heartbeat",s="Failed to send heartbeat since WebSocket is not open",d="WebSocket connection established!",c="WebSocket connection is closed",S="WebSocketManager Error, error_event: ",h="Scheduling WebSocket reinitialization, after delay ",I="WebSocket URL cannot be used to establish connection",f="WebSocket Initialization failed - Terminating and cleaning subscriptions",T="Terminating WebSocket Manager",w="Fetching new WebSocket connection configuration",x="Successfully fetched webSocket connection configuration",P="Failed to fetch webSocket connection configuration",F="Retrying fetching new WebSocket connection configuration",W="Initializing Websocket Manager",V="Initializing Websocket Manager Failed!",j="Websocket connection open",Y="Websocket connection close",$="Websocket connection gain",Se="Websocket connection lost",X="Websocket subscription failure",ae="Reset Websocket state",Te="WebSocketManager Message Error",$e="Message received for topic ",Be="Invalid incoming message",xe="WebsocketManager invoke callbacks for topic success ",Le="aws/subscribe",Ce="aws/unsubscribe",J="aws/heartbeat",Z="connected",ne="disconnected";function le(B){return(le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(B)}var de={assertTrue:function(B,L){if(!B)throw new Error(L)},assertNotNull:function(B,L){return de.assertTrue(B!==null&&le(B)!==void 0,Object(b.sprintf)("%s must be provided",L||"A value")),B},isNonEmptyString:function(B){return typeof B=="string"&&B.length>0},assertIsList:function(B,L){if(!Array.isArray(B))throw new Error(L+" is not an array")},isFunction:function(B){return!!(B&&B.constructor&&B.call&&B.apply)},isObject:function(B){return!(le(B)!=="object"||B===null)},isString:function(B){return typeof B=="string"},isNumber:function(B){return typeof B=="number"}},ce=new RegExp("^(wss://)\\w*");de.validWSUrl=function(B){return ce.test(B)},de.getSubscriptionResponse=function(B,L,A){return{topic:B,content:{status:L?"success":"failure",topics:A}}},de.assertIsObject=function(B,L){if(!de.isObject(B))throw new Error(L+" is not an object!")},de.addJitter=function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;L=Math.min(L,1);var A=Math.random()>.5?1:-1;return Math.floor(B+A*B*Math.random()*L)},de.isNetworkOnline=function(){return navigator.onLine},de.isNetworkFailure=function(B){return!(!B._debug||!B._debug.type)&&B._debug.type==="NetworkingError"};var re=de;function ye(B,L){return!L||je(L)!=="object"&&typeof L!="function"?function(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(B):L}function Ie(B){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(B)}function be(B,L){return(be=Object.setPrototypeOf||function(A,M){return A.__proto__=M,A})(B,L)}function je(B){return(je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(B)}function we(B,L){if(!(B instanceof L))throw new TypeError("Cannot call a class as a function")}function Fe(B,L){for(var A=0;A<L.length;A++){var M=L[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(B,M.key,M)}}function U(B,L,A){return L&&Fe(B.prototype,L),A&&Fe(B,A),B}var Q=function(){function B(){we(this,B)}return U(B,[{key:"debug",value:function(L){}},{key:"info",value:function(L){}},{key:"warn",value:function(L){}},{key:"error",value:function(L){}},{key:"advancedLog",value:function(L){}}]),B}(),G=v,ee={DEBUG:10,INFO:20,WARN:30,ERROR:40,ADVANCED_LOG:50},pe=function(){function B(){we(this,B),this.updateLoggerConfig(),this.consoleLoggerWrapper=ie()}return U(B,[{key:"writeToClientLogger",value:function(L,A){if(this.hasClientLogger())switch(L){case ee.DEBUG:return this._clientLogger.debug(A)||A;case ee.INFO:return this._clientLogger.info(A)||A;case ee.WARN:return this._clientLogger.warn(A)||A;case ee.ERROR:return this._clientLogger.error(A)||A;case ee.ADVANCED_LOG:return this._advancedLogWriter?this._clientLogger[this._advancedLogWriter](A)||A:""}}},{key:"isLevelEnabled",value:function(L){return L>=this._level}},{key:"hasClientLogger",value:function(){return this._clientLogger!==null}},{key:"getLogger",value:function(L){var A=L.prefix||G;return this._logsDestination===_?this.consoleLoggerWrapper:new se(A)}},{key:"updateLoggerConfig",value:function(L){var A=L||{};this._level=A.level||ee.INFO,this._advancedLogWriter="warn",A.advancedLogWriter&&(this._advancedLogWriter=A.advancedLogWriter),A.customizedLogger&&je(A.customizedLogger)==="object"&&(this.useClientLogger=!0),this._clientLogger=A.logger||this.selectLogger(A),this._logsDestination=C,A.debug&&(this._logsDestination=_),A.logger&&(this._logsDestination=D)}},{key:"selectLogger",value:function(L){return L.customizedLogger&&je(L.customizedLogger)==="object"?L.customizedLogger:L.useDefaultLogger?(this.consoleLoggerWrapper=ie(),this.consoleLoggerWrapper):null}}]),B}(),he=function(){function B(){we(this,B)}return U(B,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"advancedLog",value:function(){}}]),B}(),se=function(B){function L(A){var M;return we(this,L),(M=ye(this,Ie(L).call(this))).prefix=A||G,M}return function(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),M&&be(A,M)}(L,he),U(L,[{key:"debug",value:function(){for(var A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];return this._log(ee.DEBUG,M)}},{key:"info",value:function(){for(var A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];return this._log(ee.INFO,M)}},{key:"warn",value:function(){for(var A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];return this._log(ee.WARN,M)}},{key:"error",value:function(){for(var A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];return this._log(ee.ERROR,M)}},{key:"advancedLog",value:function(){for(var A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];return this._log(ee.ADVANCED_LOG,M)}},{key:"_shouldLog",value:function(A){return O.hasClientLogger()&&O.isLevelEnabled(A)}},{key:"_writeToClientLogger",value:function(A,M){return O.writeToClientLogger(A,M)}},{key:"_log",value:function(A,M){if(this._shouldLog(A)){var k=O.useClientLogger?M:this._convertToSingleStatement(M,A);return this._writeToClientLogger(A,k)}}},{key:"_convertToSingleStatement",value:function(A,M){var k=new Date(Date.now()).toISOString(),K=this._getLogLevelByValue(M),q="[".concat(k,"][").concat(K,"]");this.prefix&&(q+=this.prefix+" "),this.options&&(this.options.prefix?q+=" "+this.options.prefix+":":q+="",this.options.logMetaData?q+=" Meta data: "+JSON.stringify(this.options.logMetaData):q+="");for(var oe=0;oe<A.length;oe++){var ue=A[oe];q+=this._convertToString(ue)+" "}return q}},{key:"_getLogLevelByValue",value:function(A){switch(A){case 10:return"DEBUG";case 20:return"INFO";case 30:return"WARN";case 40:return"ERROR";case 50:return"ADVANCED_LOG"}}},{key:"_convertToString",value:function(A){try{if(!A)return"";if(re.isString(A))return A;if(re.isObject(A)&&re.isFunction(A.toString)){var M=A.toString();if(M!=="[object Object]")return M}return JSON.stringify(A)}catch(k){return console.error("Error while converting argument to string",A,k),""}}}]),L}(),ie=function(){var B=new he;return B.debug=function(){for(var L=arguments.length,A=new Array(L),M=0;M<L;M++)A[M]=arguments[M];return console.debug.apply(window.console,[].concat(A))},B.info=function(){for(var L=arguments.length,A=new Array(L),M=0;M<L;M++)A[M]=arguments[M];return console.info.apply(window.console,[].concat(A))},B.warn=function(){for(var L=arguments.length,A=new Array(L),M=0;M<L;M++)A[M]=arguments[M];return console.warn.apply(window.console,[].concat(A))},B.error=function(){for(var L=arguments.length,A=new Array(L),M=0;M<L;M++)A[M]=arguments[M];return console.error.apply(window.console,[].concat(A))},B},O=new pe;function R(B,L){for(var A=0;A<L.length;A++){var M=L[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(B,M.key,M)}}var N=function(){function B(k){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;(function(q,oe){if(!(q instanceof oe))throw new TypeError("Cannot call a class as a function")})(this,B),this.numAttempts=0,this.executor=k,this.hasActiveReconnection=!1,this.defaultRetry=K}var L,A,M;return L=B,(A=[{key:"retry",value:function(){var k=this;this.hasActiveReconnection||(this.hasActiveReconnection=!0,setTimeout(function(){k._execute()},this._getDelay()))}},{key:"_execute",value:function(){this.hasActiveReconnection=!1,this.executor(),this.numAttempts++}},{key:"connected",value:function(){this.numAttempts=0}},{key:"_getDelay",value:function(){var k=Math.pow(2,this.numAttempts)*this.defaultRetry;return k<=3e4?k:3e4}},{key:"getIsConnected",value:function(){return!this.numAttempts}}])&&R(L.prototype,A),M&&R(L,M),B}();m.d(e,"a",function(){return z});var H=function(){var B=O.getLogger({prefix:v}),L=re.isNetworkOnline(),A={primary:null,secondary:null},M={reconnectWebSocket:!0,websocketInitFailed:!1,exponentialBackOffTime:1e3,exponentialTimeoutHandle:null,lifeTimeTimeoutHandle:null,webSocketInitCheckerTimeoutId:null,connState:null},k={connectWebSocketRetryCount:0,connectionAttemptStartTime:null,noOpenConnectionsTimestamp:null},K={pendingResponse:!1,intervalHandle:null},q={initFailure:new Set,getWebSocketTransport:null,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set,connectionOpen:new Set,connectionClose:new Set},oe={connConfig:null,promiseHandle:null,promiseCompleted:!0},ue={subscribed:new Set,pending:new Set,subscriptionHistory:new Set},me={responseCheckIntervalId:null,requestCompleted:!0,reSubscribeIntervalId:null,consecutiveFailedSubscribeAttempts:0,consecutiveNoResponseRequest:0},Ye=new N(function(){an()}),vt=new Set([Le,Ce,J]),nt=setInterval(function(){if(L!==re.isNetworkOnline()){if(!(L=re.isNetworkOnline()))return B.advancedLog(E),void De(B.info(E));var te=Ot();L&&(!te||St(te,WebSocket.CLOSING)||St(te,WebSocket.CLOSED))&&(B.advancedLog(l),De(B.info(l)),an())}},250),Ee=function(te,Me){te.forEach(function(pt){try{pt(Me)}catch(er){De(B.error("Error executing callback",er))}})},Et=function(te){if(te===null)return"NULL";switch(te.readyState){case WebSocket.CONNECTING:return"CONNECTING";case WebSocket.OPEN:return"OPEN";case WebSocket.CLOSING:return"CLOSING";case WebSocket.CLOSED:return"CLOSED";default:return"UNDEFINED"}},jt=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";De(B.debug("["+te+"] Primary WebSocket: "+Et(A.primary)+" | Secondary WebSocket: "+Et(A.secondary)))},St=function(te,Me){return te&&te.readyState===Me},lt=function(te){return St(te,WebSocket.OPEN)},En=function(te){return te===null||te.readyState===void 0||St(te,WebSocket.CLOSED)},Ot=function(){return A.secondary!==null?A.secondary:A.primary},at=function(){return lt(Ot())},Cn=function(){if(K.pendingResponse)return B.advancedLog(a),De(B.warn(a)),clearInterval(K.intervalHandle),K.pendingResponse=!1,void an();at()?(De(B.debug(p)),Ot().send(Su(J)),K.pendingResponse=!0):(B.advancedLog(s),De(B.warn(s)),jt("sendHeartBeat"),an())},ve=function(){B.advancedLog(ae),M.exponentialBackOffTime=1e3,K.pendingResponse=!1,M.reconnectWebSocket=!0,clearTimeout(M.lifeTimeTimeoutHandle),clearInterval(K.intervalHandle),clearTimeout(M.exponentialTimeoutHandle),clearTimeout(M.webSocketInitCheckerTimeoutId)},Ke=function(){me.consecutiveFailedSubscribeAttempts=0,me.consecutiveNoResponseRequest=0,clearInterval(me.responseCheckIntervalId),clearInterval(me.reSubscribeIntervalId)},Ze=function(){k.connectWebSocketRetryCount=0,k.connectionAttemptStartTime=null,k.noOpenConnectionsTimestamp=null},ot=function(){Ye.connected();try{B.advancedLog(d),De(B.info(d)),jt("webSocketOnOpen"),M.connState!==null&&M.connState!==ne||Ee(q.connectionGain),M.connState=Z;var te=Date.now();Ee(q.connectionOpen,{connectWebSocketRetryCount:k.connectWebSocketRetryCount,connectionAttemptStartTime:k.connectionAttemptStartTime,noOpenConnectionsTimestamp:k.noOpenConnectionsTimestamp,connectionEstablishedTime:te,timeToConnect:te-k.connectionAttemptStartTime,timeWithoutConnection:k.noOpenConnectionsTimestamp?te-k.noOpenConnectionsTimestamp:null}),Ze(),ve(),Ot().openTimestamp=Date.now(),ue.subscribed.size===0&&lt(A.secondary)&&ct(A.primary,"[Primary WebSocket] Closing WebSocket"),(ue.subscribed.size>0||ue.pending.size>0)&&(lt(A.secondary)&&De(B.info("Subscribing secondary websocket to topics of primary websocket")),ue.subscribed.forEach(function(pt){ue.subscriptionHistory.add(pt),ue.pending.add(pt)}),ue.subscribed.clear(),Vt()),Cn(),K.intervalHandle=setInterval(Cn,1e4);var Me=1e3*oe.connConfig.webSocketTransport.transportLifeTimeInSeconds;De(B.debug("Scheduling WebSocket manager reconnection, after delay "+Me+" ms")),M.lifeTimeTimeoutHandle=setTimeout(function(){De(B.debug("Starting scheduled WebSocket manager reconnection")),an()},Me)}catch(pt){De(B.error("Error after establishing WebSocket connection",pt))}},Kt=function(te){jt("webSocketOnError"),B.advancedLog(S,JSON.stringify(te)),De(B.error(S,JSON.stringify(te))),Ye.getIsConnected()?an():Ye.retry()},Lt=function(te){var Me=JSON.parse(te.data);switch(Me.topic){case Le:if(De(B.debug("Subscription Message received from webSocket server",te.data)),me.requestCompleted=!0,me.consecutiveNoResponseRequest=0,Me.content.status==="success")me.consecutiveFailedSubscribeAttempts=0,Me.content.topics.forEach(function(pt){ue.subscriptionHistory.delete(pt),ue.pending.delete(pt),ue.subscribed.add(pt)}),ue.subscriptionHistory.size===0?lt(A.secondary)&&(De(B.info("Successfully subscribed secondary websocket to all topics of primary websocket")),ct(A.primary,"[Primary WebSocket] Closing WebSocket")):Vt(),Ee(q.subscriptionUpdate,Me);else{if(clearInterval(me.reSubscribeIntervalId),++me.consecutiveFailedSubscribeAttempts,me.consecutiveFailedSubscribeAttempts===5)return Ee(q.subscriptionFailure,Me),void(me.consecutiveFailedSubscribeAttempts=0);me.reSubscribeIntervalId=setInterval(function(){Vt()},500)}break;case J:De(B.debug(y)),K.pendingResponse=!1;break;default:if(Me.topic){if(B.advancedLog($e,Me.topic),De(B.debug($e+Me.topic)),lt(A.primary)&&lt(A.secondary)&&ue.subscriptionHistory.size===0&&this===A.primary)return void De(B.warn("Ignoring Message for Topic "+Me.topic+", to avoid duplicates"));if(q.allMessage.size===0&&q.topic.size===0)return void De(B.warn("No registered callback listener for Topic",Me.topic));B.advancedLog(xe,Me.topic),Ee(q.allMessage,Me),q.topic.has(Me.topic)&&Ee(q.topic.get(Me.topic),Me)}else Me.message?(B.advancedLog(Te,Me),De(B.warn(Te,Me))):(B.advancedLog(Be,Me),De(B.warn(Be,Me)))}},Vt=function te(){if(me.consecutiveNoResponseRequest>3)return De(B.warn("Ignoring subscribePendingTopics since we have exhausted max subscription retries with no response")),void Ee(q.subscriptionFailure,re.getSubscriptionResponse(Le,!1,Array.from(ue.pending)));at()?Array.from(ue.pending).length!==0&&(clearInterval(me.responseCheckIntervalId),Ot().send(Su(Le,{topics:Array.from(ue.pending)})),me.requestCompleted=!1,me.responseCheckIntervalId=setInterval(function(){me.requestCompleted||(++me.consecutiveNoResponseRequest,te())},1e3)):De(B.warn("Ignoring subscribePendingTopics call since Default WebSocket is not open"))},ct=function(te,Me){St(te,WebSocket.CONNECTING)||St(te,WebSocket.OPEN)?te.close(1e3,Me):De(B.warn("Ignoring WebSocket Close request, WebSocket State: "+Et(te)))},Yt=function(te){ct(A.primary,"[Primary] WebSocket "+te),ct(A.secondary,"[Secondary] WebSocket "+te)},Jn=function(){k.connectWebSocketRetryCount++;var te=re.addJitter(M.exponentialBackOffTime,.3);Date.now()+te<=oe.connConfig.urlConnValidTime?(B.advancedLog(h),De(B.debug(h+te+" ms")),M.exponentialTimeoutHandle=setTimeout(function(){return Tu()},te),M.exponentialBackOffTime*=2):(B.advancedLog(I),De(B.warn(I)),an())},Bo=function(te){ve(),Ke(),B.advancedLog(f,te),De(B.error(f)),M.websocketInitFailed=!0,Yt(T),clearInterval(nt),Ee(q.initFailure,{connectWebSocketRetryCount:k.connectWebSocketRetryCount,connectionAttemptStartTime:k.connectionAttemptStartTime,reason:te}),Ze()},Su=function(te,Me){return JSON.stringify({topic:te,content:Me})},Iu=function(te){return!!(re.isObject(te)&&re.isObject(te.webSocketTransport)&&re.isNonEmptyString(te.webSocketTransport.url)&&re.validWSUrl(te.webSocketTransport.url)&&1e3*te.webSocketTransport.transportLifeTimeInSeconds>=3e5)||(De(B.error("Invalid WebSocket Connection Configuration",te)),!1)},an=function(){if(!re.isNetworkOnline())return B.advancedLog(u),void De(B.info(u));if(M.websocketInitFailed)De(B.debug("WebSocket Init had failed, ignoring this getWebSocketConnConfig request"));else{if(oe.promiseCompleted)return ve(),B.advancedLog(w),De(B.info(w)),k.connectionAttemptStartTime=k.connectionAttemptStartTime||Date.now(),oe.promiseCompleted=!1,oe.promiseHandle=q.getWebSocketTransport(),oe.promiseHandle.then(function(te){return oe.promiseCompleted=!0,B.advancedLog(x),De(B.debug(x,te)),Iu(te)?(oe.connConfig=te,oe.connConfig.urlConnValidTime=Date.now()+85e3,Tu()):(Bo("Invalid WebSocket connection configuration: "+te),{webSocketConnectionFailed:!0})},function(te){return oe.promiseCompleted=!0,B.advancedLog(P),De(B.error(P,te)),re.isNetworkFailure(te)?(B.advancedLog(F+JSON.stringify(te)),De(B.info(F+JSON.stringify(te))),Ye.retry()):Bo("Failed to fetch webSocket connection configuration: "+JSON.stringify(te)),{webSocketConnectionFailed:!0}});De(B.debug("There is an ongoing getWebSocketConnConfig request, this request will be ignored"))}},Tu=function(){if(M.websocketInitFailed)return De(B.info("web-socket initializing had failed, aborting re-init")),{webSocketConnectionFailed:!0};if(!re.isNetworkOnline())return De(B.warn("System is offline aborting web-socket init")),{webSocketConnectionFailed:!0};B.advancedLog(W),De(B.info(W)),jt("initWebSocket");try{if(Iu(oe.connConfig)){var te=null;return lt(A.primary)?(De(B.debug("Primary Socket connection is already open")),St(A.secondary,WebSocket.CONNECTING)||(De(B.debug("Establishing a secondary web-socket connection")),Ye.numAttempts=0,A.secondary=bu()),te=A.secondary):(St(A.primary,WebSocket.CONNECTING)||(De(B.debug("Establishing a primary web-socket connection")),A.primary=bu()),te=A.primary),M.webSocketInitCheckerTimeoutId=setTimeout(function(){lt(te)||Jn()},1e3),{webSocketConnectionFailed:!1}}}catch(Me){return De(B.error("Error Initializing web-socket-manager",Me)),Bo("Failed to initialize new WebSocket: "+Me.message),{webSocketConnectionFailed:!0}}},bu=function(){var te=new WebSocket(oe.connConfig.webSocketTransport.url);return te.addEventListener("open",ot),te.addEventListener("message",Lt),te.addEventListener("error",Kt),te.addEventListener("close",function(Me){return function(pt,er){B.advancedLog(c,JSON.stringify(pt)),De(B.info(c,JSON.stringify(pt))),jt("webSocketOnClose before-cleanup"),Ee(q.connectionClose,{openTimestamp:er.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-er.openTimestamp,code:pt.code,reason:pt.reason}),En(A.primary)&&(A.primary=null),En(A.secondary)&&(A.secondary=null),M.reconnectWebSocket&&(lt(A.primary)||lt(A.secondary)?En(A.primary)&&lt(A.secondary)&&(De(B.info("[Primary] WebSocket Cleanly Closed")),A.primary=A.secondary,A.secondary=null):(De(B.warn("Neither primary websocket and nor secondary websocket have open connections, attempting to re-establish connection")),M.connState===ne?De(B.info("Ignoring connectionLost callback invocation")):(Ee(q.connectionLost,{openTimestamp:er.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-er.openTimestamp,code:pt.code,reason:pt.reason}),k.noOpenConnectionsTimestamp=Date.now()),M.connState=ne,an()),jt("webSocketOnClose after-cleanup"))}(Me,te)}),te},De=function(te){return te&&typeof te.sendInternalLogToServer=="function"&&te.sendInternalLogToServer(),te};this.init=function(te){if(re.assertTrue(re.isFunction(te),"transportHandle must be a function"),q.getWebSocketTransport===null)return q.getWebSocketTransport=te,an();De(B.warn("Web Socket Manager was already initialized"))},this.onInitFailure=function(te){return B.advancedLog(V),re.assertTrue(re.isFunction(te),"cb must be a function"),q.initFailure.add(te),M.websocketInitFailed&&te(),function(){return q.initFailure.delete(te)}},this.onConnectionOpen=function(te){return B.advancedLog(j),re.assertTrue(re.isFunction(te),"cb must be a function"),q.connectionOpen.add(te),function(){return q.connectionOpen.delete(te)}},this.onConnectionClose=function(te){return B.advancedLog(Y),re.assertTrue(re.isFunction(te),"cb must be a function"),q.connectionClose.add(te),function(){return q.connectionClose.delete(te)}},this.onConnectionGain=function(te){return B.advancedLog($),re.assertTrue(re.isFunction(te),"cb must be a function"),q.connectionGain.add(te),at()&&te(),function(){return q.connectionGain.delete(te)}},this.onConnectionLost=function(te){return B.advancedLog(Se),re.assertTrue(re.isFunction(te),"cb must be a function"),q.connectionLost.add(te),M.connState===ne&&te(),function(){return q.connectionLost.delete(te)}},this.onSubscriptionUpdate=function(te){return re.assertTrue(re.isFunction(te),"cb must be a function"),q.subscriptionUpdate.add(te),function(){return q.subscriptionUpdate.delete(te)}},this.onSubscriptionFailure=function(te){return B.advancedLog(X),re.assertTrue(re.isFunction(te),"cb must be a function"),q.subscriptionFailure.add(te),function(){return q.subscriptionFailure.delete(te)}},this.onMessage=function(te,Me){return re.assertNotNull(te,"topicName"),re.assertTrue(re.isFunction(Me),"cb must be a function"),q.topic.has(te)?q.topic.get(te).add(Me):q.topic.set(te,new Set([Me])),function(){return q.topic.get(te).delete(Me)}},this.onAllMessage=function(te){return re.assertTrue(re.isFunction(te),"cb must be a function"),q.allMessage.add(te),function(){return q.allMessage.delete(te)}},this.subscribeTopics=function(te){re.assertNotNull(te,"topics"),re.assertIsList(te),te.forEach(function(Me){ue.subscribed.has(Me)||ue.pending.add(Me)}),me.consecutiveNoResponseRequest=0,Vt()},this.sendMessage=function(te){if(re.assertIsObject(te,"payload"),te.topic===void 0||vt.has(te.topic))De(B.warn("Cannot send message, Invalid topic",te));else{try{te=JSON.stringify(te)}catch{return void De(B.warn("Error stringify message",te))}at()?Ot().send(te):De(B.warn("Cannot send message, web socket connection is not open"))}},this.closeWebSocket=function(){ve(),Ke(),M.reconnectWebSocket=!1,clearInterval(nt),Yt("User request to close WebSocket")},this.terminateWebSocketManager=Bo},z={create:function(){return new H},setGlobalConfig:function(B){var L=B&&B.loggerConfig;O.updateLoggerConfig(L)},LogLevel:ee,Logger:Q}},function(i,e,m){var b;(function(){"use strict";var C={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function D(v){return function(E,l){var u,a,y,p,s,d,c,S,h,I=1,f=E.length,T="";for(a=0;a<f;a++)if(typeof E[a]=="string")T+=E[a];else if(typeof E[a]=="object"){if((p=E[a]).keys)for(u=l[I],y=0;y<p.keys.length;y++){if(u==null)throw new Error(D('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[y],p.keys[y-1]));u=u[p.keys[y]]}else u=p.param_no?l[p.param_no]:l[I++];if(C.not_type.test(p.type)&&C.not_primitive.test(p.type)&&u instanceof Function&&(u=u()),C.numeric_arg.test(p.type)&&typeof u!="number"&&isNaN(u))throw new TypeError(D("[sprintf] expecting number but found %T",u));switch(C.number.test(p.type)&&(S=u>=0),p.type){case"b":u=parseInt(u,10).toString(2);break;case"c":u=String.fromCharCode(parseInt(u,10));break;case"d":case"i":u=parseInt(u,10);break;case"j":u=JSON.stringify(u,null,p.width?parseInt(p.width):0);break;case"e":u=p.precision?parseFloat(u).toExponential(p.precision):parseFloat(u).toExponential();break;case"f":u=p.precision?parseFloat(u).toFixed(p.precision):parseFloat(u);break;case"g":u=p.precision?String(Number(u.toPrecision(p.precision))):parseFloat(u);break;case"o":u=(parseInt(u,10)>>>0).toString(8);break;case"s":u=String(u),u=p.precision?u.substring(0,p.precision):u;break;case"t":u=String(!!u),u=p.precision?u.substring(0,p.precision):u;break;case"T":u=Object.prototype.toString.call(u).slice(8,-1).toLowerCase(),u=p.precision?u.substring(0,p.precision):u;break;case"u":u=parseInt(u,10)>>>0;break;case"v":u=u.valueOf(),u=p.precision?u.substring(0,p.precision):u;break;case"x":u=(parseInt(u,10)>>>0).toString(16);break;case"X":u=(parseInt(u,10)>>>0).toString(16).toUpperCase()}C.json.test(p.type)?T+=u:(!C.number.test(p.type)||S&&!p.sign?h="":(h=S?"+":"-",u=u.toString().replace(C.sign,"")),d=p.pad_char?p.pad_char==="0"?"0":p.pad_char.charAt(1):" ",c=p.width-(h+u).length,s=p.width&&c>0?d.repeat(c):"",T+=p.align?h+u+s:d==="0"?h+s+u:s+h+u)}return T}(function(E){if(g[E])return g[E];for(var l,u=E,a=[],y=0;u;){if((l=C.text.exec(u))!==null)a.push(l[0]);else if((l=C.modulo.exec(u))!==null)a.push("%");else{if((l=C.placeholder.exec(u))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(l[2]){y|=1;var p=[],s=l[2],d=[];if((d=C.key.exec(s))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(d[1]);(s=s.substring(d[0].length))!=="";)if((d=C.key_access.exec(s))!==null)p.push(d[1]);else{if((d=C.index_access.exec(s))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(d[1])}l[2]=p}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}u=u.substring(l[0].length)}return g[E]=a}(v),arguments)}function _(v,E){return D.apply(null,[v].concat(E||[]))}var g=Object.create(null);e.sprintf=D,e.vsprintf=_,typeof window<"u"&&(window.sprintf=D,window.vsprintf=_,(b=(function(){return{sprintf:D,vsprintf:_}}).call(e,m,e,i))===void 0||(i.exports=b))})()},function(i,e,m){"use strict";m.r(e),(function(b){m.d(e,"WebSocketManager",function(){return D});var C=m(0);b.connect=b.connect||{},connect.WebSocketManager=C.a;var D=C.a}).call(this,m(3))},function(i,e){var m;m=function(){return this}();try{m=m||new Function("return this")()}catch{typeof window=="object"&&(m=window)}i.exports=m}])},151:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;var m=5e3,b=5e3,C=18e5,D="[obfuscated value]",_={TEST:"TEST",TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",LOG:"LOG",WARN:"WARN",ERROR:"ERROR",CRITICAL:"CRITICAL"},g={CCP:"ccp",SOFTPHONE:"softphone",CHAT:"chat",TASK:"task"},v={TEST:0,TRACE:10,DEBUG:20,INFO:30,LOG:40,WARN:50,ERROR:100,CRITICAL:200},E={CCP:"CCP",SHARED_WORKER:"SharedWorker",CRM:"CRM"},l={TRACE:function(f){console.info(f)},DEBUG:function(f){console.info(f)},INFO:function(f){console.info(f)},LOG:function(f){console.log(f)},TEST:function(f){console.log(f)},WARN:function(f){console.warn(f)},ERROR:function(f){console.error(f)},CRITICAL:function(f){console.error(f)}},u=function(f){return Object.values(g).indexOf(f)!==-1},a=function(f){var T=Array.prototype.slice.call(f,0),w=T.shift(),x,P;return u(w)?(P=w,x=T.shift()):(x=w,P=g.CCP),{format:x,component:P,args:T}},y=function(f,T,w,x,P,F){this.component=f,this.level=T,this.text=w,this.time=new Date,this.tabId=P===null?null:P||e.core.tabId,this.exception=null,this.objects=[],this.line=0,this.agentResourceId=null;try{e.agent.initialized&&(this.agentResourceId=new e.Agent()._getResourceId())}catch(W){console.log("Issue finding agentResourceId: ",W)}this.loggerId=x,F?this.contextLayer=F:e.isSharedWorker()?this.contextLayer=E.SHARED_WORKER:e.isCRM()?this.contextLayer=E.CRM:e.isCCP()&&(this.contextLayer=E.CCP)};y.fromObject=function(f){var T=f.tabId||null,w=f.contextLayer||null,x=new y(g.CCP,f.level,f.text,f.loggerId,T,w);return Object.prototype.toString.call(f.time)==="[object Date]"?x.time=new Date(f.time.getTime()):typeof f.time=="number"?x.time=new Date(f.time):typeof f.time=="string"?x.time=Date.parse(f.time):x.time=new Date,x.exception=f.exception,x.objects=f.objects,x};var p=function(f){var T=/AuthToken.*\=/g;f&&typeof f=="object"&&Object.keys(f).forEach(function(w){typeof f[w]=="object"?p(f[w]):typeof f[w]=="string"&&(w==="url"||w==="text"?f[w]=f[w].replace(T,"[redacted]"):["quickConnectName"].includes(w)?f[w]="[redacted]":["customerId","CustomerId","SpeakerId","CustomerSpeakerId"].includes(w)&&(f[w]=`${D} ${md5(f[w])}`))})},s=function(f){if(this.type=f instanceof Error?f.name:f.code||Object.prototype.toString.call(f),this.message=f.message,this.stack=[],f.stack)try{Array.isArray(f.stack)?this.stack=f.stack:typeof f.stack=="object"?this.stack=[JSON.stringify(f.stack)]:typeof f.stack=="string"&&(this.stack=f.stack.split(`
`))}catch{}};y.prototype.toString=function(){return e.sprintf("[%s] [%s] [%s]: %s",this.getTime()&&this.getTime().toISOString?this.getTime().toISOString():"???",this.getLevel(),this.getAgentResourceId(),this.getText())},y.prototype.getTime=function(){return this.time},y.prototype.getAgentResourceId=function(){return this.agentResourceId},y.prototype.getTabId=function(){return this.tabId},y.prototype.getContextLayer=function(){return this.contextLayer},y.prototype.getLevel=function(){return this.level},y.prototype.getText=function(){return this.text},y.prototype.getComponent=function(){return this.component},y.prototype.withException=function(f){return this.exception=new s(f),this},y.prototype.withObject=function(f){var T=e.deepcopy(f);return p(T),this.objects.push(T),this},y.prototype.withCrossOriginEventObject=function(f){var T=e.deepcopyCrossOriginEvent(f);return p(T),this.objects.push(T),this},y.prototype.sendInternalLogToServer=function(){return e.getLog()._serverBoundInternalLogs.push(this),this};var d=function(){this._logs=[],this._rolledLogs=[],this._logsToPush=[],this._serverBoundInternalLogs=[],this._echoLevel=v.INFO,this._logLevel=v.INFO,this._lineCount=0,this._logRollInterval=0,this._logRollTimer=null,this._loggerId=new Date().getTime()+"-"+Math.random().toString(36).slice(2),this.setLogRollInterval(C),this._startLogIndexToPush=0};d.prototype.setLogRollInterval=function(f){var T=this;!this._logRollTimer||f!==this._logRollInterval?(this._logRollTimer&&i.clearInterval(this._logRollTimer),this._logRollInterval=f,this._logRollTimer=i.setInterval(function(){T._rolledLogs=T._logs,T._logs=[],T._startLogIndexToPush=0,T.info("Log roll interval occurred.")},this._logRollInterval)):this.warn("Logger is already set to the given interval: %d",this._logRollInterval)},d.prototype.setLogLevel=function(f){if(f in v)this._logLevel=v[f];else throw new Error("Unknown logging level: "+f)},d.prototype.setEchoLevel=function(f){if(f in v)this._echoLevel=v[f];else throw new Error("Unknown logging level: "+f)},d.prototype.write=function(f,T,w){var x=new y(f,T,w,this.getLoggerId());return p(x),this.addLogEntry(x),x},d.prototype.addLogEntry=function(f){p(f),this._logs.push(f),g.SOFTPHONE===f.component&&this._logsToPush.push(f),f.level in v&&v[f.level]>=this._logLevel&&(v[f.level]>=this._echoLevel&&l[f.getLevel()](f.toString()),f.line=this._lineCount++)},d.prototype.sendInternalLogEntryToServer=function(f){this._serverBoundInternalLogs.push(f),f.level in v&&v[f.level]>=this._logLevel&&(v[f.level]>=this._echoLevel&&l[f.getLevel()](f.toString()),f.line=this._lineCount++)},d.prototype.clearObjects=function(){for(var f=0;f<this._logs.length;f++)this._logs[f].objects&&delete this._logs[f].objects},d.prototype.clearExceptions=function(){for(var f=0;f<this._logs.length;f++)this._logs[f].exception&&delete this._logs[f].exception},d.prototype.trace=function(){var f=a(arguments);return this.write(f.component,_.TRACE,e.vsprintf(f.format,f.args))},d.prototype.debug=function(){var f=a(arguments);return this.write(f.component,_.DEBUG,e.vsprintf(f.format,f.args))},d.prototype.info=function(){var f=a(arguments);return this.write(f.component,_.INFO,e.vsprintf(f.format,f.args))},d.prototype.log=function(){var f=a(arguments);return this.write(f.component,_.LOG,e.vsprintf(f.format,f.args))},d.prototype.test=function(){var f=a(arguments);return this.write(f.component,_.TEST,e.vsprintf(f.format,f.args))},d.prototype.warn=function(){var f=a(arguments);return this.write(f.component,_.WARN,e.vsprintf(f.format,f.args))},d.prototype.error=function(){var f=a(arguments);return this.write(f.component,_.ERROR,e.vsprintf(f.format,f.args))},d.prototype.critical=function(){var f=a(arguments);return this.write(f.component,_.ERROR,e.vsprintf(f.format,f.args))},d.prototype.toString=function(){for(var f=[],T=0;T<this._logs.length;T++)f.push(this._logs[T].toString());return f.join(`
`)},d.prototype.download=function(f){var W="agent-log",T=!1;typeof f=="object"?(W=f.logName||W,T=f.filterByLogLevel||T):typeof f=="string"&&(W=f||W);var w=this,x=this._rolledLogs.concat(this._logs);T&&(x=x.filter(function(V){return v[V.level]>=w._logLevel}));var P=new i.Blob([JSON.stringify(x,void 0,4)],["text/plain"]),F=document.createElement("a"),W=W||"agent-log";F.href=i.URL.createObjectURL(P),F.download=W+".txt",document.body.appendChild(F),F.click(),document.body.removeChild(F)},d.prototype.scheduleUpstreamLogPush=function(f){e.upstreamLogPushScheduled||(e.upstreamLogPushScheduled=!0,i.setInterval(e.hitch(this,this.reportMasterLogsUpStream,f),m))},d.prototype.reportMasterLogsUpStream=function(f){var T=this._logsToPush.slice();this._logsToPush=[],e.ifMaster(e.MasterTopics.SEND_LOGS,function(){T.length>0&&f.sendUpstream(e.EventType.SEND_LOGS,T)})},d.prototype.scheduleUpstreamOuterContextCCPserverBoundLogsPush=function(f){i.setInterval(e.hitch(this,this.pushOuterContextCCPserverBoundLogsUpstream,f),1e3)},d.prototype.scheduleUpstreamOuterContextCCPLogsPush=function(f){i.setInterval(e.hitch(this,this.pushOuterContextCCPLogsUpstream,f),1e3)},d.prototype.pushOuterContextCCPserverBoundLogsUpstream=function(f){if(this._serverBoundInternalLogs.length>0){for(var T=0;T<this._serverBoundInternalLogs.length;T++)this._serverBoundInternalLogs[T].text=this._serverBoundInternalLogs[T].text;f.sendUpstream(e.EventType.SERVER_BOUND_INTERNAL_LOG,this._serverBoundInternalLogs),this._serverBoundInternalLogs=[]}},d.prototype.pushOuterContextCCPLogsUpstream=function(f){for(var T=this._startLogIndexToPush;T<this._logs.length;T++)this._logs[T].loggerId===this._loggerId&&f.sendUpstream(e.EventType.LOG,this._logs[T]);this._startLogIndexToPush=this._logs.length},d.prototype.getLoggerId=function(){return this._loggerId},d.prototype.scheduleDownstreamClientSideLogsPush=function(){i.setInterval(e.hitch(this,this.pushClientSideLogsDownstream),b)},d.prototype.pushClientSideLogsDownstream=function(){var f=[];this._serverBoundInternalLogs.length<50||(this._serverBoundInternalLogs.length>500?f=this._serverBoundInternalLogs.splice(0,500):(f=this._serverBoundInternalLogs,this._serverBoundInternalLogs=[]),e.publishClientSideLogs(f))};var c=function(f){d.call(this),this.conduit=f,i.setInterval(e.hitch(this,this._pushLogsDownstream),c.LOG_PUSH_INTERVAL),i.clearInterval(this._logRollTimer),this._logRollTimer=null};c.LOG_PUSH_INTERVAL=1e3,c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype.pushLogsDownstream=function(f){var T=this;f.forEach(function(w){T.conduit.sendDownstream(e.EventType.LOG,w)})},c.prototype._pushLogsDownstream=function(){var f=this;this._logs.forEach(function(w){f.conduit.sendDownstream(e.EventType.LOG,w)}),this._logs=[];for(var T=0;T<this._serverBoundInternalLogs.length;T++)this.conduit.sendDownstream(e.EventType.SERVER_BOUND_INTERNAL_LOG,this._serverBoundInternalLogs[T]);this._serverBoundInternalLogs=[]};var S=function(f){var T=function(){try{return f.apply(this,arguments)}catch(w){l.ERROR(w)}};return T},h=function(f){for(var T in f)typeof f[T]=="function"&&(f[T]=S(f[T]))};e.rootLogger=new d,h(e.rootLogger);var I=function(){return e.rootLogger};e=e||{},e.getLog=I,e.LogEntry=y,e.Logger=d,e.LogLevel=_,e.LogComponent=g,e.DownstreamConduitLogger=c})()},163:function(){(function(i){var e=this||globalThis;function m(f,T){var w=(f&65535)+(T&65535),x=(f>>16)+(T>>16)+(w>>16);return x<<16|w&65535}function b(f,T){return f<<T|f>>>32-T}function C(f,T,w,x,P,F){return m(b(m(m(T,f),m(x,F)),P),w)}function D(f,T,w,x,P,F,W){return C(T&w|~T&x,f,T,P,F,W)}function _(f,T,w,x,P,F,W){return C(T&x|w&~x,f,T,P,F,W)}function g(f,T,w,x,P,F,W){return C(T^w^x,f,T,P,F,W)}function v(f,T,w,x,P,F,W){return C(w^(T|~x),f,T,P,F,W)}function E(f,T){f[T>>5]|=128<<T%32,f[(T+64>>>9<<4)+14]=T;var w,x,P,F,W,V=1732584193,j=-271733879,Y=-1732584194,$=271733878;for(w=0;w<f.length;w+=16)x=V,P=j,F=Y,W=$,V=D(V,j,Y,$,f[w],7,-680876936),$=D($,V,j,Y,f[w+1],12,-389564586),Y=D(Y,$,V,j,f[w+2],17,606105819),j=D(j,Y,$,V,f[w+3],22,-1044525330),V=D(V,j,Y,$,f[w+4],7,-176418897),$=D($,V,j,Y,f[w+5],12,1200080426),Y=D(Y,$,V,j,f[w+6],17,-1473231341),j=D(j,Y,$,V,f[w+7],22,-45705983),V=D(V,j,Y,$,f[w+8],7,1770035416),$=D($,V,j,Y,f[w+9],12,-1958414417),Y=D(Y,$,V,j,f[w+10],17,-42063),j=D(j,Y,$,V,f[w+11],22,-1990404162),V=D(V,j,Y,$,f[w+12],7,1804603682),$=D($,V,j,Y,f[w+13],12,-40341101),Y=D(Y,$,V,j,f[w+14],17,-1502002290),j=D(j,Y,$,V,f[w+15],22,1236535329),V=_(V,j,Y,$,f[w+1],5,-165796510),$=_($,V,j,Y,f[w+6],9,-1069501632),Y=_(Y,$,V,j,f[w+11],14,643717713),j=_(j,Y,$,V,f[w],20,-373897302),V=_(V,j,Y,$,f[w+5],5,-701558691),$=_($,V,j,Y,f[w+10],9,38016083),Y=_(Y,$,V,j,f[w+15],14,-660478335),j=_(j,Y,$,V,f[w+4],20,-405537848),V=_(V,j,Y,$,f[w+9],5,568446438),$=_($,V,j,Y,f[w+14],9,-1019803690),Y=_(Y,$,V,j,f[w+3],14,-187363961),j=_(j,Y,$,V,f[w+8],20,1163531501),V=_(V,j,Y,$,f[w+13],5,-1444681467),$=_($,V,j,Y,f[w+2],9,-51403784),Y=_(Y,$,V,j,f[w+7],14,1735328473),j=_(j,Y,$,V,f[w+12],20,-1926607734),V=g(V,j,Y,$,f[w+5],4,-378558),$=g($,V,j,Y,f[w+8],11,-2022574463),Y=g(Y,$,V,j,f[w+11],16,1839030562),j=g(j,Y,$,V,f[w+14],23,-35309556),V=g(V,j,Y,$,f[w+1],4,-1530992060),$=g($,V,j,Y,f[w+4],11,1272893353),Y=g(Y,$,V,j,f[w+7],16,-155497632),j=g(j,Y,$,V,f[w+10],23,-1094730640),V=g(V,j,Y,$,f[w+13],4,681279174),$=g($,V,j,Y,f[w],11,-358537222),Y=g(Y,$,V,j,f[w+3],16,-722521979),j=g(j,Y,$,V,f[w+6],23,76029189),V=g(V,j,Y,$,f[w+9],4,-640364487),$=g($,V,j,Y,f[w+12],11,-421815835),Y=g(Y,$,V,j,f[w+15],16,530742520),j=g(j,Y,$,V,f[w+2],23,-995338651),V=v(V,j,Y,$,f[w],6,-198630844),$=v($,V,j,Y,f[w+7],10,1126891415),Y=v(Y,$,V,j,f[w+14],15,-1416354905),j=v(j,Y,$,V,f[w+5],21,-57434055),V=v(V,j,Y,$,f[w+12],6,1700485571),$=v($,V,j,Y,f[w+3],10,-1894986606),Y=v(Y,$,V,j,f[w+10],15,-1051523),j=v(j,Y,$,V,f[w+1],21,-2054922799),V=v(V,j,Y,$,f[w+8],6,1873313359),$=v($,V,j,Y,f[w+15],10,-30611744),Y=v(Y,$,V,j,f[w+6],15,-1560198380),j=v(j,Y,$,V,f[w+13],21,1309151649),V=v(V,j,Y,$,f[w+4],6,-145523070),$=v($,V,j,Y,f[w+11],10,-1120210379),Y=v(Y,$,V,j,f[w+2],15,718787259),j=v(j,Y,$,V,f[w+9],21,-343485551),V=m(V,x),j=m(j,P),Y=m(Y,F),$=m($,W);return[V,j,Y,$]}function l(f){var T,w="",x=f.length*32;for(T=0;T<x;T+=8)w+=String.fromCharCode(f[T>>5]>>>T%32&255);return w}function u(f){var T,w=[];for(w[(f.length>>2)-1]=void 0,T=0;T<w.length;T+=1)w[T]=0;var x=f.length*8;for(T=0;T<x;T+=8)w[T>>5]|=(f.charCodeAt(T/8)&255)<<T%32;return w}function a(f){return l(E(u(f),f.length*8))}function y(f,T){var w,x=u(f),P=[],F=[],W;for(P[15]=F[15]=void 0,x.length>16&&(x=E(x,f.length*8)),w=0;w<16;w+=1)P[w]=x[w]^909522486,F[w]=x[w]^1549556828;return W=E(P.concat(u(T)),512+T.length*8),l(E(F.concat(W),640))}function p(f){var T="0123456789abcdef",w="",x,P;for(P=0;P<f.length;P+=1)x=f.charCodeAt(P),w+=T.charAt(x>>>4&15)+T.charAt(x&15);return w}function s(f){return unescape(encodeURIComponent(f))}function d(f){return a(s(f))}function c(f){return p(d(f))}function S(f,T){return y(s(f),s(T))}function h(f,T){return p(S(f,T))}function I(f,T,w){return T?w?S(T,f):h(T,f):w?d(f):c(f)}e.md5=I})(this)},439:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,e.ChatMediaController=function(m,b){var C=e.getLog(),D=e.LogComponent.CHAT,_=function(){g("Chat media controller init",m.contactId),C.info(D,"Chat media controller init").withObject(m).sendInternalLogToServer(),e.ChatSession.setGlobalConfig({loggerConfig:{logger:C},region:b.region});var E=e.ChatSession.create({chatDetails:m,type:"AGENT",websocketManager:e.core.getWebSocketManager()});return v(E),E.connect().then(function(l){return C.info(D,"Chat Session Successfully established for contactId %s",m.contactId).sendInternalLogToServer(),g("Chat Session Successfully established",m.contactId),E}).catch(function(l){throw C.error(D,"Chat Session establishement failed for contact %s",m.contactId).withException(l).sendInternalLogToServer(),g("Chat Session establishement failed",m.contactId,l),l})},g=function(E,l){e.publishMetric({name:E,contactId:m.contactId,data:l||m})},v=function(E){E.onConnectionBroken(function(l){C.error(D,"Chat Session connection broken").withException(l).sendInternalLogToServer(),g("Chat Session connection broken",l)}),E.onConnectionEstablished(function(l){C.info(D,"Chat Session connection established").withObject(l).sendInternalLogToServer(),g("Chat Session connection established",l)})};return{get:function(){return _()}}}})()},279:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,e.MediaFactory=function(m){var b={},C=new Set,D=e.getLog(),_=e.LogComponent.CHAT,g=e.merge({},m)||{};g.region=g.region||"us-west-2";var v=function(a){var y=a.getConnectionId(),p=a.getMediaInfo();if(!p)return D.error(_,"Media info does not exist for a media type %s",a.getMediaType()).withObject(a).sendInternalLogToServer(),Promise.reject("Media info does not exist for this connection");if(b[y])return b[y];switch(D.info(_,"media controller of type %s init",a.getMediaType()).withObject(a).sendInternalLogToServer(),a.getMediaType()){case e.MediaType.CHAT:return b[y]=new e.ChatMediaController(a.getMediaInfo(),g).get();case e.MediaType.SOFTPHONE:return b[y]=new e.SoftphoneMediaController(a.getMediaInfo()).get();case e.MediaType.TASK:return b[y]=new e.TaskMediaController(a.getMediaInfo()).get();default:return D.error(_,"Unrecognized media type %s ",a.getMediaType()).sendInternalLogToServer(),Promise.reject()}},E=function(a){return a.isActive()},l=function(a){return E(a)?v(a):(u(a.getConnectionId()),Promise.reject("Media Controller is no longer available for this connection"))},u=function(a){b[a]&&!C.has(a)&&(D.info(_,"Destroying mediaController for %s",a),C.add(a),b[a].then(function(y){typeof y.cleanUp=="function"&&y.cleanUp(),delete b[a],C.delete(a)}).catch(function(){delete b[a],C.delete(a)}))};return{get:l,destroy:u}}})()},418:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,e.SoftphoneMediaController=function(m){return{get:function(){return Promise.resolve(m)}}}})()},187:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,e.TaskMediaController=function(m){var b=e.getLog(),C=e.LogComponent.TASK,D=function(){_("Task media controller init",m.contactId),b.info(C,"Task media controller init").withObject(m);var v=e.TaskSession.create({contactId:m.contactId,initialContactId:m.initialContactId,websocketManager:e.core.getWebSocketManager()});return g(v),v.connect().then(function(){return b.info(C,"Task Session Successfully established for contactId %s",m.contactId),_("Task Session Successfully established",m.contactId),v}).catch(function(E){throw b.error(C,"Task Session establishement failed for contact %s",m.contactId).withException(E),_("Chat Session establishement failed",m.contactId,E),E})},_=function(v,E){e.publishMetric({name:v,contactId:m.contactId,data:E||m})},g=function(v){v.onConnectionBroken(function(E){b.error(C,"Task Session connection broken").withException(E),_("Task Session connection broken",E)}),v.onConnectionEstablished(function(E){b.info(C,"Task Session connection established").withObject(E),_("Task Session connection established",E)})};return{get:function(){return D()}}}})()},161:()=>{(function(){let i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;let m="/request-storage-access",b={canRequest:!1,mode:"default",custom:{hideCCP:!0}},C={},D="",_=null,g=!1,v,E={INIT:"storageAccess::init",GRANTED:"storageAccess::granted",DENIED:"storageAccess::denied",REQUEST:"storageAccess::request"},l=(T={})=>{T.custom=T.custom||{},C=We(fe(fe({},b),T),{custom:fe(fe({},b.custom),T.custom)}),C.canRequest=!(C.canRequest==="false"||C.canRequest===!1)},u=()=>{C={},D="",_=null,g=!1},a=()=>({show:()=>{_.style.display="block"},hide:()=>{_.style.display="none"}}),y=()=>C&&C.mode==="custom",p=()=>C?.custom?.hideCCP,s=T=>T.match(/.connect.aws.a2z.com|.my.connect.aws|.govcloud.connect.aws|.awsapps.com/),d=T=>{let{origin:w,pathname:x}=new URL(T);if(w.match(/.awsapps.com/)){let P="connect";return x.startsWith("/connect-gamma")&&(P="connect-gamma"),`${w}/${P}${m}`}else return`${w}${m}`},c=T=>T.match(/^https?:\/\/localhost/),S=()=>{if(!D)throw new Error("[StorageAccess] [getlandAtPath] Invoke connect.storageAccess.init first");if(s(D)||c(D)){let{pathname:T}=new URL(D);return T}return"/connect/ccp-v2"},h=()=>{if(!D)throw new Error("[StorageAccess] [getRequestStorageAccessUrl] Invoke connect.storageAccess.init first");if(s(D))return d(D);if(c(D))return e.getLog().info("[StorageAccess] [CCP] Local testing"),`${D}${m}`;if(C.instanceUrl&&s(C.instanceUrl))return e.getLog().info(`[StorageAccess] [getRequestStorageAccessUrl] Customer has provided storageParams.instanceUrl ${C.instanceUrl}`),d(C.instanceUrl);if(C.instanceUrl&&c(C.instanceUrl))return e.getLog().info("[StorageAccess] [getRequestStorageAccessUrl] Local testing"),`${C.instanceUrl}${m}`;throw e.getLog().error("[StorageAccess] [getRequestStorageAccessUrl] Invalid Connect instance/CCP URL provided, please pass the correct ccpUrl or storageAccess.instanceUrl parameters"),new Error("[StorageAccess] [getRequestStorageAccessUrl] Invalid Connect instance/CCP URL provided, please pass the valid Connect CCP URL or in case CCP URL is configured to be the SSO URL then use storageAccess.instanceUrl and pass the Connect CCP URL")},I=({onInit:T,onDeny:w,onGrant:x})=>{function P({data:F,source:W}){if(e.core._getCCPIframe().contentWindow!==W)return!1;switch(e.core.initialized&&window.removeEventListener("message",P),F.event){case E.INIT:{e.getLog().info("[StorageAccess][INIT] message recieved").withObject(F),T&&T(F);break}case E.GRANTED:{e.getLog().info("[StorageAccess][GRANTED] message recieved").withObject(F),x&&x(F);break}case E.DENIED:{e.getLog().info("[StorageAccess][DENIED] message recieved").withObject(F),w&&w(F);break}default:{e.core.initialized&&window.removeEventListener("message",P);break}}}return C.canRequest&&window.addEventListener("message",P),{unsubscribe:()=>{window.removeEventListener("message",P)}}},f=({onGrant:T})=>{v&&v.unsubscribe(),v=I({onInit:w=>{console.log("%c[StorageAccess][INIT]","background:yellow; color:black; font-size:large"),e.getLog().info("[StorageAccess][onInit] callback executed").withObject(w?.data),!w?.data.hasAccess&&y()&&a().show()},onDeny:()=>{console.log("%c[StorageAccess][DENIED]","background:red; color:black; font-size:large"),e.getLog().info("[StorageAccess][onDeny] callback executed"),y()&&a().show()},onGrant:()=>{console.log("%c[StorageAccess][GRANTED]","background:lime; color:black; font-size:large"),e.getLog().info("[StorageAccess][onGrant] callback executed"),y()&&p()&&a().hide(),g||(T(),g=!0)}})};e.storageAccess=Object.freeze({canRequest:()=>C.canRequest,optOutFromRequestAccess:()=>{b.canRequest=!1},optInForRequestAccess:()=>{b.canRequest=!0},init:(T,w,x={})=>{e.assertNotNull(T,"ccpUrl"),e.assertNotNull(w,"container"),_=w,D=T,l(x),e.getLog().info(`[StorageAccess][init] Request Storage Acccess init called with ccpUrl - ${T} - ${C.canRequest?"Proceeding with requesting storage access":"user has opted out, skipping request storage access"}`).withObject(C)},setupRequestHandlers:f,getRequestStorageAccessUrl:h,storageAccessEvents:E,resetStorageAccessState:u,getOnGrantCallbackInvoked:()=>g,getStorageAccessParams:()=>C,onRequest:I,request:()=>{e.core._getCCPIframe().contentWindow.postMessage({event:E.REQUEST,data:We(fe({},C),{landat:S()})},"*")}})})()},743:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;var m=function(g){var v=this;if(this._prevContactId=null,e.assertNotNull(g,"ringtoneConfig"),!g.ringtoneUrl)throw new Error("ringtoneUrl is required!");i.Audio&&typeof i.Promise<"u"?this._playableAudioPromise=new Promise(function(E,l){v._audio=new Audio(g.ringtoneUrl),v._audio.loop=!0,v._audio.addEventListener("canplay",function(){e.getLog().info("Ringtone is ready to play: ",+g.ringtoneUrl).sendInternalLogToServer(),v._audioPlayable=!0,E(v._audio)})}):(this._audio=null,e.getLog().error("Unable to provide a ringtone.").sendInternalLogToServer()),v._driveRingtone()};m.prototype._driveRingtone=function(){throw new Error("Not implemented.")},m.prototype._startRingtone=function(g){var v=this;this._audio&&(this._audio.play().then(function(){v._publishTelemetryEvent("Ringtone Start",g),e.getLog().info("Ringtone Start").sendInternalLogToServer()}).catch(function(E){v._publishTelemetryEvent("Ringtone Playback Failure",g),e.getLog().error("Ringtone Playback Failure").withException(E).withObject({currentSrc:v._audio.currentSrc,sinkId:v._audio.sinkId,volume:v._audio.volume}).sendInternalLogToServer()}),e.getLog().info(`Attempting to start ringtone to device ${this._audio.sinkId||"''"}`).sendInternalLogToServer())},m.prototype._stopRingtone=function(g){this._audio&&(this._audio.pause(),this._audio.currentTime=0,this._publishTelemetryEvent("Ringtone Stop",g),e.getLog().info("Ringtone Stop").sendInternalLogToServer())},m.prototype.stopRingtone=function(){this._stopRingtone()},m.prototype._ringtoneSetup=function(g){var v=this;e.ifMaster(e.MasterTopics.RINGTONE,function(){v._startRingtone(g),v._prevContactId=g.getContactId(),g.onConnected(lily.hitch(v,v._stopRingtone)),g.onAccepted(lily.hitch(v,v._stopRingtone)),g.onEnded(lily.hitch(v,v._stopRingtone)),g.onRefresh(function(E){E.getStatus().type!==e.ContactStatusType.CONNECTING&&E.getStatus().type!==e.ContactStatusType.INCOMING&&v._stopRingtone()})})},m.prototype._publishTelemetryEvent=function(g,v){v&&v.getContactId()&&e.publishMetric({name:g,contactId:v.getContactId()})},m.prototype.setOutputDevice=function(g){if(this._playableAudioPromise){var v=Promise.race([this._playableAudioPromise,new Promise(function(E,l){i.setTimeout(function(){l("Timed out waiting for playable audio")},3e3)})]);return v.then(function(E){return E&&E.setSinkId?E.setSinkId(g).then(function(){return Promise.resolve(g)}).catch(function(l){return Promise.reject(`RingtoneEngineBase.setOutputDevice failed: audio.setSinkId() failed with error ${l}`)}):Promise.reject(`RingtoneEngineBase.setOutputDevice failed: ${E?"audio":"audio.setSinkId"} not found.`)})}if(i.Promise)return Promise.reject("Not eligible ringtone owner")};var b=function(g){m.call(this,g)};b.prototype=Object.create(m.prototype),b.prototype.constructor=b,b.prototype._driveRingtone=function(){var g=this,v=function(E){E.getType()===lily.ContactType.VOICE&&E.isSoftphoneCall()&&E.isInbound()&&(g._ringtoneSetup(E),g._publishTelemetryEvent("Ringtone Connecting",E),e.getLog().info("Ringtone Connecting").sendInternalLogToServer())};e.contact(function(E){E.onConnecting(v)}),new e.Agent().getContacts().forEach(function(E){E.getStatus().type===e.ContactStatusType.CONNECTING&&v(E)})};var C=function(g){m.call(this,g)};C.prototype=Object.create(m.prototype),C.prototype.constructor=C,C.prototype._driveRingtone=function(){var g=this,v=function(E){if(E.getType()===lily.ContactType.CHAT&&E.isInbound()){var l=E.getConnections().filter(u=>u.getType()===e.ConnectionType.AGENT&&u.isSilentMonitor());l.length===0&&(g._ringtoneSetup(E),g._publishTelemetryEvent("Chat Ringtone Connecting",E),e.getLog().info("Chat Ringtone Connecting").sendInternalLogToServer())}};e.contact(function(E){E.onConnecting(v)})};var D=function(g){m.call(this,g)};D.prototype=Object.create(m.prototype),D.prototype.constructor=D,D.prototype._driveRingtone=function(){var g=this,v=function(E){E.getType()===lily.ContactType.TASK&&E.isInbound()&&(g._ringtoneSetup(E),g._publishTelemetryEvent("Task Ringtone Connecting",E),e.getLog().info("Task Ringtone Connecting").sendInternalLogToServer())};e.contact(function(E){E.onConnecting(v)})};var _=function(g){m.call(this,g)};_.prototype=Object.create(m.prototype),_.prototype.constructor=_,_.prototype._driveRingtone=function(){var g=this;e.contact(function(v){v.onIncoming(function(){v.getType()===lily.ContactType.QUEUE_CALLBACK&&(g._ringtoneSetup(v),g._publishTelemetryEvent("Callback Ringtone Connecting",v),e.getLog().info("Callback Ringtone Connecting").sendInternalLogToServer())})})},e.VoiceRingtoneEngine=b,e.ChatRingtoneEngine=C,e.TaskRingtoneEngine=D,e.QueueCallbackRingtoneEngine=_})()},642:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,i.ccpVersion="V2";let m={CITRIX:"CITRIX",AWS_WORKSPACE:"AWS_WORKSPACE"};var b=1e3,C=3e4,D=500,_={};_[e.SoftphoneCallType.AUDIO_ONLY]="Audio",_[e.SoftphoneCallType.VIDEO_ONLY]="Video",_[e.SoftphoneCallType.AUDIO_VIDEO]="AudioVideo",_[e.SoftphoneCallType.NONE]="None";var g="audio_input",v="audio_output",E={};E[e.ContactType.VOICE]="Voice";var l="Unknown",u=[],a=10800,y=[],p=[],s={},d={},c=1,S=0,h=0,I=0,f=0,T=0,w=0,x=!1,P=!1,F=null,W=null,V=null,j=null,Y=e.SoftphoneErrorTypes,$="MultiSessionHangUp",Se="MultiSessions",X="echoCancellationCheck",ae={},Te=e.randomId(),$e=function(L){return new Promise(function(A,M){e.core.getClient().call(e.ClientMethods.CREATE_TRANSPORT,L,{success:function(k){A(k.softphoneTransport.softphoneMediaConnections)},failure:function(k){k.message&&k.message.includes("SoftphoneConnectionLimitBreachedException")&&be("multiple_softphone_active_sessions","Number of active sessions are more then allowed limit.",""),M(Error("requestIceAccess failed"))},authFailure:function(){M(Error("Authentication failed while requestIceAccess"))},accessDenied:function(){M(Error("Access Denied while requestIceAccess"))}})})},Be=function(L={}){var A=this;j=new B(e.getLog()),j.info("[Softphone Manager] softphone manager initialization has begun").sendInternalLogToServer(),j.info(`[SoftphoneManager] Client Provided Strategy: ${L.VDIPlatform}`).sendInternalLogToServer();let M;if(L.VDIPlatform){F=L.VDIPlatform;try{if(L.VDIPlatform===m.CITRIX)M=new e.CitrixVDIStrategy,j.info(`[SoftphoneManager] Strategy constructor retrieved: ${M}`).sendInternalLogToServer();else if(L.VDIPlatform===m.AWS_WORKSPACE)M=new e.DCVWebRTCStrategy,j.info(`[SoftphoneManager] Strategy constructor retrieved: ${M}`).sendInternalLogToServer();else throw new Error("VDI Strategy not supported")}catch(ve){throw ve.message==="VDI Strategy not supported"?(be(Y.VDI_STRATEGY_NOT_SUPPORTED,ve.message,""),ve):ve.message==="Citrix WebRTC redirection feature is NOT supported!"||ve.message==="DCV WebRTC redirection feature is NOT supported!"?(be(Y.VDI_REDIR_NOT_SUPPORTED,ve.message,""),ve):(be(Y.OTHER,ve.message,""),ve)}}var k;e.RtcPeerConnectionFactory&&(M?k=new e.RtcPeerConnectionFactory(j,e.core.getWebSocketManager(),Te,e.hitch(A,$e,{transportType:"softphone",softphoneClientId:Te}),e.hitch(A,be),M):k=new e.RtcPeerConnectionFactory(j,e.core.getWebSocketManager(),Te,e.hitch(A,$e,{transportType:"softphone",softphoneClientId:Te}),e.hitch(A,be))),Be.isBrowserSoftPhoneSupported()||be(Y.UNSUPPORTED_BROWSER,"Connect does not support this browser. Some functionality may not work. ","");var K=Ie({success:function(ve){we("ConnectivityCheckResult",null,{connectivityCheckType:"MicrophonePermission",status:"granted"})},failure:function(ve){be(ve,"Your microphone is not enabled in your browser. ",""),we("ConnectivityCheckResult",null,{connectivityCheckType:"MicrophonePermission",status:"denied"})}});let q=Le(),oe=Ce(),ue=J(!L.disableEchoCancellation);Z(),this.ringtoneEngine=null;var me={},Ye={},vt=!1,nt=null,Ee=null,Et=function(ve,Ke){vt=!0,nt=ve,Ee=Ke},jt=function(){vt=!1,nt=null,Ee=null};this.getSession=function(ve){return me[ve]},this.replaceLocalMediaTrack=function(ve,Ke){var Ze=ae[ve].stream;if(Ze){var ot=Ze.getAudioTracks()[0];Ke.enabled=ot.enabled,ot.enabled=!1,Ze.removeTrack(ot),Ze.addTrack(Ke)}};var St=function(ve){return ve.getStatus().type===e.ContactStatusType.ENDED||ve.getStatus().type===e.ContactStatusType.ERROR||ve.getStatus().type===e.ContactStatusType.MISSED},lt=function(ve){if(me.hasOwnProperty(ve)){var Ke=me[ve];new Promise(function(Ze,ot){delete me[ve],delete Ye[ve],Ke.hangup()}).catch(function(Ze){lily.getLog().warn("Clean up the session locally "+ve,Ze.message).sendInternalLogToServer()})}},En=function(ve){if(Object.keys(ve).length>0){for(var Ke in ve)ve.hasOwnProperty(Ke)&&(Fe($,ve[Ke].callId,Ke),lt(Ke));throw new Error("duplicate session detected, refusing to setup new connection")}};this.startSession=function(ve,Ke){var Ze=vt?nt:ve,ot=vt?Ee:Ke;if(!(!Ze||!ot)){jt(),Ye[ot]=!0,j.info("Softphone call detected:","contactId "+Ze.getContactId(),"agent connectionId "+ot).sendInternalLogToServer(),En(me),Ze.getStatus().type===e.ContactStatusType.CONNECTING&&we("Softphone Connecting",Ze.getContactId()),pe();var Kt=Ze.getAgentConnection().getSoftphoneMediaInfo(),Lt=ye(Kt.callConfigJson),Vt;Lt.useWebSocketProvider&&(Vt=e.core.getWebSocketManager());var ct;M?ct=new e.RTCSession(Lt.signalingEndpoint,Lt.iceServers,Kt.callContextToken,j,Ze.getContactId(),ot,Vt,M):ct=new e.RTCSession(Lt.signalingEndpoint,Lt.iceServers,Kt.callContextToken,j,Ze.getContactId(),ot,Vt),ct.echoCancellation=!L.disableEchoCancellation,me[ot]=ct,e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConnectionEvents.SESSION_INIT,data:{connectionId:ot}}),ct.onSessionFailed=function(Yt,Jn){delete me[ot],delete Ye[ot],re(Yt,Jn),je(Ze.getContactId(),Jn),N(Ze,Yt.sessionReport)},ct.onSessionConnected=function(Yt){we("Softphone Session Connected",Ze.getContactId()),e.becomeMaster(e.MasterTopics.SEND_LOGS),G(Yt),ee(Ze),xe(Ze)},ct.onSessionCompleted=function(Yt){we("Softphone Session Completed",Ze.getContactId()),delete me[ot],delete Ye[ot],N(Ze,Yt.sessionReport),ne(ot)},ct.onLocalStreamAdded=function(Yt,Jn){ae[ot]={stream:Jn},e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,data:{connectionId:ot}})},ct.remoteAudioElement=document.getElementById("remote-audio")||window.parent.parent.document.getElementById("remote-audio"),k?ct.connect(k.get(Lt.iceServers)):ct.connect()}};var Ot=function(ve){me[ve]&&lt(ve)},at=function(ve,Ke){me[Ke]&&St(ve)&&(lt(Ke),jt()),ve.isSoftphoneCall()&&!Ye[Ke]&&(ve.getStatus().type===e.ContactStatusType.CONNECTING||ve.getStatus().type===e.ContactStatusType.INCOMING)&&(e.isFirefoxBrowser()&&e.hasOtherConnectedCCPs()?Et(ve,Ke):A.startSession(ve,Ke))},Cn=function(ve){var Ke=ve.getAgentConnection().connectionId;j.info("Contact detected:","contactId "+ve.getContactId(),"agent connectionId "+Ke).sendInternalLogToServer(),Ye[Ke]||(ve.onRefresh(function(){at(ve,Ke)}),ve.onDestroy(function(){Ot(Ke)}))};A.onInitContactSub=e.contact(Cn),new e.Agent().getContacts().forEach(function(ve){var Ke=ve.getAgentConnection().connectionId;j.info("Contact exist in the snapshot. Reinitiate the Contact and RTC session creation for contactId"+ve.getContactId(),"agent connectionId "+Ke).sendInternalLogToServer(),Cn(ve),at(ve,Ke)}),this.terminate=()=>{A.onInitContactSub&&A.onInitContactSub.unsubscribe&&A.onInitContactSub.unsubscribe(),q&&q.unsubscribe&&q.unsubscribe(),oe&&oe.unsubscribe&&oe.unsubscribe(),ue&&ue.unsubscribe&&ue.unsubscribe(),k.clearIdleRtcPeerConnectionTimerId&&k.clearIdleRtcPeerConnectionTimerId(),k=null}},xe=function(L){var A=e.core.getUpstream(),M=L.getAgentConnection();if(!M){j.info("Not able to retrieve the auto-accept setting from null AgentConnection, ignoring event publish..").sendInternalLogToServer();return}var k=M.getSoftphoneMediaInfo();if(!k){j.info("Not able to retrieve the auto-accept setting from null SoftphoneMediaInfo, ignoring event publish..").sendInternalLogToServer();return}k.autoAccept===!0?(j.info("Auto-accept is enabled, sending out Accepted event to stop ringtone..").sendInternalLogToServer(),A.sendUpstream(e.EventType.BROADCAST,{event:e.ContactEvents.ACCEPTED,data:new e.Contact(L.contactId)}),A.sendUpstream(e.EventType.BROADCAST,{event:e.core.getContactEventName(e.ContactEvents.ACCEPTED,L.contactId),data:new e.Contact(L.contactId)})):j.info("Auto-accept is disabled, ringtone will be stopped by user action.").sendInternalLogToServer()},Le=function(){var L=e.core.getEventBus();return L.subscribe(e.EventType.MUTE,le)},Ce=function(){var L=e.core.getEventBus();return L.subscribe(e.ConfigurationEvents.SET_SPEAKER_DEVICE,de)},J=function(L){var A=e.core.getEventBus();return A.subscribe(e.ConfigurationEvents.SET_MICROPHONE_DEVICE,M=>ce(We(fe({},M),{enableEchoCancellation:L})))},Z=function(){try{e.isChromeBrowser()&&e.getChromeBrowserVersion()>43&&navigator.permissions.query({name:"microphone"}).then(function(L){L.onchange=function(){j.info("Microphone Permission: "+L.state),we("ConnectivityCheckResult",null,{connectivityCheckType:"MicrophonePermission",status:L.state}),L.state==="denied"&&be(Y.MICROPHONE_NOT_SHARED,"Your microphone is not enabled in your browser. ","")}})}catch(L){j.error("Failed in detecting microphone permission status: "+L)}},ne=function(L){delete ae[L],e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.AgentEvents.MUTE_TOGGLE,data:{muted:!1}})},le=function(L){var A;if(e.keys(ae).length!==0){L&&L.mute!==void 0&&(A=L.mute);for(var M in ae)if(ae.hasOwnProperty(M)){var k=ae[M].stream;if(k){var K=k.getAudioTracks()[0];A!==void 0?(K.enabled=!A,ae[M].muted=A,A?j.info("Agent has muted the contact, connectionId -  "+M).sendInternalLogToServer():j.info("Agent has unmuted the contact, connectionId - "+M).sendInternalLogToServer()):A=ae[M].muted||!1}}e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.AgentEvents.MUTE_TOGGLE,data:{muted:A}})}},de=function(L={}){let A=L.deviceId||"";if(e.getLog().info(`[Audio Device Settings] Attempting to set speaker device ${A}`).sendInternalLogToServer(),!A){e.getLog().warn("[Audio Device Settings] Setting speaker device cancelled due to missing deviceId").sendInternalLogToServer();return}var M=document.getElementById("remote-audio")||window.parent.parent.document.getElementById("remote-audio");M&&typeof M.setSinkId=="function"?M.setSinkId(A).then(()=>{e.getLog().info(`[Audio Device Settings] Speaker device ${A} successfully set to speaker audio element`).sendInternalLogToServer(),e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,data:{deviceId:A}})}).catch(k=>{e.getLog().error("[Audio Device Settings] Failed to set speaker device "+A).withException(k).sendInternalLogToServer()}):e.getLog().warn("[Audio Device Settings] Setting speaker device cancelled due to missing remoteAudioElement").sendInternalLogToServer()},ce=function(L={}){let A=L.deviceId||"";if(e.getLog().info(`[Audio Device Settings] Attempting to set microphone device ${A}`).sendInternalLogToServer(),e.keys(ae).length===0){e.getLog().warn("[Audio Device Settings] Setting microphone device cancelled due to missing localMediaStream").sendInternalLogToServer();return}if(!A){e.getLog().warn("[Audio Device Settings] Setting microphone device cancelled due to missing deviceId").sendInternalLogToServer();return}var M=e.core.getSoftphoneManager(),k={audio:{deviceId:{exact:A}}};L.enableEchoCancellation||(k.audio.echoCancellation=!1),e.publishMetric({name:X,data:{count:1,disableEchoCancellation:!L.enableEchoCancellation}}),navigator.mediaDevices.getUserMedia(k).then(K=>{try{var q=K.getAudioTracks()[0];for(var oe in ae)if(ae.hasOwnProperty(oe)){var ue=ae[oe].stream,me=M.getSession(oe);me._pc.getSenders()[0].replaceTrack(q).then(function(){M.replaceLocalMediaTrack(oe,q),e.getLog().info(`[Audio Device Settings] Microphone device ${A} successfully set to local media stream in RTCRtpSender`).sendInternalLogToServer()})}}catch(Ye){e.getLog().error("[Audio Device Settings] Failed to set microphone device "+A).withException(Ye).sendInternalLogToServer();return}e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,data:{deviceId:A}})}).catch(K=>{e.getLog().error("[Audio Device Settings] Failed to set microphone device "+A).withException(K).sendInternalLogToServer()})},re=function(L,A){if(A===e.RTCErrors.ICE_COLLECTION_TIMEOUT){for(var M=`
`,k=0;k<L._iceServers.length;k++)for(var K=0;K<L._iceServers[k].urls.length;K++)M=M+L._iceServers[k].urls[K]+`
`;be(Y.ICE_COLLECTION_TIMEOUT,"Ice collection timedout. ",M)}else A===e.RTCErrors.USER_BUSY?be(Y.USER_BUSY_ERROR,"Softphone call UserBusy error. ",""):A===e.RTCErrors.SIGNALLING_HANDSHAKE_FAILURE?be(Y.SIGNALLING_HANDSHAKE_FAILURE,"Handshaking with Signalling Server "+L._signalingUri+" failed. ",L._signalingUri):A===e.RTCErrors.GUM_TIMEOUT_FAILURE||A===e.RTCErrors.GUM_OTHER_FAILURE?be(Y.MICROPHONE_NOT_SHARED,"Your microphone is not enabled in your browser. ",""):A===e.RTCErrors.SIGNALLING_CONNECTION_FAILURE?be(Y.SIGNALLING_CONNECTION_FAILURE,"URL "+L._signalingUri+" cannot be reached. ",L._signalingUri):A===e.RTCErrors.CALL_NOT_FOUND?j.error("Softphone call failed due to CallNotFoundException.").sendInternalLogToServer():be(Y.WEBRTC_ERROR,"webrtc system error. ","")},ye=function(L){var A=L.replace(/&quot;/g,'"');return JSON.parse(A)},Ie=function(L){var A=L||{};A.success=A.success||function(){},A.failure=A.failure||function(){};var M={audio:!0},k=null;if(typeof Promise!="function"){A.failure(Y.UNSUPPORTED_BROWSER);return}if(typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function")k=navigator.mediaDevices.getUserMedia(M);else if(typeof navigator.webkitGetUserMedia=="function")k=new Promise(function(K,q){navigator.webkitGetUserMedia(M,K,q)});else{A.failure(Y.UNSUPPORTED_BROWSER);return}return k.then(function(K){var q=K.getAudioTracks();q&&q.length>0?A.success(K):A.failure(Y.MICROPHONE_NOT_SHARED)},function(K){A.failure(Y.MICROPHONE_NOT_SHARED)}),k},be=function(L,A,M){j.error("Softphone error occurred : ",L,A||"").sendInternalLogToServer(),e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.AgentEvents.SOFTPHONE_ERROR,data:new e.SoftphoneError(L,A,M)})},je=function(L,A){we("Softphone Session Failed",L,{failedReason:A})},we=function(L,A,M){e.publishMetric({name:L,contactId:A,data:M})},Fe=function(L,A,M){we(L,A,[{name:"AgentConnectionId",value:M}]),j.info("Publish multiple session error metrics",L,"contactId "+A,"agent connectionId "+M).sendInternalLogToServer()};Be.isBrowserSoftPhoneSupported=function(){return e.isOperaBrowser()&&e.getOperaBrowserVersion()>17||e.isChromeBrowser()&&e.getChromeBrowserVersion()>22?!0:!!(e.isFirefoxBrowser()&&e.getFirefoxBrowserVersion()>21)};var U=function(L){var A=u.slice();u=[],A.length>0&&L.sendSoftphoneMetrics(A,{success:function(){j.info("sendSoftphoneMetrics success"+JSON.stringify(A)).sendInternalLogToServer()},failure:function(M){j.error("sendSoftphoneMetrics failed.").withObject(M).sendInternalLogToServer()}})},Q=function(L,A,M,k){A.streamStats=[z(M,g),z(k,v)];var K={callStartTime:A.sessionStartTime,callEndTime:A.sessionEndTime,gumTimeMillis:A.gumTimeMillis,initializationTimeMillis:A.initializationTimeMillis,iceCollectionTimeMillis:A.iceCollectionTimeMillis,signallingConnectTimeMillis:A.signallingConnectTimeMillis,handshakingTimeMillis:A.handshakingTimeMillis,preTalkingTimeMillis:A.preTalkingTimeMillis,talkingTimeMillis:A.talkingTimeMillis,cleanupTimeMillis:A.cleanupTimeMillis,iceCollectionFailure:A.iceCollectionFailure,signallingConnectionFailure:A.signallingConnectionFailure,handshakingFailure:A.handshakingFailure,gumOtherFailure:A.gumOtherFailure,gumTimeoutFailure:A.gumTimeoutFailure,createOfferFailure:A.createOfferFailure,setLocalDescriptionFailure:A.setLocalDescriptionFailure,userBusyFailure:A.userBusyFailure,invalidRemoteSDPFailure:A.invalidRemoteSDPFailure,noRemoteIceCandidateFailure:A.noRemoteIceCandidateFailure,setRemoteDescriptionFailure:A.setRemoteDescriptionFailure,softphoneStreamStatistics:A.streamStats};L.sendSoftphoneReport(K,{success:function(){j.info("sendSoftphoneReport success"+JSON.stringify(K)).sendInternalLogToServer()},failure:function(ue){j.error("sendSoftphoneReport failed.").withObject(ue).sendInternalLogToServer()}});var q={AUDIO_INPUT:{packetsCount:y.map(ue=>ue.packetsCount),packetsLost:y.map(ue=>ue.packetsLost),audioLevel:y.map(ue=>ue.audioLevel),jitterBufferMillis:y.map(ue=>ue.jitterBufferMillis)},AUDIO_OUTPUT:{packetsCount:p.map(ue=>ue.packetsCount),packetsLost:p.map(ue=>ue.packetsLost),audioLevel:p.map(ue=>ue.audioLevel),jitterBufferMillis:p.map(ue=>ue.jitterBufferMillis),roundTripTimeMillis:p.map(ue=>ue.roundTripTimeMillis)}},oe=We(fe({},K),{softphoneStreamPerSecondStatistics:q,iceConnectionsLost:A.iceConnectionsLost,iceConnectionsFailed:A.iceConnectionsFailed||null,peerConnectionFailed:A.peerConnectionFailed||null,rtcJsVersion:A.rtcJsVersion||null,consecutiveNoAudioInputPackets:S,consecutiveLowInputAudioLevel:h,consecutiveNoAudioOutputPackets:I,consecutiveLowOutputAudioLevel:f,audioInputConnectedDurationSeconds:T,ccpMediaReadyLatencyMillis:w,contactSubtype:L.getContactSubtype(),earlyGumEnabled:x,earlyGumWorked:P,vdiPlatform:F||null,streamJsVersion:e.version});e.publishSoftphoneReport({contactId:L.getContactId(),ccpVersion:i.ccpVersion,report:oe}),j.info("sent TelemetryCallReport "+JSON.stringify(oe)).sendInternalLogToServer()},G=function(L){W=window.setInterval(function(){L.getUserAudioStats().then(function(A){var M=s;s=A;var k=he(s,M,g);u.push(k),se(k)},function(A){j.debug("Failed to get user audio stats.",A).sendInternalLogToServer()}),L.getRemoteAudioStats().then(function(A){var M=d;d=A;var k=he(d,M,v);u.push(k),se(k)},function(A){j.debug("Failed to get remote audio stats.",A).sendInternalLogToServer()})},1e3)},ee=function(L){V=window.setInterval(function(){U(L)},C)},pe=function(){s=null,d=null,u=[],y=[],p=[],W=null,V=null,S=0,h=0,I=0,f=0,T=0},he=function(L,A,M){if(A&&L){var k=L.packetsLost>A.packetsLost?L.packetsLost-A.packetsLost:0,K=L.packetsCount>A.packetsCount?L.packetsCount-A.packetsCount:0;return ie(K,M),O(L.audioLevel,M),new H(L.timestamp,k,K,M,L.audioLevel,L.jbMilliseconds,L.rttMilliseconds)}else return new H(L.timestamp,L.packetsLost,L.packetsCount,M,L.audioLevel,L.jbMilliseconds,L.rttMilliseconds)},se=function(L){if(L.softphoneStreamType===g){for(;y.length>=a;)y.shift();y.push(L)}else if(L.softphoneStreamType===v){for(;p.length>=a;)p.shift();p.push(L)}},ie=function(L,A){A===g?(T++,L<=0?S++:S=0):A===v&&(L<=0?I++:I=0)},O=function(L,A){A===g?L!==null&&L<=c?h++:h=0:A===v&&(L!==null&&L<=c?f++:f=0)},R=function(L){return L!==null&&window.clearInterval(L),null},N=function(L,A){W=R(W),V=R(V),Q(L,A,z(s,g),z(d,v)),U(L)},H=function(L,A,M,k,K,q,oe){this.softphoneStreamType=k,this.timestamp=L,this.packetsLost=A,this.packetsCount=M,this.audioLevel=K,this.jitterBufferMillis=q,this.roundTripTimeMillis=oe},z=function(L,A){return L=L||{},new H(L.timestamp,L.packetsLost,L.packetsCount,A,L.audioLevel)},B=function(L){this._originalLogger=L;var A=this;this._tee=function(M,k){return function(){var K=Array.prototype.slice.call(arguments[0]),q="";return K.forEach(function(){q=q+" %s"}),k.apply(A._originalLogger,[e.LogComponent.SOFTPHONE,q].concat(K))}}};B.prototype.debug=function(){return this._tee(1,this._originalLogger.debug)(arguments)},B.prototype.info=function(){return this._tee(2,this._originalLogger.info)(arguments)},B.prototype.log=function(){return this._tee(3,this._originalLogger.log)(arguments)},B.prototype.warn=function(){return this._tee(4,this._originalLogger.warn)(arguments)},B.prototype.error=function(){return this._tee(5,this._originalLogger.error)(arguments)},e.SoftphoneManager=Be})()},944:()=>{(function(){var i=this||globalThis,e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};e.format=function(D,_){var g=1,v=D.length,E="",l,u=[],a,y,p,s,d,c;for(a=0;a<v;a++)if(E=b(D[a]),E==="string")u.push(D[a]);else if(E==="array"){if(p=D[a],p[2])for(l=_[g],y=0;y<p[2].length;y++){if(!l.hasOwnProperty(p[2][y]))throw e('[sprintf] property "%s" does not exist',p[2][y]);l=l[p[2][y]]}else p[1]?l=_[p[1]]:l=_[g++];if(/[^s]/.test(p[8])&&b(l)!="number")throw e("[sprintf] expecting number but found %s",b(l));switch(p[8]){case"b":l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l,10);break;case"e":l=p[7]?l.toExponential(p[7]):l.toExponential();break;case"f":l=p[7]?parseFloat(l).toFixed(p[7]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=(l=String(l))&&p[7]?l.substring(0,p[7]):l;break;case"u":l=l>>>0;break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}l=/[def]/.test(p[8])&&p[3]&&l>=0?"+"+l:l,d=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ",c=p[6]-String(l).length,s=p[6]?C(d,c):"",u.push(p[5]?l+s:s+l)}return u.join("")},e.cache={},e.parse=function(D){for(var _=D,g=[],v=[],E=0;_;){if((g=/^[^\x25]+/.exec(_))!==null)v.push(g[0]);else if((g=/^\x25{2}/.exec(_))!==null)v.push("%");else if((g=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_))!==null){if(g[2]){E|=1;var l=[],u=g[2],a=[];if((a=/^([a-z_][a-z_\d]*)/i.exec(u))!==null)for(l.push(a[1]);(u=u.substring(a[0].length))!=="";)if((a=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null)l.push(a[1]);else if((a=/^\[(\d+)\]/.exec(u))!==null)l.push(a[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";g[2]=l}else E|=2;if(E===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";v.push(g)}else throw"[sprintf] huh?";_=_.substring(g[0].length)}return v};var m=function(D,_,g){return g=_.slice(0),g.splice(0,0,D),e.apply(null,g)};function b(D){return Object.prototype.toString.call(D).slice(8,-1).toLowerCase()}function C(D,_){for(var g=[];_>0;g[--_]=D);return g.join("")}i.sprintf=e,i.vsprintf=m})()},82:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;var m=function(){};m.prototype.send=function(l){throw new e.NotImplementedError},m.prototype.onMessage=function(l){throw new e.NotImplementedError};var b=function(){m.call(this)};b.prototype=Object.create(m.prototype),b.prototype.constructor=b,b.prototype.onMessage=function(l){},b.prototype.send=function(l){};var C=function(l,u){m.call(this),this.window=l,this.domain=u||"*"};C.prototype=Object.create(m.prototype),C.prototype.constructor=C,C.prototype.send=function(l){this.window.postMessage(l,this.domain)},C.prototype.onMessage=function(l){this.window.addEventListener("message",l)};var D=function(l,u,a){m.call(this),this.input=l,this.output=u,this.domain=a||"*"};D.prototype=Object.create(m.prototype),D.prototype.constructor=D,D.prototype.send=function(l){this.output.postMessage(l,this.domain)},D.prototype.onMessage=function(l){this.input.addEventListener("message",u=>{u.source===this.output&&l(u)})};var _=function(l){m.call(this),this.port=l,this.id=e.randomId()};_.prototype=Object.create(m.prototype),_.prototype.constructor=_,_.prototype.send=function(l){this.port.postMessage(l)},_.prototype.onMessage=function(l){this.port.addEventListener("message",l)},_.prototype.getId=function(){return this.id};var g=function(l){m.call(this),this.streamMap=l?e.index(l,function(u){return u.getId()}):{},this.messageListeners=[]};g.prototype=Object.create(m.prototype),g.prototype.constructor=g,g.prototype.send=function(l){this.getStreams().forEach(function(u){try{u.send(l)}catch{}})},g.prototype.onMessage=function(l){this.messageListeners.push(l),this.getStreams().forEach(function(u){u.onMessage(l)})},g.prototype.addStream=function(l){var u=this;this.streamMap[l.getId()]=l,this.messageListeners.forEach(function(a){l.onMessage(a)})},g.prototype.removeStream=function(l){delete this.streamMap[l.getId()]},g.prototype.getStreams=function(l){return e.values(this.streamMap)},g.prototype.getStreamForPort=function(l){return e.find(this.getStreams(),function(u){return u.port===l})};var v=function(l,u,a){this.name=l,this.upstream=u||new b,this.downstream=a||new b,this.downstreamBus=new e.EventBus,this.upstreamBus=new e.EventBus,this.upstream.onMessage(e.hitch(this,this._dispatchEvent,this.upstreamBus)),this.downstream.onMessage(e.hitch(this,this._dispatchEvent,this.downstreamBus))};v.prototype.onUpstream=function(l,u){return e.assertNotNull(l,"eventName"),e.assertNotNull(u,"f"),e.assertTrue(e.isFunction(u),"f must be a function"),this.upstreamBus.subscribe(l,u)},v.prototype.onAllUpstream=function(l){return e.assertNotNull(l,"f"),e.assertTrue(e.isFunction(l),"f must be a function"),this.upstreamBus.subscribeAll(l)},v.prototype.onDownstream=function(l,u){return e.assertNotNull(l,"eventName"),e.assertNotNull(u,"f"),e.assertTrue(e.isFunction(u),"f must be a function"),this.downstreamBus.subscribe(l,u)},v.prototype.onAllDownstream=function(l){return e.assertNotNull(l,"f"),e.assertTrue(e.isFunction(l),"f must be a function"),this.downstreamBus.subscribeAll(l)},v.prototype.sendUpstream=function(l,u){e.assertNotNull(l,"eventName"),this.upstream.send({event:l,data:u})},v.prototype.sendDownstream=function(l,u){e.assertNotNull(l,"eventName"),this.downstream.send({event:l,data:u})},v.prototype._dispatchEvent=function(l,u){var a=u.data;a.event&&l.trigger(a.event,a.data)},v.prototype.passUpstream=function(){var l=this;return function(u,a){l.upstream.send({event:a,data:u})}},v.prototype.passDownstream=function(){var l=this;return function(u,a){l.downstream.send({event:a,data:u})}},v.prototype.shutdown=function(){this.upstreamBus.unsubscribeAll(),this.downstreamBus.unsubscribeAll()};var E=function(l,u,a,y){v.call(this,l,new D(u,a.contentWindow,y||"*"),null)};E.prototype=Object.create(v.prototype),E.prototype.constructor=E,e.Stream=m,e.NullStream=b,e.WindowStream=C,e.WindowIOStream=D,e.PortStream=_,e.StreamMultiplexer=g,e.Conduit=v,e.IFrameConduit=E})()},833:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;var m=function(_,g){e.assertNotNull(_,"fromState"),e.assertNotNull(g,"toState"),this.fromState=_,this.toState=g};m.prototype.getAssociations=function(_){throw e.NotImplementedError()},m.prototype.getFromState=function(){return this.fromState},m.prototype.getToState=function(){return this.toState};var b=function(_,g,v){e.assertNotNull(_,"fromState"),e.assertNotNull(g,"toState"),e.assertNotNull(v,"associations"),m.call(this,_,g),this.associations=v};b.prototype=Object.create(m.prototype),b.prototype.constructor=b,b.prototype.getAssociations=function(_){return this.associations};var C=function(_,g,v){e.assertNotNull(_,"fromState"),e.assertNotNull(g,"toState"),e.assertNotNull(v,"closure"),e.assertTrue(e.isFunction(v),"closure must be a function"),m.call(this,_,g),this.closure=v};C.prototype=Object.create(m.prototype),C.prototype.constructor=C,C.prototype.getAssociations=function(_){return this.closure(_,this.getFromState(),this.getToState())};var D=function(){this.fromMap={}};D.ANY="<<any>>",D.prototype.assoc=function(_,g,v){var E=this;if(!_)throw new Error("fromStateObj is not defined.");if(!g)throw new Error("toStateObj is not defined.");if(!v)throw new Error("assocObj is not defined.");return _ instanceof Array?_.forEach(function(l){E.assoc(l,g,v)}):g instanceof Array?g.forEach(function(l){E.assoc(_,l,v)}):typeof v=="function"?this._addAssociation(new C(_,g,v)):v instanceof Array?this._addAssociation(new b(_,g,v)):this._addAssociation(new b(_,g,[v])),this},D.prototype.getAssociations=function(_,g,v){e.assertNotNull(g,"fromState"),e.assertNotNull(v,"toState");var E=[],l=this.fromMap[D.ANY]||{},u=this.fromMap[g]||{};return E=E.concat(this._getAssociationsFromMap(l,_,g,v)),E=E.concat(this._getAssociationsFromMap(u,_,g,v)),E},D.prototype._addAssociation=function(_){var g=this.fromMap[_.getFromState()];g||(g=this.fromMap[_.getFromState()]={});var v=g[_.getToState()];v||(v=g[_.getToState()]=[]),v.push(_)},D.prototype._getAssociationsFromMap=function(_,g,v,E){var l=(_[D.ANY]||[]).concat(_[E]||[]);return l.reduce(function(u,a){return u.concat(a.getAssociations(g))},[])},e.EventGraph=D})()},891:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e;var m=navigator.userAgent,b=24*60*60*1e3,C=578,D=433,_=["bubbles","cancelBubble","cancelable","composed","data","defaultPrevented","eventPhase","isTrusted","lastEventId","origin","returnValue","timeStamp","type"];e.sprintf=i.sprintf,e.vsprintf=i.vsprintf,delete i.sprintf,delete i.vsprintf,e.HTTP_STATUS_CODES={SUCCESS:200,UNAUTHORIZED:401,ACCESS_DENIED:403,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500},e.TRANSPORT_TYPES={CHAT_TOKEN:"chat_token",WEB_SOCKET:"web_socket",AGENT_DISCOVERY:"agent_discovery",WEB_RTC:"web_rtc"},e.hitch=function(){var v=Array.prototype.slice.call(arguments),E=v.shift(),l=v.shift();return e.assertNotNull(E,"scope"),e.assertNotNull(l,"method"),e.assertTrue(e.isFunction(l),"method must be a function"),function(){var u=Array.prototype.slice.call(arguments);return l.apply(E,v.concat(u))}},e.isFunction=function(v){return!!(v&&v.constructor&&v.call&&v.apply)},e.isArray=function(v){return Object.prototype.toString.call(v)==="[object Array]"},e.keys=function(v){var E=[];e.assertNotNull(v,"map");for(var l in v)E.push(l);return E},e.values=function(v){var E=[];e.assertNotNull(v,"map");for(var l in v)E.push(v[l]);return E},e.entries=function(v){var E=[];for(var l in v)E.push({key:l,value:v[l]});return E},e.merge=function(){var v=Array.prototype.slice.call(arguments,0),E={};return v.forEach(function(l){e.entries(l).forEach(function(u){E[u.key]=u.value})}),E},e.now=function(){return new Date().getTime()},e.find=function(v,E){for(var l=0;l<v.length;l++)if(E(v[l]))return v[l];return null},e.contains=function(v,E){return v instanceof Array?e.find(v,function(l){return l===E})!=null:E in v},e.containsValue=function(v,E){return v instanceof Array?e.find(v,function(l){return l===E})!=null:e.find(e.values(v),function(l){return l===E})!=null},e.randomId=function(){return e.sprintf("%s-%s",e.now(),Math.random().toString(36).slice(2))},e.makeEnum=function(v){var E={};return v.forEach(function(l){var u=l.replace(/\.?([a-z]+)_?/g,function(a,y){return y.toUpperCase()+"_"}).replace(/_$/,"");E[u]=l}),E},e.makeNamespacedEnum=function(v,E){var l=e.makeEnum(E);return e.keys(l).forEach(function(u){l[u]=e.sprintf("%s::%s",v,l[u])}),l},e.makeGenericNamespacedEnum=function(v,E,l){var u=e.makeEnum(E);return e.keys(u).forEach(function(a){u[a]=e.sprintf("%s"+l+"%s",v,u[a])}),u},e.isChromeBrowser=function(){return m.indexOf("Chrome")!==-1},e.isFirefoxBrowser=function(){return m.indexOf("Firefox")!==-1},e.isOperaBrowser=function(){return m.indexOf("Opera")!==-1},e.isEdgeBrowser=function(){return m.indexOf("Edg")!==-1},e.getChromeBrowserVersion=function(){var v=m.substring(m.indexOf("Chrome")+7);return v?parseFloat(v):-1},e.getFirefoxBrowserVersion=function(){var v=m.substring(m.indexOf("Firefox")+8);return v?parseFloat(v):-1},e.isValidLocale=function(v){var E=[{id:"en_US",label:"English"},{id:"de_DE",label:"Deutsch"},{id:"es_ES",label:"Espa\xF1ol"},{id:"fr_FR",label:"Fran\xE7ais"},{id:"ja_JP",label:"\u65E5\u672C\u8A9E"},{id:"it_IT",label:"Italiano"},{id:"ko_KR",label:"\uD55C\uAD6D\uC5B4"},{id:"pt_BR",label:"Portugu\xEAs"},{id:"zh_CN",label:"\u4E2D\u6587(\u7B80\u4F53)"},{id:"zh_TW",label:"\u4E2D\u6587(\u7E41\u9AD4)"}];return E.map(function(l){return l.id}).includes(v)},e.getOperaBrowserVersion=function(){var v=m.indexOf("Opera"),E=m.indexOf("Version")!==-1?m.substring(v+8):m.substring(v+6);return E?parseFloat(E):-1},e.index=function(v,E){var l={};return v.forEach(function(u){l[E(u)]=u}),l},e.set=function(v){var E={};return v.forEach(function(l){E[l]=1}),E},e.relativeComplement=function(v,E){var l={};return e.keys(E).forEach(function(u){u in v||(l[u]=E[u])}),l},e.assertTrue=function(v,E){if(!v)throw new e.ValueError(E)},e.assertNotNull=function(v,E){return e.assertTrue(v!=null&&typeof v!==void 0,e.sprintf("%s must be provided",E||"A value")),v},e.deepcopy=function(v){return JSON.parse(JSON.stringify(v))},e.deepcopyCrossOriginEvent=function(v){let E={};return _.forEach(u=>{try{E[u]=v[u]}catch{e.getLog().info("deepcopyCrossOriginEvent failed on key: ",u).sendInternalLogToServer()}}),e.deepcopy(E)},e.getBaseUrl=function(){var v=i.location;return e.sprintf("%s//%s:%s",v.protocol,v.hostname,v.port)},e.getUrlWithProtocol=function(v){var E=i.location.protocol;return v.substr(0,E.length)!==E?e.sprintf("%s//%s",E,v):v},e.isFramed=function(){try{return window.self!==window.top}catch{return!0}},e.hasOtherConnectedCCPs=function(){return e.numberOfConnectedCCPs>1},e.fetch=function(v,E,l,u){return u=u||5,l=l||1e3,E=E||{},new Promise(function(a,y){function p(s){fetch(v,E).then(function(d){d.status===e.HTTP_STATUS_CODES.SUCCESS?d.json().then(c=>a(c)).catch(()=>a({})):s!==1&&(d.status>=e.HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR||d.status===e.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)?setTimeout(function(){p(--s)},l):y(d)}).catch(function(d){y(d)})}p(u)})},e.fetchWithTimeout=function(v,E,l,u,a){return tr(this,null,function*(){if(l=l||{},!E)return e.fetch(v,l,u,a);let y=new AbortController,p=setTimeout(()=>y.abort(),E),s=yield e.fetch(v,We(fe({},l),{signal:y.signal}),u,a);return clearTimeout(p),s})},e.backoff=function(v,E,l,u){e.assertTrue(e.isFunction(v),"func must be a Function");var a=this,y=2;v({success:function(p){u&&u.success&&u.success(p)},failure:function(p,s){if(l>0){var d=E*2*Math.random();i.setTimeout(function(){a.backoff(v,d*y,--l,u)},d)}else u&&u.failure&&u.failure(p,s)}})},e.publishMetric=function(v){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.CLIENT_METRIC,data:v})},e.publishSoftphoneStats=function(v){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.SOFTPHONE_STATS,data:v})},e.publishSoftphoneReport=function(v){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.SOFTPHONE_REPORT,data:v})},e.publishClickStreamData=function(v){e.core.getUpstream().sendUpstream(e.EventType.BROADCAST,{event:e.EventType.CLICK_STREAM_DATA,data:v})},e.publishClientSideLogs=function(v){var E=e.core.getEventBus();E.trigger(e.EventType.CLIENT_SIDE_LOGS,v)},e.addNamespaceToLogs=function(v){["log","error","warn","info","debug"].forEach(l=>{let u=window.console[l];window.console[l]=function(){let a=Array.from(arguments);a.unshift(`[${v}]`),u.apply(window.console,a)}})},e.PopupManager=function(){},e.PopupManager.prototype.open=function(v,E,l){var u=null;if(l){var a=l.height||C,y=l.width||D,p=l.top||0,s=l.left||0;u=window.open("",E,"width="+y+", height="+a+", top="+p+", left="+s),u.location!==v&&(u=window.open(v,E,"width="+y+", height="+a+", top="+p+", left="+s))}else u=window.open("",E),u.location!==v&&(u=window.open(v,E));return u},e.PopupManager.prototype.clear=function(v){var E=this._getLocalStorageKey(v);i.localStorage.removeItem(E)},e.PopupManager.prototype._getLastOpenedTimestamp=function(v){var E=this._getLocalStorageKey(v),l=i.localStorage.getItem(E);return l?parseInt(l,10):0},e.PopupManager.prototype._setLastOpenedTimestamp=function(v,E){var l=this._getLocalStorageKey(v);i.localStorage.setItem(l,""+E)},e.PopupManager.prototype._getLocalStorageKey=function(v){return"connectPopupManager::"+v};var g=e.makeEnum(["granted","denied","default"]);e.NotificationManager=function(){this.queue=[],this.permission=g.DEFAULT},e.NotificationManager.prototype.requestPermission=function(){var v=this;"Notification"in i?i.Notification.permission===g.DENIED?(e.getLog().warn("The user has requested to not receive notifications.").sendInternalLogToServer(),this.permission=g.DENIED):this.permission!==g.GRANTED&&i.Notification.requestPermission().then(function(E){v.permission=E,E===g.GRANTED?v._showQueued():v.queue=[]}):(e.getLog().warn("This browser doesn't support notifications.").sendInternalLogToServer(),this.permission=g.DENIED)},e.NotificationManager.prototype.show=function(v,E){if(this.permission===g.GRANTED)return this._showImpl({title:v,options:E});if(this.permission===g.DENIED)e.getLog().warn("Unable to show notification.").sendInternalLogToServer().withObject({title:v,options:E});else{var l={title:v,options:E};e.getLog().warn("Deferring notification until user decides to allow or deny.").withObject(l).sendInternalLogToServer(),this.queue.push(l)}},e.NotificationManager.prototype._showQueued=function(){var v=this,E=this.queue.map(function(l){return v._showImpl(l)});return this.queue=[],E},e.NotificationManager.prototype._showImpl=function(v){var E=new i.Notification(v.title,v.options);return v.options.clicked&&(E.onclick=function(){v.options.clicked.call(E)}),E},e.ValueError=function(){var v=Array.prototype.slice.call(arguments,0),E=v.shift(),l=new Error(e.vsprintf(E,v));return Object.setPrototypeOf(l,e.ValueError.prototype),l},Object.setPrototypeOf(e.ValueError.prototype,Error.prototype),Object.setPrototypeOf(e.ValueError,Error),e.ValueError.prototype.name="ValueError",e.NotImplementedError=function(){var v=Array.prototype.slice.call(arguments,0),E=v.shift(),l=new Error(e.vsprintf(E,v));return Object.setPrototypeOf(l,e.NotImplementedError.prototype),l},Object.setPrototypeOf(e.NotImplementedError.prototype,Error.prototype),Object.setPrototypeOf(e.NotImplementedError,Error),e.NotImplementedError.prototype.name="NotImplementedError",e.StateError=function(){var v=Array.prototype.slice.call(arguments,0),E=v.shift(),l=new Error(e.vsprintf(E,v));return Object.setPrototypeOf(l,e.StateError.prototype),l},Object.setPrototypeOf(e.StateError.prototype,Error.prototype),Object.setPrototypeOf(e.StateError,Error),e.StateError.prototype.name="StateError",e.VoiceIdError=function(v,E,l){var u={};return u.type=v,u.message=E,u.stack=Error(E).stack,u.err=l,u},e.isCCP=function(){if(!e.core.upstream)return!1;var v=e.core.getUpstream();return v.name==="ConnectSharedWorkerConduit"},e.isSharedWorker=function(){return e.worker&&!!e.worker.clientEngine},e.isCRM=function(){return e.core.upstream?e.core.getUpstream()instanceof e.IFrameConduit:!1}})()},736:()=>{(function(){var i=this||globalThis,e=i.connect||{};i.connect=e,i.lily=e,e.worker={};var m=3e4,b=5e3,C=100,D=400,_=6e4,g=3e5,v=1e4,E=4,l=3e4,u=1e4,a="LADS.GetAgentFailoverConfiguration";let y={createTaskContact:"createTaskContact",createOutboundContact:"createOutboundContact",createTemplatedTask:"createTemplatedTask"};var p=function(){this.topicMasterMap={}};p.prototype.getMaster=function(c){return e.assertNotNull(c,"topic"),this.topicMasterMap[c]||null},p.prototype.setMaster=function(c,S){e.assertNotNull(c,"topic"),e.assertNotNull(S,"id"),this.topicMasterMap[c]=S},p.prototype.removeMaster=function(c){e.assertNotNull(c,"id");var S=this;e.entries(this.topicMasterMap).filter(function(h){return h.value===c}).forEach(function(h){delete S.topicMasterMap[h.key]})};var s=function(c){e.ClientBase.call(this),this.conduit=c};s.prototype=Object.create(e.ClientBase.prototype),s.prototype.constructor=s,s.prototype._callImpl=function(c,S,h){var I=this,f=new Date().getTime();e.containsValue(e.AgentAppClientMethods,c)?e.core.getAgentAppClient()._callImpl(c,S,{success:function(T){I._recordAPILatency(c,f,S),h.success(T)},failure:function(T){I._recordAPILatency(c,f,S,T),h.failure(T)}}):e.containsValue(e.TaskTemplatesClientMethods,c)?e.core.getTaskTemplatesClient()._callImpl(c,S,{success:function(T){I._recordAPILatency(c,f,S),h.success(T)},failure:function(T){I._recordAPILatency(c,f,S,T),h.failure(T)}}):e.core.getClient()._callImpl(c,S,{success:function(T,w){I._recordAPILatency(c,f,S),h.success(T,w)},failure:function(T,w){I._recordAPILatency(c,f,S,T),h.failure(T,w)},authFailure:function(T,w){I._recordAPILatency(c,f,S,T),h.authFailure()},accessDenied:function(T,w){I._recordAPILatency(c,f,S,T),h.accessDenied&&h.accessDenied()}})},s.prototype._recordAPILatency=function(c,S,h,I){var f=new Date().getTime(),T=f-S;this._sendAPIMetrics(c,T,h,I)},s.prototype._sendAPIMetrics=function(c,S,h,I){let f={name:c,time:S,error:I,error5xx:0},T=[{name:"Category",value:"API"}],w=I&&I.statusCode||200,x=I&&I.retryStatus||e.RetryStatus.NONE,P=[{name:"HttpStatusCode",value:w},{name:"HttpGenericStatusCode",value:`${w.toString().charAt(0)}XX`},{name:"RetryStatus",value:x}];if(w.toString().charAt(0)==="5"&&(f.error5xx=1),w.toString().charAt(0)==="5"?f.fault=1:w.toString().charAt(0)==="2"&&(f.fault=0),y[c]&&h&&h.relatedContactId){let F={name:`${c}WithRelatedContactId`,time:f.time,error:f.error,error5xx:f.error5xx};this.conduit.sendDownstream(e.EventType.API_METRIC,We(fe({},F),{dimensions:T,optionalDimensions:P}))}this.conduit.sendDownstream(e.EventType.API_METRIC,We(fe({},f),{dimensions:T,optionalDimensions:P}))};var d=function(){var c=this;this.multiplexer=new e.StreamMultiplexer,this.conduit=new e.Conduit("AmazonConnectSharedWorker",null,this.multiplexer),this.client=new s(this.conduit),this.timeout=null,this.agent=null,this.nextToken=null,this.initData={},this.portConduitMap={},this.streamMapByTabId={},this.masterCoord=new p,this.logsBuffer=[],this.suppress=!1,this.forceOffline=!1,this.longPollingOptions={allowLongPollingShadowMode:!1,allowLongPollingWebsocketOnlyMode:!1},this.drPollingUrl=null,this.thisArn=null,this.otherArn=null,this.pendingFailover=null;var S=null;e.rootLogger=new e.DownstreamConduitLogger(this.conduit),this.conduit.onDownstream(e.EventType.SEND_LOGS,function(h){e.getLog().pushLogsDownstream(h),c.logsBuffer=c.logsBuffer.concat(h),c.logsBuffer.length>D&&c.handleSendLogsRequest(c.logsBuffer)}),this.conduit.onDownstream(e.DisasterRecoveryEvents.SUPPRESS,function(h){e.getLog().debug("[Disaster Recovery] Setting Suppress to %s",h.suppress).sendInternalLogToServer(),c.suppress=h.suppress||!1,c.suppress||(c.forceOffline=!1),(typeof h.shouldSendFailoverDownstream>"u"||h.shouldSendFailoverDownstream)&&c.conduit.sendDownstream(e.DisasterRecoveryEvents.FAILOVER,{isPrimary:!c.suppress})}),this.conduit.onDownstream(e.DisasterRecoveryEvents.FORCE_OFFLINE,function(h){e.getLog().debug("[Disaster Recovery] Setting FORCE_OFFLINE to %s",h.offline).sendInternalLogToServer(),c.forceOffline||(c.pendingFailover=!1,c.conduit.sendDownstream(e.DisasterRecoveryEvents.FAILOVER,{isPrimary:!1,nextActiveArn:h.nextActiveArn})),c.forceOffline=h.offline||!1}),e.DisasterRecoveryEvents.INIT_DR_POLLING&&this.conduit.onDownstream(e.DisasterRecoveryEvents.INIT_DR_POLLING,function(h){var I=e.getLog();c.drPollingUrl?(I.debug(`[Disaster Recovery] Adding new CCP to active region polling for instance ${h.instanceArn}`).sendInternalLogToServer(),c.pollForActiveRegion(!0,!1)):(I.info(`[Disaster Recovery] Initializing active region polling for instance ${h.instanceArn}`).sendInternalLogToServer(),c.thisArn=h.instanceArn,c.otherArn=h.otherArn,c.getPresignedDiscoveryUrl().then(f=>{c.drPollingUrl=f,c.pollForActiveRegion(!0,!0)},f=>{I.error(`[Disaster Recovery] Failed to get presigned URL for instance ${h.instanceArn}; suppressing contacts`).withException(f).sendInternalLogToServer(),c.suppress=!0}))}),this.conduit.onDownstream(e.EventType.CONFIGURE,function(h){console.log("@@@ configure event handler",h);try{h.authToken&&h.authToken!==c.initData.authToken&&(c.initData=h,e.core.init(h),h.longPollingOptions&&(typeof h.longPollingOptions.allowLongPollingShadowMode=="boolean"&&(c.longPollingOptions.allowLongPollingShadowMode=h.longPollingOptions.allowLongPollingShadowMode),typeof h.longPollingOptions.allowLongPollingWebsocketOnlyMode=="boolean"&&(c.longPollingOptions.allowLongPollingWebsocketOnlyMode=h.longPollingOptions.allowLongPollingWebsocketOnlyMode)),S?e.getLog().info("Not Initializing a new WebsocketManager instance, since one already exists").sendInternalLogToServer():(e.getLog().info("Creating a new Websocket connection for CCP").sendInternalLogToServer(),e.WebSocketManager.setGlobalConfig({loggerConfig:{logger:e.getLog(),advancedLogWriter:"info",level:10}}),S=e.WebSocketManager.create(),S.onInitFailure(function(){c.conduit.sendDownstream(e.WebSocketEvents.INIT_FAILURE)}),S.onConnectionOpen(function(I){c.conduit.sendDownstream(e.WebSocketEvents.CONNECTION_OPEN,I)}),S.onConnectionClose(function(I){c.conduit.sendDownstream(e.WebSocketEvents.CONNECTION_CLOSE,I)}),S.onConnectionGain(function(){c.conduit.sendDownstream(e.AgentEvents.WEBSOCKET_CONNECTION_GAINED),c.conduit.sendDownstream(e.WebSocketEvents.CONNECTION_GAIN)}),S.onConnectionLost(function(I){c.conduit.sendDownstream(e.AgentEvents.WEBSOCKET_CONNECTION_LOST,I),c.conduit.sendDownstream(e.WebSocketEvents.CONNECTION_LOST,I)}),S.onSubscriptionUpdate(function(I){c.conduit.sendDownstream(e.WebSocketEvents.SUBSCRIPTION_UPDATE,I)}),S.onSubscriptionFailure(function(I){c.conduit.sendDownstream(e.WebSocketEvents.SUBSCRIPTION_FAILURE,I)}),S.onAllMessage(function(I){c.conduit.sendDownstream(e.WebSocketEvents.ALL_MESSAGE,I)}),c.conduit.onDownstream(e.WebSocketEvents.SEND,function(I){S.sendMessage(I)}),c.conduit.onDownstream(e.WebSocketEvents.SUBSCRIBE,function(I){S.subscribeTopics(I)}),S.init(e.hitch(c,c.getWebSocketUrl)).then(function(I){try{if(I&&!I.webSocketConnectionFailed)e.getLog().info("Kicking off agent polling").sendInternalLogToServer(),c.pollForAgent(),e.getLog().info("Kicking off config polling").sendInternalLogToServer(),c.pollForAgentConfiguration({repeatForever:!0}),e.getLog().info("Kicking off auth token polling").sendInternalLogToServer(),i.setInterval(e.hitch(c,c.checkAuthToken),g);else if(!e.webSocketInitFailed){let f=e.WebSocketEvents.INIT_FAILURE;throw c.conduit.sendDownstream(f),e.webSocketInitFailed=!0,new Error(f)}}catch(f){e.getLog().error("WebSocket failed to initialize").withException(f).sendInternalLogToServer()}})))}catch(I){console.error("@@@ error",I)}}),this.conduit.onDownstream(e.EventType.TERMINATE,function(){c.handleSendLogsRequest(c.logsBuffer),e.core.terminate(),c.conduit.sendDownstream(e.EventType.TERMINATED)}),this.conduit.onDownstream(e.EventType.SYNCHRONIZE,function(){c.conduit.sendDownstream(e.EventType.ACKNOWLEDGE)}),this.conduit.onDownstream(e.EventType.BROADCAST,function(h){c.conduit.sendDownstream(h.event,h.data)}),i.onconnect=function(h){var I=h.ports[0],f=new e.PortStream(I);c.multiplexer.addStream(f),I.start();var T=new e.Conduit(f.getId(),null,f);T.sendDownstream(e.EventType.ACKNOWLEDGE,{id:f.getId()}),c.portConduitMap[f.getId()]=T,c.conduit.sendDownstream(e.EventType.UPDATE_CONNECTED_CCPS,{length:Object.keys(c.portConduitMap).length}),c.agent!==null&&c.updateAgent(),T.onDownstream(e.EventType.API_REQUEST,e.hitch(c,c.handleAPIRequest,T)),T.onDownstream(e.EventType.MASTER_REQUEST,e.hitch(c,c.handleMasterRequest,T,f.getId())),T.onDownstream(e.EventType.RELOAD_AGENT_CONFIGURATION,e.hitch(c,c.pollForAgentConfiguration)),T.onDownstream(e.EventType.TAB_ID,e.hitch(c,c.handleTabIdEvent,f)),T.onDownstream(e.EventType.CLOSE,e.hitch(c,c.handleCloseEvent,f))}};d.prototype.pollForActiveRegion=function(c,S){var h=this,I=e.getLog();if(!h.drPollingUrl)throw new e.StateError("[Disaster Recovery] Tried to poll for active region without first initializing DR polling in the worker.");I.debug(`[Disaster Recovery] Polling for failover with presigned URL for instance ${h.thisArn}`).sendInternalLogToServer();var f=new Date().getTime();return e.fetchWithTimeout(h.drPollingUrl,u).catch(T=>{if(T.status){if(h.client._recordAPILatency(a,f,{statusCode:T.status}),[e.HTTP_STATUS_CODES.ACCESS_DENIED,e.HTTP_STATUS_CODES.UNAUTHORIZED].includes(T.status))return I.info("[Disaster Recovery] Active region polling failed; trying to get a new URL for polling.").withObject(T).sendInternalLogToServer(),h.getPresignedDiscoveryUrl().then(x=>{h.drPollingUrl=x}).then(()=>(f=new Date().getTime(),e.fetchWithTimeout(h.drPollingUrl,u)));var w=`[Disaster Recovery] Failed to poll for failover for instance ${h.thisArn}, received unexpected response code ${T.status}`;throw I.error(w).withObject(T).sendInternalLogToServer(),new Error(w)}else{var w=`[Disaster Recovery] Failed to poll for failover for instance ${h.thisArn}, request timed out or aborted`;throw h.client._recordAPILatency(a,f,{statusCode:-1}),I.error(w).withObject(T).sendInternalLogToServer(),new Error(w)}}).then(T=>{if(h.client._recordAPILatency(a,f),typeof T.TerminateActiveContacts!="boolean"){I.error("[Disaster Recovery] DR polling response did not contain a valid value for TerminateActiveContacts.").withObject(T).sendInternalLogToServer();return}var w=!T.TerminateActiveContacts;if(T.InstanceArn)I.debug(`[Disaster Recovery] Successfully polled for active region. Primary instance ARN is ${T.InstanceArn} and soft failover is ${w?"enabled":"disabled"}`).sendInternalLogToServer();else{I.error("[Disaster Recovery] DR polling response did not contain a truthy active instance ARN.").withObject(T).sendInternalLogToServer();return}if(h.thisArn===T.InstanceArn&&!h.suppress&&c)I.debug(`[Disaster Recovery] Instance ${h.thisArn} is being set to primary`).sendInternalLogToServer(),h.conduit.sendDownstream(e.DisasterRecoveryEvents.FAILOVER,{nextActiveArn:T.InstanceArn});else if(h.otherArn===T.InstanceArn){if(w&&!S&&c&&(!h.suppress||h.pendingFailover)&&h.conduit.sendDownstream(e.DisasterRecoveryEvents.FAILOVER,{nextActiveArn:h.thisArn}),!h.suppress){h.suppress=!0;let x=w&&!S;x?(h.pendingFailover=!0,I.debug(`[Disaster Recovery] Instance ${h.thisArn} will be set to stand-by using soft failover`).sendInternalLogToServer()):I.debug(`[Disaster Recovery] Instance ${h.thisArn} is being set to stand-by immediately`).sendInternalLogToServer(),h.conduit.sendDownstream(e.DisasterRecoveryEvents.FORCE_OFFLINE,{softFailover:x,nextActiveArn:T.InstanceArn})}}else[h.thisArn,h.otherArn].includes(T.InstanceArn)||I.error(`[Disaster Recovery] The current primary instance in this agent's failover group ${T.InstanceArn} doesn't match this instance ${h.thisArn} or the other instance ${h.otherArn}`).sendInternalLogToServer()}).catch(T=>{T.status&&h.client._recordAPILatency(a,f,We(fe({},T),{statusCode:T.status})),I.error(`[Disaster Recovery] Active region polling failed for instance ${h.thisArn}.`).withObject(T).sendInternalLogToServer()}).finally(()=>{(S||!c)&&i.setTimeout(e.hitch(h,h.pollForActiveRegion),_)})},d.prototype.getPresignedDiscoveryUrl=function(){var c=this;return new Promise((S,h)=>{e.getLog().info(`[Disaster Recovery] Getting presigned URL for instance ${c.thisArn}`).sendInternalLogToServer(),this.client.call(e.ClientMethods.CREATE_TRANSPORT,{transportType:e.TRANSPORT_TYPES.AGENT_DISCOVERY},{success:function(I){I&&I.agentDiscoveryTransport&&I.agentDiscoveryTransport.presignedUrl?(e.getLog().info("getPresignedDiscoveryUrl succeeded").sendInternalLogToServer(),S(I.agentDiscoveryTransport.presignedUrl)):(e.getLog().info("getPresignedDiscoveryUrl received empty/invalid data").withObject(I).sendInternalLogToServer(),h(Error("getPresignedDiscoveryUrl received empty/invalid data")))},failure:function(I,f){e.getLog().error(`[Disaster Recovery] Failed to get presigned URL for instance ${c.thisArn}`).withException(I).withObject(f).sendInternalLogToServer(),h(new Error("Failed to get presigned URL"))},authFailure:function(){e.hitch(c,c.handleAuthFail)(),h(new Error("Encountered auth failure when getting presigned URL"))},accessDenied:function(){e.hitch(c,c.handleAccessDenied)(),h(new Error("Encountered access denied when getting presigned URL"))}})})},d.prototype.pollForAgent=function(){var c=this,S=e.hitch(c,c.handlePollingAuthFail);this.client.call(e.ClientMethods.GET_AGENT_SNAPSHOT,{nextToken:c.nextToken,timeout:m},{success:function(h,I){try{c.agent=c.agent||{},c.agent.snapshot=h.snapshot,c.agent.snapshot.localTimestamp=e.now(),c.agent.snapshot.skew=c.agent.snapshot.snapshotTimestamp-c.agent.snapshot.localTimestamp,c.nextToken=h.nextToken,I&&I.hasOwnProperty("contentLength")&&(c.agent.snapshot.contentLength=I.contentLength),e.getLog().trace("GET_AGENT_SNAPSHOT succeeded.").withObject(h).sendInternalLogToServer(),c.updateAgent()}catch(f){e.getLog().error("Long poll failed to update agent.").withObject(h).withException(f).sendInternalLogToServer()}finally{i.setTimeout(e.hitch(c,c.pollForAgent),C)}},failure:function(h,I){try{e.getLog().error("Failed to get agent data.").sendInternalLogToServer().withObject({err:h,data:I})}finally{i.setTimeout(e.hitch(c,c.pollForAgent),b)}},authFailure:function(){S()},accessDenied:e.hitch(c,c.handleAccessDenied)})},d.prototype.pollForAgentConfiguration=function(c){var S=this,h=c||{},I=e.hitch(S,S.handlePollingAuthFail);this.client.call(e.ClientMethods.GET_AGENT_CONFIGURATION,{},{success:function(f){var T=f.configuration;S.pollForAgentPermissions(T),S.pollForAgentStates(T),S.pollForDialableCountryCodes(T),S.pollForRoutingProfileQueues(T),h.repeatForever&&i.setTimeout(e.hitch(S,S.pollForAgentConfiguration,h),l)},failure:function(f,T){try{e.getLog().error("Failed to fetch agent configuration data.").sendInternalLogToServer().withObject({err:f,data:T})}finally{h.repeatForever&&i.setTimeout(e.hitch(S,S.pollForAgentConfiguration),l,h)}},authFailure:function(){I()},accessDenied:e.hitch(S,S.handleAccessDenied)})},d.prototype.pollForAgentStates=function(c,S){var h=this,I=S||{};I.maxResults=I.maxResults||e.DEFAULT_BATCH_SIZE,this.client.call(e.ClientMethods.GET_AGENT_STATES,{nextToken:I.nextToken||null,maxResults:I.maxResults},{success:function(f){f.nextToken?h.pollForAgentStates(c,{states:(I.states||[]).concat(f.states),nextToken:f.nextToken,maxResults:I.maxResults}):(c.agentStates=(I.states||[]).concat(f.states),h.updateAgentConfiguration(c))},failure:function(f,T){e.getLog().error("Failed to fetch agent states list.").sendInternalLogToServer().withObject({err:f,data:T})},authFailure:e.hitch(h,h.handlePollingAuthFail),accessDenied:e.hitch(h,h.handleAccessDenied)})},d.prototype.pollForAgentPermissions=function(c,S){var h=this,I=S||{};I.maxResults=I.maxResults||e.DEFAULT_BATCH_SIZE,this.client.call(e.ClientMethods.GET_AGENT_PERMISSIONS,{nextToken:I.nextToken||null,maxResults:I.maxResults},{success:function(f){f.nextToken?h.pollForAgentPermissions(c,{permissions:(I.permissions||[]).concat(f.permissions),nextToken:f.nextToken,maxResults:I.maxResults}):(c.permissions=(I.permissions||[]).concat(f.permissions),h.updateAgentConfiguration(c))},failure:function(f,T){e.getLog().error("Failed to fetch agent permissions list.").sendInternalLogToServer().withObject({err:f,data:T})},authFailure:e.hitch(h,h.handlePollingAuthFail),accessDenied:e.hitch(h,h.handleAccessDenied)})},d.prototype.pollForDialableCountryCodes=function(c,S){var h=this,I=S||{};I.maxResults=I.maxResults||e.DEFAULT_BATCH_SIZE,this.client.call(e.ClientMethods.GET_DIALABLE_COUNTRY_CODES,{nextToken:I.nextToken||null,maxResults:I.maxResults},{success:function(f){f.nextToken?h.pollForDialableCountryCodes(c,{countryCodes:(I.countryCodes||[]).concat(f.countryCodes),nextToken:f.nextToken,maxResults:I.maxResults}):(c.dialableCountries=(I.countryCodes||[]).concat(f.countryCodes),h.updateAgentConfiguration(c))},failure:function(f,T){e.getLog().error("Failed to fetch dialable country codes list.").sendInternalLogToServer().withObject({err:f,data:T})},authFailure:e.hitch(h,h.handlePollingAuthFail),accessDenied:e.hitch(h,h.handleAccessDenied)})},d.prototype.pollForRoutingProfileQueues=function(c,S){var h=this,I=S||{};I.maxResults=I.maxResults||e.DEFAULT_BATCH_SIZE,this.client.call(e.ClientMethods.GET_ROUTING_PROFILE_QUEUES,{routingProfileARN:c.routingProfile.routingProfileARN,nextToken:I.nextToken||null,maxResults:I.maxResults},{success:function(f){f.nextToken?h.pollForRoutingProfileQueues(c,{countryCodes:(I.queues||[]).concat(f.queues),nextToken:f.nextToken,maxResults:I.maxResults}):(c.routingProfile.queues=(I.queues||[]).concat(f.queues),h.updateAgentConfiguration(c))},failure:function(f,T){e.getLog().error("Failed to fetch routing profile queues list.").sendInternalLogToServer().withObject({err:f,data:T})},authFailure:e.hitch(h,h.handlePollingAuthFail),accessDenied:e.hitch(h,h.handleAccessDenied)})},d.prototype.handleAPIRequest=function(c,S){var h=this;this.client.call(S.method,S.params,{success:function(I){var f=e.EventFactory.createResponse(e.EventType.API_RESPONSE,S,I);c.sendDownstream(f.event,f)},failure:function(I,f){var T=e.EventFactory.createResponse(e.EventType.API_RESPONSE,S,f,JSON.stringify(I));c.sendDownstream(T.event,T),e.getLog().error("'%s' API request failed",S.method).withObject({request:h.filterAuthToken(S),response:T}).withException(I).sendInternalLogToServer()},authFailure:e.hitch(h,h.handleAuthFail,{authorize:!0})})},d.prototype.handleMasterRequest=function(c,S,h){var I=this.conduit,f=null;switch(h.method){case e.MasterMethods.BECOME_MASTER:var w=this.masterCoord.getMaster(h.params.topic),T=!!w&&w!==S;this.masterCoord.setMaster(h.params.topic,S),f=e.EventFactory.createResponse(e.EventType.MASTER_RESPONSE,h,{masterId:S,takeOver:T,topic:h.params.topic}),T&&I.sendDownstream(f.event,f);break;case e.MasterMethods.CHECK_MASTER:var w=this.masterCoord.getMaster(h.params.topic);!w&&!h.params.shouldNotBecomeMasterIfNone&&(this.masterCoord.setMaster(h.params.topic,S),w=S),f=e.EventFactory.createResponse(e.EventType.MASTER_RESPONSE,h,{masterId:w,isMaster:S===w,topic:h.params.topic});break;default:throw new Error("Unknown master method: "+h.method)}c.sendDownstream(f.event,f)},d.prototype.handleTabIdEvent=function(c,S){var h=this;try{let I=S.tabId,f=h.streamMapByTabId[I],T=c.getId(),x=Object.keys(h.streamMapByTabId).filter(P=>h.streamMapByTabId[P].length>0).length;if(f&&f.length>0){if(!f.includes(T)){h.streamMapByTabId[I].push(T);let P={length:Object.keys(h.portConduitMap).length,tabId:I,streamsTabsAcrossBrowser:x};P[I]={length:f.length},h.conduit.sendDownstream(e.EventType.UPDATE_CONNECTED_CCPS,P)}}else{h.streamMapByTabId[I]=[c.getId()];let P={length:Object.keys(h.portConduitMap).length,tabId:I,streamsTabsAcrossBrowser:x+1};P[I]={length:h.streamMapByTabId[I].length},h.conduit.sendDownstream(e.EventType.UPDATE_CONNECTED_CCPS,P)}}catch(I){e.getLog().error("[Tab Ids] Issue updating connected CCPs within the same tab").withException(I).sendInternalLogToServer()}},d.prototype.handleCloseEvent=function(c){var S=this;S.multiplexer.removeStream(c),delete S.portConduitMap[c.getId()],S.masterCoord.removeMaster(c.getId());let h={length:Object.keys(S.portConduitMap).length},I=Object.keys(S.streamMapByTabId);try{let f=I.find(w=>S.streamMapByTabId[w].includes(c.getId()));if(f){let w=S.streamMapByTabId[f].findIndex(P=>c.getId()===P);S.streamMapByTabId[f].splice(w,1);let x=S.streamMapByTabId[f]?S.streamMapByTabId[f].length:0;h[f]={length:x},h.tabId=f}let T=I.filter(w=>S.streamMapByTabId[w].length>0).length;h.streamsTabsAcrossBrowser=T}catch(f){e.getLog().error("[Tab Ids] Issue updating tabId-specific stream data").withException(f).sendInternalLogToServer()}S.conduit.sendDownstream(e.EventType.UPDATE_CONNECTED_CCPS,h)},d.prototype.updateAgentConfiguration=function(c){c.permissions&&c.dialableCountries&&c.agentStates&&c.routingProfile.queues?(this.agent=this.agent||{},this.agent.configuration=c,this.updateAgent()):e.getLog().trace("Waiting to update agent configuration until all config data has been fetched.").sendInternalLogToServer()},d.prototype.updateAgent=function(){this.agent?this.agent.snapshot?this.agent.configuration?(this.agent.snapshot.status=this.agent.state,this.agent.snapshot.contacts&&this.agent.snapshot.contacts.length>1&&this.agent.snapshot.contacts.sort(function(c,S){return c.state.timestamp.getTime()-S.state.timestamp.getTime()}),this.agent.snapshot.contacts.forEach(function(c){c.status=c.state,c.connections.forEach(function(S){S.address=S.endpoint})}),this.agent.configuration.routingProfile.defaultOutboundQueue.queueId=this.agent.configuration.routingProfile.defaultOutboundQueue.queueARN,this.agent.configuration.routingProfile.queues.forEach(function(c){c.queueId=c.queueARN}),this.agent.snapshot.contacts.forEach(function(c){c.queue!==void 0&&(c.queue.queueId=c.queue.queueARN)}),this.agent.configuration.routingProfile.routingProfileId=this.agent.configuration.routingProfile.routingProfileARN,this.suppress&&(this.agent.snapshot.contacts=this.agent.snapshot.contacts.filter(function(c){return c.state.type==e.ContactStateType.CONNECTED||c.state.type==e.ContactStateType.ENDED}),this.forceOffline&&this.conduit.sendDownstream(e.DisasterRecoveryEvents.FORCE_OFFLINE)),this.conduit.sendDownstream(e.AgentEvents.UPDATE,this.agent)):e.getLog().trace("Waiting to update agent until the agent configuration is available.").sendInternalLogToServer():e.getLog().trace("Waiting to update agent until the agent snapshot is available.").sendInternalLogToServer():e.getLog().trace("Waiting to update agent until the agent has been fully constructed.").sendInternalLogToServer()},d.prototype.getWebSocketUrl=function(){var c=this,S=e.core.getClient(),h=e.hitch(c,c.handleAuthFail),I=e.hitch(c,c.handleAccessDenied);return new Promise(function(f,T){S.call(e.ClientMethods.CREATE_TRANSPORT,{transportType:e.TRANSPORT_TYPES.WEB_SOCKET},{success:function(w){e.getLog().info("getWebSocketUrl succeeded").sendInternalLogToServer(),f(w)},failure:function(w,x){e.getLog().error("getWebSocketUrl failed").sendInternalLogToServer().withObject({err:w,data:x}),T({reason:"getWebSocketUrl failed",_debug:w})},authFailure:function(){e.getLog().error("getWebSocketUrl Auth Failure").sendInternalLogToServer(),T(Error("Authentication failed while getting getWebSocketUrl")),h()},accessDenied:function(){e.getLog().error("getWebSocketUrl Access Denied Failure").sendInternalLogToServer(),T(Error("Access Denied Failure while getting getWebSocketUrl")),I()}})})},d.prototype.handleSendLogsRequest=function(){var c=this,S=[],h=c.logsBuffer.slice();c.logsBuffer=[],h.forEach(function(I){S.push({timestamp:I.time,component:I.component,message:I.text})}),this.client.call(e.ClientMethods.SEND_CLIENT_LOGS,{logEvents:S},{success:function(I){e.getLog().info("SendLogs request succeeded.").sendInternalLogToServer()},failure:function(I,f){e.getLog().error("SendLogs request failed.").withObject(f).withException(I).sendInternalLogToServer()},authFailure:e.hitch(c,c.handleAuthFail)})},d.prototype.handleAuthFail=function(c){var S=this;c?S.conduit.sendDownstream(e.EventType.AUTH_FAIL,c):S.conduit.sendDownstream(e.EventType.AUTH_FAIL)},d.prototype.handlePollingAuthFail=function(){var c=this;c.conduit.sendDownstream(e.EventType.CTI_AUTHORIZE_RETRIES_EXHAUSTED)},d.prototype.handleAccessDenied=function(){var c=this;c.conduit.sendDownstream(e.EventType.ACCESS_DENIED)},d.prototype.checkAuthToken=function(){var c=this,S=new Date(c.initData.authTokenExpiration),h=new Date().getTime(),I=30*60*1e3;S.getTime()<h+I&&(e.getLog().info("Auth token expires at "+S+" Start refreshing token with retry.").sendInternalLogToServer(),e.backoff(e.hitch(c,c.authorize),v,E))},d.prototype.authorize=function(c){var S=this;e.core.authorize(this.initData.authorizeEndpoint).then(function(h){var I=new Date(h.expiration);e.getLog().info("Authorization succeeded and the token expires at %s",I).sendInternalLogToServer(),S.initData.authToken=h.accessToken,S.initData.authTokenExpiration=I,e.core.initClient(S.initData),e.core.initAgentAppClient(S.initData),c.success()}).catch(function(h){e.getLog().error("Authorization failed with code %s",h.status).sendInternalLogToServer(),h.status===401?S.handleAuthFail():c.failure()})},d.prototype.filterAuthToken=function(c){var S={};for(var h in c)if(h==="params"){var I={};for(var f in c.params)f!=="authentication"&&(I[f]=c.params[f]);S.params=I}else S[h]=c[h];return S},e.worker.main=function(){e.worker.clientEngine=new d}})()}},n={};function o(i){var e=n[i];if(e!==void 0)return e.exports;var m=n[i]={exports:{}};return t[i].call(m.exports,m,m.exports,o),m.exports}o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o(827),o(163),o(944),o(151),o(891),o(592),o(82),o(754),o(833),o(161),o(965),o(286),o(895),o(743),o(642),o(736),o(439),o(279),o(418),o(187),o(821);var r=o(500)})();var KS=["ccpDiv"],ih=(()=>{let n=class n{constructor(){this.title="app"}ngAfterViewInit(){connect.core.initCCP(this.ccpDiv.nativeElement,{ccpUrl:"https://ej-icc-amazonconnect-dev.my.connect.aws/ccp-v2",loginPopup:!1,loginPopupAutoClose:!0,softphone:{allowFramedSoftphone:!0}})}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=Li({type:n,selectors:[["app-root"]],viewQuery:function(i,e){if(i&1&&Pf(KS,5),i&2){let m;hc(m=gc())&&(e.ccpDiv=m.first)}},decls:2,vars:0,consts:[["ccpDiv",""]],template:function(i,e){i&1&&lo(0,"div",null,0)}});let t=n;return t})();var sh=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=zt({type:n,bootstrap:[ih]}),n.\u0275inj=Gt({imports:[pp,oh]});let t=n;return t})();fp().bootstrapModule(sh).catch(t=>console.error(t));
